!function(){function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t){var e="function"==typeof Map?new Map:void 0;return(n=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return r(t,arguments,m(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),h(i,t)})(t)}function r(t,e,n){return(r=v()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=c(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}}).apply(this,arguments)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=v();return function(){var n,r=m(t);if(e){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+ZYu":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TrackService=e.Track=void 0;var c=u(n("sX7g")),l=n("5IPO"),h=(n("XVN5"),n("mr0/"),n("8R26")),f=n("JLh1"),d=u(n("ubkq")),p=n("Oyyh"),v=u(n("+ZnK")),m=n("qCKp"),g=n("y2tO"),b=(n("wlYr"),a(n("fXoL"))),w=a(n("XVN5")),x=a(n("mr0/")),k=a(n("wlYr")),C=parseFloat,S=parseInt;function E(t){return{type:"FeatureCollection",features:(e=[],t.forEach(function(t,n){e.push({properties:{color:t.color,point:t,id:t.id},type:"Feature",geometry:{type:"Point",coordinates:t}})}),e)};var e}var P=function(){var t=function(){function t(e,n,r){y(this,t),this.points=e,this.map=n,this.id=r,this._popupHash={},this.delPointSubject=new m.Subject,this.init()}return _(t,[{key:"init",value:function(){var t=this.map,e=this.id,n=this.points,r=new p.Color(n).getColors(),i=r.resColors;this.featureCollectionData=E(r.points),t.addSource(e,{type:"geojson",data:E([])}),t.addLayer({id:e,type:"circle",paint:{"circle-color":{property:"color",stops:i,type:"categorical"},"circle-radius":8},layout:{},source:e}),t.on("mousemove",this.mouseMove),t.on("click",this.mouseMove)}},{key:"show",value:function(){this.map.getSource(this.id).setData(this.featureCollectionData)}},{key:"hide",value:function(){this.map.getSource(this.id).setData(E([]))}},{key:"remove",value:function(){this.map.off("mousemove",this.mouseMove),this.map.off("click",this.mouseMove),this.map.removeLayer(this.id),this.map.removeSource(this.id)}},{key:"mouseMove",value:function(t){var e=this.map.queryRenderedFeatures(t.point,{layers:[this.id]});if(e.length){var n=e[0].properties.id,r=this.points.find(function(t){return t.id==n});console.log(r),this._popupHash[n]?this._popupHash[n].update():this._popupHash[n]=this.createPopupEdit(r,n)}}},{key:"createPopupEdit",value:function(t,e){var n=this,r=this,i=this.map,o=document.createElement("div");o.setAttribute("class","info-point");var a=document.createElement("button"),s='<div class="time">'.concat(d.default(t.date,"HH:MM:ss"),"</div><div>").concat(t.speed.toFixed(1)+"km/h","</div>");o.innerHTML=s,a.innerHTML="\u0423\u0434\u0430\u043b\u0438\u0442\u044c",o.appendChild(a);var u,c=new v.default.Popup({closeOnClick:!1,offset:[0,-15],closeButton:!1}).setLngLat(new v.default.LngLat(t.lng,t.lat)).setDOMContent(o).addTo(i),l={update:function(){return u&&clearTimeout(u),u=setTimeout(function(){l.remove(),delete r._popupHash[e]},5e3),this},remove:function(){return c.remove(),this}};return l.update(),a.addEventListener("click",function(){l.remove(),n.remove();var t=n.points.findIndex(function(t){return t.id===e});n.points.splice(t,1),n.init(),n.show(),n.delPointSubject.next(e)}),l}}]),t}();return o([g.autobind(),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],t.prototype,"mouseMove",null),t}(),O=function(){function t(e,n,r){y(this,t),this.points=e,this.map=n,this.id=r,this.pontsVisible=!1,this.distance="",this.maxSpeed="",this.color=this.getRandomColor(),this.data={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[]}},this.map.addSource(this.id,{type:"geojson",data:this.data}),this.map.addLayer({id:this.id,type:"line",source:this.id,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":this.color,"line-width":8,"line-opacity":.8}})}return _(t,[{key:"show",value:function(){this.data.geometry.coordinates=this.points,this.calcDistance(),this.calcMaxSpeed(),this.date=this.points[0].date,this.map.getSource(this.id).setData(this.data)}},{key:"setTrackSrcPoints",value:function(t){return this._trackSrcPoints=t,this}},{key:"hide",value:function(){this.data.geometry.coordinates=[],this.map.getSource(this.id).setData(this.data),this._trackSrcPoints.hide()}},{key:"showSrcPoint",value:function(){this.pontsVisible?this._trackSrcPoints.hide():this._trackSrcPoints.show(),this.pontsVisible=!this.pontsVisible}},{key:"removePoint",value:function(t){var e=this.points.findIndex(function(e){return e.id===t});this.points.splice(e,1),this.show()}},{key:"remove",value:function(){this._trackSrcPoints.remove(),this.map.removeLayer(this.id),this.map.removeSource(this.id)}},{key:"setXmlDoc",value:function(t){return this.xmlDoc=t,this}},{key:"calcMaxSpeed",value:function(){this.maxSpeed=Math.max.apply(null,this.points.map(function(t){return t.speed})).toFixed(2)}},{key:"calcDistance",value:function(){var t=this;this.distance=this.points.reduce(function(e,n,r){return e+f.distance(t.points[r?r-1:r],n)},0).toFixed(2)}},{key:"getRandomColor",value:function(){var t=this,e=parseInt,n=["0","0","0"],r=e(this.getRandom(0,2,!0));return n.forEach(function(i,o){i=o!=r?e(t.getRandom(0,255,!0)).toString(16):255..toString(16),n[o]=i.length<2?"0"+i:i}),"#"+n.join("")}},{key:"getRandom",value:function(t,e,n){var r=t+Math.random()*(e-t);return n&&(r=Math.round(r)+""),r}}]),t}();e.Track=O;var T=function(){function t(e,n,r){var i=this;y(this,t),this.io=e,this.mapService=n,this.ts=r,this._trackList=[],this.arrayDelPoints=[],this.layerIds=[],this._trackList=[],this.util=new l.Util,(this.socket=e.socket).on("file",function(t){var e="";new Uint8Array(t).forEach(function(t){e+=String.fromCharCode(t)}),i.showGpxTrack(e,"load")})}return _(t,[{key:"resolve",value:function(){}},{key:"showGpxTrack",value:function(t,e){var n=this,r=[],i=(new DOMParser).parseFromString(t,"text/xml"),o=i.getElementsByTagName("parsererror");if(o&&o.length)return Array.prototype.forEach.call(o,function(t){console.error("Error in showGpxTrack parser -> ",t.textContent),n.ts.show({type:"error",text:t.textContent})}),null;var a=[];Array.prototype.forEach.call(i.getElementsByTagName("trkpt"),function(t,e){a.push(t)}),a.forEach(function(t,e){if(t.getAttribute("lon")){t.setAttribute("id",e);var n=t.getElementsByTagName("ele")?t.getElementsByTagName("ele")[0]:null,i=new h.Point(C(t.getAttribute("lon")),C(t.getAttribute("lat")),n?C(n.innerHTML):null);if(i.date=t.getElementsByTagName("time")[0].innerHTML,i.id=e,!t.getElementsByTagName("speed")[0]&&0<e){var o=document.createElement("speed"),s=new h.Point(C(a[e-1].getAttribute("lon")),C(a[e-1].getAttribute("lat")),n?C(n.innerHTML):null),u=new h.Point(C(t.getAttribute("lon")),C(t.getAttribute("lat")),n?C(n.innerHTML):null),c=1e3*f.distance(s,u),l=new Date(a[e-1].getElementsByTagName("time")[0].innerHTML).getTime()/1e3,d=new Date(t.getElementsByTagName("time")[0].innerHTML).getTime()/1e3;o.innerHTML=c/(d-l)+"",t.appendChild(o)}i.speed=t.getElementsByTagName("speed")[0]?3.6*C(t.getElementsByTagName("speed")[0].innerHTML):0,r.push(i)}}),this.showTrack(r,i)}},{key:"setMap",value:function(t){this.map=t}},{key:"removeTrack",value:function(t){var e=this.trackList.findIndex(function(e){return e===t});t.remove(),this.trackList.splice(e,1)}},{key:"showTrack",value:function(t,e){var n=this,r=this.getLayerId("line-")+"",i=this.mapService.map,o=new O(t,i,r),a=new P(t,i,this.getLayerId("cluster-")+"");o.setTrackSrcPoints(a),o.show(),a.delPointSubject.subscribe({next:function(t){o.removePoint(t),n.arrayDelPoints.push(t)}}),this.trackList.push(o)}},{key:"delPoints",value:function(t,e){console.log(t,e)}},{key:"marker",value:function(t){var e=this.mapService.map,n=document.createElement("div");n.classList.add("track-icon");var r=document.createElement("div");n.appendChild(r);var i=new v.default.Marker(n,{offset:[-10,-10]}).setLngLat([t.lng,t.lat]).addTo(e),o={lng:t.lng,lat:t.lat,bearing:t.bearing,_mapBearing:e.getBearing(),rotate:function(){r.style.transform="rotate("+S(this.bearing-this._mapBearing+"")+"deg)"},update:function(t){this.lng=t.lng,this.lat=t.lat,this.bearing=t.bearing,t.bearing&&this.rotate(),i.setLngLat([t.lng,t.lat])},remove:function(){i.remove(),e.off("move",a)}},a=function(){var t=e.getBearing();o._mapBearing!=t&&(o._mapBearing=t,o.rotate())};return e.on("move",a),o}},{key:"getLayerId",value:function(t){var e=(t=t||"")+Math.round(0+1e4*Math.random()).toLocaleString();return-1<this.layerIds.indexOf(e)?this.getLayerId(t):(this.layerIds.push(e),e)}},{key:"saveChange",value:function(){var t=this;console.log(this.arrayDelPoints),this.arrayDelPoints.length?this.socket.$emit("delPoints",this.arrayDelPoints).then(function(e){t.arrayDelPoints.length=0,e&&"ok"==e.result&&t.ts.show({type:"success",text:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),console.log(e)}):this.ts.show({type:"warning",text:"\u041b\u043e\u0433 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u0431\u0430\u0437\u0435 \u0438\u043b\u0438 \u043d\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439"})}},{key:"downloadTrack",value:function(t){return this.socket.$emit("downloadTrack",this.formatBeforeSend(t.points)).then(function(t){return console.log(t),t})}},{key:"formatBeforeSend",value:function(t){return c.default.map(function(t){return{lng:t.lng,lat:t.lat,date:t.date,speed:t.speed}},t)}},{key:"map",get:function(){return this._map},set:function(t){this._map=t}},{key:"trackList",get:function(){return this._trackList},set:function(t){this._trackList=t}}]),t}();e.TrackService=T,T.\u0275fac=function(t){return new(t||T)(b.\u0275\u0275inject(w.Io),b.\u0275\u0275inject(x.MapService),b.\u0275\u0275inject(k.ToastService))},T.\u0275prov=b.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac})},"+ZnK":function(t,e,n){t.exports=function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),(n=i(a)).workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else e=i;else t=i}return r(0,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=r;function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=o;function o(t,e){this.x=t,this.y=e}function a(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!a(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!a(t[r],e[r]))return!1;return!0}return t===e}function s(t,e,r,i){var o=new n(t,e,r,i);return function(t){return o.solve(t)}}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var u=s(.25,.1,.25,1);function c(t,e,n){return Math.min(n,Math.max(e,t))}function l(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function h(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}var f=1;function d(){return f++}function p(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function v(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function m(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function g(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function _(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function b(t){return Array.isArray(t)?t.map(b):"object"==typeof t&&t?g(t,b):t}var w={};function x(t){w[t]||("undefined"!=typeof console&&console.warn(t),w[t]=!0)}function k(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function C(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)e+=((a=t[i]).x-(o=t[n]).x)*(o.y+a.y);return e}function S(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var E,P,O=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),T=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,A=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,I={now:O,frame:function(t){var e=T(t);return{cancel:function(){return A(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},D={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},M={supported:!1,testSupport:function(t){!L&&P&&(j?R(t):E=t)}},L=!1,j=!1;function R(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,P),t.isContextLost())return;M.supported=!0}catch(t){}t.deleteTexture(e),L=!0}self.document&&((P=self.document.createElement("img")).onload=function(){E&&R(E),E=null,j=!0},P.onerror=function(){L=!0,E=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var F="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";function N(t,e){var n=G(D.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!D.REQUIRE_ACCESS_TOKEN)return W(t);if(!(e=e||D.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+F);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+F);return t.params.push("access_token="+e),W(t)}function B(t){return 0===t.indexOf("mapbox:")}var z=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function V(t){return z.test(t)}var U=/(\.(png|jpg)\d*)(?=$)/,q=/\.[\w]+$/,H=function(t){var e=G(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(q))return t;var n="mapbox://tiles/";n+=e.path.replace("/v4/","");var r=e.params.filter(function(t){return!t.match(/^access_token=/)});return r.length&&(n+="?"+r.join("&")),n},Z=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function G(t){var e=t.match(Z);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function W(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function X(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(e[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(t){return null}}var K=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};K.prototype.getStorageKey=function(t){var e,n=X(D.ACCESS_TOKEN);return e=n&&n.u?self.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))})):D.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},K.prototype.fetchEventData=function(){var t=S("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var r=self.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var i=self.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){x("Unable to read from LocalStorage")}},K.prototype.saveEventData=function(){var t=S("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){x("Unable to write to LocalStorage")}},K.prototype.processRequests=function(){},K.prototype.postEvent=function(t,e,n){var r=this;if(D.EVENTS_URL){var i=G(D.EVENTS_URL);i.params.push("access_token="+(D.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.53.1",userId:this.anonId},a=e?h(o,e):o,s={url:W(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=ct(s,function(t){r.pendingRequest=null,n(t),r.saveEventData(),r.processRequests()})}},K.prototype.queueRequest=function(t){this.queue.push(t),this.processRequests()};var Y=function(t){function e(){t.call(this,"map.load"),this.success={}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e){D.EVENTS_URL&&D.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return B(t)||V(t)})&&this.queueRequest({id:e,timestamp:Date.now()})},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var e=this.queue.shift(),n=e.id,r=e.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=p()),this.postEvent(r,{},function(e){e||n&&(t.success[n]=!0)}))}},e}(K),J=new(function(t){function e(){t.call(this,"appUserTurnstile")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t){D.EVENTS_URL&&D.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return B(t)||V(t)})&&this.queueRequest(Date.now())},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var e=X(D.ACCESS_TOKEN),n=e?e.u:D.ACCESS_TOKEN,r=n!==this.eventData.tokenU;v(this.anonId)||(this.anonId=p(),r=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),a=new Date(i),s=(i-this.eventData.lastSuccess)/864e5;r=r||s>=1||s<-1||o.getDate()!==a.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},function(e){e||(t.eventData.lastSuccess=i,t.eventData.tokenU=n)})}},e}(K)),$=J.postTurnstileEvent.bind(J),Q=new Y,tt=Q.postMapLoadEvent.bind(Q),et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(et);var nt=function(t){function e(e,n,r){401===n&&V(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function rt(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var it,ot,at=rt()?function(){return self.worker&&self.worker.referrer}:function(){var t=self.location.origin;if(t&&"null"!==t&&"file://"!==t)return t+self.location.pathname},st=function(t,e){if(!/^file:/.test(t.url)){if(self.fetch&&self.Request&&self.AbortController)return function(t,e){var n=new self.AbortController,r=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:at(),signal:n.signal});return"json"===t.type&&r.headers.set("Accept","application/json"),self.fetch(r).then(function(n){n.ok?n[t.type||"text"]().then(function(t){e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires"))}).catch(function(t){return e(new Error(t.message))}):e(new nt(n.statusText,n.status,t.url))}).catch(function(t){20!==t.code&&e(new Error(t.message))}),{cancel:function(){return n.abort()}}}(t,e);if(rt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e)}return function(t,e){var n=new self.XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&n.setRequestHeader("Accept","application/json"),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new nt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},ut=function(t,e){return st(h(t,{type:"arrayBuffer"}),e)},ct=function(t,e){return st(h(t,{method:"POST"}),e)};it=[],ot=0;function lt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function ht(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}var ft=function(t,e){void 0===e&&(e={}),h(this,e),this.type=t},dt=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",h({error:e},n))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(ft),pt=function(){};pt.prototype.on=function(t,e){return this._listeners=this._listeners||{},lt(t,e,this._listeners),this},pt.prototype.off=function(t,e){return ht(t,e,this._listeners),ht(t,e,this._oneTimeListeners),this},pt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},lt(t,e,this._oneTimeListeners),this},pt.prototype.fire=function(t,e){"string"==typeof t&&(t=new ft(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var s=a[o];ht(n,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(h(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof dt&&console.error(t.error);return this},pt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},pt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var vt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},mt=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function yt(t){var e=t.value;return e?[new mt(t.key,e,"constants have been deprecated as of v8")]:[]}function gt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function _t(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function bt(t){return Array.isArray(t)?t.map(bt):_t(t)}var wt=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),xt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.bindings[i[0]]=i[1]}};xt.prototype.concat=function(t){return new xt(this,t)},xt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},xt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var kt={kind:"null"},Ct={kind:"number"},St={kind:"string"},Et={kind:"boolean"},Pt={kind:"color"},Ot={kind:"object"},Tt={kind:"value"},At={kind:"collator"},It={kind:"formatted"};function Dt(t,e){return{kind:"array",itemType:t,N:e}}function Mt(t){if("array"===t.kind){var e=Mt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Lt=[kt,Ct,St,Et,Pt,It,Ot,Dt(Tt)];function jt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!jt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=Lt;n<r.length;n+=1)if(!jt(r[n],e))return null}return"Expected "+Mt(t)+" but found "+Mt(e)+" instead."}var Rt=e(function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return function(t){return t<0?0:t>1?1:t}("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),c=s.indexOf(")");if(-1!==u&&c+1===s.length){var l=s.substr(0,u),h=s.substr(u+1,c-(u+1)).split(","),f=1;switch(l){case"rgba":if(4!==h.length)return null;f=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),f];case"hsla":if(4!==h.length)return null;f=o(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,p=o(h[1]),v=o(h[2]),m=v<=.5?v*(p+1):v+p-v*p,y=2*v-m;return[r(255*a(y,m,d+1/3)),r(255*a(y,m,d)),r(255*a(y,m,d-1/3)),f];default:return null}}return null}}catch(t){}}).parseCSSColor,Ft=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};Ft.parse=function(t){if(t){if(t instanceof Ft)return t;if("string"==typeof t){var e=Rt(t);if(e)return new Ft(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Ft.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+r+")"},Ft.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},Ft.black=new Ft(0,0,0,1),Ft.white=new Ft(1,1,1,1),Ft.transparent=new Ft(0,0,0,0),Ft.red=new Ft(1,0,0,1);var Nt=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Nt.prototype.compare=function(t,e){return this.collator.compare(t,e)},Nt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Bt=function(t,e,n){this.text=t,this.scale=e,this.fontStack=n},zt=function(t){this.sections=t};function Vt(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ut(t){if(null===t)return kt;if("string"==typeof t)return St;if("boolean"==typeof t)return Et;if("number"==typeof t)return Ct;if(t instanceof Ft)return Pt;if(t instanceof Nt)return At;if(t instanceof zt)return It;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=Ut(i[r]);if(e){if(e===o)continue;e=Tt;break}e=o}return Dt(e||Tt,n)}return Ot}function qt(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Ft||t instanceof zt?t.toString():JSON.stringify(t)}zt.fromString=function(t){return new zt([new Bt(t,null,null)])},zt.prototype.toString=function(){return this.sections.map(function(t){return t.text}).join("")},zt.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),t.push(i)}return t};var Ht=function(t,e){this.type=t,this.value=e};Ht.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Ft)return!0;if(e instanceof Nt)return!0;if(e instanceof zt)return!0;if(Array.isArray(e)){for(var n=0,r=e;n<r.length;n+=1)if(!t(r[n]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var n=t[1],r=Ut(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Ht(r,n)},Ht.prototype.evaluate=function(){return this.value},Ht.prototype.eachChild=function(){},Ht.prototype.possibleOutputs=function(){return[this.value]},Ht.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ft?["rgba"].concat(this.value.toArray()):this.value instanceof zt?this.value.serialize():this.value};var Zt=function(t){this.name="ExpressionEvaluationError",this.message=t};Zt.prototype.toJSON=function(){return this.message};var Gt={string:St,number:Ct,boolean:Et,object:Ot},Wt=function(t,e){this.type=t,this.args=e};Wt.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,r=1,i=t[0];if("array"===i){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in Gt)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=Gt[s],r++}else o=Tt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}n=Dt(o,a)}else n=Gt[i];for(var u=[];r<t.length;r++){var c=e.parse(t[r],r,Tt);if(!c)return null;u.push(c)}return new Wt(n,u)},Wt.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!jt(this.type,Ut(n)))return n;if(e===this.args.length-1)throw new Zt("Expected value to be of type "+Mt(this.type)+", but found "+Mt(Ut(n))+" instead.")}return null},Wt.prototype.eachChild=function(t){this.args.forEach(t)},Wt.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Wt.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var Xt=function(t){this.type=It,this.sections=t};Xt.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var n=[],r=1;r<t.length-1;r+=2){var i=e.parse(t[r],1,Tt);if(!i)return null;var o=i.type.kind;if("string"!==o&&"value"!==o&&"null"!==o)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var a=t[r+1];if("object"!=typeof a||Array.isArray(a))return e.error("Format options argument must be an object.");var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Ct)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,Dt(St))))return null;n.push({text:i,scale:s,font:u})}return new Xt(n)},Xt.prototype.evaluate=function(t){return new zt(this.sections.map(function(e){return new Bt(qt(e.text.evaluate(t)),e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null)}))},Xt.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t(r.text),r.scale&&t(r.scale),r.font&&t(r.font)}},Xt.prototype.possibleOutputs=function(){return[void 0]},Xt.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.text.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),t.push(i)}return t};var Kt={"to-boolean":Et,"to-color":Pt,"to-number":Ct,"to-string":St},Yt=function(t,e){this.type=t,this.args=e};Yt.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var r=Kt[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Tt);if(!a)return null;i.push(a)}return new Yt(r,i)},Yt.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(e=i[r].evaluate(t))instanceof Ft)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":Vt(e[0],e[1],e[2],e[3])))return new Ft(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Zt(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var c=Number(a);if(!isNaN(c))return c}throw new Zt("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?zt.fromString(qt(this.args[0].evaluate(t))):qt(this.args[0].evaluate(t))},Yt.prototype.eachChild=function(t){this.args.forEach(t)},Yt.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Yt.prototype.serialize=function(){if("formatted"===this.type.kind)return new Xt([{text:this.args[0],scale:null,font:null}]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Jt=["Unknown","Point","LineString","Polygon"],$t=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};$t.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},$t.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Jt[this.feature.type]:this.feature.type:null},$t.prototype.properties=function(){return this.feature&&this.feature.properties||{}},$t.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Ft.parse(t)),e};var Qt=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};Qt.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Qt.prototype.eachChild=function(t){this.args.forEach(t)},Qt.prototype.possibleOutputs=function(){return[void 0]},Qt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Qt.parse=function(t,e){var n,r=t[0],i=Qt.definitions[r];if(!i)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),u=null,c=0,l=s;c<l.length;c+=1){var h=l[c],f=h[0],d=h[1];u=new oe(e.registry,e.path,null,e.scope);for(var p=[],v=!1,m=1;m<t.length;m++){var y=t[m],g=Array.isArray(f)?f[m-1]:f.type,_=u.parse(y,1+p.length,g);if(!_){v=!0;break}p.push(_)}if(!v)if(Array.isArray(f)&&f.length!==p.length)u.error("Expected "+f.length+" arguments, but found "+p.length+" instead.");else{for(var b=0;b<p.length;b++){var w=Array.isArray(f)?f[b]:f.type,x=p[b];u.concat(b+1).checkSubtype(w,x.type)}if(0===u.errors.length)return new Qt(r,o,d,p)}}if(1===s.length)(n=e.errors).push.apply(n,u.errors);else{for(var k=(s.length?s:a).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Mt).join(", ")+")":"("+Mt(e.type)+"...)"}).join(" | "),C=[],S=1;S<t.length;S++){var E=e.parse(t[S],1+C.length);if(!E)return null;C.push(Mt(E.type))}e.error("Expected arguments of type "+k+", but found ("+C.join(", ")+") instead.")}return null},Qt.register=function(t,e){for(var n in Qt.definitions=e,e)t[n]=Qt};var te=function(t,e,n){this.type=At,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};function ee(t){if(t instanceof Qt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!ee(t)&&(e=!1)}),e}function ne(t){if(t instanceof Qt&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!ne(t)&&(e=!1)}),e}function re(t,e){if(t instanceof Qt&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!re(t,e)&&(n=!1)}),n}te.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Et);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Et);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,St))?null:new te(r,i,o)},te.prototype.evaluate=function(t){return new Nt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},te.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},te.prototype.possibleOutputs=function(){return[void 0]},te.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var ie=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};ie.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new ie(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},ie.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},ie.prototype.eachChild=function(){},ie.prototype.possibleOutputs=function(){return[void 0]},ie.prototype.serialize=function(){return["var",this.name]};var oe=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new xt),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};function ae(t,e){for(var n,r=0,i=t.length-1,o=0;r<=i;){if(e===(n=t[o=Math.floor((r+i)/2)])||e>n&&e<t[o+1])return o;if(n<e)r=o+1;else{if(!(n>e))throw new Zt("Input is not a number.");i=o-1}}return Math.max(o-1,0)}oe.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},oe.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new Wt(e,[t]):"coerce"===n?new Yt(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof Ht)&&function t(e){if(e instanceof ie)return t(e.boundExpression);if(e instanceof Qt&&"error"===e.name)return!1;if(e instanceof te)return!1;var n=e instanceof Yt||e instanceof Wt,r=!0;return e.eachChild(function(e){r=n?r&&t(e):r&&e instanceof Ht}),!!r&&ee(e)&&re(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new $t;try{o=new Ht(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},oe.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new oe(this.registry,r,e||null,i,this.errors)},oe.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new wt(r,t))},oe.prototype.checkSubtype=function(t,e){var n=jt(t,e);return n&&this.error(n),n};var se=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};function ue(t,e,n){return t*(1-n)+e*n}se.parse=function(t,e){var n=t[1],r=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,Ct)))return null;var i=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType),r.unshift(-1/0);for(var a=0;a<r.length;a+=2){var s=r[a],u=r[a+1],c=a+1,l=a+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);var h=e.parse(u,l,o);if(!h)return null;o=o||h.type,i.push([s,h])}return new se(o,n,i)},se.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[ae(e,r)].evaluate(t)},se.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},se.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},se.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var ce=Object.freeze({number:ue,color:function(t,e,n){return new Ft(ue(t.r,e.r,n),ue(t.g,e.g,n),ue(t.b,e.b,n),ue(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,r){return ue(t,e[r],n)})}}),le=4/29,he=6/29,fe=3*he*he,de=Math.PI/180,pe=180/Math.PI;function ve(t){return t>.008856451679035631?Math.pow(t,1/3):t/fe+le}function me(t){return t>he?t*t*t:fe*(t-le)}function ye(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ge(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function _e(t){var e=ge(t.r),n=ge(t.g),r=ge(t.b),i=ve((.4124564*e+.3575761*n+.1804375*r)/.95047),o=ve((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-ve((.0193339*e+.119192*n+.9503041*r)/1.08883)),alpha:t.a}}function be(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*me(e),n=.95047*me(n),r=1.08883*me(r),new Ft(ye(3.2404542*n-1.5371385*e-.4985314*r),ye(-.969266*n+1.8760108*e+.041556*r),ye(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function we(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var xe={forward:_e,reverse:be,interpolate:function(t,e,n){return{l:ue(t.l,e.l,n),a:ue(t.a,e.a,n),b:ue(t.b,e.b,n),alpha:ue(t.alpha,e.alpha,n)}}},ke={forward:function(t){var e=_e(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*pe;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*de,n=t.c;return be({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:we(t.h,e.h,n),c:ue(t.c,e.c,n),l:ue(t.l,e.l,n),alpha:ue(t.alpha,e.alpha,n)}}},Ce=Object.freeze({lab:xe,hcl:ke}),Se=function(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function Ee(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}Se.interpolationFactor=function(t,e,r,i){var o=0;if("exponential"===t.name)o=Ee(e,t.base,r,i);else if("linear"===t.name)o=Ee(e,1,r,i);else if("cubic-bezier"===t.name){var a=t.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(Ee(e,1,r,i))}return o},Se.parse=function(t,e){var n=t[0],r=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,Ct)))return null;var u=[],c=null;"interpolate-hcl"===n||"interpolate-lab"===n?c=Pt:e.expectedType&&"value"!==e.expectedType.kind&&(c=e.expectedType);for(var l=0;l<o.length;l+=2){var h=o[l],f=o[l+1],d=l+3,p=l+4;if("number"!=typeof h)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(u.length&&u[u.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var v=e.parse(f,p,c);if(!v)return null;c=c||v.type,u.push([h,v])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new Se(c,n,r,i,u):e.error("Type "+Mt(c)+" is not interpolatable.")},Se.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=ae(e,r),a=Se.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),u=n[o+1].evaluate(t);return"interpolate"===this.operator?ce[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?ke.reverse(ke.interpolate(ke.forward(s),ke.forward(u),a)):xe.reverse(xe.interpolate(xe.forward(s),xe.forward(u),a))},Se.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Se.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},Se.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var Pe=function(t,e){this.type=t,this.args=e};Pe.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+i.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,i.push(s)}var u=r&&i.some(function(t){return jt(r,t.type)});return new Pe(u?Tt:n,i)},Pe.prototype.evaluate=function(t){for(var e=null,n=0,r=this.args;n<r.length&&null===(e=r[n].evaluate(t));n+=1);return e},Pe.prototype.eachChild=function(t){this.args.forEach(t)},Pe.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Pe.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Oe=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Oe.prototype.evaluate=function(t){return this.result.evaluate(t)},Oe.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},Oe.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new Oe(n,a):null},Oe.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Oe.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var Te=function(t,e,n){this.type=t,this.index=e,this.input=n};Te.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Ct),r=e.parse(t[2],2,Dt(e.expectedType||Tt));return n&&r?new Te(r.type.itemType,n,r):null},Te.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Zt("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new Zt("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new Zt("Array index must be an integer, but found "+e+" instead.");return n[e]},Te.prototype.eachChild=function(t){t(this.index),t(this.input)},Te.prototype.possibleOutputs=function(){return[void 0]},Te.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ae=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};Ae.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var c=e.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(var l=0,h=s;l<h.length;l+=1){var f=h[l];if("number"!=typeof f&&"string"!=typeof f)return c.error("Branch labels must be numbers or strings.");if("number"==typeof f&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof f&&Math.floor(f)!==f)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,Ut(f)))return null}else n=Ut(f);if(void 0!==i[String(f)])return c.error("Branch labels must be unique.");i[String(f)]=o.length}var d=e.parse(u,a,r);if(!d)return null;r=r||d.type,o.push(d)}var p=e.parse(t[1],1,Tt);if(!p)return null;var v=e.parse(t[t.length-1],t.length-1,r);return v?"value"!==p.type.kind&&e.concat(1).checkSubtype(n,p.type)?null:new Ae(n,r,p,i,o,v):null},Ae.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(Ut(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Ae.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Ae.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Ae.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(h=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[h][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,c=n;u<c.length;u+=1){var l=c[u],h=l[0],f=l[1];e.push(1===f.length?s(f[0]):f.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var Ie=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};function De(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Me(t,e,n,r){return 0===r.compare(e,n)}function Le(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){this.type=Et,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,Tt);if(!o)return null;if(!De(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Mt(o.type)+"'.");var a=e.parse(t[2],2,Tt);if(!a)return null;if(!De(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Mt(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Mt(o.type)+"' and '"+Mt(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Wt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Wt(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,At)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=Ut(o),u=Ut(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Zt('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var c=Ut(o),l=Ut(a);if("string"!==c.kind||"string"!==l.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},i}()}Ie.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,Et);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new Ie(n,r,s):null},Ie.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];if(r[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},Ie.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];t(r[0]),t(i)}t(this.otherwise)},Ie.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map(function(t){return t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},Ie.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var je=Le("==",function(t,e,n){return e===n},Me),Re=Le("!=",function(t,e,n){return e!==n},function(t,e,n,r){return!Me(0,e,n,r)}),Fe=Le("<",function(t,e,n){return e<n},function(t,e,n,r){return r.compare(e,n)<0}),Ne=Le(">",function(t,e,n){return e>n},function(t,e,n,r){return r.compare(e,n)>0}),Be=Le("<=",function(t,e,n){return e<=n},function(t,e,n,r){return r.compare(e,n)<=0}),ze=Le(">=",function(t,e,n){return e>=n},function(t,e,n,r){return r.compare(e,n)>=0}),Ve=function(t,e,n,r,i){this.type=St,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};Ve.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Ct);if(!n)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=e.parse(r.locale,1,St)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,St)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,Ct)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,Ct))?null:new Ve(n,i,o,a,s)},Ve.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Ve.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Ve.prototype.possibleOutputs=function(){return[void 0]},Ve.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Ue=function(t){this.type=Ct,this.input=t};Ue.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+Mt(n.type)+" instead."):new Ue(n):null},Ue.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Zt("Expected value to be of type string or array, but found "+Mt(Ut(e))+" instead.")},Ue.prototype.eachChild=function(t){t(this.input)},Ue.prototype.possibleOutputs=function(){return[void 0]},Ue.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var qe={"==":je,"!=":Re,">":Ne,"<":Fe,">=":ze,"<=":Be,array:Wt,at:Te,boolean:Wt,case:Ie,coalesce:Pe,collator:te,format:Xt,interpolate:Se,"interpolate-hcl":Se,"interpolate-lab":Se,length:Ue,let:Oe,literal:Ht,match:Ae,number:Wt,"number-format":Ve,object:Wt,step:se,string:Wt,"to-boolean":Yt,"to-color":Yt,"to-number":Yt,"to-string":Yt,var:ie};function He(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=Vt(n,r,i,a);if(s)throw new Zt(s);return new Ft(n/255*a,r/255*a,i/255*a,a)}function Ze(t,e){return t in e}function Ge(t,e){var n=e[t];return void 0===n?null:n}function We(t){return{type:t}}function Xe(t){return{result:"success",value:t}}function Ke(t){return{result:"error",value:t}}function Ye(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Je(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function $e(t){return!!t.expression&&t.expression.interpolated}function Qe(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function tn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function en(t){return t}function nn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function rn(t,e,n,r,i){return nn(typeof n===i?r[n]:void 0,t.default,e.default)}function on(t,e,n){if("number"!==Qe(n))return nn(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=un(t.stops,n);return t.stops[i][1]}function an(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==Qe(n))return nn(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=un(t.stops,n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],c=ce[e.type]||en;if(t.colorSpace&&"rgb"!==t.colorSpace){var l=Ce[t.colorSpace];c=function(t,e){return l.reverse(l.interpolate(l.forward(t),l.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return c(n,r,a)}}:c(s,u,a)}function sn(t,e,n){return"color"===e.type?n=Ft.parse(n):"formatted"===e.type?n=zt.fromString(n.toString()):Qe(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),nn(n,t.default,e.default)}function un(t,e){for(var n,r=0,i=t.length-1,o=0;r<=i;){if(e===(n=t[o=Math.floor((r+i)/2)][0])||e>n&&e<t[o+1][0])return o;n<e?r=o+1:n>e&&(i=o-1)}return Math.max(o-1,0)}Qt.register(qe,{error:[{kind:"error"},[St],function(t,e){throw new Zt(e[0].evaluate(t))}],typeof:[St,[Tt],function(t,e){return Mt(Ut(e[0].evaluate(t)))}],"to-rgba":[Dt(Ct,4),[Pt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Pt,[Ct,Ct,Ct],He],rgba:[Pt,[Ct,Ct,Ct,Ct],He],has:{type:Et,overloads:[[[St],function(t,e){return Ze(e[0].evaluate(t),t.properties())}],[[St,Ot],function(t,e){var n=e[1];return Ze(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:Tt,overloads:[[[St],function(t,e){return Ge(e[0].evaluate(t),t.properties())}],[[St,Ot],function(t,e){var n=e[1];return Ge(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[Tt,[St],function(t,e){return Ge(e[0].evaluate(t),t.featureState||{})}],properties:[Ot,[],function(t){return t.properties()}],"geometry-type":[St,[],function(t){return t.geometryType()}],id:[Tt,[],function(t){return t.id()}],zoom:[Ct,[],function(t){return t.globals.zoom}],"heatmap-density":[Ct,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Ct,[],function(t){return t.globals.lineProgress||0}],accumulated:[Tt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Ct,We(Ct),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[Ct,We(Ct),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:Ct,overloads:[[[Ct,Ct],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[Ct],function(t,e){return-e[0].evaluate(t)}]]},"/":[Ct,[Ct,Ct],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[Ct,[Ct,Ct],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[Ct,[],function(){return Math.LN2}],pi:[Ct,[],function(){return Math.PI}],e:[Ct,[],function(){return Math.E}],"^":[Ct,[Ct,Ct],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[Ct,[Ct],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Ct,[Ct],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Ct,[Ct],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Ct,[Ct],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Ct,[Ct],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Ct,[Ct],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Ct,[Ct],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Ct,[Ct],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Ct,[Ct],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Ct,[Ct],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Ct,We(Ct),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[Ct,We(Ct),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[Ct,[Ct],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Ct,[Ct],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ct,[Ct],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Ct,[Ct],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[Et,[St,Tt],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[Et,[Tt],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[Et,[St],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[Et,[St,Tt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[Et,[Tt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[Et,[St,Tt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[Et,[Tt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[Et,[St,Tt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[Et,[Tt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[Et,[St,Tt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[Et,[Tt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[Et,[Tt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Et,[],function(t){return null!==t.id()}],"filter-type-in":[Et,[Dt(St)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Et,[Dt(Tt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Et,[St,Dt(Tt)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[Et,[St,Dt(Tt)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:Et,overloads:[[[Et,Et],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[We(Et),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:Et,overloads:[[[Et,Et],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[We(Et),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[Et,[Et],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Et,[St],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[St,[St],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[St,[St],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[St,We(Tt),function(t,e){return e.map(function(e){return qt(e.evaluate(t))}).join("")}],"resolved-locale":[St,[At],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var cn=function(t,e){var n;this.expression=t,this._warningHistory={},this._evaluator=new $t,this._defaultValue=e?"color"===(n=e).type&&tn(n.default)?new Ft(0,0,0,0):"color"===n.type?Ft.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function ln(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in qe}function hn(t,e){var n=new oe(qe,[],e?function(t){var e={color:Pt,string:St,number:Ct,enum:St,boolean:Et,formatted:It};return"array"===t.type?Dt(e[t.value]||Tt,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Xe(new cn(r,e)):Ke(n.errors)}cn.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},cn.prototype.evaluate=function(t,e,n){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null;try{var r=this.expression.evaluate(this._evaluator);if(null==r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new Zt("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var fn=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ne(e.expression)};fn.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},fn.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)};var dn=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ne(e.expression),n instanceof Se&&(this._interpolationType=n.interpolation)};function pn(t,e){if("error"===(t=hn(t,e)).result)return t;var n=t.value.expression,r=ee(n);if(!r&&!Ye(e))return Ke([new wt("","data expressions not supported")]);var i=re(n,["zoom"]);if(!i&&!Je(e))return Ke([new wt("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof Oe)n=t(e.result);else if(e instanceof Pe)for(var r=0,i=e.args;r<i.length&&!(n=t(i[r]));r+=1);else(e instanceof se||e instanceof Se)&&e.input instanceof Qt&&"zoom"===e.input.name&&(n=e);return n instanceof wt||e.eachChild(function(e){var r=t(e);r instanceof wt?n=r:!n&&r?n=new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new wt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}(n);return o||i?o instanceof wt?Ke([o]):o instanceof Se&&!$e(e)?Ke([new wt("",'"interpolate" expressions cannot be used with this property')]):Xe(o?new dn(r?"camera":"composite",t.value,o):new fn(r?"constant":"source",t.value)):Ke([new wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}dn.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},dn.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)},dn.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?Se.interpolationFactor(this._interpolationType,t,e,n):0};var vn=function(t,e){this._parameters=t,this._specification=e,gt(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),c=e.type||($e(n)?"exponential":"interval");if(a&&((e=gt({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],Ft.parse(t[1])]})),e.default=Ft.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Ce[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)r=an;else if("interval"===c)r=on;else if("categorical"===c){r=rn,i=Object.create(null);for(var l=0,h=e.stops;l<h.length;l+=1){var f=h[l];i[f[0]]=f[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=sn}if(s){for(var d={},p=[],v=0;v<e.stops.length;v++){var m=e.stops[v],y=m[0].zoom;void 0===d[y]&&(d[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},p.push(y)),d[y].stops.push([m[0].value,m[1]])}for(var g=[],_=0,b=p;_<b.length;_+=1){var w=b[_];g.push([d[w].zoom,t(d[w],n)])}return{kind:"composite",interpolationFactor:Se.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:g.map(function(t){return t[0]}),evaluate:function(t,r){var i=t.zoom;return an({stops:g,base:e.base},n,i).evaluate(i,r)}}}return u?{kind:"camera",interpolationFactor:"exponential"===c?Se.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){return r(e,n,t.zoom,i,o)}}:{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?nn(e.default,n.default):r(e,n,s,i,o)}}}(this._parameters,this._specification))};function mn(t,e){if(tn(t))return new vn(t,e);if(ln(t)){var n=pn(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=Ft.parse(t)),{kind:"constant",evaluate:function(){return r}}}function yn(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=Qe(n);if("object"!==u)return[new mt(e,n,"object expected, "+u+" found")];for(var c in n){var l=c.split(".")[0],h=r[l]||r["*"],f=void 0;if(i[l])f=i[l];else if(r[l])f=Vn;else if(i["*"])f=i["*"];else{if(!r["*"]){s.push(new mt(e,n[c],'unknown property "'+c+'"'));continue}f=Vn}s=s.concat(f({key:(e?e+".":e)+c,value:n[c],valueSpec:h,style:o,styleSpec:a,object:n,objectKey:c},n))}for(var d in r)i[d]||r[d].required&&void 0===r[d].default&&void 0===n[d]&&s.push(new mt(e,n,'missing required property "'+d+'"'));return s}function gn(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Vn;if("array"!==Qe(e))return[new mt(o,e,"array expected, "+Qe(e)+" found")];if(n.length&&e.length!==n.length)return[new mt(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new mt(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value};i.$version<7&&(s.function=n.function),"object"===Qe(n.value)&&(s=n.value);for(var u=[],c=0;c<e.length;c++)u=u.concat(a({array:e,arrayIndex:c,value:e[c],valueSpec:s,style:r,styleSpec:i,key:o+"["+c+"]"}));return u}function _n(t){var e=t.key,n=t.value,r=t.valueSpec,i=Qe(n);return"number"!==i?[new mt(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new mt(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new mt(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function bn(t){var e,n,r,i=t.valueSpec,o=_t(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,c="array"===Qe(t.value.stops)&&"array"===Qe(t.value.stops[0])&&"object"===Qe(t.value.stops[0][0]),l=yn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new mt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(gn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Qe(n)&&0===n.length&&e.push(new mt(t.key,n,"array must have at least one stop")),e},default:function(t){return Vn({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&l.push(new mt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||l.push(new mt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!$e(t.valueSpec)&&l.push(new mt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!Ye(t.valueSpec)?l.push(new mt(t.key,t.value,"property functions not supported")):s&&!Je(t.valueSpec)&&l.push(new mt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!c||void 0!==t.value.property||l.push(new mt(t.key,t.value,'"property" property is required')),l;function h(t){var e=[],o=t.value,s=t.key;if("array"!==Qe(o))return[new mt(s,o,"array expected, "+Qe(o)+" found")];if(2!==o.length)return[new mt(s,o,"array length 2 expected, length "+o.length+" found")];if(c){if("object"!==Qe(o[0]))return[new mt(s,o,"object expected, "+Qe(o[0])+" found")];if(void 0===o[0].zoom)return[new mt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new mt(s,o,"object stop key must have value")];if(r&&r>_t(o[0].zoom))return[new mt(s,o[0].zoom,"stop zoom values must appear in ascending order")];_t(o[0].zoom)!==r&&(r=_t(o[0].zoom),n=void 0,a={}),e=e.concat(yn({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:_n,value:f}}))}else e=e.concat(f({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return ln(bt(o[1]))?e.concat([new mt(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Vn({key:s+"[1]",value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function f(t,r){var s=Qe(t.value),u=_t(t.value),c=null!==t.value?t.value:r;if(e){if(s!==e)return[new mt(t.key,c,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new mt(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var l="number expected, "+s+" found";return Ye(i)&&void 0===o&&(l+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mt(t.key,c,l)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==n&&u<n?[new mt(t.key,c,"stop domain values must appear in ascending order")]:(n=u,"categorical"===o&&u in a?[new mt(t.key,c,"stop domain values must be unique")]:(a[u]=!0,[])):[new mt(t.key,c,"integer expected, found "+u)]}}function wn(t){var e=("property"===t.expressionContext?pn:hn)(bt(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new mt(""+t.key+e.key,t.value,e.message)});var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==n.possibleOutputs().indexOf(void 0))return[new mt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ne(n))return[new mt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ne(n))return[new mt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!re(n,["zoom","feature-state"]))return[new mt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ee(n))return[new mt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xn(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(_t(n))&&i.push(new mt(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(_t(n))&&i.push(new mt(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function kn(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!kn(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}vn.deserialize=function(t){return new vn(t._parameters,t._specification)},vn.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Cn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Sn(t){if(null==t)return function(){return!0};kn(t)||(t=Pn(t));var e=hn(t,Cn);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,n){return e.value.evaluate(t,n)}}function En(t,e){return t<e?-1:t>e?1:0}function Pn(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?On(t[1],t[2],"=="):"!="===n?In(On(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?On(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(Pn))):"all"===n?["all"].concat(t.slice(1).map(Pn)):"none"===n?["all"].concat(t.slice(1).map(Pn).map(In)):"in"===n?Tn(t[1],t.slice(2)):"!in"===n?In(Tn(t[1],t.slice(2))):"has"===n?An(t[1]):"!has"!==n||In(An(t[1]))}function On(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function Tn(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(En)]]:["filter-in-small",t,["literal",e]]}}function An(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function In(t){return["!",t]}function Dn(t){return kn(bt(t.value))?wn(gt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==Qe(n))return[new mt(r,n,"array expected, "+Qe(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new mt(r,n,"filter array must have at least 1 element")];switch(a=a.concat(xn({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),_t(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===_t(n[1])&&a.push(new mt(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new mt(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=Qe(n[1]))&&a.push(new mt(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=Qe(n[s]),"$type"===_t(n[1])?a=a.concat(xn({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new mt(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:r+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Qe(n[1]),2!==n.length?a.push(new mt(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new mt(r+"[1]",n[1],"string expected, "+i+" found"))}return a}(t)}function Mn(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Vn({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var c,l=t.valueSpec||s[a];if(!l)return[new mt(n,o,'unknown property "'+a+'"')];if("string"===Qe(o)&&Ye(l)&&!l.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new mt(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(c[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new mt(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&tn(bt(o))&&"identity"===_t(o.type)&&h.push(new mt(n,o,'"text-font" does not support identity functions'))),h.concat(Vn({key:t.key,value:o,valueSpec:l,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function Ln(t){return Mn(t,"paint")}function jn(t){return Mn(t,"layout")}function Rn(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new mt(r,n,'either "type" or "ref" is required'));var a,s=_t(n.type),u=_t(n.ref);if(n.id)for(var c=_t(n.id),l=0;l<t.arrayIndex;l++){var h=i.layers[l];_t(h.id)===c&&e.push(new mt(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+h.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new mt(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){_t(t.id)===u&&(a=t)}),a?a.ref?e.push(new mt(r,n.ref,"ref cannot reference another ref layer")):s=_t(a.type):e.push(new mt(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var f=i.sources&&i.sources[n.source],d=f&&_t(f.type);f?"vector"===d&&"raster"===s?e.push(new mt(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===d&&"raster"!==s?e.push(new mt(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==d||n["source-layer"]?"raster-dem"===d&&"hillshade"!==s?e.push(new mt(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===d&&f.lineMetrics||e.push(new mt(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new mt(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new mt(r,n.source,'source "'+n.source+'" not found'))}else e.push(new mt(r,n,'missing required property "source"'));return e=e.concat(yn({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Vn({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:Dn,layout:function(t){return yn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return jn(gt({layerType:s},t))}}})},paint:function(t){return yn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Ln(gt({layerType:s},t))}}})}}}))}function Fn(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new mt(n,e,'"type" is required')];var o,a=_t(e.type);switch(a){case"vector":case"raster":case"raster-dem":if(o=yn({key:n,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r}),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&o.push(new mt(n+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return o;case"geojson":if(o=yn({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r}),e.cluster)for(var u in e.clusterProperties){var c=e.clusterProperties[u],l=c[0],h="string"==typeof l?[l,["accumulated"],["get",u]]:l;o.push.apply(o,wn({key:n+"."+u+".map",value:c[1],expressionContext:"cluster-map"})),o.push.apply(o,wn({key:n+"."+u+".reduce",value:h,expressionContext:"cluster-reduce"}))}return o;case"video":return yn({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return yn({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new mt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xn({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Nn(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=Qe(e);if(void 0===e)return o;if("object"!==a)return o.concat([new mt("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?Vn({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Vn({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new mt(s,e[s],'unknown property "'+s+'"')])}return o}function Bn(t){var e=t.value,n=t.key,r=Qe(e);return"string"!==r?[new mt(n,e,"string expected, "+r+" found")]:[]}var zn={"*":function(){return[]},array:gn,boolean:function(t){var e=t.value,n=t.key,r=Qe(e);return"boolean"!==r?[new mt(n,e,"boolean expected, "+r+" found")]:[]},number:_n,color:function(t){var e=t.key,n=t.value,r=Qe(n);return"string"!==r?[new mt(e,n,"color expected, "+r+" found")]:null===Rt(n)?[new mt(e,n,'color expected, "'+n+'" found')]:[]},constants:yt,enum:xn,filter:Dn,function:bn,layer:Rn,object:yn,source:Fn,light:Nn,string:Bn,formatted:function(t){return 0===Bn(t).length?[]:wn(t)}};function Vn(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&tn(_t(e))?bn(t):n.expression&&ln(bt(e))?wn(t):n.type&&zn[n.type]?zn[n.type](t):yn(gt({},t,{valueSpec:n.type?r[n.type]:n}))}function Un(t){var e=t.value,n=t.key,r=Bn(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new mt(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new mt(n,e,'"glyphs" url must include a "{range}" token'))),r}function qn(t,e){var n=[];return n=n.concat(Vn({key:"",value:t,valueSpec:(e=e||vt).$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Un,"*":function(){return[]}}})),t.constants&&(n=n.concat(yt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Hn(n)}function Hn(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function Zn(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return Hn(t.apply(this,e))}}qn.source=Zn(Fn),qn.light=Zn(Nn),qn.layer=Zn(Rn),qn.filter=Zn(Dn),qn.paintProperty=Zn(Ln),qn.layoutProperty=Zn(jn);var Gn=qn,Wn=qn.light,Xn=qn.paintProperty,Kn=qn.layoutProperty;function Yn(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1)t.fire(new dt(new Error(i[r].message))),n=!0;return n}var Jn=$n;function $n(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var l=n/e*t;this.min=-l,this.max=t+l}$n.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},$n.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},$n.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},$n.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s},$n.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=this.cells[i];if(null!==u)for(var c=this.keys,l=this.bboxes,h=0;h<u.length;h++){var f=u[h];if(void 0===a[f]){var d=4*f;(s?s(l[d+0],l[d+1],l[d+2],l[d+3]):t<=l[d+2]&&e<=l[d+3]&&n>=l[d+0]&&r>=l[d+1])?(a[f]=!0,o.push(c[f])):a[f]=!1}}},$n.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToCellCoord(t),c=this._convertToCellCoord(e),l=this._convertToCellCoord(n),h=this._convertToCellCoord(r),f=u;f<=l;f++)for(var d=c;d<=h;d++){var p=this.d*d+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(d),this._convertFromCellCoord(f+1),this._convertFromCellCoord(d+1)))&&i.call(this,t,e,n,r,p,o,a,s))return}},$n.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},$n.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},$n.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+t.length]=o,i.set(this.keys,o),i[3+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Qn=self.ImageData,tr={};function er(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),tr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var nr in er("Object",Object),Jn.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Jn.deserialize=function(t){return new Jn(t.buffer)},er("Grid",Jn),er("Color",Ft),er("Error",Error),er("StylePropertyFunction",vn),er("StyleExpression",cn,{omit:["_evaluator"]}),er("ZoomDependentExpression",dn),er("ZoomConstantExpression",fn),er("CompoundExpression",Qt,{omit:["_evaluate"]}),qe)qe[nr]._classRegistryKey||er("Expression_"+nr,qe[nr]);function rr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Qn)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1)r.push(rr(o[i],e));return r}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(tr[s].omit.indexOf(c)>=0)){var l=t[c];u[c]=tr[s].shallow.indexOf(c)>=0?l:rr(l,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function ir(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof Qn)return t;if(Array.isArray(t))return t.map(ir);if("object"==typeof t){var e=t.$name||"Object",n=tr[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=t[a];r[a]=tr[e].shallow.indexOf(a)>=0?s:ir(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var or=function(){this.first=!0};or.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var ar={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function sr(t){for(var e=0,n=t;e<n.length;e+=1)if(cr(n[e].charCodeAt(0)))return!0;return!1}function ur(t){return!(ar.Arabic(t)||ar["Arabic Supplement"](t)||ar["Arabic Extended-A"](t)||ar["Arabic Presentation Forms-A"](t)||ar["Arabic Presentation Forms-B"](t))}function cr(t){return!(746!==t&&747!==t&&(t<4352||!(ar["Bopomofo Extended"](t)||ar.Bopomofo(t)||ar["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||ar["CJK Compatibility Ideographs"](t)||ar["CJK Compatibility"](t)||ar["CJK Radicals Supplement"](t)||ar["CJK Strokes"](t)||!(!ar["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||ar["CJK Unified Ideographs Extension A"](t)||ar["CJK Unified Ideographs"](t)||ar["Enclosed CJK Letters and Months"](t)||ar["Hangul Compatibility Jamo"](t)||ar["Hangul Jamo Extended-A"](t)||ar["Hangul Jamo Extended-B"](t)||ar["Hangul Jamo"](t)||ar["Hangul Syllables"](t)||ar.Hiragana(t)||ar["Ideographic Description Characters"](t)||ar.Kanbun(t)||ar["Kangxi Radicals"](t)||ar["Katakana Phonetic Extensions"](t)||ar.Katakana(t)&&12540!==t||!(!ar["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!ar["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||ar["Unified Canadian Aboriginal Syllabics"](t)||ar["Unified Canadian Aboriginal Syllabics Extended"](t)||ar["Vertical Forms"](t)||ar["Yijing Hexagram Symbols"](t)||ar["Yi Syllables"](t)||ar["Yi Radicals"](t))))}function lr(t){return!(cr(t)||function(t){return!!(ar["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||ar["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||ar["Letterlike Symbols"](t)||ar["Number Forms"](t)||ar["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||ar["Control Pictures"](t)&&9251!==t||ar["Optical Character Recognition"](t)||ar["Enclosed Alphanumerics"](t)||ar["Geometric Shapes"](t)||ar["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||ar["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ar["CJK Symbols and Punctuation"](t)||ar.Katakana(t)||ar["Private Use Area"](t)||ar["CJK Compatibility Forms"](t)||ar["Small Form Variants"](t)||ar["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function hr(t,e){return!(!e&&(t>=1424&&t<=2303||ar["Arabic Presentation Forms-A"](t)||ar["Arabic Presentation Forms-B"](t))||t>=2304&&t<=3583||t>=3840&&t<=4255||ar.Khmer(t))}var fr,dr=!1,pr=null,vr=!1,mr=new pt,yr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return vr||null!=yr.applyArabicShaping}},gr=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new or,this.transition={})};gr.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!hr(r[n].charCodeAt(0),e))return!1;return!0}(t,yr.isLoaded())},gr.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},gr.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var _r=function(t,e){this.property=t,this.value=e,this.expression=mn(void 0===e?t.specification.default:e,t.specification)};_r.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},_r.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var br=function(t){this.property=t,this.value=new _r(t,void 0)};br.prototype.transitioned=function(t,e){return new xr(this.property,this.value,e,h({},t.transition,this.transition),t.now)},br.prototype.untransitioned=function(){return new xr(this.property,this.value,null,{},0)};var wr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};wr.prototype.getValue=function(t){return b(this._values[t].value.value)},wr.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new br(this._values[t].property)),this._values[t].value=new _r(this._values[t].property,null===e?void 0:b(e))},wr.prototype.getTransition=function(t){return b(this._values[t].transition)},wr.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new br(this._values[t].property)),this._values[t].transition=b(e)||void 0},wr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},wr.prototype.transitioned=function(t,e){for(var n=new kr(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},wr.prototype.untransitioned=function(){for(var t=new kr(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var xr=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};xr.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),r=this.prior;if(r){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return r.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(i))}return n};var kr=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};kr.prototype.possiblyEvaluate=function(t){for(var e=new Er(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e},kr.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var Cr=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Cr.prototype.getValue=function(t){return b(this._values[t].value)},Cr.prototype.setValue=function(t,e){this._values[t]=new _r(this._values[t].property,null===e?void 0:b(e))},Cr.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},Cr.prototype.possiblyEvaluate=function(t){for(var e=new Er(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e};var Sr=function(t,e,n){this.property=t,this.value=e,this.parameters=n};Sr.prototype.isConstant=function(){return"constant"===this.value.kind},Sr.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Sr.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.parameters,t,e)};var Er=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Er.prototype.get=function(t){return this._values[t]};var Pr=function(t){this.specification=t};Pr.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Pr.prototype.interpolate=function(t,e,n){var r=ce[this.specification.type];return r?r(t,e,n):t};var Or=function(t){this.specification=t};Or.prototype.possiblyEvaluate=function(t,e){return new Sr(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e)}:t.expression,e)},Or.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Sr(this,{kind:"constant",value:void 0},t.parameters);var r=ce[this.specification.type];return r?new Sr(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t},Or.prototype.evaluate=function(t,e,n,r){return"constant"===t.kind?t.value:t.evaluate(e,n,r)};var Tr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e){if(void 0===t.value)return new Sr(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var n=t.expression.evaluate(e),r=this._calculate(n,n,n,e);return new Sr(this,{kind:"constant",value:r},e)}if("camera"===t.expression.kind){var i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Sr(this,{kind:"constant",value:i},e)}return new Sr(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,r){if("source"===t.kind){var i=t.evaluate(e,n,r);return this._calculate(i,i,i,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value},e.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(Or),Ar=function(t){this.specification=t};Ar.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new gr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new gr(Math.floor(e.zoom),e)),t.expression.evaluate(new gr(Math.floor(e.zoom+1),e)),e)}},Ar.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},Ar.prototype.interpolate=function(t){return t};var Ir=function(t){this.specification=t};Ir.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},Ir.prototype.interpolate=function(){return!1};var Dr=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var n=t[e],r=this.defaultPropertyValues[e]=new _r(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new br(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};er("DataDrivenProperty",Or),er("DataConstantProperty",Pr),er("CrossFadedDataDrivenProperty",Tr),er("CrossFadedProperty",Ar),er("ColorRampProperty",Ir);var Mr=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this.visibility="visible",this._featureFilter=function(){return!0},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new Cr(n.layout)),n.paint)){for(var r in this._transitionablePaint=new wr(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate(Kn,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible")},e.prototype.getPaintProperty=function(t){return y(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(Xn,"layers."+this.id+".paint."+t,t,e,n))return!1;if(y(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],i="cross-faded-data-driven"===r.property.specification["property-type"]&&!r.value.value&&e,o=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var a=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),a||o||i},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),_(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&Yn(this,t.call(Gn,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Sr&&Ye(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(pt),Lr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},jr=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Rr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Fr(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map(function(t){var i=Lr[t.type].BYTES_PER_ELEMENT,o=n=Nr(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}}),size:Nr(n,Math.max(r,e)),alignment:e}}function Nr(t,e){return Math.ceil(t/e)*e}Rr.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Rr.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Rr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Rr.prototype.clear=function(){this.length=0},Rr.prototype.resize=function(t){this.reserve(t),this.length=t},Rr.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Rr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Br=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(Rr);Br.prototype.bytesPerElement=4,er("StructArrayLayout2i4",Br);var zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(Rr);zr.prototype.bytesPerElement=8,er("StructArrayLayout4i8",zr);var Vr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Rr);Vr.prototype.bytesPerElement=12,er("StructArrayLayout2i4i12",Vr);var Ur=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,a,s)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var c=6*t,l=12*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.int16[c+2]=r,this.int16[c+3]=i,this.uint8[l+8]=o,this.uint8[l+9]=a,this.uint8[l+10]=s,this.uint8[l+11]=u,t},e}(Rr);Ur.prototype.bytesPerElement=12,er("StructArrayLayout4i4ub12",Ur);var qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,a,s)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var c=8*t;return this.uint16[c+0]=e,this.uint16[c+1]=n,this.uint16[c+2]=r,this.uint16[c+3]=i,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=u,t},e}(Rr);qr.prototype.bytesPerElement=16,er("StructArrayLayout8ui16",qr);var Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,a,s)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var c=8*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.int16[c+2]=r,this.int16[c+3]=i,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=u,t},e}(Rr);Hr.prototype.bytesPerElement=16,er("StructArrayLayout4i4ui16",Hr);var Zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(Rr);Zr.prototype.bytesPerElement=12,er("StructArrayLayout3f12",Zr);var Gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Rr);Gr.prototype.bytesPerElement=4,er("StructArrayLayout1ul4",Gr);var Wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,c,l){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,n,r,i,o,a,s,u,c,l)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c,l,h){var f=12*t,d=6*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.int16[f+4]=o,this.int16[f+5]=a,this.uint32[d+3]=s,this.uint16[f+8]=u,this.uint16[f+9]=c,this.int16[f+10]=l,this.int16[f+11]=h,t},e}(Rr);Wr.prototype.bytesPerElement=24,er("StructArrayLayout6i1ul2ui2i24",Wr);var Xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Rr);Xr.prototype.bytesPerElement=12,er("StructArrayLayout2i2i2i12",Xr);var Kr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=4*t;return this.uint8[r+0]=e,this.uint8[r+1]=n,t},e}(Rr);Kr.prototype.bytesPerElement=4,er("StructArrayLayout2ub4",Kr);var Yr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,c,l,h,f,d){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,r,i,o,a,s,u,c,l,h,f,d)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p){var v=20*t,m=10*t,y=40*t;return this.int16[v+0]=e,this.int16[v+1]=n,this.uint16[v+2]=r,this.uint16[v+3]=i,this.uint32[m+2]=o,this.uint32[m+3]=a,this.uint32[m+4]=s,this.uint16[v+10]=u,this.uint16[v+11]=c,this.uint16[v+12]=l,this.float32[m+7]=h,this.float32[m+8]=f,this.uint8[y+36]=d,this.uint8[y+37]=p,t},e}(Rr);Yr.prototype.bytesPerElement=40,er("StructArrayLayout2i2ui3ul3ui2f2ub40",Yr);var Jr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,c,l,h,f,d){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,r,i,o,a,s,u,c,l,h,f,d)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p){var v=16*t,m=8*t;return this.int16[v+0]=e,this.int16[v+1]=n,this.int16[v+2]=r,this.int16[v+3]=i,this.uint16[v+4]=o,this.uint16[v+5]=a,this.uint16[v+6]=s,this.uint16[v+7]=u,this.uint16[v+8]=c,this.uint16[v+9]=l,this.uint16[v+10]=h,this.uint16[v+11]=f,this.uint16[v+12]=d,this.uint32[m+7]=p,t},e}(Rr);Jr.prototype.bytesPerElement=32,er("StructArrayLayout4i9ui1ul32",Jr);var $r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Rr);$r.prototype.bytesPerElement=4,er("StructArrayLayout1f4",$r);var Qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(Rr);Qr.prototype.bytesPerElement=6,er("StructArrayLayout3i6",Qr);var ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t},e}(Rr);ti.prototype.bytesPerElement=8,er("StructArrayLayout1ul2ui8",ti);var ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(Rr);ei.prototype.bytesPerElement=6,er("StructArrayLayout3ui6",ei);var ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(Rr);ni.prototype.bytesPerElement=4,er("StructArrayLayout2ui4",ni);var ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Rr);ri.prototype.bytesPerElement=2,er("StructArrayLayout1ui2",ri);var ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(Rr);ii.prototype.bytesPerElement=8,er("StructArrayLayout2f8",ii);var oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(Rr);oi.prototype.bytesPerElement=16,er("StructArrayLayout4f16",oi);var ai=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(jr);ai.prototype.size=24;var si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new ai(this,t)},e}(Wr);er("CollisionBoxArray",si);var ui=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(jr);ui.prototype.size=40;var ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new ui(this,t)},e}(Yr);er("PlacedSymbolArray",ci);var li=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},horizontalPlacedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.horizontalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.horizontalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},n.key.get=function(){return this._structArray.uint16[this._pos2+4]},n.key.set=function(t){this._structArray.uint16[this._pos2+4]=t},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+5]},n.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+5]=t},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+6]},n.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+6]=t},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},n.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+7]=t},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.featureIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.numGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+10]},n.numGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+11]},n.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+12]},n.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+7]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+7]=t},Object.defineProperties(e.prototype,n),e}(jr);li.prototype.size=32;var hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new li(this,t)},e}(Jr);er("SymbolInstanceArray",hi);var fi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(jr);fi.prototype.size=4;var di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new fi(this,t)},e}($r);er("GlyphOffsetArray",di);var pi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(jr);pi.prototype.size=6;var vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new pi(this,t)},e}(Qr);er("SymbolLineVertexArray",vi);var mi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(jr);mi.prototype.size=8;var yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new mi(this,t)},e}(ti);er("FeatureIndexArray",yi);var gi=Fr([{name:"a_pos",components:2,type:"Int16"}],4).members,_i=function(t){void 0===t&&(t=[]),this.segments=t};function bi(t,e){return 256*(t=c(Math.floor(t),0,255))+c(Math.floor(e),0,255)}_i.prototype.prepareSegment=function(t,e,n,r){var i=this.segments[this.segments.length-1];return t>_i.MAX_VERTEX_ARRAY_LENGTH&&x("Max vertices per segment is "+_i.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>_i.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},_i.prototype.get=function(){return this.segments},_i.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},_i.simpleSegment=function(t,e,n,r){return new _i([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},_i.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,er("SegmentVector",_i);var wi=function(){this.ids=[],this.positions=[],this.indexed=!1};function xi(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}wi.prototype.add=function(t,e,n,r){this.ids.push(t),this.positions.push(e,n,r)},wi.prototype.getPositions=function(t){for(var e=0,n=this.ids.length-1;e<n;){var r=e+n>>1;this.ids[r]>=t?n=r:e=r+1}for(var i=[];this.ids[e]===t;)i.push({index:this.positions[3*e],start:this.positions[3*e+1],end:this.positions[3*e+2]}),e++;return i},wi.serialize=function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,n,r,i){if(!(r>=i)){for(var o=e[r+i>>1],a=r-1,s=i+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;xi(e,a,s),xi(n,3*a,3*s),xi(n,3*a+1,3*s+1),xi(n,3*a+2,3*s+2)}t(e,n,r,s),t(e,n,s+1,i)}}(n,r,0,n.length-1),e.push(n.buffer,r.buffer),{ids:n,positions:r}},wi.deserialize=function(t){var e=new wi;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},er("FeaturePositionMap",wi);var ki=function(t,e){this.gl=t.gl,this.location=e},Ci=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(ki),Si=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(ki),Ei=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(ki),Pi=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(ki),Oi=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(ki),Ti=function(t){function e(e,n){t.call(this,e,n),this.current=Ft.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(ki),Ai=new Float32Array(16),Ii=function(t){function e(e,n){t.call(this,e,n),this.current=Ai}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(ki);function Di(t){return[bi(255*t.r,255*t.g),bi(255*t.b,255*t.a)]}var Mi=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0};Mi.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},Mi.prototype.setConstantPatternPositions=function(){},Mi.prototype.populatePaintArray=function(){},Mi.prototype.updatePaintArray=function(){},Mi.prototype.upload=function(){},Mi.prototype.destroy=function(){},Mi.prototype.setUniforms=function(t,e,n,r){e.set(r.constantOr(this.value))},Mi.prototype.getBinding=function(t,e){return"color"===this.type?new Ti(t,e):new Si(t,e)},Mi.serialize=function(t){var e=t.names,n=t.type;return{value:rr(t.value),names:e,type:n}},Mi.deserialize=function(t){var e=t.names,n=t.type;return new Mi(ir(t.value),e,n)};var Li=function(t,e,n){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=n,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};Li.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},Li.prototype.populatePaintArray=function(){},Li.prototype.updatePaintArray=function(){},Li.prototype.upload=function(){},Li.prototype.destroy=function(){},Li.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},Li.prototype.setUniforms=function(t,e,n,r,i){var o=this.patternPositions;"u_pattern_to"===i&&o.patternTo&&e.set(o.patternTo),"u_pattern_from"===i&&o.patternFrom&&e.set(o.patternFrom)},Li.prototype.getBinding=function(t,e){return new Oi(t,e)};var ji=function(t,e,n,r){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new r};ji.prototype.defines=function(){return[]},ji.prototype.setConstantPatternPositions=function(){},ji.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new gr(0),e,{});if("color"===this.type)for(var o=Di(i),a=r;a<t;a++)n.emplaceBack(o[0],o[1]);else{for(var s=r;s<t;s++)n.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},ji.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},n,r);if("color"===this.type)for(var a=Di(o),s=t;s<e;s++)i.emplace(s,a[0],a[1]);else{for(var u=t;u<e;u++)i.emplace(u,o);this.maxValue=Math.max(this.maxValue,o)}},ji.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ji.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ji.prototype.setUniforms=function(t,e){e.set(0)},ji.prototype.getBinding=function(t,e){return new Si(t,e)};var Ri=function(t,e,n,r,i,o){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0;var a=o;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new a};Ri.prototype.defines=function(){return[]},Ri.prototype.setConstantPatternPositions=function(){},Ri.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new gr(this.zoom),e,{}),o=this.expression.evaluate(new gr(this.zoom+1),e,{});if("color"===this.type)for(var a=Di(i),s=Di(o),u=r;u<t;u++)n.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var c=r;c<t;c++)n.emplaceBack(i,o);this.maxValue=Math.max(this.maxValue,i,o)}},Ri.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);if("color"===this.type)for(var s=Di(o),u=Di(a),c=t;c<e;c++)i.emplace(c,s[0],s[1],u[0],u[1]);else{for(var l=t;l<e;l++)i.emplace(l,o,a);this.maxValue=Math.max(this.maxValue,o,a)}},Ri.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ri.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ri.prototype.interpolationFactor=function(t){return this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(t):t,this.zoom,this.zoom+1)},Ri.prototype.setUniforms=function(t,e,n){e.set(this.interpolationFactor(n.zoom))},Ri.prototype.getBinding=function(t,e){return new Si(t,e)};var Fi=function(t,e,n,r,i,o,a){this.expression=t,this.names=e,this.type=n,this.uniformNames=this.names.map(function(t){return"a_"+t+"_t"}),this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0,this.layerId=a,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o};Fi.prototype.defines=function(){return[]},Fi.prototype.setConstantPatternPositions=function(){},Fi.prototype.populatePaintArray=function(t,e,n){var r=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,o=this.layerId,a=r.length;if(r.reserve(t),i.reserve(t),n&&e.patterns&&e.patterns[o]){var s=e.patterns[o],u=n[s.min],c=n[s.mid],l=n[s.max];if(!u||!c||!l)return;for(var h=a;h<t;h++)r.emplaceBack(c.tl[0],c.tl[1],c.br[0],c.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1]),i.emplaceBack(c.tl[0],c.tl[1],c.br[0],c.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1])}},Fi.prototype.updatePaintArray=function(t,e,n,r,i){var o=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&n.patterns&&n.patterns[s]){var u=n.patterns[s],c=i[u.min],l=i[u.mid],h=i[u.max];if(!c||!l||!h)return;for(var f=t;f<e;f++)o.emplace(f,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1]),a.emplace(f,l.tl[0],l.tl[1],l.br[0],l.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1])}},Fi.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Fi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Fi.prototype.setUniforms=function(t,e){e.set(0)},Fi.prototype.getBinding=function(t,e){return new Si(t,e)};var Ni=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new wi,this._bufferOffset=0};Ni.createDynamic=function(t,e,n){var r=new Ni,i=[];for(var o in t.paint._values)if(n(o)){var a=t.paint.get(o);if(a instanceof Sr&&Ye(a.property.specification)){var s=zi(o,t.type),u=a.property.specification.type,c=a.property.useIntegerZoom;if("cross-faded"===a.property.specification["property-type"]||"cross-faded-data-driven"===a.property.specification["property-type"])if("constant"===a.value.kind)r.binders[o]=new Li(a.value.value,s,u),i.push("/u_"+o);else{var l=Vi(o,u,"source");r.binders[o]=new Fi(a.value,s,u,c,e,l,t.id),i.push("/a_"+o)}else if("constant"===a.value.kind)r.binders[o]=new Mi(a.value.value,s,u),i.push("/u_"+o);else if("source"===a.value.kind){var h=Vi(o,u,"source");r.binders[o]=new ji(a.value,s,u,h),i.push("/a_"+o)}else{var f=Vi(o,u,"composite");r.binders[o]=new Ri(a.value,s,u,c,e,f),i.push("/z_"+o)}}}return r.cacheKey=i.sort().join(""),r},Ni.prototype.populatePaintArrays=function(t,e,n,r){for(var i in this.binders)this.binders[i].populatePaintArray(t,e,r);void 0!==e.id&&this._featureMap.add(+e.id,n,this._bufferOffset,t),this._bufferOffset=t},Ni.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders)this.binders[n].setConstantPatternPositions(t,e)},Ni.prototype.updatePaintArrays=function(t,e,n,r){var i=!1;for(var o in t)for(var a=0,s=this._featureMap.getPositions(+o);a<s.length;a+=1){var u=s[a],c=e.feature(u.index);for(var l in this.binders){var h=this.binders[l];if(!(h instanceof Mi||h instanceof Li)&&!0===h.expression.isStateDependent){var f=n.paint.get(l);h.expression=f.value,h.updatePaintArray(u.start,u.end,c,t[o],r),i=!0}}}return i},Ni.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},Ni.prototype.getPaintVertexBuffers=function(){return this._buffers},Ni.prototype.getUniforms=function(t,e){var n={};for(var r in this.binders)for(var i=this.binders[r],o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];n[s]=i.getBinding(t,e[s])}return n},Ni.prototype.setUniforms=function(t,e,n,r){for(var i in this.binders)for(var o=this.binders[i],a=0,s=o.uniformNames;a<s.length;a+=1){var u=s[a];o.setUniforms(t,e[u],r,n.get(i),u)}},Ni.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof Fi){var i=2===t.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;i&&e.push(i)}else(r instanceof ji||r instanceof Ri)&&r.paintVertexBuffer&&e.push(r.paintVertexBuffer)}this._buffers=e},Ni.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof ji||i instanceof Ri)&&i.paintVertexBuffer&&n.push(i.paintVertexBuffer)}this._buffers=n},Ni.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var Bi=function(t,e,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=Ni.createDynamic(a,n,r),this.programConfigurations[a.id].layoutAttributes=t}this.needsUpload=!1};function zi(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Vi(t,e,n){var r={color:{source:ii,composite:oi},number:{source:$r,composite:ii}},i=function(t){return{"line-pattern":{source:qr,composite:qr},"fill-pattern":{source:qr,composite:qr},"fill-extrusion-pattern":{source:qr,composite:qr}}[t]}(t);return i&&i[n]||r[e][n]}Bi.prototype.populatePaintArrays=function(t,e,n,r){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,n,r);this.needsUpload=!0},Bi.prototype.updatePaintArrays=function(t,e,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,e,a,r)||this.needsUpload}},Bi.prototype.get=function(t){return this.programConfigurations[t]},Bi.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Bi.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},er("ConstantBinder",Mi),er("CrossFadedConstantBinder",Li),er("SourceExpressionBinder",ji),er("CrossFadedCompositeBinder",Fi),er("CompositeExpressionBinder",Ri),er("ProgramConfiguration",Ni,{omit:["_buffers"]}),er("ProgramConfigurationSet",Bi);var Ui=8192,qi=-1*Math.pow(2,15),Hi=Math.pow(2,15)-1;function Zi(t){for(var e=Ui/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<qi||a.x>Hi||a.y<qi||a.y>Hi)&&x("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Gi(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var Wi=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Br,this.indexArray=new ei,this.segments=new _i,this.programConfigurations=new Bi(gi,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Xi(t,e){for(var n=0;n<t.length;n++)if(ro(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(ro(t,e[r]))return!0;return!!$i(t,e)}function Ki(t,e,n){return!!ro(t,e)||!!to(e,t,n)}function Yi(t,e){if(1===t.length)return no(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(ro(t,r[i]))return!0;for(var o=0;o<t.length;o++)if(no(e,t[o]))return!0;for(var a=0;a<e.length;a++)if($i(t,e[a]))return!0;return!1}function Ji(t,e,n){if(t.length>1){if($i(t,e))return!0;for(var r=0;r<e.length;r++)if(to(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(to(t[i],e,n))return!0;return!1}function $i(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(Qi(r,i,e[o],e[o+1]))return!0;return!1}function Qi(t,e,n,r){return k(t,n,r)!==k(e,n,r)&&k(t,e,n)!==k(t,e,r)}function to(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(eo(t,e[i-1],e[i])<r)return!0;return!1}function eo(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function no(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)(r=n[s]).y>e.y!=(i=n[u]).y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function ro(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function io(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var o=k(t,e,n[0]);return o!==k(t,e,n[1])||o!==k(t,e,n[2])||o!==k(t,e,n[3])}function oo(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).binders[t].maxValue}function ao(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function so(t,e,n,r,o){if(!e[0]&&!e[1])return t;var a=i.convert(e)._mult(o);"viewport"===n&&a._rotate(-r);for(var s=[],u=0;u<t.length;u++)s.push(t[u].sub(a));return s}Wi.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new gr(this.zoom),o)){var u=Zi(o);this.addFeature(o,u,a),e.featureIndex.insert(o,u,a,s,this.index)}}},Wi.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Wi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Wi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wi.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,gi),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Wi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wi.prototype.addFeature=function(t,e,n){for(var r=0,i=e;r<i.length;r+=1)for(var o=0,a=i[r];o<a.length;o+=1){var s=a[o],u=s.x,c=s.y;if(!(u<0||u>=Ui||c<0||c>=Ui)){var l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=l.vertexLength;Gi(this.layoutVertexArray,u,c,-1,-1),Gi(this.layoutVertexArray,u,c,1,-1),Gi(this.layoutVertexArray,u,c,1,1),Gi(this.layoutVertexArray,u,c,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),l.vertexLength+=4,l.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{})},er("CircleBucket",Wi,{omit:["layers"]});var uo={paint:new Dr({"circle-radius":new Or(vt.paint_circle["circle-radius"]),"circle-color":new Or(vt.paint_circle["circle-color"]),"circle-blur":new Or(vt.paint_circle["circle-blur"]),"circle-opacity":new Or(vt.paint_circle["circle-opacity"]),"circle-translate":new Pr(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new Pr(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pr(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pr(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Or(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Or(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Or(vt.paint_circle["circle-stroke-opacity"])})},co="undefined"!=typeof Float32Array?Float32Array:Array;function lo(){var t=new co(9);return co!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ho(){var t=new co(3);return co!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function fo(t,e,n){var r=new co(3);return r[0]=t,r[1]=e,r[2]=n,r}function po(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function vo(){var t=new co(4);return co!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}Math,ho(),function(){var t;t=new co(4),co!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}(),ho(),fo(1,0,0),fo(0,1,0),vo(),vo(),lo(),function(){var t;t=new co(2),co!=Float32Array&&(t[0]=0,t[1]=0)}();var mo=function(t){function e(e){t.call(this,e,uo)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Wi(t)},e.prototype.queryRadius=function(t){var e=t;return oo("circle-radius",this,e)+oo("circle-stroke-width",this,e)+ao(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){for(var u=so(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),l="map"===this.paint.get("circle-pitch-alignment"),h=l?u:function(t,e){return t.map(function(t){return yo(t,e)})}(u,s),f=l?c*a:c,d=0,p=r;d<p.length;d+=1)for(var v=0,m=p[d];v<m.length;v+=1){var y=m[v],g=l?y:yo(y,s),_=f,b=po([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),Ki(h,g,_))return!0}return!1},e}(Mr);function yo(t,e){var n=po([],[t.x,t.y,0,1],e);return new i(n[0]/n[3],n[1]/n[3])}var go=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Wi);function _o(t,e,n,r){var i=e.width,o=e.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function bo(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=_o({},{width:r,height:i},n);wo(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function wo(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var c=((n.y+u)*t.width+n.x)*o,l=((r.y+u)*e.width+r.x)*o,h=0;h<i.width*o;h++)s[l+h]=a[c+h];return e}er("HeatmapBucket",go,{omit:["layers"]});var xo=function(t,e){_o(this,t,1,e)};xo.prototype.resize=function(t){bo(this,t,1)},xo.prototype.clone=function(){return new xo({width:this.width,height:this.height},new Uint8Array(this.data))},xo.copy=function(t,e,n,r,i){wo(t,e,n,r,i,1)};var ko=function(t,e){_o(this,t,4,e)};ko.prototype.resize=function(t){bo(this,t,4)},ko.prototype.clone=function(){return new ko({width:this.width,height:this.height},new Uint8Array(this.data))},ko.copy=function(t,e,n,r,i){wo(t,e,n,r,i,4)},er("AlphaImage",xo),er("RGBAImage",ko);var Co={paint:new Dr({"heatmap-radius":new Or(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Or(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pr(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ir(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pr(vt.paint_heatmap["heatmap-opacity"])})};function So(t,e){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[e]=i/255;var a=t.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new ko({width:256,height:1},n)}var Eo=function(t){function e(e){t.call(this,e,Co),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new go(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=So(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Mr),Po={paint:new Dr({"hillshade-illumination-direction":new Pr(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pr(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pr(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pr(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pr(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pr(vt.paint_hillshade["hillshade-accent-color"])})},Oo=function(t){function e(e){t.call(this,e,Po)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Mr),To=Fr([{name:"a_pos",components:2,type:"Int16"}],4).members,Ao=Do,Io=Do;function Do(t,e,n){n=n||2;var r,i,o,a,s,u,c,l=e&&e.length,h=l?e[0]*n:t.length,f=Mo(t,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(l&&(f=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Mo(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(qo(a));for(s.sort(zo),i=0;i<s.length;i++)Vo(s[i],n),n=Lo(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var p=n;p<h;p+=n)(s=t[p])<r&&(r=s),(u=t[p+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return jo(f,d,n,r,i,c),d}function Mo(t,e,n,r,i){var o,a;if(i===ta(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Jo(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Jo(o,t[o],t[o+1],a);return a&&Wo(a,a.next)&&($o(a),a=a.next),a}function Lo(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Wo(r,r.next)&&0!==Go(r.prev,r,r.next))r=r.next;else{if($o(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function jo(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Uo(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,c=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Fo(t,r,i,o):Ro(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),$o(t),t=u.next,c=u.next;else if((t=u)===c){a?1===a?jo(t=No(t,e,n),e,n,r,i,o,2):2===a&&Bo(t,e,n,r,i,o):jo(Lo(t),e,n,r,i,o,1);break}}}function Ro(t){var e=t.prev,n=t,r=t.next;if(Go(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Ho(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Go(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Fo(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Go(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=Uo(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),l=Uo(s,u,e,n,r),h=t.prevZ,f=t.nextZ;h&&h.z>=c&&f&&f.z<=l;){if(h!==t.prev&&h!==t.next&&Ho(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Go(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==t.prev&&f!==t.next&&Ho(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Go(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=c;){if(h!==t.prev&&h!==t.next&&Ho(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Go(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=l;){if(f!==t.prev&&f!==t.next&&Ho(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Go(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function No(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Wo(i,o)&&Xo(i,r,r.next,o)&&Ko(i,o)&&Ko(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),$o(r),$o(r.next),r=t=o),r=r.next}while(r!==t);return r}function Bo(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Zo(a,s)){var u=Yo(a,s);return a=Lo(a,a.next),u=Lo(u,u.next),jo(a,e,n,r,i,o),void jo(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function zo(t,e){return t.x-e.x}function Vo(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,h=n.y,f=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&Ho(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&Ko(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=Yo(e,t);Lo(n,n.next)}}function Uo(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function qo(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Ho(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Zo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Xo(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Ko(t,e)&&Ko(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Go(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Wo(t,e){return t.x===e.x&&t.y===e.y}function Xo(t,e,n,r){return!!(Wo(t,e)&&Wo(n,r)||Wo(t,r)&&Wo(n,e))||Go(t,e,n)>0!=Go(t,e,r)>0&&Go(n,r,t)>0!=Go(n,r,e)>0}function Ko(t,e){return Go(t.prev,t,t.next)<0?Go(t,e,t.next)>=0&&Go(t,t.prev,e)>=0:Go(t,e,t.prev)<0||Go(t,t.next,e)<0}function Yo(t,e){var n=new Qo(t.i,t.x,t.y),r=new Qo(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Jo(t,e,n,r){var i=new Qo(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function $o(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Qo(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ta(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function ea(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(a-c)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*c/a+l)),Math.min(i,Math.floor(n+(a-s)*c/a+l)),o)}var h=e[n],f=r,d=i;for(na(e,r,n),o(e[i],h)>0&&na(e,r,i);f<d;){for(na(e,f,d),f++,d--;o(e[f],h)<0;)f++;for(;o(e[d],h)>0;)d--}0===o(e[r],h)?na(e,r,d):na(e,++d,i),d<=n&&(r=d+1),n<=d&&(i=d-1)}}(t,e,n||0,r||t.length-1,i||ra)}function na(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ra(t,e){return t<e?-1:t>e?1:0}function ia(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=C(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(ea(o[u],e,1,o[u].length-1,oa),o[u]=o[u].slice(0,e));return o}function oa(t,e){return e.area-t.area}function aa(t,e,n){for(var r=n.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i}function sa(t,e,n,r,i){for(var o=i.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],c=u.paint.get(t+"-pattern").value;if("constant"!==c.kind){var l=c.evaluate({zoom:r-1},n,{}),h=c.evaluate({zoom:r},n,{}),f=c.evaluate({zoom:r+1},n,{});o[l]=!0,o[h]=!0,o[f]=!0,n.patterns[u.id]={min:l,mid:h,max:f}}}return n}Do.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(ta(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(ta(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,l=r[a+1]*n,h=r[a+2]*n;u+=Math.abs((t[c]-t[h])*(t[l+1]-t[c+1])-(t[c]-t[l])*(t[h+1]-t[c+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},Do.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n},Ao.default=Io;var ua=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Br,this.indexArray=new ei,this.indexArray2=new ni,this.programConfigurations=new Bi(To,t.layers,t.zoom),this.segments=new _i,this.segments2=new _i,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};ua.prototype.populate=function(t,e){this.features=[],this.hasPattern=aa("fill",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new gr(this.zoom),o)){var u=Zi(o),c={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(c.id=o.id),this.hasPattern?this.features.push(sa("fill",this.layers,c,this.zoom,e)):this.addFeature(c,u,a,{}),e.featureIndex.insert(o,u,a,s,this.index)}}},ua.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},ua.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n];this.addFeature(i,i.geometry,i.index,e)}},ua.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ua.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ua.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,To),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},ua.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ua.prototype.addFeature=function(t,e,n,r){for(var i=0,o=ia(e,500);i<o.length;i+=1){for(var a=o[i],s=0,u=0,c=a;u<c.length;u+=1)s+=c[u].length;for(var l=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),h=l.vertexLength,f=[],d=[],p=0,v=a;p<v.length;p+=1){var m=v[p];if(0!==m.length){m!==a[0]&&d.push(f.length/2);var y=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),g=y.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(g+m.length-1,g),f.push(m[0].x),f.push(m[0].y);for(var _=1;_<m.length;_++)this.layoutVertexArray.emplaceBack(m[_].x,m[_].y),this.indexArray2.emplaceBack(g+_-1,g+_),f.push(m[_].x),f.push(m[_].y);y.vertexLength+=m.length,y.primitiveLength+=m.length}}for(var b=Ao(f,d),w=0;w<b.length;w+=3)this.indexArray.emplaceBack(h+b[w],h+b[w+1],h+b[w+2]);l.vertexLength+=s,l.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r)},er("FillBucket",ua,{omit:["layers","features"]});var ca={paint:new Dr({"fill-antialias":new Pr(vt.paint_fill["fill-antialias"]),"fill-opacity":new Or(vt.paint_fill["fill-opacity"]),"fill-color":new Or(vt.paint_fill["fill-color"]),"fill-outline-color":new Or(vt.paint_fill["fill-outline-color"]),"fill-translate":new Pr(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new Pr(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Tr(vt.paint_fill["fill-pattern"])})},la=function(t){function e(e){t.call(this,e,ca)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new ua(t)},e.prototype.queryRadius=function(){return ao(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return Yi(so(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e}(Mr),ha=Fr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,fa=Math.pow(2,13);function da(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*fa)+a,i*fa*2,o*fa*2,Math.round(s))}var pa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Vr,this.indexArray=new ei,this.programConfigurations=new Bi(ha,t.layers,t.zoom),this.segments=new _i,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function va(t,e){return t.x===e.x&&(t.x<0||t.x>Ui)||t.y===e.y&&(t.y<0||t.y>Ui)}function ma(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>Ui})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>Ui})}pa.prototype.populate=function(t,e){this.features=[],this.hasPattern=aa("fill-extrusion",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new gr(this.zoom),o)){var u=Zi(o),c={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(c.id=o.id),this.hasPattern?this.features.push(sa("fill-extrusion",this.layers,c,this.zoom,e)):this.addFeature(c,u,a,{}),e.featureIndex.insert(o,u,a,s,this.index,!0)}}},pa.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n];this.addFeature(i,i.geometry,i.index,e)}},pa.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},pa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},pa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ha),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},pa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pa.prototype.addFeature=function(t,e,n,r){for(var i=0,o=ia(e,500);i<o.length;i+=1){for(var a=o[i],s=0,u=0,c=a;u<c.length;u+=1)s+=c[u].length;for(var l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,f=a;h<f.length;h+=1){var d=f[h];if(0!==d.length&&!ma(d))for(var p=0,v=0;v<d.length;v++){var m=d[v];if(v>=1){var y=d[v-1];if(!va(m,y)){l.vertexLength+4>_i.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var g=m.sub(y)._perp()._unit(),_=y.dist(m);p+_>32768&&(p=0),da(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,0,p),da(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,1,p),da(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,0,p+=_),da(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,1,p);var b=l.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),l.vertexLength+=4,l.primitiveLength+=2}}}}l.vertexLength+s>_i.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray));for(var w=[],x=[],k=l.vertexLength,C=0,S=a;C<S.length;C+=1){var E=S[C];if(0!==E.length){E!==a[0]&&x.push(w.length/2);for(var P=0;P<E.length;P++){var O=E[P];da(this.layoutVertexArray,O.x,O.y,0,0,1,1,0),w.push(O.x),w.push(O.y)}}}for(var T=Ao(w,x),A=0;A<T.length;A+=3)this.indexArray.emplaceBack(k+T[A],k+T[A+2],k+T[A+1]);l.primitiveLength+=T.length/3,l.vertexLength+=s}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r)},er("FillExtrusionBucket",pa,{omit:["layers","features"]});var ya={paint:new Dr({"fill-extrusion-opacity":new Pr(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Or(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pr(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pr(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Tr(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Or(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Or(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pr(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ga=function(t){function e(e){t.call(this,e,ya)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new pa(t)},e.prototype.queryRadius=function(){return ao(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,a,s,u){var c=so(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),l=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),f=function(t,e,n,r){for(var o=[],a=0,s=t;a<s.length;a+=1){var u=s[a],c=[u.x,u.y,0,1];po(c,c,e),o.push(new i(c[0]/c[3],c[1]/c[3]))}return o}(c,u),d=function(t,e,n,r){for(var o=[],a=[],s=r[8]*e,u=r[9]*e,c=r[10]*e,l=r[11]*e,h=r[8]*n,f=r[9]*n,d=r[10]*n,p=r[11]*n,v=0,m=t;v<m.length;v+=1){for(var y=[],g=[],_=0,b=m[v];_<b.length;_+=1){var w=b[_],x=w.x,k=w.y,C=r[0]*x+r[4]*k+r[12],S=r[1]*x+r[5]*k+r[13],E=r[2]*x+r[6]*k+r[14],P=r[3]*x+r[7]*k+r[15],O=E+c,T=P+l,A=C+h,I=S+f,D=E+d,M=P+p,L=new i((C+s)/T,(S+u)/T);L.z=O/T,y.push(L);var j=new i(A/M,I/M);j.z=D/M,g.push(j)}o.push(y),a.push(g)}return[o,a]}(r,h,l,u);return function(t,e,n){var r=1/0;Yi(n,e)&&(r=ba(n,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var u=o[s],c=[u,o[s+1],a[s+1],a[s],u];Xi(n,c)&&(r=Math.min(r,ba(n,c)))}return r!==1/0&&r}(d[0],d[1],f)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(Mr);function _a(t,e){return t.x*e.x+t.y*e.y}function ba(t,e){if(1===t.length){var n=e[0],r=e[1],i=e[3],o=t[0],a=r.sub(n),s=i.sub(n),u=o.sub(n),c=_a(a,a),l=_a(a,s),h=_a(s,s),f=_a(u,a),d=_a(u,s),p=c*h-l*l,v=(h*f-l*d)/p,m=(c*d-l*f)/p;return n.z*(1-v-m)+r.z*v+i.z*m}for(var y=1/0,g=0,_=e;g<_.length;g+=1)y=Math.min(y,_[g].z);return y}var wa=Fr([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,xa=ka;function ka(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Ca,this,e)}function Ca(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Sa(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}ka.types=["Unknown","Point","LineString","Polygon"],ka.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,o=0,a=0,s=0,u=[];t.pos<n;){if(o<=0){var c=t.readVarint();r=7&c,o=c>>3}if(o--,1===r||2===r)a+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&u.push(e),e=[]),e.push(new i(a,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&u.push(e),u},ka.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;t.pos<e;){if(r<=0){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},ka.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),c=ka.types[this.type];function l(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<u.length;r++)h[r]=u[r][0];l(u=h);break;case 2:for(r=0;r<u.length;r++)l(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Sa(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)l(u[r][i])}1===u.length?u=u[0]:c="Multi"+c;var f={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f};var Ea=Pa;function Pa(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Oa,this,e),this.length=this._features.length}function Oa(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function Ta(t,e,n){if(3===t){var r=new Ea(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}Pa.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new xa(this._pbf,e,this.extent,this._keys,this._values)};var Aa={VectorTile:function(t,e){this.layers=t.readFields(Ta,{},e)},VectorTileFeature:xa,VectorTileLayer:Ea},Ia=Aa.VectorTileFeature.types,Da=Math.cos(Math.PI/180*37.5),Ma=Math.pow(2,14)/.5;function La(t,e,n,r,i,o,a){t.emplaceBack(e.x,e.y,r?1:0,i?1:-1,Math.round(63*n.x)+128,Math.round(63*n.y)+128,1+(0===o?0:o<0?-1:1)|(.5*a&63)<<2,.5*a>>6)}var ja=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new Ur,this.indexArray=new ei,this.programConfigurations=new Bi(wa,t.layers,t.zoom),this.segments=new _i,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Ra(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(Ma-1)}ja.prototype.populate=function(t,e){this.features=[],this.hasPattern=aa("line",this.layers,e);for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new gr(this.zoom),o)){var u=Zi(o),c={sourceLayerIndex:s,index:a,geometry:u,properties:o.properties,type:o.type,patterns:{}};void 0!==o.id&&(c.id=o.id),this.hasPattern?this.features.push(sa("line",this.layers,c,this.zoom,e)):this.addFeature(c,u,a,{}),e.featureIndex.insert(o,u,a,s,this.index)}}},ja.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},ja.prototype.addFeatures=function(t,e){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n];this.addFeature(i,i.geometry,i.index,e)}},ja.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ja.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ja.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,wa),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ja.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ja.prototype.addFeature=function(t,e,n,r){for(var i=this.layers[0].layout,o=i.get("line-join").evaluate(t,{}),a=i.get("line-cap"),s=i.get("line-miter-limit"),u=i.get("line-round-limit"),c=0,l=e;c<l.length;c+=1)this.addLine(l[c],t,o,a,s,u,n,r)},ja.prototype.addLine=function(t,e,n,r,i,o,a,s){var u=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(u={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var c="Polygon"===Ia[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var h=0;h<l-1&&t[h].equals(t[h+1]);)h++;if(!(l<(c?3:2))){u&&(u.tileTotal=function(t,e,n){for(var r=0,i=e;i<n-1;i++)r+=t[i].dist(t[i+1]);return r}(t,h,l)),"bevel"===n&&(i=1.05);var f=Ui/(512*this.overscaling)*15,d=t[h],p=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.distance=0;var v,m,y,g=r,_=c?"butt":r,b=!0,w=void 0,x=void 0,k=void 0,C=void 0;this.e1=this.e2=this.e3=-1,c&&(C=d.sub(v=t[l-2])._unit()._perp());for(var S=h;S<l;S++)if(!(x=c&&S===l-1?t[h+1]:t[S+1])||!t[S].equals(x)){C&&(k=C),v&&(w=v),v=t[S],C=x?x.sub(v)._unit()._perp():k;var E=(k=k||C).add(C);0===E.x&&0===E.y||E._unit();var P=E.x*C.x+E.y*C.y,O=0!==P?1/P:1/0,T=P<Da&&w&&x;if(T&&S>h){var A=v.dist(w);if(A>2*f){var I=v.sub(v.sub(w)._mult(f/A)._round());this.distance+=I.dist(w),this.addCurrentVertex(I,this.distance,k.mult(1),0,0,!1,p,u),w=I}}var D=w&&x,M=D?n:x?g:_;if(D&&"round"===M&&(O<o?M="miter":O<=2&&(M="fakeround")),"miter"===M&&O>i&&(M="bevel"),"bevel"===M&&(O>2&&(M="flipbevel"),O<i&&(M="miter")),w&&(this.distance+=v.dist(w)),"miter"===M)E._mult(O),this.addCurrentVertex(v,this.distance,E,0,0,!1,p,u);else if("flipbevel"===M){if(O>100)E=C.clone().mult(-1);else{var L=k.x*C.y-k.y*C.x>0?-1:1,j=O*k.add(C).mag()/k.sub(C).mag();E._perp()._mult(j*L)}this.addCurrentVertex(v,this.distance,E,0,0,!1,p,u),this.addCurrentVertex(v,this.distance,E.mult(-1),0,0,!1,p,u)}else if("bevel"===M||"fakeround"===M){var R=k.x*C.y-k.y*C.x>0,F=-Math.sqrt(O*O-1);if(R?(y=0,m=F):(m=0,y=F),b||this.addCurrentVertex(v,this.distance,k,m,y,!1,p,u),"fakeround"===M){for(var N=Math.floor(8*(.5-(P-.5))),B=void 0,z=0;z<N;z++)B=C.mult((z+1)/(N+1))._add(k)._unit(),this.addPieSliceVertex(v,this.distance,B,R,p,u);this.addPieSliceVertex(v,this.distance,E,R,p,u);for(var V=N-1;V>=0;V--)B=k.mult((V+1)/(N+1))._add(C)._unit(),this.addPieSliceVertex(v,this.distance,B,R,p,u)}x&&this.addCurrentVertex(v,this.distance,C,-m,-y,!1,p,u)}else"butt"===M?(b||this.addCurrentVertex(v,this.distance,k,0,0,!1,p,u),x&&this.addCurrentVertex(v,this.distance,C,0,0,!1,p,u)):"square"===M?(b||(this.addCurrentVertex(v,this.distance,k,1,1,!1,p,u),this.e1=this.e2=-1),x&&this.addCurrentVertex(v,this.distance,C,-1,-1,!1,p,u)):"round"===M&&(b||(this.addCurrentVertex(v,this.distance,k,0,0,!1,p,u),this.addCurrentVertex(v,this.distance,k,1,1,!0,p,u),this.e1=this.e2=-1),x&&(this.addCurrentVertex(v,this.distance,C,-1,-1,!0,p,u),this.addCurrentVertex(v,this.distance,C,0,0,!1,p,u)));if(T&&S<l-1){var U=v.dist(x);if(U>2*f){var q=v.add(x.sub(v)._mult(f/U)._round());this.distance+=q.dist(v),this.addCurrentVertex(q,this.distance,C.mult(1),0,0,!1,p,u),v=q}}b=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,s)}},ja.prototype.addCurrentVertex=function(t,e,n,r,i,o,a,s){var u,c=this.layoutVertexArray,l=this.indexArray;s&&(e=Ra(e,s)),u=n.clone(),r&&u._sub(n.perp()._mult(r)),La(c,t,u,o,!1,r,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(l.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),i&&u._sub(n.perp()._mult(i)),La(c,t,u,o,!0,-i,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(l.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>Ma/2&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,i,o,a))},ja.prototype.addPieSliceVertex=function(t,e,n,r,i,o){n=n.mult(r?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(e=Ra(e,o)),La(a,t,n,!1,r,0,e),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},er("LineBucket",ja,{omit:["layers","features"]});var Fa=new Dr({"line-cap":new Pr(vt.layout_line["line-cap"]),"line-join":new Or(vt.layout_line["line-join"]),"line-miter-limit":new Pr(vt.layout_line["line-miter-limit"]),"line-round-limit":new Pr(vt.layout_line["line-round-limit"])}),Na={paint:new Dr({"line-opacity":new Or(vt.paint_line["line-opacity"]),"line-color":new Or(vt.paint_line["line-color"]),"line-translate":new Pr(vt.paint_line["line-translate"]),"line-translate-anchor":new Pr(vt.paint_line["line-translate-anchor"]),"line-width":new Or(vt.paint_line["line-width"]),"line-gap-width":new Or(vt.paint_line["line-gap-width"]),"line-offset":new Or(vt.paint_line["line-offset"]),"line-blur":new Or(vt.paint_line["line-blur"]),"line-dasharray":new Ar(vt.paint_line["line-dasharray"]),"line-pattern":new Tr(vt.paint_line["line-pattern"]),"line-gradient":new Ir(vt.paint_line["line-gradient"])}),layout:Fa},Ba=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new gr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=h({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}(Or))(Na.paint.properties["line-width"].specification);Ba.useIntegerZoom=!0;var za=function(t){function e(e){t.call(this,e,Na)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=So(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=Ba.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new ja(t)},e.prototype.queryRadius=function(t){var e=t,n=Va(oo("line-width",this,e),oo("line-gap-width",this,e)),r=oo("line-offset",this,e);return n/2+Math.abs(r)+ao(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,a,s){var u=so(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),c=s/2*Va(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(r=function(t,e){for(var n=[],r=new i(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],u=0;u<a.length;u++){var c=a[u],l=a[u+1],h=0===u?r:c.sub(a[u-1])._unit()._perp(),f=u===a.length-1?r:l.sub(c)._unit()._perp(),d=h._add(f)._unit();d._mult(1/(d.x*f.x+d.y*f.y)),s.push(d._mult(e)._add(c))}n.push(s)}return n}(r,l*s)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var o=0;o<i.length;o++)if(ro(t,i[o]))return!0;if(Ji(t,i,n))return!0}return!1}(u,r,c)},e}(Mr);function Va(t,e){return e>0?e+2*t:t}var Ua=Fr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),qa=Fr([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ha=(Fr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Fr([{name:"a_placed",components:2,type:"Uint8"}],4)),Za=(Fr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Fr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ga=Fr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Wa(t,e,n){return t.sections.forEach(function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),yr.applyArabicShaping&&(t=yr.applyArabicShaping(t)),t}(t.text,e,n)}),t}Fr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Fr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"horizontalPlacedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"}]),Fr([{type:"Float32",name:"offsetX"}]),Fr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Xa={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Ka=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);function Ya(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new gr(t+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=t;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate(new gr(t+1)),zoomRange:a,sizeRange:{min:n.evaluate(new gr(a.min)),max:n.evaluate(new gr(a.max))},propertyValue:e.value}}er("Anchor",Ka);var Ja=Aa.VectorTileFeature.types,$a=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Qa(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function ts(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}var es=function(t){this.layoutVertexArray=new Hr,this.indexArray=new ei,this.programConfigurations=t,this.segments=new _i,this.dynamicLayoutVertexArray=new Zr,this.opacityVertexArray=new Gr,this.placedSymbolArray=new ci};es.prototype.upload=function(t,e,n,r){n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ua.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,qa.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,$a,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t)},es.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},er("SymbolBuffers",es);var ns=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new _i,this.collisionVertexArray=new Kr};ns.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Ha.members,!0)},ns.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},er("CollisionBuffers",ns);var rs=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ya(this.zoom,e["text-size"]),this.iconSizeData=Ya(this.zoom,e["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};rs.prototype.createArrays=function(){this.text=new es(new Bi(Ua.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new es(new Bi(Ua.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new ns(Xr,Za.members,ni),this.collisionCircle=new ns(Xr,Ga.members,ei),this.glyphOffsetArray=new di,this.lineVertexArray=new vi,this.symbolInstances=new hi},rs.prototype.calculateGlyphDependencies=function(t,e,n,r){for(var i=0;i<t.length;i++)if(e[t.charCodeAt(i)]=!0,n&&r){var o=Xa[t.charAt(i)];o&&(e[o.charCodeAt(0)]=!0)}},rs.prototype.populate=function(t,e){var n=this.layers[0],r=n.layout,i=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==a.value.kind||a.value.value&&a.value.value.length>0,c=r.get("symbol-sort-key");if(this.features=[],s||u){for(var l=e.iconDependencies,h=e.glyphDependencies,f=new gr(this.zoom),d=0,p=t;d<p.length;d+=1){var v=p[d],m=v.feature,y=v.index,g=v.sourceLayerIndex;if(n._featureFilter(f,m)){var _=void 0;if(s){var b=n.getValueAndResolveTokens("text-field",m);_=Wa(b instanceof zt?b:zt.fromString(b),n,m)}var w=void 0;if(u&&(w=n.getValueAndResolveTokens("icon-image",m)),_||w){var x=this.sortFeaturesByKey?c.evaluate(m,{}):void 0,k={text:_,icon:w,index:y,sourceLayerIndex:g,geometry:Zi(m),properties:m.properties,type:Ja[m.type],sortKey:x};if(void 0!==m.id&&(k.id=m.id),this.features.push(k),w&&(l[w]=!0),_)for(var C=i.evaluate(m,{}).join(","),S="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),E=0,P=_.sections;E<P.length;E+=1){var O=P[E],T=sr(_.toString()),A=O.fontStack||C,I=h[A]=h[A]||{};this.calculateGlyphDependencies(O.text,I,S,T)}}}}"line"===r.get("symbol-placement")&&(this.features=function(t){var e={},n={},r=[],i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){var o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){var o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function u(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var c=0;c<t.length;c++){var l=t[c],h=l.geometry,f=l.text?l.text.toString():null;if(f){var d=u(f,h),p=u(f,h,!0);if(d in n&&p in e&&n[d]!==e[p]){var v=s(d,p,h),m=a(d,p,r[v].geometry);delete e[d],delete n[p],n[u(f,r[m].geometry,!0)]=m,r[v].geometry=null}else d in n?a(d,p,h):p in e?s(d,p,h):(o(c),e[d]=i-1,n[p]=i-1)}else o(c)}return r.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},rs.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},rs.prototype.isEmpty=function(){return 0===this.symbolInstances.length},rs.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},rs.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},rs.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},rs.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var c=o[u];this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},rs.prototype.addSymbols=function(t,e,n,r,i,o,a,s,u,c){for(var l=t.indexArray,h=t.layoutVertexArray,f=t.dynamicLayoutVertexArray,d=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,o.sortKey),p=this.glyphOffsetArray.length,v=d.vertexLength,m=0,y=e;m<y.length;m+=1){var g=y[m],_=g.tl,b=g.tr,w=g.bl,x=g.br,k=g.tex,C=d.vertexLength,S=g.glyphOffset[1];Qa(h,s.x,s.y,_.x,S+_.y,k.x,k.y,n),Qa(h,s.x,s.y,b.x,S+b.y,k.x+k.w,k.y,n),Qa(h,s.x,s.y,w.x,S+w.y,k.x,k.y+k.h,n),Qa(h,s.x,s.y,x.x,S+x.y,k.x+k.w,k.y+k.h,n),ts(f,s,0),l.emplaceBack(C,C+1,C+2),l.emplaceBack(C+1,C+2,C+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(g.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,p,this.glyphOffsetArray.length-p,v,u,c,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index,{})},rs.prototype._addCollisionDebugVertex=function(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},rs.prototype.addCollisionDebugVertices=function(t,e,n,r,o,a,s,u){var c=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),l=c.vertexLength,h=o.layoutVertexArray,f=o.collisionVertexArray,d=s.anchorX,p=s.anchorY;if(this._addCollisionDebugVertex(h,f,a,d,p,new i(t,e)),this._addCollisionDebugVertex(h,f,a,d,p,new i(n,e)),this._addCollisionDebugVertex(h,f,a,d,p,new i(n,r)),this._addCollisionDebugVertex(h,f,a,d,p,new i(t,r)),c.vertexLength+=4,u){var v=o.indexArray;v.emplaceBack(l,l+1,l+2),v.emplaceBack(l,l+2,l+3),c.primitiveLength+=2}else{var m=o.indexArray;m.emplaceBack(l,l+1),m.emplaceBack(l+1,l+2),m.emplaceBack(l+2,l+3),m.emplaceBack(l+3,l),c.primitiveLength+=4}},rs.prototype.addDebugCollisionBoxes=function(t,e,n){for(var r=t;r<e;r++){var i=this.collisionBoxArray.get(r),o=i.radius>0;this.addCollisionDebugVertices(i.x1,i.y1,i.x2,i.y2,o?this.collisionCircle:this.collisionBox,i.anchorPoint,n,o)}},rs.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e)}},rs.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,r,i){for(var o={},a=e;a<n;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var c=t.get(u);if(0===c.radius){o.iconBox={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,anchorPointX:c.anchorPointX,anchorPointY:c.anchorPointY},o.iconFeatureIndex=c.featureIndex;break}}return o},rs.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex))}},rs.prototype.hasTextData=function(){return this.text.segments.get().length>0},rs.prototype.hasIconData=function(){return this.icon.segments.get().length>0},rs.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},rs.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},rs.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),n=e.vertexStartIndex+4*e.numGlyphs,r=e.vertexStartIndex;r<n;r+=4)this.text.indexArray.emplaceBack(r,r+1,r+2),this.text.indexArray.emplaceBack(r+1,r+2,r+3)},rs.prototype.sortFeatures=function(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var e=[],n=0;n<this.symbolInstances.length;n++)e.push(n);for(var r=Math.sin(t),i=Math.cos(t),o=[],a=[],s=0;s<this.symbolInstances.length;s++){var u=this.symbolInstances.get(s);o.push(0|Math.round(r*u.anchorX+i*u.anchorY)),a.push(u.featureIndex)}e.sort(function(t,e){return o[t]-o[e]||a[e]-a[t]}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var c=0,l=e;c<l.length;c+=1){var h=l[c],f=this.symbolInstances.get(h);this.featureSortOrder.push(f.featureIndex),f.horizontalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(f.horizontalPlacedTextSymbolIndex),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(f.verticalPlacedTextSymbolIndex);var d=this.icon.placedSymbolArray.get(h);if(d.numGlyphs){var p=d.vertexStartIndex;this.icon.indexArray.emplaceBack(p,p+1,p+2),this.icon.indexArray.emplaceBack(p+1,p+2,p+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},er("SymbolBucket",rs,{omit:["layers","collisionBoxArray","features","compareText"]}),rs.MAX_GLYPHS=65535,rs.addDynamicAttributes=ts;var is=new Dr({"symbol-placement":new Pr(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new Pr(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pr(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Or(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pr(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pr(vt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pr(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pr(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pr(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Or(vt.layout_symbol["icon-size"]),"icon-text-fit":new Pr(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pr(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Or(vt.layout_symbol["icon-image"]),"icon-rotate":new Or(vt.layout_symbol["icon-rotate"]),"icon-padding":new Pr(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new Pr(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new Or(vt.layout_symbol["icon-offset"]),"icon-anchor":new Or(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pr(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pr(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pr(vt.layout_symbol["text-rotation-alignment"]),"text-field":new Or(vt.layout_symbol["text-field"]),"text-font":new Or(vt.layout_symbol["text-font"]),"text-size":new Or(vt.layout_symbol["text-size"]),"text-max-width":new Or(vt.layout_symbol["text-max-width"]),"text-line-height":new Pr(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new Or(vt.layout_symbol["text-letter-spacing"]),"text-justify":new Or(vt.layout_symbol["text-justify"]),"text-anchor":new Or(vt.layout_symbol["text-anchor"]),"text-max-angle":new Pr(vt.layout_symbol["text-max-angle"]),"text-rotate":new Or(vt.layout_symbol["text-rotate"]),"text-padding":new Pr(vt.layout_symbol["text-padding"]),"text-keep-upright":new Pr(vt.layout_symbol["text-keep-upright"]),"text-transform":new Or(vt.layout_symbol["text-transform"]),"text-offset":new Or(vt.layout_symbol["text-offset"]),"text-allow-overlap":new Pr(vt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pr(vt.layout_symbol["text-ignore-placement"]),"text-optional":new Pr(vt.layout_symbol["text-optional"])}),os={paint:new Dr({"icon-opacity":new Or(vt.paint_symbol["icon-opacity"]),"icon-color":new Or(vt.paint_symbol["icon-color"]),"icon-halo-color":new Or(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Or(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Or(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new Pr(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pr(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Or(vt.paint_symbol["text-opacity"]),"text-color":new Or(vt.paint_symbol["text-color"]),"text-halo-color":new Or(vt.paint_symbol["text-halo-color"]),"text-halo-width":new Or(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new Or(vt.paint_symbol["text-halo-blur"]),"text-translate":new Pr(vt.paint_symbol["text-translate"]),"text-translate-anchor":new Pr(vt.paint_symbol["text-translate-anchor"])}),layout:is},as=function(t){function e(e){t.call(this,e,os)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var n,r=this.layout.get(t).evaluate(e,{}),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||ln(i.value)?r:(n=e.properties,r.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""}))},e.prototype.createBucket=function(t){return new rs(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(Mr),ss={paint:new Dr({"background-color":new Pr(vt.paint_background["background-color"]),"background-pattern":new Ar(vt.paint_background["background-pattern"]),"background-opacity":new Pr(vt.paint_background["background-opacity"])})},us=function(t){function e(e){t.call(this,e,ss)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Mr),cs={paint:new Dr({"raster-opacity":new Pr(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pr(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pr(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pr(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new Pr(vt.paint_raster["raster-saturation"]),"raster-contrast":new Pr(vt.paint_raster["raster-contrast"]),"raster-resampling":new Pr(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new Pr(vt.paint_raster["raster-fade-duration"])})},ls=function(t){function e(e){t.call(this,e,cs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Mr),hs=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender||"3d"===this.implementation.renderingMode},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t)},e}(Mr),fs={circle:mo,heatmap:Eo,hillshade:Oo,fill:la,"fill-extrusion":ga,line:za,symbol:as,background:us,raster:ls};function ds(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort(function(t,e){return e.h-t.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,u=0,c=0,l=t;c<l.length;c+=1)for(var h=l[c],f=a.length-1;f>=0;f--){var d=a[f];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,u=Math.max(u,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===d.w&&h.h===d.h){var p=a.pop();f<a.length&&(a[f]=p)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(a.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}var ps=function(t,e){var n=e.pixelRatio;this.paddedRect=t,this.pixelRatio=n},vs={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};vs.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},vs.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},vs.tlbr.get=function(){return this.tl.concat(this.br)},vs.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ps.prototype,vs);var ms=function(t,e){var n={},r={},i=[];for(var o in t){var a=t[o],s={x:0,y:0,w:a.data.width+2,h:a.data.height+2};i.push(s),n[o]=new ps(s,a)}for(var u in e){var c=e[u],l={x:0,y:0,w:c.data.width+2,h:c.data.height+2};i.push(l),r[u]=new ps(l,c)}var h=ds(i),f=new ko({width:h.w||1,height:h.h||1});for(var d in t){var p=t[d],v=n[d].paddedRect;ko.copy(p.data,f,{x:0,y:0},{x:v.x+1,y:v.y+1},p.data)}for(var m in e){var y=e[m],g=r[m].paddedRect,_=g.x+1,b=g.y+1,w=y.data.width,x=y.data.height;ko.copy(y.data,f,{x:0,y:0},{x:_,y:b},y.data),ko.copy(y.data,f,{x:0,y:x-1},{x:_,y:b-1},{width:w,height:1}),ko.copy(y.data,f,{x:0,y:0},{x:_,y:b+x},{width:w,height:1}),ko.copy(y.data,f,{x:w-1,y:0},{x:_-1,y:b},{width:1,height:x}),ko.copy(y.data,f,{x:0,y:0},{x:_+w,y:b},{width:1,height:x})}this.image=f,this.iconPositions=n,this.patternPositions=r};er("ImagePosition",ps),er("ImageAtlas",ms);var ys=self.HTMLImageElement,gs=self.HTMLCanvasElement,_s=self.HTMLVideoElement,bs=self.ImageData,ws=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};ws.prototype.update=function(t,e){var n=t.width,r=t.height,i=!this.size||this.size[0]!==n||this.size[1]!==r,o=this.context,a=o.gl;this.useMipmap=Boolean(e&&e.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!e||!1!==e.premultiply)),i?(this.size=[n,r],t instanceof ys||t instanceof gs||t instanceof _s||t instanceof bs?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,n,r,0,this.format,a.UNSIGNED_BYTE,t.data)):t instanceof ys||t instanceof gs||t instanceof _s||t instanceof bs?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},ws.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},ws.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},ws.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var xs=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},ks=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*v},Cs=Ss;function Ss(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function Es(t){return t.type===Ss.Bytes?t.readVarint()+t.pos:t.pos+1}function Ps(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Os(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function Ts(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function As(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Is(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Ds(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Ms(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Ls(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function js(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Rs(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Fs(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Ns(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Bs(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function zs(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Vs(t,e,n){1===t&&n.readMessage(Us,e)}function Us(t,e,n){if(3===t){var r=n.readMessage(qs,{}),i=r.width,o=r.height,a=r.left,s=r.top,u=r.advance;e.push({id:r.id,bitmap:new xo({width:i+6,height:o+6},r.bitmap),metrics:{width:i,height:o,left:a,top:s,advance:u}})}}function qs(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}Ss.Varint=0,Ss.Fixed64=1,Ss.Bytes=2,Ss.Fixed32=5,Ss.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Ns(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=zs(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Ns(this.buf,this.pos)+4294967296*Ns(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Ns(this.buf,this.pos)+4294967296*zs(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=xs(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=xs(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Ps(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Ps(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Ps(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Ps(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Ps(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Ps(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?128==(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)<=127&&(c=null):3===l?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((c=(15&u)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=Es(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=Es(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=Es(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=Es(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=Es(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=Es(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=Es(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=Es(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=Es(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Ss.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ss.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ss.Fixed32)this.pos+=4;else{if(e!==Ss.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Bs(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Bs(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Bs(this.buf,-1&t,this.pos),Bs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Bs(this.buf,-1&t,this.pos),Bs(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Os(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),ks(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),ks(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&Os(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Ss.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,Ts,e)},writePackedSVarint:function(t,e){this.writeMessage(t,As,e)},writePackedBoolean:function(t,e){this.writeMessage(t,Ms,e)},writePackedFloat:function(t,e){this.writeMessage(t,Is,e)},writePackedDouble:function(t,e){this.writeMessage(t,Ds,e)},writePackedFixed32:function(t,e){this.writeMessage(t,Ls,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,js,e)},writePackedFixed64:function(t,e){this.writeMessage(t,Rs,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,Fs,e)},writeBytesField:function(t,e){this.writeTag(t,Ss.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Ss.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Ss.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Ss.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Ss.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Ss.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Ss.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Ss.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Ss.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Ss.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var Hs=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,m(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function Zs(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}Hs.prototype.send=function(t,e,n,r){var i=this,o=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[o]=n);var a=[];if(this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(o),data:rr(e,a)},a),n)return{cancel:function(){return i.target.postMessage({targetMapId:r,sourceMapId:i.mapId,type:"<cancel>",id:String(o)})}}},Hs.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(t,e){delete n.callbacks[i];var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?rr(t):null,data:rr(e,r)},r)};if("<response>"===r.type||"<cancel>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&r.error?e(ir(r.error)):e&&e(null,ir(r.data));else if(void 0!==r.id&&this.parent[r.type]){this.callbacks[r.id]=null;var a=this.parent[r.type](r.sourceMapId,ir(r.data),o);a&&null===this.callbacks[r.id]&&(this.callbacks[r.id]=a)}else if(void 0!==r.id&&this.parent.getWorkerSource){var s=r.type.split("."),u=ir(r.data);this.parent.getWorkerSource(r.sourceMapId,s[0],u.source)[s[1]](u,o)}else this.parent[r.type](ir(r.data))}},Hs.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var Gs=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Gs.prototype.setNorthEast=function(t){return this._ne=t instanceof Ws?new Ws(t.lng,t.lat):Ws.convert(t),this},Gs.prototype.setSouthWest=function(t){return this._sw=t instanceof Ws?new Ws(t.lng,t.lat):Ws.convert(t),this},Gs.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof Ws)e=t,n=t;else{if(!(t instanceof Gs))return Array.isArray(t)?t.every(Array.isArray)?this.extend(Gs.convert(t)):this.extend(Ws.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Ws(e.lng,e.lat),this._ne=new Ws(n.lng,n.lat)),this},Gs.prototype.getCenter=function(){return new Ws((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Gs.prototype.getSouthWest=function(){return this._sw},Gs.prototype.getNorthEast=function(){return this._ne},Gs.prototype.getNorthWest=function(){return new Ws(this.getWest(),this.getNorth())},Gs.prototype.getSouthEast=function(){return new Ws(this.getEast(),this.getSouth())},Gs.prototype.getWest=function(){return this._sw.lng},Gs.prototype.getSouth=function(){return this._sw.lat},Gs.prototype.getEast=function(){return this._ne.lng},Gs.prototype.getNorth=function(){return this._ne.lat},Gs.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Gs.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Gs.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Gs.convert=function(t){return!t||t instanceof Gs?t:new Gs(t)};var Ws=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function Xs(t){return 2*Math.PI*6378137*Math.cos(t*Math.PI/180)}function Ks(t){return(180+t)/360}function Ys(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Js(t,e){return t/Xs(e)}function $s(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}Ws.prototype.wrap=function(){return new Ws(l(this.lng,-180,180),this.lat)},Ws.prototype.toArray=function(){return[this.lng,this.lat]},Ws.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ws.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Gs(new Ws(this.lng-n,this.lat-e),new Ws(this.lng+n,this.lat+e))},Ws.convert=function(t){if(t instanceof Ws)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ws(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ws(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Qs=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};Qs.fromLngLat=function(t,e){void 0===e&&(e=0);var n=Ws.convert(t);return new Qs(Ks(n.lng),Ys(n.lat),Js(e,n.lat))},Qs.prototype.toLngLat=function(){return new Ws(360*this.x-180,$s(this.y))},Qs.prototype.toAltitude=function(){return this.z*Xs($s(this.y))};var tu=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=ru(0,t,e,n)};tu.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},tu.prototype.url=function(t,e){var n,r,i,o,a,s=(r=this.y,i=this.z,o=Zs(256*(n=this.x),256*(r=Math.pow(2,i)-r-1),i),a=Zs(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},tu.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i((t.x*e-this.x)*Ui,(t.y*e-this.y)*Ui)};var eu=function(t,e){this.wrap=t,this.canonical=e,this.key=ru(t,e.z,e.x,e.y)},nu=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new tu(n,+r,+i),this.key=ru(e,t,r,i)};function ru(t,e,n,r){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*r+n)+e}nu.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},nu.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new nu(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new nu(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},nu.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},nu.prototype.children=function(t){if(this.overscaledZ>=t)return[new nu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new nu(e,this.wrap,e,n,r),new nu(e,this.wrap,e,n+1,r),new nu(e,this.wrap,e,n,r+1),new nu(e,this.wrap,e,n+1,r+1)]},nu.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},nu.prototype.wrapped=function(){return new nu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},nu.prototype.unwrapTo=function(t){return new nu(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},nu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},nu.prototype.toUnwrapped=function(){return new eu(this.wrap,this.canonical)},nu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},nu.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Qs(t.x-this.wrap,t.y))},er("CanonicalTileID",tu),er("OverscaledTileID",nu,{omit:["posMatrix"]});var iu=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return x('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var r=this.dim=e.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var i=e.data,o="terrarium"===n?this._unpackTerrarium:this._unpackMapbox,a=0;a<r;a++)for(var s=0;s<r;s++){var u=4*(a*r+s);this.set(s,a,o(i[u],i[u+1],i[u+2]))}for(var c=0;c<r;c++)this.set(-1,c,this.get(0,c)),this.set(r,c,this.get(r-1,c)),this.set(c,-1,this.get(c,0)),this.set(c,r,this.get(c,r-1));this.set(-1,-1,this.get(0,0)),this.set(r,-1,this.get(r-1,0)),this.set(-1,r,this.get(0,r-1)),this.set(r,r,this.get(r-1,r-1))};iu.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},iu.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},iu.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},iu.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},iu.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},iu.prototype.getPixels=function(){return new ko({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},iu.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-n*this.dim,c=o;c<a;c++)for(var l=r;l<i;l++)this.set(l,c,t.get(l+s,c+u))},er("DEMData",iu);var ou=Fr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),au=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};au.prototype.encode=function(t){return this._stringToNumber[t]},au.prototype.decode=function(t){return this._numberToString[t]};var su=function(t,e,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},uu={geometry:{configurable:!0}};uu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},uu.geometry.set=function(t){this._geometry=t},su.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(su.prototype,uu);var cu=function(){this.state={},this.stateChanges={},this.deletedStates={}};cu.prototype.updateState=function(t,e,n){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},h(this.stateChanges[t][r],n),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==r&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])n[o]||(this.deletedStates[t][r][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},cu.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},cu.prototype.getState=function(t,e){var n=String(e),r=h({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var i=this.deletedStates[t][e];if(null===i)return{};for(var o in i)delete r[o]}return r},cu.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},cu.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),h(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a]){for(var u in this.state[a])s[u]={};this.state[a]={}}else for(var c in this.deletedStates[a]){if(null===this.deletedStates[a][c])this.state[a][c]={};else for(var l=0,f=Object.keys(this.deletedStates[a][c]);l<f.length;l+=1)delete this.state[a][c][f[l]];s[c]=this.state[a][c]}n[a]=n[a]||{},h(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var d in t)t[d].setFeatureState(n,e)};var lu=function(t,e,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new Jn(Ui,16,0),this.grid3D=new Jn(Ui,16,0),this.featureIndexArray=n||new yi};function hu(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:e,minY:n,maxX:r,maxY:i}}function fu(t,e){return e-t}lu.prototype.insert=function(t,e,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var c=e[u],l=[1/0,1/0,-1/0,-1/0],h=0;h<c.length;h++){var f=c[h];l[0]=Math.min(l[0],f.x),l[1]=Math.min(l[1],f.y),l[2]=Math.max(l[2],f.x),l[3]=Math.max(l[3],f.y)}l[0]<Ui&&l[1]<Ui&&l[2]>=0&&l[3]>=0&&s.insert(a,l[0],l[1],l[2],l[3])}},lu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Aa.VectorTile(new Cs(this.rawTileData)).layers,this.sourceLayerCoder=new au(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},lu.prototype.query=function(t,e,n){var r=this;this.loadVTLayers();for(var o=t.params||{},a=Ui/t.tileSize/t.scale,s=Sn(o.filter),u=t.queryGeometry,c=t.queryPadding*a,l=hu(u),h=this.grid.query(l.minX-c,l.minY-c,l.maxX+c,l.maxY+c),f=hu(t.cameraQueryGeometry),d=0,p=this.grid3D.query(f.minX-c,f.minY-c,f.maxX+c,f.maxY+c,function(e,n,r,o){return function(t,e,n,r,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a];if(e<=u.x&&n<=u.y&&r>=u.x&&o>=u.y)return!0}var c=[new i(e,n),new i(e,o),new i(r,o),new i(r,n)];if(t.length>2)for(var l=0,h=c;l<h.length;l+=1)if(ro(t,h[l]))return!0;for(var f=0;f<t.length-1;f++)if(io(t[f],t[f+1],c))return!0;return!1}(t.cameraQueryGeometry,e-c,n-c,r+c,o+c)});d<p.length;d+=1)h.push(p[d]);h.sort(fu);for(var v,m={},y=function(i){var c=h[i];if(c!==v){v=c;var l=r.featureIndexArray.get(c),f=null;r.loadMatchingFeature(m,l.bucketIndex,l.sourceLayerIndex,l.featureIndex,s,o.layers,e,function(e,i){f||(f=Zi(e));var o={};return e.id&&(o=n.getState(i.sourceLayer||"_geojsonTileLayer",e.id)),i.queryIntersectsFeature(u,e,o,f,r.z,t.transform,a,t.pixelPosMatrix)})}},g=0;g<h.length;g++)y(g);return m},lu.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,s){var u=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,u)){var c=this.sourceLayerCoder.decode(n),l=this.vtLayers[c].feature(r);if(i(new gr(this.tileID.overscaledZ),l))for(var h=0;h<u.length;h++){var f=u[h];if(!(o&&o.indexOf(f)<0)){var d=a[f];if(d){var p=!s||s(l,d);if(p){var v=new su(l,this.z,this.x,this.y);v.layer=d.serialize();var m=t[f];void 0===m&&(m=t[f]=[]),m.push({featureIndex:r,feature:v,intersectionZ:p})}}}}}},lu.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o){var a={};this.loadVTLayers();for(var s=Sn(r),u=0,c=t;u<c.length;u+=1)this.loadMatchingFeature(a,e,n,c[u],s,i,o);return a},lu.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},er("FeatureIndex",lu,{omit:["rawTileData","sourceLayerCoder"]});var du=function(t,e){this.tileID=t,this.uid=d(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};du.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<I.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},du.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},du.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=function(){var t=o[i],r=t.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(t){return r.filter(function(e){return e.id===t})[0]}));for(var a=0,s=r;a<s.length;a+=1)n[s[a].id]=t}},i=0,o=t;i<o.length;i+=1)r();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof rs){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(o).queryRadius(a))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new si},du.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},du.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},du.prototype.getBucket=function(t){return this.buckets[t.id]},du.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ws(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ws(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},du.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,s,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:r,scale:i,tileSize:this.tileSize,pixelPosMatrix:u,transform:a,params:o,queryPadding:this.queryPadding*s},t,e):{}},du.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),r=n._geojsonTileLayer||n[e?e.sourceLayer:""];if(r)for(var i=Sn(e&&e.filter),o=this.tileID.canonical,a=o.z,s=o.x,u=o.y,c={z:a,x:s,y:u},l=0;l<r.length;l++){var h=r.feature(l);if(i(new gr(this.tileID.overscaledZ),h)){var f=new su(h,a,s,u);f.tile=c,t.push(f)}}}},du.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},du.prototype.setMask=function(t,e){if(!a(this.mask,t)&&(this.mask=t,this.clearMask(),!a(t,{0:!0}))){var n=new zr,r=new ei;this.segments=new _i,this.segments.prepareSegment(0,n,r);for(var o=Object.keys(t),s=0;s<o.length;s++){var u=t[o[s]],c=Ui>>u.z,l=new i(u.x*c,u.y*c),h=new i(l.x+c,l.y+c),f=this.segments.prepareSegment(4,n,r);n.emplaceBack(l.x,l.y,l.x,l.y),n.emplaceBack(h.x,l.y,h.x,l.y),n.emplaceBack(l.x,h.y,l.x,h.y),n.emplaceBack(h.x,h.y,h.x,h.y);var d=f.vertexLength;r.emplaceBack(d,d+1,d+2),r.emplaceBack(d+1,d+2,d+3),f.vertexLength+=4,f.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(n,ou.members),this.maskedIndexBuffer=e.createIndexBuffer(r)}},du.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},du.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},du.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},du.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},du.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(r).queryRadius(i))))}}},du.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},du.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<I.now()},du.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},du.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=I.now()+t};var pu={horizontal:1,vertical:2,horizontalOnly:3},vu=function(){this.text="",this.sectionIndex=[],this.sections=[]};vu.fromFeature=function(t,e){for(var n=new vu,r=0;r<t.sections.length;r++){var i=t.sections[r];n.sections.push({scale:i.scale||1,fontStack:i.fontStack||e}),n.text+=i.text;for(var o=0;o<i.text.length;o++)n.sectionIndex.push(r)}return n},vu.prototype.length=function(){return this.text.length},vu.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},vu.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},vu.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;r&&lr(r)&&!Xa[t[n+1]]||i&&lr(i)&&!Xa[t[n-1]]||!Xa[t[n]]?e+=t[n]:e+=Xa[t[n]]}return e}(this.text)},vu.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&mu[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&mu[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},vu.prototype.substring=function(t,e){var n=new vu;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},vu.prototype.toString=function(){return this.text},vu.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,n){return Math.max(e,t.sections[n].scale)},0)};var mu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yu={};function gu(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function _u(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function bu(t,e,n,r,i,o){for(var a=null,s=gu(e,n,i,o),u=0,c=r;u<c.length;u+=1){var l=c[u],h=gu(e-l.x,n,i,o)+l.badness;h<=s&&(a=l,s=h)}return{index:t,x:e,priorBreak:a,badness:s}}function wu(t,e,n,r){if(!n)return[];if(!t)return[];for(var i,o=[],a=function(t,e,n,r){for(var i=0,o=0;o<t.length();o++){var a=t.getSection(o),s=r[a.fontStack],u=s&&s[t.getCharCode(o)];u&&(i+=u.metrics.advance*a.scale+e)}return i/Math.max(1,Math.ceil(i/n))}(t,e,n,r),s=0,u=0;u<t.length();u++){var c=t.getSection(u),l=t.getCharCode(u),h=r[c.fontStack],f=h&&h[l];f&&!mu[l]&&(s+=f.metrics.advance*c.scale+e),u<t.length()-1&&(yu[l]||!((i=l)<11904)&&(ar["Bopomofo Extended"](i)||ar.Bopomofo(i)||ar["CJK Compatibility Forms"](i)||ar["CJK Compatibility Ideographs"](i)||ar["CJK Compatibility"](i)||ar["CJK Radicals Supplement"](i)||ar["CJK Strokes"](i)||ar["CJK Symbols and Punctuation"](i)||ar["CJK Unified Ideographs Extension A"](i)||ar["CJK Unified Ideographs"](i)||ar["Enclosed CJK Letters and Months"](i)||ar["Halfwidth and Fullwidth Forms"](i)||ar.Hiragana(i)||ar["Ideographic Description Characters"](i)||ar["Kangxi Radicals"](i)||ar["Katakana Phonetic Extensions"](i)||ar.Katakana(i)||ar["Vertical Forms"](i)||ar["Yi Radicals"](i)||ar["Yi Syllables"](i)))&&o.push(bu(u+1,s,a,o,_u(l,t.getCharCode(u+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(bu(t.length(),s,a,o,0,!0))}function xu(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function ku(t,e,n,r,i){if(i){var o=t[r],a=e[o.fontStack],s=a&&a[o.glyph];if(s)for(var u=(t[r].x+s.metrics.advance*o.scale)*i,c=n;c<=r;c++)t[c].x-=u}}yu[10]=!0,yu[32]=!0,yu[38]=!0,yu[40]=!0,yu[41]=!0,yu[43]=!0,yu[45]=!0,yu[47]=!0,yu[173]=!0,yu[183]=!0,yu[8203]=!0,yu[8208]=!0,yu[8211]=!0,yu[8231]=!0,t.createCommonjsModule=e,t.window=self,t.Point=i,t.browser=I,t.getJSON=function(t,e){return st(h(t,{type:"json"}),e)},t.normalizeSpriteURL=function(t,e,n,r){var i=G(t);return B(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+n,N(i,r)):(i.path+=""+e+n,W(i))},t.ResourceType=et,t.getImage=function t(e,n){if(ot>=D.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:e,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return it.push(r),r}ot++;var i=!1,o=function(){if(!i)for(i=!0,ot--;it.length&&ot<D.MAX_PARALLEL_IMAGE_REQUESTS;){var e=it.shift();e.cancelled||(e.cancel=t(e.requestParameters,e.callback).cancel)}},a=ut(e,function(t,e,r,i){if(o(),t)n(t);else if(e){var a=new self.Image,s=self.URL||self.webkitURL;a.onload=function(){n(null,a),s.revokeObjectURL(a.src)},a.onerror=function(){return n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var u=new self.Blob([new Uint8Array(e)],{type:"image/png"});a.cacheControl=r,a.expires=i,a.src=e.byteLength?s.createObjectURL(u):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}});return{cancel:function(){a.cancel(),o()}}},t.RGBAImage=ko,t.ImagePosition=ps,t.Texture=ws,t.potpack=ds,t.normalizeGlyphsURL=function(t,e){if(!B(t))return t;var n=G(t);return n.path="/fonts/v1"+n.path,N(n,e)},t.getArrayBuffer=ut,t.parseGlyphPBF=function(t){return new Cs(t).readFields(Vs,[])},t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)})})},t.isChar=ar,t.AlphaImage=xo,t.Properties=Dr,t.DataConstantProperty=Pr,t.styleSpec=vt,t.validateLight=Wn,t.endsWith=y,t.emitValidationErrors=Yn,t.validateStyle=Gn,t.extend=h,t.Evented=pt,t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.number=ue,t.Transitionable=wr,t.warnOnce=x,t.uniqueId=d,t.Actor=Hs,t.normalizeSourceURL=function(t,e){if(!B(t))return t;var n=G(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),N(n,e)},t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.canonicalizeTileset=function(t,e){if(!B(e))return t.tiles||[];for(var n=[],r=0,i=t.tiles;r<i.length;r+=1){var o=H(i[r]);n.push(o)}return n},t.LngLatBounds=Gs,t.mercatorXfromLng=Ks,t.mercatorYfromLat=Ys,t.Event=ft,t.ErrorEvent=dt,t.postTurnstileEvent=$,t.postMapLoadEvent=tt,t.normalizeTileURL=function(t,e,n){if(!e||!B(e))return t;var r=G(t);return r.path=r.path.replace(U,(I.devicePixelRatio>=2||512===n?"@2x":"")+(M.supported?".webp":"$1")),r.path="/v4"+r.path,N(r)},t.OverscaledTileID=nu,t.EXTENT=Ui,t.MercatorCoordinate=Qs,t.CanonicalTileID=tu,t.StructArrayLayout4i8=zr,t.rasterBoundsAttributes=ou,t.SegmentVector=_i,t.getVideo=function(t,e){var n,r,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");n=t[o],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.ValidationError=mt,t.bindAll=m,t.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],g=e[15],_=n[0],b=n[1],w=n[2],x=n[3];return t[0]=_*r+b*s+w*h+x*v,t[1]=_*i+b*u+w*f+x*m,t[2]=_*o+b*c+w*d+x*y,t[3]=_*a+b*l+w*p+x*g,t[4]=(_=n[4])*r+(b=n[5])*s+(w=n[6])*h+(x=n[7])*v,t[5]=_*i+b*u+w*f+x*m,t[6]=_*o+b*c+w*d+x*y,t[7]=_*a+b*l+w*p+x*g,t[8]=(_=n[8])*r+(b=n[9])*s+(w=n[10])*h+(x=n[11])*v,t[9]=_*i+b*u+w*f+x*m,t[10]=_*o+b*c+w*d+x*y,t[11]=_*a+b*l+w*p+x*g,t[12]=(_=n[12])*r+(b=n[13])*s+(w=n[14])*h+(x=n[15])*v,t[13]=_*i+b*u+w*f+x*m,t[14]=_*o+b*c+w*d+x*y,t[15]=_*a+b*l+w*p+x*g,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.translate=function(t,e,n){var r,i,o,a,s,u,c,l,h,f,d,p,v=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*y+e[12],t[13]=e[1]*v+e[5]*m+e[9]*y+e[13],t[14]=e[2]*v+e[6]*m+e[10]*y+e[14],t[15]=e[3]*v+e[7]*m+e[11]*y+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=r*v+s*m+h*y+e[12],t[13]=i*v+u*m+f*y+e[13],t[14]=o*v+c*m+d*y+e[14],t[15]=a*v+l*m+p*y+e[15]),t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.Color=Ft,t.isEqual=a,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.Tile=du,t.SourceFeatureState=cu,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+h*r,t[3]=u*i+f*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=h*i-s*r,t[7]=f*i-u*r,t},t.evaluateSizeForZoom=function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var r=t.zoomRange,i=t.sizeRange,o=c(mn(t.propertyValue,n.specification).interpolationFactor(e,r.min,r.max),0,1);return{uSizeT:0,uSize:i.min+o*(i.max-i.min)}}var a=t.zoomRange;return{uSizeT:c(mn(t.propertyValue,n.specification).interpolationFactor(e,a.min,a.max),0,1),uSize:0}},t.WritingMode=pu,t.transformMat4=po,t.evaluateSizeForFeature=function(t,e,n){var r=e;return"source"===t.functionType?n.lowerSize/256:"composite"===t.functionType?ue(n.lowerSize/256,n.upperSize/256,r.uSizeT):r.uSize},t.addDynamicAttributes=ts,t.properties=os,t.polygonIntersectsPolygon=Xi,t.isMapboxURL=B,t.normalizeStyleURL=function(t,e){if(!B(t))return t;var n=G(t);return n.path="/styles/v1"+n.path,N(n,e)},t.createStyleLayer=function(t){return"custom"===t.type?new hs(t):new fs[t.type](t)},t.clone=b,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.filterObject=_,t.mapObject=g,t.evented=mr,t.makeRequest=st,t.registerForPluginAvailability=function(t){return pr?t({pluginURL:pr,completionCallback:fr}):mr.once("pluginAvailable",t),t},t.ZoomHistory=or,t.getReferrer=at,t.createLayout=Fr,t.UniformMatrix4f=Ii,t.Uniform3f=Pi,t.Uniform1f=Si,t.Uniform1i=Ci,t.Uniform2f=Ei,t.Uniform4f=Oi,t.create=lo,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.create$1=function(){var t=new co(16);return co!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},t.UniformColor=Ti,t.clamp=c,t.StructArrayLayout2i4=Br,t.StructArrayLayout2ui4=ni,t.ProgramConfiguration=Ni,t.StructArrayLayout1ui2=ri,t.StructArrayLayout3ui6=ei,t.wrap=l,t.create$2=function(){var t=new co(4);return co!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},t.LngLat=Ws,t.UnwrappedTileID=eu,t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+h*r,t[7]=u*i+f*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=h*i-s*r,t[11]=f*i-u*r,t},t.mercatorZfromAltitude=Js,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15],g=n*s-r*a,_=n*u-i*a,b=n*c-o*a,w=r*u-i*s,x=r*c-o*s,k=i*c-o*u,C=l*v-h*p,S=l*m-f*p,E=l*y-d*p,P=h*m-f*v,O=h*y-d*v,T=f*y-d*m,A=g*T-_*O+b*P+w*E-x*S+k*C;return A?(t[0]=(s*T-u*O+c*P)*(A=1/A),t[1]=(i*O-r*T-o*P)*A,t[2]=(v*k-m*x+y*w)*A,t[3]=(f*x-h*k-d*w)*A,t[4]=(u*E-a*T-c*S)*A,t[5]=(n*T-i*E+o*S)*A,t[6]=(m*b-p*k-y*_)*A,t[7]=(l*k-f*b+d*_)*A,t[8]=(a*O-s*E+c*C)*A,t[9]=(r*E-n*O-o*C)*A,t[10]=(p*x-v*b+y*g)*A,t[11]=(h*b-l*x-d*g)*A,t[12]=(s*S-a*P-u*C)*A,t[13]=(n*P-r*S+i*C)*A,t[14]=(v*_-p*w-m*g)*A,t[15]=(l*w-h*_+f*g)*A,t):null},t.ease=u,t.bezier=s,t.config=D,t.webpSupported=M,t.EvaluationParameters=gr,t.version="0.53.1",t.setRTLTextPlugin=function(t,e){if(dr)throw new Error("setRTLTextPlugin cannot be called multiple times.");dr=!0,pr=I.resolveURL(t),fr=function(t){t?(dr=!1,pr=null,e&&e(t)):vr=!0},mr.fire(new ft("pluginAvailable",{pluginURL:pr,completionCallback:fr}))},t.featureFilter=Sn,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.Anchor=Ka,t.GLYPH_PBF_BORDER=3,t.distToSegmentSquared=eo,t.allowsLetterSpacing=function(t){for(var e=0,n=t;e<n.length;e+=1)if(!ur(n[e].charCodeAt(0)))return!1;return!0},t.shapeText=function(t,e,n,r,i,o,a,s,u,c,l){var h=vu.fromFeature(t,n);l===pu.vertical&&h.verticalizePunctuation();var f,d=[],p={positionedGlyphs:d,text:h,top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:l},v=yr.processBidirectionalText,m=yr.processStyledBidirectionalText;if(v&&1===h.sections.length){f=[];for(var y=0,g=v(h.toString(),wu(h,s,r,e));y<g.length;y+=1){var _=g[y],b=new vu;b.text=_,b.sections=h.sections;for(var w=0;w<_.length;w++)b.sectionIndex.push(0);f.push(b)}}else if(m){f=[];for(var x=0,k=m(h.text,h.sectionIndex,wu(h,s,r,e));x<k.length;x+=1){var C=k[x],S=new vu;S.text=C[0],S.sectionIndex=C[1],S.sections=h.sections,f.push(S)}}else f=function(t,e){for(var n=[],r=t.text,i=0,o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t.substring(i,s)),i=s}return i<r.length&&n.push(t.substring(i,r.length)),n}(h,wu(h,s,r,e));return function(t,e,n,r,i,o,a,s,u){for(var c=0,l=-17,h=0,f=t.positionedGlyphs,d="right"===o?1:"left"===o?0:.5,p=0,v=n;p<v.length;p+=1){var m=v[p];m.trim();var y=m.getMaxScale();if(m.length()){for(var g=f.length,_=0;_<m.length();_++){var b=m.getSection(_),w=m.getCharCode(_),x=24*(y-b.scale),k=e[b.fontStack],C=k&&k[w];C&&(cr(w)&&a!==pu.horizontal?(f.push({glyph:w,x:c,y:x,vertical:!0,scale:b.scale,fontStack:b.fontStack}),c+=u*b.scale+s):(f.push({glyph:w,x:c,y:l+x,vertical:!1,scale:b.scale,fontStack:b.fontStack}),c+=C.metrics.advance*b.scale+s))}f.length!==g&&(h=Math.max(c-s,h),ku(f,e,g,f.length-1,d)),c=0,l+=r*y}else l+=r}var S=xu(i),E=S.horizontalAlign,P=S.verticalAlign;!function(t,e,n,r,i,o,a){for(var s=(e-n)*i,u=(-r*a+.5)*o,c=0;c<t.length;c++)t[c].x+=s,t[c].y+=u}(f,d,E,P,h,r,n.length);var O=l- -17;t.top+=-P*O,t.bottom=t.top+O,t.left+=-E*h,t.right=t.left+h}(p,e,f,i,o,a,l,s,c),!!d.length&&(p.text=p.text.toString(),p)},t.allowsVerticalWritingMode=sr,t.shapeIcon=function(t,e,n){var r=xu(n),i=e[0]-t.displaySize[0]*r.horizontalAlign,o=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:i,right:i+t.displaySize[0]}},t.classifyRings=ia,t.SIZE_PACK_FACTOR=256,t.SymbolBucket=rs,t.register=er,t.CollisionBoxArray=si,t.DictionaryCoder=au,t.FeatureIndex=lu,t.ImageAtlas=ms,t.LineBucket=ja,t.FillBucket=ua,t.FillExtrusionBucket=pa,t.mvt=Aa,t.Protobuf=Cs,t.DEMData=iu,t.vectorTile=Aa,t.Point$1=i,t.pbf=Cs,t.createExpression=hn,t.plugin=yr}),r(0,function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=t.refProperties;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}var r=function(t){t&&this.replace(t)};function i(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],c=0;s<n/2;){var l=t[a],h=t[a+1];if(!h)return!1;var f=t[a-1].angleTo(l)-l.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),c+=f;s-u[0].distance>r;)c-=u.shift().angleDelta;if(c>i)return!1;a++,s+=l.dist(h)}return!0}function o(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function a(t,e,n){return t?.6*e*n:0}function s(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function u(e,n,r,u,c,l){for(var h=a(r,c,l),f=s(r,u)*l,d=0,p=o(e)/2,v=0;v<e.length-1;v++){var m=e[v],y=e[v+1],g=m.dist(y);if(d+g>p){var _=(p-d)/g,b=t.number(m.x,y.x,_),w=t.number(m.y,y.y,_),x=new t.Anchor(b,w,y.angleTo(m),v);return x._round(),!h||i(e,x,f,h,n)?x:void 0}d+=g}}function c(e,n,r,u,c,l,h,f,d){var p=a(u,l,h),v=s(u,c),m=v*h,y=0===e[0].x||e[0].x===d||0===e[0].y||e[0].y===d;return n-m<n/4&&(n=m+n/4),function e(n,r,a,s,u,c,l,h,f){for(var d=c/2,p=o(n),v=0,m=r-a,y=[],g=0;g<n.length-1;g++){for(var _=n[g],b=n[g+1],w=_.dist(b),x=b.angleTo(_);m+a<v+w;){var k=((m+=a)-v)/w,C=t.number(_.x,b.x,k),S=t.number(_.y,b.y,k);if(C>=0&&C<f&&S>=0&&S<f&&m-d>=0&&m+d<=p){var E=new t.Anchor(C,S,x,g);E._round(),s&&!i(n,E,c,s,u)||y.push(E)}}v+=w}return h||y.length||l||(y=e(n,v/2,a,s,u,c,l,!0,f)),y}(e,y?n/2*f%n:(v/2+2*l)*h*f%n,n,p,r,m,y,!1,d)}r.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},r.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter)}for(var c=0,l=r;c<l.length;c+=1){var h=l[c];delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var f=0,d=function(t){for(var e={},r=0;r<t.length;r++){var i=n(t[r]),o=e[i];o||(o=e[i]=[]),o.push(t[r])}var a=[];for(var s in e)a.push(e[s]);return a}(t.values(this._layerConfigs));f<d.length;f+=1){var p=d[f].map(function(t){return i._layers[t.id]}),v=p[0];if("none"!==v.visibility){var m=v.source||"",y=this.familiesBySource[m];y||(y=this.familiesBySource[m]={});var g=v.sourceLayer||"_geojsonTileLayer",_=y[g];_||(_=y[g]=[]),_.push(p)}}};var l=function(e,n,r,i,o,a,s,u,c,l,h,f){var d=s.top*u-c,p=s.bottom*u+c,v=s.left*u-c,m=s.right*u+c;if(this.boxStartIndex=e.length,l){var y=p-d,g=m-v;y>0&&(y=Math.max(10*u,y),this._addLineCollisionCircles(e,n,r,r.segment,g,y,i,o,a,h))}else{if(f){var _=new t.Point(v,d),b=new t.Point(m,d),w=new t.Point(v,p),x=new t.Point(m,p),k=f*Math.PI/180;_._rotate(k),b._rotate(k),w._rotate(k),x._rotate(k),v=Math.min(_.x,b.x,w.x,x.x),m=Math.max(_.x,b.x,w.x,x.x),d=Math.min(_.y,b.y,w.y,x.y),p=Math.max(_.y,b.y,w.y,x.y)}e.emplaceBack(r.x,r.y,v,d,m,p,i,o,a,0,0)}this.boxEndIndex=e.length};l.prototype._addLineCollisionCircles=function(t,e,n,r,i,o,a,s,u,c){var l=o/2,h=Math.floor(i/l)||1,f=1+.4*Math.log(c)/Math.LN2,d=Math.floor(h*f/2),p=-o/2,v=n,m=r+1,y=p,g=-i/2,_=g-i/4;do{if(--m<0){if(y>g)return;m=0;break}y-=e[m].dist(v),v=e[m]}while(y>_);for(var b=e[m].dist(e[m+1]),w=-d;w<h+d;w++){var x=w*l,k=g+x;if(x<0&&(k+=x),x>i&&(k+=x-i),!(k<y)){for(;y+b<k;){if(y+=b,1+ ++m>=e.length)return;b=e[m].dist(e[m+1])}var C=k-y,S=e[m],E=e[m+1].sub(S)._unit()._mult(C)._add(S)._round(),P=Math.abs(k-p)<l?0:.8*(k-p);t.emplaceBack(E.x,E.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,P)}}};var h=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=f),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function f(t,e){return t<e?-1:t>e?1:0}function d(e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,u=e[0],c=0;c<u.length;c++){var l=u[c];(!c||l.x<i)&&(i=l.x),(!c||l.y<o)&&(o=l.y),(!c||l.x>a)&&(a=l.x),(!c||l.y>s)&&(s=l.y)}var f=Math.min(a-i,s-o),d=f/2,m=new h([],p);if(0===f)return new t.Point(i,o);for(var y=i;y<a;y+=f)for(var g=o;g<s;g+=f)m.push(new v(y+d,g+d,d,e));for(var _=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],c=i[s],l=u.x*c.y-c.x*u.y;n+=(u.x+c.x)*l,r+=(u.y+c.y)*l,e+=3*l}return new v(n/e,r/e,0,t)}(e),b=m.length;m.length;){var w=m.pop();(w.d>_.d||!_.d)&&(_=w,r&&console.log("found best %d after %d probes",Math.round(1e4*w.d)/1e4,b)),w.max-_.d<=n||(m.push(new v(w.p.x-(d=w.h/2),w.p.y-d,d,e)),m.push(new v(w.p.x+d,w.p.y-d,d,e)),m.push(new v(w.p.x-d,w.p.y+d,d,e)),m.push(new v(w.p.x+d,w.p.y+d,d,e)),b+=4)}return r&&(console.log("num probes: "+b),console.log("best distance: "+_.d)),_.p}function p(t,e){return e.max-t.max}function v(e,n,r,i){this.p=new t.Point(e,n),this.h=r,this.d=function(e,n){for(var r=!1,i=1/0,o=0;o<n.length;o++)for(var a=n[o],s=0,u=a.length,c=u-1;s<u;c=s++){var l=a[s],h=a[c];l.y>e.y!=h.y>e.y&&e.x<(h.x-l.x)*(e.y-l.y)/(h.y-l.y)+l.x&&(r=!r),i=Math.min(i,t.distToSegmentSquared(e,l,h))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}h.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},h.prototype.pop=function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},h.prototype.peek=function(){return this.data[0]},h.prototype._up=function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},h.prototype._down=function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i};var m=t.createCommonjsModule(function(t){t.exports=function(t,e){var n,r,i,o,a,s,u,c;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,c=0;c<r;)u=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&t.charCodeAt(c+2))<<16;case 2:u^=(255&t.charCodeAt(c+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(c)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}}),y=t.createCommonjsModule(function(t){t.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}}),g=m,_=y;function b(e,n,r,i,o,a){e.createArrays(),e.tilePixelRatio=t.EXTENT/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var s=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var l=e.textSizeData.zoomRange,h=l.max;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new t.EvaluationParameters(l.min)),u["text-size"].possiblyEvaluate(new t.EvaluationParameters(h))]}if("composite"===e.iconSizeData.functionType){var f=e.iconSizeData.zoomRange,d=f.max;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(f.min)),u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(d))]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new t.EvaluationParameters(e.zoom+1)),c.textMaxSize=u["text-size"].possiblyEvaluate(new t.EvaluationParameters(18));for(var p=24*s.get("text-line-height"),v="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),m=s.get("text-keep-upright"),y=0,g=e.features;y<g.length;y+=1){var _=g[y],b=s.get("text-font").evaluate(_,{}).join(","),x=r,k={},C=_.text;if(C){var S=C.toString(),E=s.get("text-offset").evaluate(_,{}).map(function(t){return 24*t}),P=24*s.get("text-letter-spacing").evaluate(_,{}),O=t.allowsLetterSpacing(S)?P:0,T=s.get("text-anchor").evaluate(_,{}),A=s.get("text-justify").evaluate(_,{}),I="point"===s.get("symbol-placement")?24*s.get("text-max-width").evaluate(_,{}):0;k.horizontal=t.shapeText(C,n,b,I,p,T,A,O,E,24,t.WritingMode.horizontal),t.allowsVerticalWritingMode(S)&&v&&m&&(k.vertical=t.shapeText(C,n,b,I,p,T,A,O,E,24,t.WritingMode.vertical))}var D=void 0;if(_.icon){var M=i[_.icon];M&&(D=t.shapeIcon(o[_.icon],s.get("icon-offset").evaluate(_,{}),s.get("icon-anchor").evaluate(_,{})),void 0===e.sdfIcons?e.sdfIcons=M.sdf:e.sdfIcons!==M.sdf&&t.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(M.pixelRatio!==e.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}(k.horizontal||D)&&w(e,_,k,D,x,c)}a&&e.generateCollisionDebugBuffers()}function w(e,n,r,i,o,a){var s=a.layoutTextSize.evaluate(n,{}),h=a.layoutIconSize.evaluate(n,{}),f=a.textMaxSize.evaluate(n,{});void 0===f&&(f=s);var p=e.layers[0].layout,v=p.get("text-offset").evaluate(n,{}),m=p.get("icon-offset").evaluate(n,{}),y=e.tilePixelRatio*(s/24),_=e.tilePixelRatio*f/24,b=e.tilePixelRatio*h,w=e.tilePixelRatio*p.get("symbol-spacing"),S=p.get("text-padding")*e.tilePixelRatio,E=p.get("icon-padding")*e.tilePixelRatio,P=p.get("text-max-angle")/180*Math.PI,O="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),T="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),A=p.get("symbol-placement"),I=w/2,D=function(s,u){u.x<0||u.x>=t.EXTENT||u.y<0||u.y>=t.EXTENT||function(e,n,r,i,o,a,s,u,c,h,f,d,p,v,m,y,_,b,w,C,S){var E,P,O=e.addToLineVertexArray(n,r),T=0,A=0,I=0,D=g(i.horizontal?i.horizontal.text:""),M=[];if(i.horizontal){var L=a.layout.get("text-rotate").evaluate(w,{});E=new l(s,r,n,u,c,h,i.horizontal,f,d,p,e.overscaling,L),A+=k(e,n,i.horizontal,a,p,w,v,O,i.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,M,C,S),i.vertical&&(I+=k(e,n,i.vertical,a,p,w,v,O,t.WritingMode.vertical,M,C,S))}var j=E?E.boxStartIndex:e.collisionBoxArray.length,R=E?E.boxEndIndex:e.collisionBoxArray.length;if(o){var F=function(e,n,r,i,o,a){var s,u,c,l,h=n.image,f=r.layout,d=n.top-1/h.pixelRatio,p=n.left-1/h.pixelRatio,v=n.bottom+1/h.pixelRatio,m=n.right+1/h.pixelRatio;if("none"!==f.get("icon-text-fit")&&o){var y=m-p,g=v-d,_=f.get("text-size").evaluate(a,{})/24,b=o.left*_,w=o.top*_,x=o.right*_-b,k=o.bottom*_-w,C=f.get("icon-text-fit-padding")[0],S=f.get("icon-text-fit-padding")[1],E=f.get("icon-text-fit-padding")[2],P=f.get("icon-text-fit-padding")[3],O="width"===f.get("icon-text-fit")?.5*(k-g):0,T="height"===f.get("icon-text-fit")?.5*(x-y):0,A="width"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?x:y,I="height"===f.get("icon-text-fit")||"both"===f.get("icon-text-fit")?k:g;s=new t.Point(b+T-P,w+O-C),u=new t.Point(b+T+S+A,w+O-C),c=new t.Point(b+T+S+A,w+O+E+I),l=new t.Point(b+T-P,w+O+E+I)}else s=new t.Point(p,d),u=new t.Point(m,d),c=new t.Point(m,v),l=new t.Point(p,v);var D=r.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(D){var M=Math.sin(D),L=Math.cos(D),j=[L,-M,M,L];s._matMult(j),u._matMult(j),l._matMult(j),c._matMult(j)}return[{tl:s,tr:u,bl:l,br:c,tex:h.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,o,a,0,i.horizontal,w),N=a.layout.get("icon-rotate").evaluate(w,{});P=new l(s,r,n,u,c,h,o,m,y,!1,e.overscaling,N),T=4*F.length;var B=e.iconSizeData,z=null;"source"===B.functionType?(z=[t.SIZE_PACK_FACTOR*a.layout.get("icon-size").evaluate(w,{})])[0]>x&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===B.functionType&&((z=[t.SIZE_PACK_FACTOR*S.compositeIconSizes[0].evaluate(w,{}),t.SIZE_PACK_FACTOR*S.compositeIconSizes[1].evaluate(w,{})])[0]>x||z[1]>x)&&t.warnOnce(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),e.addSymbols(e.icon,F,z,b,_,w,!1,n,O.lineStartIndex,O.lineLength)}var V=P?P.boxStartIndex:e.collisionBoxArray.length,U=P?P.boxEndIndex:e.collisionBoxArray.length;e.glyphOffsetArray.length>=t.SymbolBucket.MAX_GLYPHS&&t.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),e.symbolInstances.emplaceBack(n.x,n.y,M.length>0?M[0]:-1,M.length>1?M[1]:-1,D,j,R,V,U,u,A,I,T,0)}(e,u,s,r,i,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,y,S,O,v,b,E,T,m,n,o,a)};if("line"===A)for(var M=0,L=function(e,n,r,i,o){for(var a=[],s=0;s<e.length;s++)for(var u=e[s],c=void 0,l=0;l<u.length-1;l++){var h=u[l],f=u[l+1];h.x<0&&f.x<0||(h.x<0?h=new t.Point(0,h.y+(0-h.x)/(f.x-h.x)*(f.y-h.y))._round():f.x<0&&(f=new t.Point(0,h.y+(0-h.x)/(f.x-h.x)*(f.y-h.y))._round()),h.y<0&&f.y<0||(h.y<0?h=new t.Point(h.x+(0-h.y)/(f.y-h.y)*(f.x-h.x),0)._round():f.y<0&&(f=new t.Point(h.x+(0-h.y)/(f.y-h.y)*(f.x-h.x),0)._round()),h.x>=i&&f.x>=i||(h.x>=i?h=new t.Point(i,h.y+(i-h.x)/(f.x-h.x)*(f.y-h.y))._round():f.x>=i&&(f=new t.Point(i,h.y+(i-h.x)/(f.x-h.x)*(f.y-h.y))._round()),h.y>=o&&f.y>=o||(h.y>=o?h=new t.Point(h.x+(o-h.y)/(f.y-h.y)*(f.x-h.x),o)._round():f.y>=o&&(f=new t.Point(h.x+(o-h.y)/(f.y-h.y)*(f.x-h.x),o)._round()),c&&h.equals(c[c.length-1])||a.push(c=[h]),c.push(f)))))}return a}(n.geometry,0,0,t.EXTENT,t.EXTENT);M<L.length;M+=1)for(var j=L[M],R=0,F=c(j,w,P,r.vertical||r.horizontal,i,24,_,e.overscaling,t.EXTENT);R<F.length;R+=1){var N=F[R],B=r.horizontal;B&&C(e,B.text,I,N)||D(j,N)}else if("line-center"===A)for(var z=0,V=n.geometry;z<V.length;z+=1){var U=V[z];if(U.length>1){var q=u(U,P,r.vertical||r.horizontal,i,24,_);q&&D(U,q)}}else if("Polygon"===n.type)for(var H=0,Z=t.classifyRings(n.geometry,0);H<Z.length;H+=1){var G=Z[H],W=d(G,16);D(G[0],new t.Anchor(W.x,W.y,0))}else if("LineString"===n.type)for(var X=0,K=n.geometry;X<K.length;X+=1){var Y=K[X];D(Y,new t.Anchor(Y[0].x,Y[0].y,0))}else if("Point"===n.type)for(var J=0,$=n.geometry;J<$.length;J+=1)for(var Q=0,tt=$[J];Q<tt.length;Q+=1){var et=tt[Q];D([et],new t.Anchor(et.x,et.y,0))}}g.murmur3=m,g.murmur2=_;var x=65535;function k(e,n,r,i,o,a,s,u,c,l,h,f){var d=function(e,n,r,i,o,a){for(var s=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=r.layout.get("text-offset").evaluate(o,{}).map(function(t){return 24*t}),c=n.positionedGlyphs,l=[],h=0;h<c.length;h++){var f=c[h],d=a[f.fontStack],p=d&&d[f.glyph];if(p){var v=p.rect;if(v){var m=t.GLYPH_PBF_BORDER+1,y=p.metrics.advance*f.scale/2,g=i?[f.x+y,f.y]:[0,0],_=i?[0,0]:[f.x+y+u[0],f.y+u[1]],b=(p.metrics.left-m)*f.scale-y+_[0],w=(-p.metrics.top-m)*f.scale+_[1],x=b+v.w*f.scale,k=w+v.h*f.scale,C=new t.Point(b,w),S=new t.Point(x,w),E=new t.Point(b,k),P=new t.Point(x,k);if(i&&f.vertical){var O=new t.Point(-y,y),T=-Math.PI/2,A=new t.Point(5,0);C._rotateAround(T,O)._add(A),S._rotateAround(T,O)._add(A),E._rotateAround(T,O)._add(A),P._rotateAround(T,O)._add(A)}if(s){var I=Math.sin(s),D=Math.cos(s),M=[D,-I,I,D];C._matMult(M),S._matMult(M),E._matMult(M),P._matMult(M)}l.push({tl:C,tr:S,bl:E,br:P,tex:v,writingMode:n.writingMode,glyphOffset:g})}}}return l}(0,r,i,o,a,h),p=e.textSizeData,v=null;return"source"===p.functionType?(v=[t.SIZE_PACK_FACTOR*i.layout.get("text-size").evaluate(a,{})])[0]>x&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===p.functionType&&((v=[t.SIZE_PACK_FACTOR*f.compositeTextSizes[0].evaluate(a,{}),t.SIZE_PACK_FACTOR*f.compositeTextSizes[1].evaluate(a,{})])[0]>x||v[1]>x)&&t.warnOnce(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),e.addSymbols(e.text,d,v,s,o,a,c,n,u.lineStartIndex,u.lineLength),l.push(e.text.placedSymbolArray.length-1),4*d.length}function C(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}var S=function(e){var n={},r=[];for(var i in e){var o=e[i],a=n[i]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var c={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(c),a[s]={rect:c,metrics:u.metrics}}}}var l=t.potpack(r),h=new t.AlphaImage({width:l.w||1,height:l.h||1});for(var f in e){var d=e[f];for(var p in d){var v=d[+p];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var m=n[f][p].rect;t.AlphaImage.copy(v.bitmap,h,{x:0,y:0},{x:m.x+1,y:m.y+1},v.bitmap)}}}this.image=h,this.positions=n};t.register("GlyphAtlas",S);var E=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies};function P(e,n){for(var r=new t.EvaluationParameters(n),i=0,o=e;i<o.length;i+=1)o[i].recalculate(r)}E.prototype.parse=function(e,n,r,i){var o=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var a=new t.DictionaryCoder(Object.keys(e.layers).sort()),s=new t.FeatureIndex(this.tileID);s.bucketLayerIDs=[];var u,c,l,h,f={},d={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},p=n.familiesBySource[this.source];for(var v in p){var m=e.layers[v];if(m){1===m.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+v+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var y=a.encode(v),g=[],_=0;_<m.length;_++){var w=m.feature(_);g.push({feature:w,index:_,sourceLayerIndex:y})}for(var x=0,k=p[v];x<k.length;x+=1){var C=k[x],E=C[0];E.minzoom&&this.zoom<Math.floor(E.minzoom)||E.maxzoom&&this.zoom>=E.maxzoom||"none"!==E.visibility&&(P(C,this.zoom),(f[E.id]=E.createBucket({index:s.bucketLayerIDs.length,layers:C,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:y,sourceID:this.source})).populate(g,d),s.bucketLayerIDs.push(C.map(function(t){return t.id})))}}}var O=t.mapObject(d.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(O).length?r.send("getGlyphs",{uid:this.uid,stacks:O},function(t,e){u||(u=t,c=e,I.call(o))}):c={};var T=Object.keys(d.iconDependencies);T.length?r.send("getImages",{icons:T},function(t,e){u||(u=t,l=e,I.call(o))}):l={};var A=Object.keys(d.patternDependencies);function I(){if(u)return i(u);if(c&&l&&h){var e=new S(c),n=new t.ImageAtlas(l,h);for(var r in f){var o=f[r];o instanceof t.SymbolBucket?(P(o.layers,this.zoom),b(o,c,e.positions,l,n.iconPositions,this.showCollisionBoxes)):o.hasPattern&&(o instanceof t.LineBucket||o instanceof t.FillBucket||o instanceof t.FillExtrusionBucket)&&(P(o.layers,this.zoom),o.addFeatures(d,n.patternPositions))}this.status="done",i(null,{buckets:t.values(f).filter(function(t){return!t.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?c:null,iconMap:this.returnDependencies?l:null,glyphPositions:this.returnDependencies?e.positions:null})}}A.length?r.send("getImages",{icons:A},function(t,e){u||(u=t,h=e,I.call(o))}):h={},I.call(this)};var O="undefined"!=typeof performance,T={getEntriesByName:function(t){return!!(O&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(O&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,n){return!!(O&&performance&&performance.measure)&&performance.measure(t,e,n)},clearMarks:function(t){return!!(O&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(O&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},A=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},T.mark(this._marks.start)};function I(e,n){var r=t.getArrayBuffer(e.request,function(e,r,i,o){e?n(e):r&&n(null,{vectorTile:new t.mvt.VectorTile(new t.Protobuf(r)),rawData:r,cacheControl:i,expires:o})});return function(){r.cancel(),n()}}A.prototype.finish=function(){T.mark(this._marks.end);var t=T.getEntriesByName(this._marks.measure);return 0===t.length&&(T.measure(this._marks.measure,this._marks.start,this._marks.end),t=T.getEntriesByName(this._marks.measure),T.clearMarks(this._marks.start),T.clearMarks(this._marks.end),T.clearMeasures(this._marks.measure)),t},T.Performance=A;var D=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||I,this.loading={},this.loaded={}};D.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new T.Performance(e.request),a=this.loading[i]=new E(e);a.abort=this.loadVectorData(e,function(e,s){if(delete r.loading[i],e||!s)return a.status="done",r.loaded[i]=a,n(e);var u=s.rawData,c={};s.expires&&(c.expires=s.expires),s.cacheControl&&(c.cacheControl=s.cacheControl);var l={};if(o){var h=o.finish();h&&(l.resourceTiming=JSON.parse(JSON.stringify(h)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,r.layerIndex,r.actor,function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:u.slice(0)},r,c,l))}),r.loaded=r.loaded||{},r.loaded[i]=a})},D.prototype.reloadTile=function(t,e){var n=this.loaded,r=t.uid,i=this;if(n&&n[r]){var o=n[r];o.showCollisionBoxes=t.showCollisionBoxes;var a=function(t,n){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.actor,a):a())}},D.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},D.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var M=function(){this.loaded={}};function L(t){var e=0;if(t&&t.length>0){e+=Math.abs(j(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(j(t[n]))}return e}function j(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(R(t[o][0])-R(e[0]))*Math.sin(R(n[1]));s=6378137*s*6378137/2}return s}function R(t){return t*Math.PI/180}M.prototype.loadTile=function(e,n){var r=e.uid,i=new t.DEMData(r,e.rawImageData,e.encoding);this.loaded=this.loaded||{},this.loaded[r]=i,n(null,i)},M.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var F={geometry:function t(e){var n,r=0;switch(e.type){case"Polygon":return L(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=L(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},ring:j},N=function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(B(t,n)),e;case"GeometryCollection":return e.geometries=e.geometries.map(B(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=z(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(B(z,e))),t}(e,n);default:return e}};function B(t,e){return function(n){return t(n,e)}}function z(t,e){t[0]=V(t[0],e=!!e);for(var n=1;n<t.length;n++)t[n]=V(t[n],!e);return t}function V(t,e){return function(t){return F.ring(t)>=0}(t)===e?t:t.reverse()}var U=t.mvt.VectorTileFeature.prototype.toGeoJSON,q=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};q.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.Point(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],c=0,l=s[a];c<l.length;c+=1){var h=l[c];u.push(new t.Point(h[0],h[1]))}o.push(u)}return o},q.prototype.toGeoJSON=function(t,e,n){return U.call(this,t,e,n)};var H=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};H.prototype.feature=function(t){return new q(this._features[t])};var Z=t.vectorTile.VectorTileFeature,G=W;function W(t,e){this.options=e||{},this.features=t,this.length=t.length}function X(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}W.prototype.feature=function(t){return new X(this.features[t],this.options.extent)},X.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},X.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},X.prototype.toGeoJSON=Z.prototype.toGeoJSON;var K=J,Y=G;function J(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,$,t.layers[n])}(e,n),n.finish()}function $(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,Q,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,it,o[n])}function Q(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,tt,t),e.writeVarintField(3,n.type),e.writeMessage(4,rt,n)}function tt(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var c=n.properties[s],l=typeof c;"string"!==l&&"boolean"!==l&&"number"!==l&&(c=JSON.stringify(c));var h=l+":"+c,f=a[h];void 0===f&&(i.push(c),a[h]=f=i.length-1),e.writeVarint(f)}}function et(t,e){return(e<<3)+(7&t)}function nt(t){return t<<1^t>>31}function rt(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],c=1;1===r&&(c=u.length),e.writeVarint(et(1,c));for(var l=3===r?u.length-1:u.length,h=0;h<l;h++){1===h&&1!==r&&e.writeVarint(et(2,l-1));var f=u[h].x-i,d=u[h].y-o;e.writeVarint(nt(f)),e.writeVarint(nt(d)),i+=f,o+=d}3===r&&e.writeVarint(et(7,1))}}function it(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function ot(t,e,n,r,i,o){if(!(i-r<=n)){var a=r+i>>1;!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-u*l/s+h)),Math.min(o,Math.floor(r+(s-u)*l/s+h)),a)}var f=n[2*r+a],d=i,p=o;for(at(e,n,i,r),n[2*o+a]>f&&at(e,n,i,o);d<p;){for(at(e,n,d,p),d++,p--;n[2*d+a]<f;)d++;for(;n[2*p+a]>f;)p--}n[2*i+a]===f?at(e,n,i,p):at(e,n,++p,o),p<=r&&(i=p+1),r<=p&&(o=p-1)}}(t,e,a,r,i,o%2),ot(t,e,n,r,a-1,o+1),ot(t,e,n,a+1,i,o+1)}}function at(t,e,n,r){st(t,n,r),st(e,2*n,2*r),st(e,2*n+1,2*r+1)}function st(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ut(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}K.fromVectorTileJs=J,K.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new G(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return J({layers:n})},K.GeoJSONWrapper=Y;var ct=function(t){return t[0]},lt=function(t){return t[1]},ht=function(t,e,n,r,i){void 0===e&&(e=ct),void 0===n&&(n=lt),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=n(t[u]);ot(a,s,r,0,a.length-1,0)};ht.prototype.range=function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s,u,c=[0,t.length-1,0],l=[];c.length;){var h=c.pop(),f=c.pop(),d=c.pop();if(f-d<=a)for(var p=d;p<=f;p++)u=e[2*p+1],(s=e[2*p])>=n&&s<=i&&u>=r&&u<=o&&l.push(t[p]);else{var v=Math.floor((d+f)/2);u=e[2*v+1],(s=e[2*v])>=n&&s<=i&&u>=r&&u<=o&&l.push(t[v]);var m=(h+1)%2;(0===h?n<=s:r<=u)&&(c.push(d),c.push(v-1),c.push(m)),(0===h?i>=s:o>=u)&&(c.push(v+1),c.push(f),c.push(m))}}return l}(this.ids,this.coords,t,e,n,r,this.nodeSize)},ht.prototype.within=function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var c=a.pop(),l=a.pop(),h=a.pop();if(l-h<=o)for(var f=h;f<=l;f++)ut(e[2*f],e[2*f+1],n,r)<=u&&s.push(t[f]);else{var d=Math.floor((h+l)/2),p=e[2*d],v=e[2*d+1];ut(p,v,n,r)<=u&&s.push(t[d]);var m=(c+1)%2;(0===c?n-i<=p:r-i<=v)&&(a.push(h),a.push(d-1),a.push(m)),(0===c?n+i>=p:r+i>=v)&&(a.push(d+1),a.push(l),a.push(m))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)};var ft={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(t){return t}},dt=function(t){this.options=bt(Object.create(ft),t),this.trees=new Array(this.options.maxZoom+1)};function pt(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function vt(t,e){var n=t.geometry.coordinates,r=n[1];return{x:gt(n[0]),y:_t(r),zoom:1/0,index:e,parentId:-1}}function mt(t){return{type:"Feature",id:t.id,properties:yt(t),geometry:{type:"Point",coordinates:[(r=t.x,360*(r-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n,r}function yt(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return bt(bt({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function gt(t){return t/360+.5}function _t(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function bt(t,e){for(var n in e)t[n]=e[n];return t}function wt(t){return t.x}function xt(t){return t.y}function kt(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s}function Ct(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)St(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)St(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)St(t,e[r][i])}(i),i}function St(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function Et(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=e.id;if(n.promoteId?u=e.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)Pt(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)Pt(i[c],s);else if("LineString"===o)Ot(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)Ot(i[c],s=[],a,!1),t.push(Ct(u,"LineString",s,e.properties));return}Tt(i,s,a,!1)}else if("Polygon"===o)Tt(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)Et(t,{id:u,geometry:e.geometry.geometries[c],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var l=[];Tt(i[c],l,a,!0),s.push(l)}}t.push(Ct(u,o,s,e.properties))}}function Pt(t,e){e.push(At(t[0])),e.push(It(t[1])),e.push(0)}function Ot(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=At(t[s][0]),c=It(t[s][1]);e.push(u),e.push(c),e.push(0),s>0&&(a+=r?(i*c-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(c-o,2))),i=u,o=c}var l=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,c=e[n],l=e[n+1],h=e[r],f=e[r+1],d=n+3;d<r;d+=3){var p=kt(e[d],e[d+1],c,l,h,f);if(p>a)o=d,a=p;else if(p===a){var v=Math.abs(d-s);v<u&&(o=d,u=v)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,l,n),e[l+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Tt(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];Ot(t[i],o,n,r),e.push(o)}}function At(t){return t/360+.5}function It(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function Dt(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var u=[],c=0;c<t.length;c++){var l=t[c],h=l.geometry,f=l.type,d=0===i?l.minX:l.minY,p=0===i?l.maxX:l.maxY;if(d>=n&&p<r)u.push(l);else if(!(p<n||d>=r)){var v=[];if("Point"===f||"MultiPoint"===f)Mt(h,v,n,r,i);else if("LineString"===f)Lt(h,v,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===f)Rt(h,v,n,r,i,!1);else if("Polygon"===f)Rt(h,v,n,r,i,!0);else if("MultiPolygon"===f)for(var m=0;m<h.length;m++){var y=[];Rt(h[m],y,n,r,i,!0),y.length&&v.push(y)}if(v.length){if(s.lineMetrics&&"LineString"===f){for(m=0;m<v.length;m++)u.push(Ct(l.id,f,v[m],l.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===v.length?(f="LineString",v=v[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===v.length?"Point":"MultiPoint"),u.push(Ct(l.id,f,v,l.tags))}}}return u.length?u:null}function Mt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function Lt(t,e,n,r,i,o,a){for(var s,u,c=jt(t),l=0===i?Nt:Bt,h=t.start,f=0;f<t.length-3;f+=3){var d=t[f],p=t[f+1],v=t[f+2],m=t[f+3],y=t[f+4],g=0===i?d:p,_=0===i?m:y,b=!1;a&&(s=Math.sqrt(Math.pow(d-m,2)+Math.pow(p-y,2))),g<n?_>n&&(u=l(c,d,p,m,y,n),a&&(c.start=h+s*u)):g>r?_<r&&(u=l(c,d,p,m,y,r),a&&(c.start=h+s*u)):Ft(c,d,p,v),_<n&&g>=n&&(u=l(c,d,p,m,y,n),b=!0),_>r&&g<=r&&(u=l(c,d,p,m,y,r),b=!0),!o&&b&&(a&&(c.end=h+s*u),e.push(c),c=jt(t)),a&&(h+=s)}var w=t.length-3;d=t[w],p=t[w+1],v=t[w+2],(g=0===i?d:p)>=n&&g<=r&&Ft(c,d,p,v),w=c.length-3,o&&w>=3&&(c[w]!==c[0]||c[w+1]!==c[1])&&Ft(c,c[0],c[1],c[2]),c.length&&e.push(c)}function jt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function Rt(t,e,n,r,i,o){for(var a=0;a<t.length;a++)Lt(t[a],e,n,r,i,o,!1)}function Ft(t,e,n,r){t.push(e),t.push(n),t.push(r)}function Nt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function Bt(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function zt(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Vt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Vt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],c=0;c<o.geometry[s].length;c++)u.push(Vt(o.geometry[s][c],e));i.push(u)}n.push(Ct(o.id,a,i,o.tags))}return n}function Vt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function Ut(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],c=u.geometry,l=u.type;if(u.geometry=[],1===l)for(r=0;r<c.length;r+=2)u.geometry.push(qt(c[r],c[r+1],e,o,a,s));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(qt(c[r][i],c[r][i+1],e,o,a,s));u.geometry.push(h)}}return t.transformed=!0,t}function qt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function Ht(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,Zt(a,t[s],o,i);var u=t[s].minX,c=t[s].minY,l=t[s].maxX,h=t[s].maxY;u<a.minX&&(a.minX=u),c<a.minY&&(a.minY=c),l>a.maxX&&(a.maxX=l),h>a.maxY&&(a.maxY=h)}return a}function Zt(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Gt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Gt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var c=i[u];for(s=0;s<c.length;s++)Gt(a,c[s],t,n,!0,0===s)}if(a.length){var l=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in l={},e.tags)l[h]=e.tags[h];l.mapbox_clip_start=i.start/i.size,l.mapbox_clip_end=i.end/i.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:l};null!==e.id&&(f.id=e.id),t.features.push(f)}}function Gt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function Wt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)Et(n,t.features[r],e,r);else Et(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=Dt(t,1,-1-n,n,0,-1,2,e),o=Dt(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=Dt(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=zt(i,1).concat(r)),o&&(r=r.concat(zt(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Xt(t,e,n){return 32*((1<<t)*n+e)+t}function Kt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new H(r.features),o=K(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}dt.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(vt(t[u],u));this.trees[i+1]=new ht(s,wt,xt,o,Float32Array),n&&console.timeEnd(a);for(var c=i;c>=r;c--){var l=+Date.now();s=this._cluster(s,c),this.trees[c]=new ht(s,wt,xt,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-l)}return n&&console.timeEnd("total time"),this},dt.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],c=[],l=0,h=u.range(gt(n),_t(o),gt(i),_t(r));l<h.length;l+=1){var f=u.points[h[l]];c.push(f.numPoints?mt(f):this.points[f.index])}return c},dt.prototype.getChildren=function(t){var e=t>>5,n=t%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,c=i.within(o.x,o.y,a);u<c.length;u+=1){var l=i.points[c[u]];l.parentId===t&&s.push(l.numPoints?mt(l):this.points[l.index])}if(0===s.length)throw new Error(r);return s},dt.prototype.getLeaves=function(t,e,n){var r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r},dt.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(n-a)/i,u=(n+1+a)/i,c={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,u),r.points,e,n,i,c),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,c),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,c),c.features.length?c:null},dt.prototype.getClusterExpansionZoom=function(t){for(var e=t%32-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},dt.prototype._appendLeaves=function(t,e,n,r,i){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(t,u.cluster_id,n,r,i):i<r?i++:t.push(s),t.length===n)break}return i},dt.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=e[s[a]],c={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:u.numPoints?yt(u):this.points[u.index].properties},l=u.numPoints?u.id:this.points[u.index].id;void 0!==l&&(c.id=l),o.features.push(c)}},dt.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},dt.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.reduce,o=r.radius/(r.extent*Math.pow(2,e)),a=0;a<t.length;a++){var s=t[a];if(!(s.zoom<=e)){s.zoom=e;for(var u=this.trees[e+1],c=u.within(s.x,s.y,o),l=s.numPoints||1,h=s.x*l,f=s.y*l,d=i?this._map(s,!0):null,p=(a<<5)+(e+1),v=0,m=c;v<m.length;v+=1){var y=u.points[m[v]];if(!(y.zoom<=e)){y.zoom=e;var g=y.numPoints||1;h+=y.x*g,f+=y.y*g,l+=g,y.parentId=p,i&&i(d,this._map(y))}}1===l?n.push(s):(s.parentId=p,n.push(pt(h/l,f/l,p,l,d)))}}return n},dt.prototype._map=function(t,e){if(t.numPoints)return e?bt({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?bt({},r):r},Wt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Wt.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,c=u.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var l=1<<e,h=Xt(e,n,r),f=this.tiles[h];if(!f&&(c>1&&console.time("creation"),f=this.tiles[h]=Ht(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(f.source=t,i){if(e===u.maxZoom||e===i)continue;var p=1<<i-e;if(n!==Math.floor(o/p)||r!==Math.floor(a/p))continue}else if(e===u.indexMaxZoom||f.numPoints<=u.indexMaxPoints)continue;if(f.source=null,0!==t.length){c>1&&console.time("clipping");var v,m,y,g,_,b,w=.5*u.buffer/u.extent,x=.5-w,k=.5+w,C=1+w;v=m=y=g=null,_=Dt(t,l,n-w,n+k,0,f.minX,f.maxX,u),b=Dt(t,l,n+x,n+C,0,f.minX,f.maxX,u),t=null,_&&(v=Dt(_,l,r-w,r+k,1,f.minY,f.maxY,u),m=Dt(_,l,r+x,r+C,1,f.minY,f.maxY,u),_=null),b&&(y=Dt(b,l,r-w,r+k,1,f.minY,f.maxY,u),g=Dt(b,l,r+x,r+C,1,f.minY,f.maxY,u),b=null),c>1&&console.timeEnd("clipping"),s.push(v||[],e+1,2*n,2*r),s.push(m||[],e+1,2*n,2*r+1),s.push(y||[],e+1,2*n+1,2*r),s.push(g||[],e+1,2*n+1,2*r+1)}}},Wt.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=Xt(t,e=(e%a+a)%a,n);if(this.tiles[s])return Ut(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,c=t,l=e,h=n;!u&&c>0;)c--,l=Math.floor(l/2),h=Math.floor(h/2),u=this.tiles[Xt(c,l,h)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,l,h),o>1&&console.time("drilling down"),this.splitTile(u.source,c,l,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?Ut(this.tiles[s],i):null):null};var Yt=function(e){function n(t,n,r){e.call(this,t,n,Kt),r&&(this.loadGeoJSON=r)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new T.Performance(r.request);this.loadGeoJSON(r,function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data is not a valid GeoJSON object."));N(a,!0);try{e._geoJSONIndex=r.cluster?new dt(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),c=0,l=u;c<l.length;c+=1){var h=l[c],f=r[h],d=f[0],p=t.createExpression(f[1]),v=t.createExpression("string"==typeof d?[d,["accumulated"],["get",h]]:d);i[h]=p.value,o[h]=v.value}return n.map=function(t){s.properties=t;for(var e={},n=0,r=u;n<r.length;n+=1){var o=r[n];e[o]=i[o].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,r=u;n<r.length;n+=1){var i=r[n];a.accumulated=t[i],t[i]=o[i].evaluate(a,s)}},n}(r)).load(a.features):function(t,e){return new Wt(t,e)}(a,r.geojsonVtOptions)}catch(o){return n(o)}e.loaded={};var s={};if(i){var u=i.finish();u&&(s.resourceTiming={},s.resourceTiming[r.source]=JSON.parse(JSON.stringify(u)))}n(null,s)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded;return r&&r[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},n.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},n.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},n}(D),Jt=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.workerSourceTypes={vector:D,geojson:Yt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isLoaded())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return Jt.prototype.setReferrer=function(t,e){this.referrer=e},Jt.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Jt.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Jt.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Jt.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Jt.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Jt.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Jt.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Jt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Jt.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},Jt.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Jt.prototype.loadRTLTextPlugin=function(e,n,r){try{t.plugin.isLoaded()||(this.self.importScripts(n),r(t.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(t){r(t.toString())}},Jt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},Jt.prototype.getWorkerSource=function(t,e,n){var r=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,i){r.actor.send(e,n,i,t)}},this.getLayerIndex(t))),this.workerSources[t][e][n]},Jt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new M),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Jt(self)),Jt}),r(0,function(t){var e=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===n[t]&&(n[t]=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n={create:function(e,n,r){var i=t.window.document.createElement(e);return n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},r=t.window.document?t.window.document.documentElement.style:null;function i(t){if(!r)return null;for(var e=0;e<t.length;e++)if(t[e]in r)return t[e];return t[0]}var o,a=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&a&&(o=r[a],r[a]="none")},n.enableDrag=function(){r&&a&&(r[a]=o)};var s=i(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[s]=e};var u=!1;try{var c=Object.defineProperty({},"passive",{get:function(){u=!0}});t.window.addEventListener("test",c,c),t.window.removeEventListener("test",c,c)}catch(t){u=!1}n.addEventListener=function(t,e,n,r){void 0===r&&(r={}),t.addEventListener(e,n,"passive"in r&&u?r:r.capture)},n.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),t.removeEventListener(e,n,"passive"in r&&u?r:r.capture)};var l=function e(n){n.preventDefault(),n.stopPropagation(),t.window.removeEventListener("click",e,!0)};n.suppressClick=function(){t.window.addEventListener("click",l,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",l,!0)},0)},n.mousePos=function(e,n){var r=e.getBoundingClientRect();return new t.Point((n=n.touches?n.touches[0]:n).clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},n.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)i.push(new t.Point(o[a].clientX-r.left-e.clientLeft,o[a].clientY-r.top-e.clientTop));return i},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var h=function(){this.images={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0};h.prototype.isLoaded=function(){return this.loaded},h.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e];this._notify(r.ids,r.callback)}this.requestors=[]}},h.prototype.getImage=function(t){return this.images[t]},h.prototype.addImage=function(t,e){this.images[t]=e},h.prototype.removeImage=function(t){delete this.images[t],delete this.patterns[t]},h.prototype.listImages=function(){return Object.keys(this.images)},h.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1)this.images[i[r]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},h.prototype._notify=function(t,e){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,n)},h.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},h.prototype.getPattern=function(e){var n=this.patterns[e];if(n)return n.position;var r=this.getImage(e);if(!r)return null;var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);return this.patterns[e]={bin:i,position:o},this._updatePatternAtlas(),o},h.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},h.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,c=u.x+1,l=u.y+1,h=this.images[s].data,f=h.width,d=h.height;t.RGBAImage.copy(h,a,{x:0,y:0},{x:c,y:l},{width:f,height:d}),t.RGBAImage.copy(h,a,{x:0,y:d-1},{x:c,y:l-1},{width:f,height:1}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:c,y:l+d},{width:f,height:1}),t.RGBAImage.copy(h,a,{x:f-1,y:0},{x:c-1,y:l},{width:1,height:d}),t.RGBAImage.copy(h,a,{x:0,y:0},{x:c+f,y:l},{width:1,height:d})}this.dirty=!0};var f=p,d=1e20;function p(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function v(t,e,n,r,i,o,a){for(var s=0;s<e;s++){for(var u=0;u<n;u++)r[u]=t[u*e+s];for(m(r,i,o,a,n),u=0;u<n;u++)t[u*e+s]=i[u]}for(u=0;u<n;u++){for(s=0;s<e;s++)r[s]=t[u*e+s];for(m(r,i,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(i[s])}}function m(t,e,n,r,i){n[0]=0,r[0]=-d,r[1]=+d;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+d}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}p.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?d:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?d:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n};var y=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};y.prototype.setURL=function(t){this.url=t},y.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)i.push({stack:o,id:s[a]});t.asyncAll(i,function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a)if(a=r._tinySDF(o,n,i))e(null,{stack:n,id:i,glyph:a});else{var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var u=o.requests[s];u||(u=o.requests[s]=[],y.loadGlyphRange(n,s,r.url,r.requestTransform,function(t,e){if(e)for(var n in e)o.glyphs[+n]=e[+n];for(var r=0,i=u;r<i.length;r+=1)(0,i[r])(t,e);delete o.requests[s]})),u.push(function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})})}}else e(null,{stack:n,id:i,glyph:a})},function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,c=a.glyph;(r[s]||(r[s]={}))[u]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}n(null,r)}})},y.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&(t.isChar["CJK Unified Ideographs"](r)||t.isChar["Hangul Syllables"](r))){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new y.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,u=i(t.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.parseGlyphPBF(n);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}})},y.TinySDF=f;var g=function(){this.specification=t.styleSpec.light.position};g.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},g.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var _=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new g,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),b=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(_),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),w=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};w.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},w.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];for(var s=this.width/o,u=s/2,c=e.length%2==1,l=-r;l<=r;l++)for(var h=this.width*(this.nextRow+r+l),f=c?-e[e.length-1]:0,d=e[0],p=1,v=0;v<this.width;v++){for(;d<v/s;)f=d,d+=e[p],c&&p===e.length-1&&(d+=e[0]),p++;var m=Math.abs(v-f*s),y=Math.abs(v-d*s),g=Math.min(m,y),_=p%2==1,b=void 0;if(n){var w=r?l/r*(u+1):0;if(_){var x=u-Math.abs(w);b=Math.sqrt(g*g+x*x)}else b=u-Math.sqrt(g*g+w*w)}else b=(_?1:-1)*g;this.data[3+4*(h+v)]=Math.max(0,Math.min(255,b+128))}var k={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,k},w.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var x=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=new e.Actor(i[o],r,this.id);a.name="Worker "+o,this.actors.push(a)}};function k(e,n,r){var i=function(n,i){if(n)return r(n);if(i){var o=t.pick(i,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map(function(t){return t.id})),e.url&&(o.tiles=t.canonicalizeTileset(o,e.url)),r(null,o)}};return e.url?t.getJSON(n(t.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame(function(){return i(null,e)})}x.prototype.broadcast=function(e,n,r){t.asyncAll(this.actors,function(t,r){t.send(e,n,r)},r=r||function(){})},x.prototype.send=function(t,e,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n),r},x.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},x.Actor=t.Actor;var C=function(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24};C.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},C.prototype.contains=function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a};var S=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(r,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new C(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){var r=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url),i={request:this.map._transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function o(t,r){return e.aborted?n(null):t&&404!==t.status?n(t):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",i,o.bind(this)):"loading"===e.state?e.reloadCallback=n:this.dispatcher.send("reloadTile",i,o.bind(this),e.workerID)},n.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),E=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new C(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId()),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",n(null)}})},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),P=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var r=t.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(r,t.ResourceType.Tile),(function(r,i){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=t.browser.getImageData(i);e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",{uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding},(function(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}).bind(this)))}}).bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},n}(E),O=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=i,this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution);var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(r.clusterRadius||50)*a,log:!1},clusterProperties:r.clusterProperties},r.workerOptions)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}}),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterLeaves=function(t,e,n,r){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r,this.workerID),this},n.prototype._updateWorkerData=function(e){var n=this,r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",r,function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:r.source},null,n.workerID),e(t))},this.workerID)},n.prototype.loadTile=function(e,n){var r=this,i=void 0===e.workerID?"loadTile":"reloadTile";e.workerID=this.dispatcher.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes},function(t,o){return e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))},this.workerID)},n.prototype.abortTile=function(t){t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),T=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(e,n){var r=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(i,o){i?r.fire(new t.ErrorEvent(i)):o&&(r.image=o,e&&(r.coordinates=e),n&&n(),r._finishLoading())})},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var u=s[a];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}var c=Math.max(i-n,o-r),l=Math.max(0,Math.floor(-Math.log(c)/Math.LN2)),h=Math.pow(2,l);return new t.CanonicalTileID(l,Math.floor((n+i)/2*h),Math.floor((r+o)/2*h))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map(function(t){return n.tileID.getTilePoint(t)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),A={vector:S,raster:E,"raster-dem":P,geojson:O,video:function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this,n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1)this.urls.push(this.map._transformRequest(i[r],t.ResourceType.Source).url);t.getVideo(this.urls,function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(T),image:T,canvas:function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing=!1},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(T)};function I(e,n){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function D(t,e,n,r,i){var o=function(t,e,n){if(t)for(var r=0,i=t;r<i.length;r+=1){var o=e[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(r&&r.layers,e,t.id),a=i.maxPitchScaleFactor(),s=t.tilesIn(n,a,o);s.sort(M);for(var u=[],c=0,l=s;c<l.length;c+=1){var h=l[c];u.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,r,i,a,I(t.transform,h.tileID))})}var f=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var c in a)for(var l=a[c],h=u[c]=u[c]||{},f=e[c]=e[c]||[],d=0,p=l;d<p.length;d+=1){var v=p[d];h[v.featureIndex]||(h[v.featureIndex]=!0,f.push(v))}}return e}(u);for(var d in f)f[d].forEach(function(e){var n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r});return f}function M(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var L=function(t,e){this.max=t,this.onRemove=e,this.reset()};L.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},L.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},L.prototype.has=function(t){return t.wrapped().key in this.data},L.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},L.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},L.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},L.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},L.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var j=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};j.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},j.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},j.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var R={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},F=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};F.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},F.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},F.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}},F.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[R[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},F.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var N=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};N.prototype.get=function(){return this.current},N.prototype.set=function(t){},N.prototype.getDefault=function(){return this.default},N.prototype.setDefault=function(){this.set(this.default)};var B=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(N),z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(N),V=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(N),U=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(N),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(N),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(N),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(N),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(N),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(N),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(N),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(N),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(N),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(N),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(N),Q=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(N),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(N),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(N),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(N),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(N),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(N),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(N),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(N),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(N),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(N),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(N),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(N),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(N),ft=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(N),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(N),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(N),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(N),mt=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(N),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(mt),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(mt),_t=function(t,e,n){this.context=t,this.width=e,this.height=n;var r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new yt(t,r),this.depthAttachment=new gt(t,r)};_t.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)};var bt=function(t,e,n){this.func=t,this.mask=e,this.range=n};bt.ReadOnly=!1,bt.ReadWrite=!0,bt.disabled=new bt(519,bt.ReadOnly,[0,1]);var wt=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};wt.disabled=new wt({func:519,mask:0},0,0,7680,7680,7680);var xt=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};xt.disabled=new xt(xt.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),xt.unblended=new xt(xt.Replace,t.Color.transparent,[!0,!0,!0,!0]),xt.alphaBlended=new xt([1,771],t.Color.transparent,[!0,!0,!0,!0]);var kt=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};kt.disabled=new kt(!1,1029,2305),kt.backCCW=new kt(!0,1029,2305);var Ct=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new B(this),this.clearDepth=new z(this),this.clearStencil=new V(this),this.colorMask=new U(this),this.depthMask=new q(this),this.stencilMask=new H(this),this.stencilFunc=new Z(this),this.stencilOp=new G(this),this.stencilTest=new W(this),this.depthRange=new X(this),this.depthTest=new K(this),this.depthFunc=new Y(this),this.blend=new J(this),this.blendFunc=new $(this),this.blendColor=new Q(this),this.blendEquation=new tt(this),this.cullFace=new et(this),this.cullFaceSide=new nt(this),this.frontFace=new rt(this),this.program=new it(this),this.activeTexture=new ot(this),this.viewport=new at(this),this.bindFramebuffer=new st(this),this.bindRenderbuffer=new ut(this),this.bindTexture=new ct(this),this.bindVertexBuffer=new lt(this),this.bindElementBuffer=new ht(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ft(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new pt(this),this.pixelStoreUnpackFlipY=new vt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};Ct.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ct.prototype.createIndexBuffer=function(t,e){return new j(this,t,e)},Ct.prototype.createVertexBuffer=function(t,e,n){return new F(this,t,e,n)},Ct.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},Ct.prototype.createFramebuffer=function(t,e){return new _t(this,t,e)},Ct.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Ct.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},Ct.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Ct.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Ct.prototype.setColorMode=function(e){t.isEqual(e.blendFunction,xt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Ct.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var St=function(e){function n(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=function(e,n,r,i){var o=new A[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(n,r,i,this),this._tiles={},this._cache=new L(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t)},n.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(Et)},n.prototype.getRenderableIds=function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(+i,e)&&r.push(+i);return r.sort(e?function(e,r){var i=n._tiles[e].tileID,o=n._tiles[r].tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}:Et)},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){var i=this.getTileByID(r);o(t,i),o(i,t)}}function o(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},n.prototype._retainLoadedChildren=function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){for(var n=t.overscaledZ-1;n>=e;n--){var r=t.scaledTo(n);if(!r)return;var i=String(r.key),o=this._tiles[i];if(o&&o.hasData())return o;if(this._cache.has(r))return this._cache.get(r)}},n.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),n=Math.floor(5*e),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return r._source.hasTile(t)}))):i=[];var o=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,o);if(Pt(this._source.type)){for(var c={},l={},h=0,f=Object.keys(u);h<f.length;h+=1){var d=f[h],p=u[d],v=this._tiles[d];if(v&&!(v.fadeEndTime&&v.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(p,a);m&&(this._addTile(m.tileID),c[m.tileID.key]=m.tileID),l[d]=p}}for(var y in this._retainLoadedChildren(l,o,s,u),c)u[y]||(this._coveredTiles[y]=!0,u[y]=c[y])}for(var g in u)this._tiles[g].clearFadeHold();for(var _=0,b=t.keysDifference(this._tiles,u);_<b.length;_+=1){var w=b[_],x=this._tiles[w];x.hasSymbolBuckets&&!x.holdingForFade()?x.setHoldDuration(this.map._fadeDuration):x.hasSymbolBuckets&&!x.symbolFadeFinished()||this._removeTile(w)}}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},u=0,c=t;u<c.length;u+=1){var l=c[u],h=this._addTile(l);r[l.key]=l,h.hasData()||e<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,e,a,r);for(var f=0,d=t;f<d.length;f+=1){var p=d[f],v=this._tiles[p.key];if(!v.hasData()){if(e+1>this._source.maxzoom){var m=p.children(this._source.maxzoom)[0],y=this.getTile(m);if(y&&y.hasData()){r[m.key]=m;continue}}else{var g=p.children(this._source.maxzoom);if(r[g[0].key]&&r[g[1].key]&&r[g[2].key]&&r[g[3].key])continue}for(var _=v.wasRequested(),b=p.overscaledZ-1;b>=o;--b){var w=p.scaledTo(b);if(i[w.key])break;if(i[w.key]=!0,!(v=this.getTile(w))&&_&&(v=this._addTile(w)),v&&(r[w.key]=w,_=v.wasRequested(),v.hasData()))break}}}return r},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,r){var i=this,o=[],a=this.transform;if(!a)return o;for(var s=r?a.getCameraQueryGeometry(e):e,u=e.map(function(t){return a.pointCoordinate(t)}),c=s.map(function(t){return a.pointCoordinate(t)}),l=this.getIds(),h=1/0,f=1/0,d=-1/0,p=-1/0,v=0,m=c;v<m.length;v+=1){var y=m[v];h=Math.min(h,y.x),f=Math.min(f,y.y),d=Math.max(d,y.x),p=Math.max(p,y.y)}for(var g=function(e){var r=i._tiles[l[e]];if(!r.holdingForFade()){var s=r.tileID,v=Math.pow(2,a.zoom-r.tileID.overscaledZ),m=n*r.queryPadding*t.EXTENT/r.tileSize/v,y=[s.getTilePoint(new t.MercatorCoordinate(h,f)),s.getTilePoint(new t.MercatorCoordinate(d,p))];if(y[0].x-m<t.EXTENT&&y[0].y-m<t.EXTENT&&y[1].x+m>=0&&y[1].y+m>=0){var g=u.map(function(t){return s.getTilePoint(t)}),_=c.map(function(t){return s.getTilePoint(t)});o.push({tile:r,tileID:s,queryGeometry:g,cameraQueryGeometry:_,scale:v})}}},_=0;_<l.length;_++)g(_);return o},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Pt(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},n}(t.Evented);function Et(t,e){return t%32-e%32||e-t}function Pt(t){return"raster"===t||"image"===t||"video"===t}function Ot(){return new t.window.Worker(Wr.workerUrl)}St.maxOverzooming=10,St.maxUnderzooming=3;var Tt=function(){this.active={}};Tt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Tt.workerCount;)this.workers.push(new Ot);return this.active[t]=!0,this.workers.slice()},Tt.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var At,It=Math.floor(t.browser.hardwareConcurrency/2);function Dt(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach(function(t){t in n&&(r[t]=n[t])}),r}function Mt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Dt(t[r],e[t[r].ref]));return t}Tt.workerCount=Math.max(Math.min(It,6),1);var Lt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jt(t,e,n){n.push({command:Lt.addSource,args:[t,e[t]]})}function Rt(t,e,n){e.push({command:Lt.removeSource,args:[t]}),n[t]=!0}function Ft(t,e,n,r){Rt(t,n,r),jt(t,e,n)}function Nt(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.isEqual(e[r][i],n[r][i]))return!1;return!0}function Bt(e,n,r,i,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.isEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.isEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function zt(t){return t.id}function Vt(t,e){return t[e.id]=e,t}var Ut=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};Ut.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ut.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Ut.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},Ut.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},Ut.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},Ut.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var c=this.circles[3*u],l=this.circles[3*u+1],h=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:c-h,y1:l-h,x2:c+h,y2:l+h})}return o?a.filter(o):a}return this._forEachCell(t,e,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a},Ut.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,u=e+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var c=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,c,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c},Ut.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},Ut.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},Ut.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},Ut.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=a.seenUids,c=this.boxCells[i];if(null!==c)for(var l=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!u.box[d]){u.box[d]=!0;var p=4*d;if(t<=l[p+2]&&e<=l[p+3]&&n>=l[p+0]&&r>=l[p+1]&&(!s||s(this.boxKeys[d]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[d],x1:l[p],y1:l[p+1],x2:l[p+2],y2:l[p+3]})}}}var v=this.circleCells[i];if(null!==v)for(var m=this.circles,y=0,g=v;y<g.length;y+=1){var _=g[y];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(m[b],m[b+1],m[b+2],t,e,n,r)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var w=m[b],x=m[b+1],k=m[b+2];o.push({key:this.circleKeys[_],x1:w-k,y1:x-k,x2:w+k,y2:x+k})}}}},Ut.prototype._queryCellCircle=function(t,e,n,r,i,o,a,s){var u=a.circle,c=a.seenUids,l=this.boxCells[i];if(null!==l)for(var h=this.bboxes,f=0,d=l;f<d.length;f+=1){var p=d[f];if(!c.box[p]){c.box[p]=!0;var v=4*p;if(this._circleAndRectCollide(u.x,u.y,u.radius,h[v+0],h[v+1],h[v+2],h[v+3])&&(!s||s(this.boxKeys[p])))return o.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var y=this.circles,g=0,_=m;g<_.length;g+=1){var b=_[g];if(!c.circle[b]){c.circle[b]=!0;var w=3*b;if(this._circlesCollide(y[w],y[w+1],y[w+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Ut.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),l=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),f=u;f<=l;f++)for(var d=c;d<=h;d++)if(i.call(this,t,e,n,r,this.xCellCount*d+f,o,a,s))return},Ut.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Ut.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Ut.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},Ut.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var c=(a-i)/2,l=Math.abs(e-(i+c));if(l>c+n)return!1;if(u<=s||l<=c)return!0;var h=u-s,f=l-c;return h*h+f*f<=n*n};var qt=t.properties.layout;function Ht(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.identity(a),t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):(t.scale(a,a,[i.width/2,-i.height/2,1]),t.translate(a,a,[1,-1,0]),t.multiply(a,a,e)),a}function Zt(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.multiply(a,a,e),t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle)):(t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/i.width,2/i.height,1])),a}function Gt(e,n){var r=[e.x,e.y,0,1];ne(r,r,n);var i=r[3];return{point:new t.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function Wt(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function Xt(e,n,r,i,o,a,s,u){var c=i?e.textSizeData:e.iconSizeData,l=t.evaluateSizeForZoom(c,r.transform.zoom,qt.properties[i?"text-size":"icon-size"]),h=[256/r.width*2+1,256/r.height*2+1],f=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;f.clear();for(var d=e.lineVertexArray,p=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,v=r.transform.width/r.transform.height,m=!1,y=0;y<p.length;y++){var g=p.get(y);if(g.hidden||g.writingMode===t.WritingMode.vertical&&!m)ee(g.numGlyphs,f);else{m=!1;var _=[g.anchorX,g.anchorY,0,1];if(t.transformMat4(_,_,n),Wt(_,h)){var b=.5+_[3]/r.transform.cameraToCenterDistance*.5,w=t.evaluateSizeForFeature(c,l,g),x=s?w*b:w/b,k=new t.Point(g.anchorX,g.anchorY),C=Gt(k,o).point,S={},E=Jt(g,x,!1,u,n,o,a,e.glyphOffsetArray,d,f,C,k,S,v);m=E.useVertical,(E.notEnoughRoom||m||E.needsFlipping&&Jt(g,x,!0,u,n,o,a,e.glyphOffsetArray,d,f,C,k,S,v).notEnoughRoom)&&ee(g.numGlyphs,f)}else ee(g.numGlyphs,f)}}i?e.text.dynamicLayoutVertexBuffer.updateData(f):e.icon.dynamicLayoutVertexBuffer.updateData(f)}function Kt(t,e,n,r,i,o,a,s,u,c,l,h){var f=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,p=s.lineStartIndex+s.lineLength,v=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(f-1),y=Qt(t*v,n,r,i,o,a,s.segment,d,p,u,c,l,h);if(!y)return null;var g=Qt(t*m,n,r,i,o,a,s.segment,d,p,u,c,l,h);return g?{first:y,last:g}:null}function Yt(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function Jt(e,n,r,i,o,a,s,u,c,l,h,f,d,p){var v,m=n/24,y=e.lineOffsetX*n,g=e.lineOffsetY*n;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,w=e.lineStartIndex+e.lineLength,x=Kt(m,u,y,g,r,h,f,e,c,a,d,!1);if(!x)return{notEnoughRoom:!0};var k=Gt(x.first.point,s).point,C=Gt(x.last.point,s).point;if(i&&!r){var S=Yt(e.writingMode,k,C,p);if(S)return S}v=[x.first];for(var E=e.glyphStartIndex+1;E<_-1;E++)v.push(Qt(m*u.getoffsetX(E),y,g,r,h,f,e.segment,b,w,c,a,d,!1));v.push(x.last)}else{if(i&&!r){var P=Gt(f,o).point,O=e.lineStartIndex+e.segment+1,T=new t.Point(c.getx(O),c.gety(O)),A=Gt(T,o),I=A.signedDistanceFromCamera>0?A.point:$t(f,T,P,1,o),D=Yt(e.writingMode,P,I,p);if(D)return D}var M=Qt(m*u.getoffsetX(e.glyphStartIndex),y,g,r,h,f,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,a,d,!1);if(!M)return{notEnoughRoom:!0};v=[M]}for(var L=0,j=v;L<j.length;L+=1){var R=j[L];t.addDynamicAttributes(l,R.point,R.angle)}return{}}function $t(t,e,n,r,i){var o=Gt(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function Qt(e,n,r,i,o,a,s,u,c,l,h,f,d){var p=i?e-n:e+n,v=p>0?1:-1,m=0;i&&(v*=-1,m=Math.PI),v<0&&(m+=Math.PI);for(var y=v>0?u+s:u+s+1,g=y,_=o,b=o,w=0,x=0,k=Math.abs(p);w+x<=k;){if((y+=v)<u||y>=c)return null;if(b=_,void 0===(_=f[y])){var C=new t.Point(l.getx(y),l.gety(y)),S=Gt(C,h);if(S.signedDistanceFromCamera>0)_=f[y]=S.point;else{var E=y-v;_=$t(0===w?a:new t.Point(l.getx(E),l.gety(E)),C,b,k-w+1,h)}}w+=x,x=b.dist(_)}var P=(k-w)/x,O=_.sub(b),T=O.mult(P)._add(b);return T._add(O._unit()._perp()._mult(r*v)),{point:T,angle:m+Math.atan2(_.y-b.y,_.x-b.x),tileDistance:d?{prevTileDistance:y-v===g?0:l.gettileUnitDistanceFromAnchor(y-v),lastSegmentViewportDistance:k-w}:null}}var te=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ee(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(te,3*r)}}function ne(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}var re=function(t,e,n){void 0===e&&(e=new Ut(t.width+200,t.height+200,25)),void 0===n&&(n=new Ut(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function ie(t,e,n){t[e+4]=n?1:0}function oe(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}re.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,c=t.x2*a+o.point.x,l=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,c,l)||!e&&this.grid.hitTest(s,u,c,l,i)?{box:[],offscreen:!1}:{box:[s,u,c,l],offscreen:this.isOffscreen(s,u,c,l)}},re.prototype.approximateTileDistance=function(t,e,n,r,i){var o=t.lastSegmentViewportDistance*n;return t.prevTileDistance+o+((i?1:r/this.pitchfactor)-1)*o*Math.abs(Math.sin(e))},re.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,u,c,l,h,f,d){var p=[],v=this.projectAnchor(c,o.anchorX,o.anchorY),m=u/24,y=o.lineOffsetX*u,g=o.lineOffsetY*u,_=new t.Point(o.anchorX,o.anchorY),b=Kt(m,s,y,g,!1,Gt(_,l).point,_,o,a,l,{},!0),w=!1,x=!1,k=!0,C=v.perspectiveRatio*i,S=1/(i*r),E=0,P=0;b&&(E=this.approximateTileDistance(b.first.tileDistance,b.first.angle,S,v.cameraDistance,f),P=this.approximateTileDistance(b.last.tileDistance,b.last.angle,S,v.cameraDistance,f));for(var O=0;O<e.length;O+=5){var T=e[O],A=e[O+1],I=e[O+2],D=e[O+3];if(!b||D<-E||D>P)ie(e,O,!1);else{var M=this.projectPoint(c,T,A),L=I*C;if(p.length>0){var j=M.x-p[p.length-4],R=M.y-p[p.length-3];if(L*L*2>j*j+R*R&&O+8<e.length){var F=e[O+8];if(F>-E&&F<P){ie(e,O,!1);continue}}}p.push(M.x,M.y,L,O/5),ie(e,O,!0);var N=M.x-L,B=M.y-L,z=M.x+L,V=M.y+L;if(k=k&&this.isOffscreen(N,B,z,V),x=x||this.isInsideGrid(N,B,z,V),!n&&this.grid.hitTestCircle(M.x,M.y,L,d)){if(!h)return{circles:[],offscreen:!1};w=!0}}}return{circles:w||!x?[]:p,offscreen:k}},re.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var c=u[s],l=new t.Point(c.x+100,c.y+100);r=Math.min(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y),n.push(l)}for(var h={},f={},d=0,p=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));d<p.length;d+=1){var v=p[d],m=v.key;if(void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]={}),!h[m.bucketInstanceId][m.featureIndex]){var y=[new t.Point(v.x1,v.y1),new t.Point(v.x2,v.y1),new t.Point(v.x2,v.y2),new t.Point(v.x1,v.y2)];t.polygonIntersectsPolygon(n,y)&&(h[m.bucketInstanceId][m.featureIndex]=!0,void 0===f[m.bucketInstanceId]&&(f[m.bucketInstanceId]=[]),f[m.bucketInstanceId].push(m.featureIndex))}}return f},re.prototype.insertCollisionBox=function(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])},re.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},re.prototype.projectAnchor=function(t,e,n){var r=[e,n,0,1];return ne(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},re.prototype.projectPoint=function(e,n,r){var i=[n,r,0,1];return ne(i,i,e),new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},re.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return ne(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},re.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},re.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary};var ae=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};ae.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var se=function(t,e,n,r,i){this.text=new ae(t?t.text:null,e,n,i),this.icon=new ae(t?t.icon:null,e,r,i)};se.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ue=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},ce=function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},le=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};le.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var he=function(t,e,n){this.transform=t.clone(),this.collisionIndex=new re(this.transform),this.placements={},this.opacities={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new le(n)};function fe(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}he.prototype.placeLayerTile=function(e,n,r,i){var o=n.getBucket(e),a=n.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var s=n.collisionBoxArray,u=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),l=n.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),f=Ht(h,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,oe(n,1,this.transform.zoom)),d=Ht(h,"map"===u.get("icon-pitch-alignment"),"map"===u.get("icon-rotation-alignment"),this.transform,oe(n,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new ce(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID),this.placeLayerBucket(o,h,f,d,c,l,r,n.holdingForFade(),i,s)}},he.prototype.placeLayerBucket=function(e,n,r,i,o,a,s,u,c,l){var h=e.layers[0].layout,f=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,t.properties.layout.properties["text-size"]),d=h.get("text-optional"),p=h.get("icon-optional"),v=h.get("text-allow-overlap"),m=h.get("icon-allow-overlap"),y=v&&(m||!e.hasIconData()||p),g=m&&(v||!e.hasTextData()||d),_=this.collisionGroups.get(e.sourceID);!e.collisionArrays&&l&&e.deserializeCollisionBoxes(l);for(var b=0;b<e.symbolInstances.length;b++){var w=e.symbolInstances.get(b);if(!c[w.crossTileID]){if(u){this.placements[w.crossTileID]=new ue(!1,!1,!1);continue}var x=!1,k=!1,C=!0,S=null,E=null,P=null,O=0,T=0,A=e.collisionArrays[b];A.textFeatureIndex&&(O=A.textFeatureIndex),A.textBox&&(x=(S=this.collisionIndex.placeCollisionBox(A.textBox,h.get("text-allow-overlap"),a,n,_.predicate)).box.length>0,C=C&&S.offscreen);var I=A.textCircles;if(I){var D=e.text.placedSymbolArray.get(w.horizontalPlacedTextSymbolIndex),M=t.evaluateSizeForFeature(e.textSizeData,f,D);E=this.collisionIndex.placeCollisionCircles(I,h.get("text-allow-overlap"),o,a,D,e.lineVertexArray,e.glyphOffsetArray,M,n,r,s,"map"===h.get("text-pitch-alignment"),_.predicate),x=h.get("text-allow-overlap")||E.circles.length>0,C=C&&E.offscreen}A.iconFeatureIndex&&(T=A.iconFeatureIndex),A.iconBox&&(k=(P=this.collisionIndex.placeCollisionBox(A.iconBox,h.get("icon-allow-overlap"),a,n,_.predicate)).box.length>0,C=C&&P.offscreen);var L=d||0===w.numGlyphVertices&&0===w.numVerticalGlyphVertices,j=p||0===w.numIconVertices;L||j?j?L||(k=k&&x):x=k&&x:k=x=k&&x,x&&S&&this.collisionIndex.insertCollisionBox(S.box,h.get("text-ignore-placement"),e.bucketInstanceId,O,_.ID),k&&P&&this.collisionIndex.insertCollisionBox(P.box,h.get("icon-ignore-placement"),e.bucketInstanceId,T,_.ID),x&&E&&this.collisionIndex.insertCollisionCircles(E.circles,h.get("text-ignore-placement"),e.bucketInstanceId,O,_.ID),this.placements[w.crossTileID]=new ue(x||y,k||g,C||e.justReloaded),c[w.crossTileID]=!0}}e.justReloaded=!1},he.prototype.commit=function(t,e){this.commitTime=e;var n=!1,r=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,i=t?t.opacities:{};for(var o in this.placements){var a=this.placements[o],s=i[o];s?(this.opacities[o]=new se(s,r,a.text,a.icon),n=n||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[o]=new se(null,r,a.text,a.icon,a.skipFade),n=n||a.text||a.icon)}for(var u in i){var c=i[u];if(!this.opacities[u]){var l=new se(c,r,!1,!1);l.isHidden()||(this.opacities[u]=l,n=n||c.text.placed||c.icon.placed)}}n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},he.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},he.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();var r=t.layers[0].layout,i=new se(null,0,!1,!1,!0),o=r.get("text-allow-overlap"),a=r.get("icon-allow-overlap"),s=new se(null,0,o&&(a||!t.hasIconData()||r.get("icon-optional")),a&&(o||!t.hasTextData()||r.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasCollisionBoxData()||t.hasCollisionCircleData())&&t.deserializeCollisionBoxes(n);for(var u=0;u<t.symbolInstances.length;u++){var c=t.symbolInstances.get(u),l=e[c.crossTileID],h=this.opacities[c.crossTileID];l?h=i:h||(this.opacities[c.crossTileID]=h=s),e[c.crossTileID]=!0;var f=c.numIconVertices>0;if(c.numGlyphVertices>0||c.numVerticalGlyphVertices>0){for(var d=be(h.text),p=(c.numGlyphVertices+c.numVerticalGlyphVertices)/4,v=0;v<p;v++)t.text.opacityVertexArray.emplaceBack(d);t.text.placedSymbolArray.get(c.horizontalPlacedTextSymbolIndex).hidden=h.text.isHidden(),c.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).hidden=h.text.isHidden())}if(f){for(var m=be(h.icon),y=0;y<c.numIconVertices/4;y++)t.icon.opacityVertexArray.emplaceBack(m);t.icon.placedSymbolArray.get(u).hidden=h.icon.isHidden()}if(t.hasCollisionBoxData()||t.hasCollisionCircleData()){var g=t.collisionArrays[u];if(g){g.textBox&&fe(t.collisionBox.collisionVertexArray,h.text.placed,!1),g.iconBox&&fe(t.collisionBox.collisionVertexArray,h.icon.placed,!1);var _=g.textCircles;if(_&&t.hasCollisionCircleData())for(var b=0;b<_.length;b+=5)fe(t.collisionCircle.collisionVertexArray,h.text.placed,l||0===_[b+4])}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},he.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},he.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},he.prototype.stillRecent=function(t){return this.commitTime+this.fadeDuration>t},he.prototype.setStale=function(){this.stale=!0};var de=Math.pow(2,25),pe=Math.pow(2,24),ve=Math.pow(2,17),me=Math.pow(2,16),ye=Math.pow(2,9),ge=Math.pow(2,8),_e=Math.pow(2,1);function be(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*de+e*pe+n*ve+e*me+n*ye+e*ge+n*_e+e}var we=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};we.prototype.continuePlacement=function(t,e,n,r,i){for(;this._currentTileIndex<t.length;)if(e.placeLayerTile(r,t[this._currentTileIndex],n,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0};var xe=function(t,e,n,r,i,o){this.placement=new he(t,i,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};xe.prototype.isDone=function(){return this._done},xe.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new we),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},xe.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var ke=512/t.EXTENT/2,Ce=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<e.length;r++){var i=e.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};Ce.prototype.getScaledCoordinates=function(e,n){var r=ke/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}},Ce.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,c=a;u<c.length;u+=1){var l=c[u];if(Math.abs(l.coord.x-s.x)<=r&&Math.abs(l.coord.y-s.y)<=r&&!n[l.crossTileID]){n[l.crossTileID]=!0,o.crossTileID=l.crossTileID;break}}}}};var Se=function(){this.maxCrossTileID=0};Se.prototype.generate=function(){return++this.maxCrossTileID};var Ee=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ee.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},Ee.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,i)}else{var c=a[t.scaledTo(Number(o)).key];c&&c.findMatches(e.symbolInstances,t,i)}}for(var l=0;l<e.symbolInstances.length;l++){var h=e.symbolInstances.get(l);h.crossTileID||(h.crossTileID=n.generate(),i[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ce(t,e.symbolInstances,e.bucketInstanceId),!0},Ee.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1)delete this.usedCrossTileIDs[t][i[r].crossTileID]},Ee.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var Pe=function(){this.layerIndexes={},this.crossTileIDs=new Se,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Pe.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Ee);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],c=u.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,c,this.crossTileIDs)&&(i=!0),o[c.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},Pe.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var Oe=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},Te=t.pick(Lt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ae=t.pick(Lt,["setCenter","setZoom","setBearing","setPitch"]),Ie=function(e){function n(r,i){var o=this;void 0===i&&(i={}),e.call(this),this.map=r,this.dispatcher=new x((At||(At=new Tt),At),this),this.imageManager=new h,this.glyphManager=new y(r._transformRequest,i.localIdeographFontFamily),this.lineAtlas=new w(256,512),this.crossTileSymbolIndex=new Pe,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginAvailability(function(t){for(var e in a.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),a.sourceCaches)a.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=t.normalizeStyleURL(e,n.accessToken);var o=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,i)})},n.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){r._request=null,r._load(e,!1!==n.validate)})},n.prototype._load=function(e,n){var r=this;if(!n||!Oe(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(i,e.sources[i],{validate:!1});e.sprite?this._spriteRequest=function(e,n,r){var i,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",u=t.getJSON(n(t.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),function(t,e){u=null,a||(a=t,i=e,l())}),c=t.getImage(n(t.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),function(t,e){c=null,a||(a=t,o=e,l())});function l(){if(a)r(a);else if(i&&o){var e=t.browser.getImageData(o),n={};for(var s in i){var u=i[s],c=u.width,l=u.height,h=u.x,f=u.y,d=u.sdf,p=u.pixelRatio,v=new t.RGBAImage({width:c,height:l});t.RGBAImage.copy(e,v,{x:h,y:f},{x:0,y:0},{width:c,height:l}),n[s]={data:v,pixelRatio:p,sdf:d}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),c&&(c.cancel(),c=null)}}}(e.sprite,this.map._transformRequest,function(e,n){if(r._spriteRequest=null,e)r.fire(new t.ErrorEvent(e));else if(n)for(var i in n)r.imageManager.addImage(i,n[i]);r.imageManager.setLoaded(!0),r.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=Mt(this.stylesheet.layers);this._order=o.map(function(t){return t.id}),this._layers={};for(var a=0,s=o;a<s.length;a+=1){var u=s[a];(u=t.createStyleLayer(u)).setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=u}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new b(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=this._layers[r[n]];"custom"!==i.type&&e.push(i.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;for(var c=0,l=this._order;c<l.length;c+=1){var h=this._layers[l[c]];h.recalculate(e),!h.isHidden(e.zoom)&&h.source&&(this.sourceCaches[h.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),Oe(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=Mt(e.layers);var r=function(e,n){if(!e)return[{command:Lt.setStyle,args:[n]}];var r=[];try{if(!t.isEqual(e.version,n.version))return[{command:Lt.setStyle,args:[n]}];t.isEqual(e.center,n.center)||r.push({command:Lt.setCenter,args:[n.center]}),t.isEqual(e.zoom,n.zoom)||r.push({command:Lt.setZoom,args:[n.zoom]}),t.isEqual(e.bearing,n.bearing)||r.push({command:Lt.setBearing,args:[n.bearing]}),t.isEqual(e.pitch,n.pitch)||r.push({command:Lt.setPitch,args:[n.pitch]}),t.isEqual(e.sprite,n.sprite)||r.push({command:Lt.setSprite,args:[n.sprite]}),t.isEqual(e.glyphs,n.glyphs)||r.push({command:Lt.setGlyphs,args:[n.glyphs]}),t.isEqual(e.transition,n.transition)||r.push({command:Lt.setTransition,args:[n.transition]}),t.isEqual(e.light,n.light)||r.push({command:Lt.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Rt(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.isEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&Nt(e,n,o)?r.push({command:Lt.setGeoJSONSourceData,args:[o,n[o].data]}):Ft(o,n,r,i)):jt(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(t){i[t.source]?r.push({command:Lt.removeLayer,args:[t.id]}):a.push(t)}),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,s,u,c,l,h=(e=e||[]).map(zt),f=n.map(zt),d=e.reduce(Vt,{}),p=n.reduce(Vt,{}),v=h.slice(),m=Object.create(null);for(i=0,o=0;i<h.length;i++)p.hasOwnProperty(a=h[i])?o++:(r.push({command:Lt.removeLayer,args:[a]}),v.splice(v.indexOf(a,o),1));for(i=0,o=0;i<f.length;i++)v[v.length-1-i]!==(a=f[f.length-1-i])&&(d.hasOwnProperty(a)?(r.push({command:Lt.removeLayer,args:[a]}),v.splice(v.lastIndexOf(a,v.length-o),1)):o++,r.push({command:Lt.addLayer,args:[p[a],c=v[v.length-i]]}),v.splice(v.length-i,0,a),m[a]=!0);for(i=0;i<f.length;i++)if(s=d[a=f[i]],u=p[a],!m[a]&&!t.isEqual(s,u))if(t.isEqual(s.source,u.source)&&t.isEqual(s["source-layer"],u["source-layer"])&&t.isEqual(s.type,u.type)){for(l in Bt(s.layout,u.layout,r,a,null,Lt.setLayoutProperty),Bt(s.paint,u.paint,r,a,null,Lt.setPaintProperty),t.isEqual(s.filter,u.filter)||r.push({command:Lt.setFilter,args:[a,u.filter]}),t.isEqual(s.minzoom,u.minzoom)&&t.isEqual(s.maxzoom,u.maxzoom)||r.push({command:Lt.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?Bt(s[l],u[l],r,a,l.slice(6),Lt.setPaintProperty):t.isEqual(s[l],u[l])||r.push({command:Lt.setLayerProperty,args:[a,l,u[l]]}));for(l in u)u.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?Bt(s[l],u[l],r,a,l.slice(6),Lt.setPaintProperty):t.isEqual(s[l],u[l])||r.push({command:Lt.setLayerProperty,args:[a,l,u[l]]}))}else r.push({command:Lt.removeLayer,args:[a]}),c=v[v.lastIndexOf(a)+1],r.push({command:Lt.addLayer,args:[u,c]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Lt.setStyle,args:[n]}]}return r}(this.serialize(),e).filter(function(t){return!(t.command in Ae)});if(0===r.length)return!1;var i=r.filter(function(t){return!(t.command in Te)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new St(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(Oe(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}})}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.isEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=t.clone(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.isEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.isEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r],a=parseInt(e.id,10);if(void 0!==o){var s=o.getSource().type;"geojson"===s&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||i?isNaN(a)||a<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):o.setFeatureState(i,a,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0,s=parseInt(e.id,10);"vector"!==o||a?e.id&&isNaN(s)||s<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):!n||e.id?i.removeFeatureState(a,s,n):this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n],o=parseInt(e.id,10);if(void 0!==i)if("vector"!==i.getSource().type||r){if(!(isNaN(o)||o<0))return i.getFeatureState(r,o);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;for(var s=0,u=t;s<u.length;s+=1){var c=u[s][a];if(c)for(var l=0,h=c;l<h.length;l+=1)i.push(h[l])}}}i.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var f=[],d=this._order.length-1;d>=0;d--){var p=this._order[d];if(n(p))for(var v=i.length-1;v>=0;v--){var m=i[v].feature;if(r[m.layer.id]<d)break;f.push(m),i.pop()}else for(var y=0,g=t;y<g.length;y+=1){var _=g[y][p];if(_)for(var b=0,w=_;b<w.length;b+=1)f.push(w[b].feature)}}return f},n.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var c=[];for(var l in this.sourceCaches)n.layers&&!i[l]||c.push(D(this.sourceCaches[l],this._layers,e,n,r));return this.placement&&c.push(function(t,e,n,r,i,o){for(var a={},s=i.queryRenderedSymbols(n),u=[],c=0,l=Object.keys(s).map(Number);c<l.length;c+=1)u.push(o[l[c]]);u.sort(M);for(var h=function(){var e=d[f],n=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,r.filter,r.layers,t);for(var i in n){var o=a[i]=a[i]||[],u=n[i];u.sort(function(t,n){var r=e.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(n.featureIndex)-i}return n.featureIndex-t.featureIndex});for(var c=0,l=u;c<l.length;c+=1)o.push(l[c])}},f=0,d=u;f<d.length;f+=1)h();var p=function(n){a[n].forEach(function(r){var i=r.feature,o=e[t[n].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o})};for(var v in a)p(v);return a}(this._layers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},n.prototype.addSourceType=function(t,e,r){return n.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in e)if(!t.isEqual(e[o],r[o])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,r,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Oe(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.styleSpec},i)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,r,i){for(var o=!1,a=!1,s={},u=0,c=this._order;u<c.length;u+=1){var l=this._layers[c[u]];if("symbol"===l.type){if(!s[l.source]){var h=this.sourceCaches[l.source];s[l.source]=h.getRenderableIds(!0).map(function(t){return h.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var f=this.crossTileSymbolIndex.addLayer(l,s[l.source],e.center.lng);o=o||f}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged||0===r;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now()))&&(this.pauseablePlacement=new xe(e,this._order,d,n,r,i),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.browser.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var p=0,v=this._order;p<v.length;p+=1){var m=this._layers[v[p]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,s[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,r){return t.makeRequest(n,r)},n}(t.Evented);Ie.getSourceType=function(t){return A[t]},Ie.setSourceType=function(t,e){A[t]=e},Ie.registerForPluginAvailability=t.registerForPluginAvailability;var De=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Me=an("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Le=an("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),je=an("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Re=an("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Fe=an("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ne=an("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Be=an("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ze=an("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=a_extrude*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ve=an("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Ue=an("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),qe=an("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),He=an("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Ze=an("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Ge=an("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),We=an("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);}"),Xe=an("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));}"),Ke=an("uniform sampler2D u_image;uniform float u_opacity;varying vec2 v_pos;void main() {gl_FragColor=texture2D(u_image,v_pos)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ye=an("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Je=an("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),$e=an("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Qe=an("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),tn=an("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),en=an("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),nn=an("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),rn=an("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),on=an("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function an(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r={};return{fragmentSource:t=t.replace(n,function(t,e,n,i,o){return r[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),vertexSource:e=e.replace(n,function(t,e,n,i,o){var a="float"===i?"vec2":"vec4",s=o.match(/color/)?"color":a;return r[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = unpack_mix_"+s+"(a_"+o+", a_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}}var sn=Object.freeze({prelude:Me,background:Le,backgroundPattern:je,circle:Re,clippingMask:Fe,heatmap:Ne,heatmapTexture:Be,collisionBox:ze,collisionCircle:Ve,debug:Ue,fill:qe,fillOutline:He,fillOutlinePattern:Ze,fillPattern:Ge,fillExtrusion:We,fillExtrusionPattern:Xe,extrusionTexture:Ke,hillshadePrepare:Ye,hillshade:Je,line:$e,lineGradient:Qe,linePattern:tn,lineSDF:en,raster:nn,symbolIcon:rn,symbolSDF:on}),un=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};un.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,c=0;!u&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,n,r,i,o,a,s)},un.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,c=this.context,l=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(var h=u;h<s;h++)l.disableVertexAttribArray(h)}e.enableAttributes(l,t);for(var f=0,d=n;f<d.length;f+=1)d[f].enableAttributes(l,t);o&&o.enableAttributes(l,t),a&&a.enableAttributes(l,t),e.bind(),e.setVertexAttribPointers(l,t,i);for(var p=0,v=n;p<v.length;p+=1){var m=v[p];m.bind(),m.setVertexAttribPointers(l,t,i)}o&&(o.bind(),o.setVertexAttribPointers(l,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(l,t,i)),c.currentNumAttributes=u},un.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var cn=function(e,n,r,i,o){var a=e.gl;this.program=a.createProgram();var s=r.defines().concat("#define DEVICE_PIXEL_RATIO "+t.browser.devicePixelRatio.toFixed(1));o&&s.push("#define OVERDRAW_INSPECTOR;");var u=s.concat(Me.fragmentSource,n.fragmentSource).join("\n"),c=s.concat(Me.vertexSource,n.vertexSource).join("\n"),l=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(l,u),a.compileShader(l),a.attachShader(this.program,l);var h=a.createShader(a.VERTEX_SHADER);a.shaderSource(h,c),a.compileShader(h),a.attachShader(this.program,h);for(var f=r.layoutAttributes||[],d=0;d<f.length;d++)a.bindAttribLocation(this.program,d,f[d].name);a.linkProgram(this.program),this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES),this.attributes={};for(var p={},v=0;v<this.numAttributes;v++){var m=a.getActiveAttrib(this.program,v);m&&(this.attributes[m.name]=a.getAttribLocation(this.program,m.name))}for(var y=a.getProgramParameter(this.program,a.ACTIVE_UNIFORMS),g=0;g<y;g++){var _=a.getActiveUniform(this.program,g);_&&(p[_.name]=a.getUniformLocation(this.program,_.name))}this.fixedUniforms=i(e,p),this.binderUniforms=r.getUniforms(e,p)};function ln(e,n,r){var i=1/oe(r,1,n.transform.tileZoom),o=Math.pow(2,r.tileID.overscaledZ),a=r.tileSize*Math.pow(2,n.transform.tileZoom)/o,s=a*(r.tileID.canonical.x+r.tileID.wrap*o),u=a*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,u>>16],u_pixel_coord_lower:[65535&s,65535&u]}}cn.prototype.draw=function(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v){var m,y=t.gl;for(var g in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[g].set(a[g]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:f});for(var _=(m={},m[y.LINES]=2,m[y.TRIANGLES]=3,m[y.LINE_STRIP]=1,m)[e],b=0,w=l.get();b<w.length;b+=1){var x=w[b],k=x.vaos||(x.vaos={});(k[s]||(k[s]=new un)).bind(t,this,u,d?d.getPaintVertexBuffers():[],c,x.vertexOffset,p,v),y.drawElements(e,x.primitiveLength*_,y.UNSIGNED_SHORT,x.primitiveOffset*_*2)}};var hn=function(e,n,r){var i=n.style.light,o=i.properties.get("position"),a=[o.x,o.y,o.z],s=t.create();"viewport"===i.properties.get("anchor")&&t.fromRotation(s,-n.transform.angle),t.transformMat3(a,a,s);var u=i.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r}},fn=function(e,n,r,i,o,a){return t.extend(hn(e,n,r),ln(o,n,a),{u_height_factor:-Math.pow(2,i.overscaledZ)/a.tileSize/8})},dn=function(e,n,r){var i=t.create$1();t.ortho(i,0,e.width,e.height,0,0,1);var o=e.context.gl;return{u_matrix:i,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:r,u_opacity:n}},pn=function(t){return{u_matrix:t}},vn=function(e,n,r,i){return t.extend(pn(e),ln(r,n,i))},mn=function(t,e){return{u_matrix:t,u_world:e}},yn=function(e,n,r,i,o){return t.extend(vn(e,n,r,i),{u_world:o})},gn=function(t,e,n,r){var i,o,a=t.transform;if("map"===r.paint.get("circle-pitch-alignment")){var s=oe(n,1,a.zoom);i=!0,o=[s,s]}else i=!1,o=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_extrude_scale:o}},_n=function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},bn=function(t,e,n){var r=oe(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},wn=function(t,e){return{u_matrix:t,u_color:e}},xn=function(t){return{u_matrix:t}},kn=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:oe(e,1,n),u_intensity:r}};function Cn(e,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}var Sn=function(t,e,n){var r=t.transform;return{u_matrix:An(t,e,n),u_ratio:1/oe(e,1,r.zoom),u_gl_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},En=function(e,n,r){return t.extend(Sn(e,n,r),{u_image:0})},Pn=function(e,n,r,i){var o=e.transform,a=Tn(n,o);return{u_matrix:An(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/oe(n,1,o.zoom),u_image:0,u_scale:[t.browser.devicePixelRatio,a,i.fromScale,i.toScale],u_fade:i.t,u_gl_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},On=function(e,n,r,i,o){var a=e.lineAtlas,s=Tn(n,e.transform),u="round"===r.layout.get("line-cap"),c=a.getDash(i.from,u),l=a.getDash(i.to,u),h=c.width*o.fromScale,f=l.width*o.toScale;return t.extend(Sn(e,n,r),{u_patternscale_a:[s/h,-c.height/2],u_patternscale_b:[s/f,-l.height/2],u_sdfgamma:a.width/(256*Math.min(h,f)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:l.y,u_mix:o.t})};function Tn(t,e){return 1/oe(t,1,e.tileZoom)}function An(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var In=function(t,e,n,r,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Dn(i.paint.get("raster-hue-rotate"))};var o,a};function Dn(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var Mn=function(t,e,n,r,i,o,a,s,u,c){var l=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:l.cameraToCenterDistance,u_pitch:l.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:l.width/l.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_gl_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},Ln=function(e,n,r,i,o,a,s,u,c,l,h){var f=o.transform;return t.extend(Mn(e,n,r,i,o,a,s,u,c,l),{u_gamma_scale:i?Math.cos(f._pitch)*f.cameraToCenterDistance:1,u_is_halo:+h})},jn=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Rn=function(e,n,r,i,o,a){return t.extend(function(t,e,n,r){var i=n.imageManager.getPattern(t.from),o=n.imageManager.getPattern(t.to),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,c=Math.pow(2,r.tileID.overscaledZ),l=r.tileSize*Math.pow(2,n.transform.tileZoom)/c,h=l*(r.tileID.canonical.x+r.tileID.wrap*c),f=l*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/oe(r,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,f>>16],u_pixel_coord_lower:[65535&h,65535&f]}}(i,a,r,o),{u_matrix:e,u_opacity:n})},Fn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},extrusionTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:_n,collisionCircle:_n,debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_maxzoom:new t.Uniform1f(e,n.u_maxzoom)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_image:new t.Uniform1i(e,n.u_image),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_scale:new t.Uniform4f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_gl_units_to_pixels:new t.Uniform2f(e,n.u_gl_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_gl_coord_matrix:new t.UniformMatrix4f(e,n.u_gl_coord_matrix),u_is_text:new t.Uniform1f(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_is_halo:new t.Uniform1f(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function Nn(e,n){for(var r=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),i=0;i<r.length;i++){var o={},a=r[i],s=r.slice(i+1);Bn(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,n)}}function Bn(e,n,r,i,o){for(var a=0;a<r.length;a++){var s=r[a];if(i.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var u=n.children(1/0),c=0;c<u.length;c++)Bn(e,u[c],r.slice(a),i,o);return}}var l=n.overscaledZ-e.overscaledZ,h=new t.CanonicalTileID(l,n.canonical.x-(e.canonical.x<<l),n.canonical.y-(e.canonical.y<<l));o[h.key]=o[h.key]||h}function zn(t,e,n,r,i){for(var o=t.context,a=o.gl,s=t.useProgram(i?"collisionCircle":"collisionBox"),u=0;u<r.length;u++){var c=r[u],l=e.getTile(c),h=l.getBucket(n);if(h){var f=i?h.collisionCircle:h.collisionBox;f&&s.draw(o,i?a.TRIANGLES:a.LINES,bt.disabled,wt.disabled,t.colorModeForRenderPass(),kt.disabled,bn(c.posMatrix,t.transform,l),n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,null,t.transform.zoom,null,null,f.collisionVertexBuffer)}}}var Vn=t.identity(new Float32Array(16)),Un=t.properties.layout;function qn(e,n,r,i,o,a,s,u,c,l,h,f){for(var d,p,v=e.context,m=v.gl,y=e.transform,g="map"===u,_="map"===c,b=g&&"point"!==r.layout.get("symbol-placement"),w=g&&!_&&!b,x=void 0!==r.layout.get("symbol-sort-key").constantOr(1),k=e.depthModeForSublayer(0,bt.ReadOnly),C=[],S=0,E=i;S<E.length;S+=1){var P=E[S],O=n.getTile(P),T=O.getBucket(r);if(T){var A=o?T.text:T.icon;if(A&&A.segments.get().length){var I=A.programConfigurations.get(r.id),D=o||T.sdfIcons,M=o?T.textSizeData:T.iconSizeData;d||(d=e.useProgram(D?"symbolSDF":"symbolIcon",I),p=t.evaluateSizeForZoom(M,y.zoom,Un.properties[o?"text-size":"icon-size"])),v.activeTexture.set(m.TEXTURE0);var L=void 0,j=void 0,R=void 0;if(o)j=O.glyphAtlasTexture,R=m.LINEAR,L=O.glyphAtlasTexture.size;else{var F=1!==r.layout.get("icon-size").constantOr(0)||T.iconsNeedLinear;j=O.imageAtlasTexture,R=D||e.options.rotating||e.options.zooming||F||_||0!==y.pitch?m.LINEAR:m.NEAREST,L=O.imageAtlasTexture.size}var N=oe(O,1,e.transform.zoom),B=Ht(P.posMatrix,_,g,e.transform,N),z=Zt(P.posMatrix,_,g,e.transform,N);b&&Xt(T,P.posMatrix,e,o,B,z,_,l);var V=e.translatePosMatrix(P.posMatrix,O,a,s),U=b?Vn:B,q=e.translatePosMatrix(z,O,a,s,!0),H=D&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),Z={program:d,buffers:A,uniformValues:D?Ln(M.functionType,p,w,_,e,V,U,q,o,L,!0):Mn(M.functionType,p,w,_,e,V,U,q,o,L),atlasTexture:j,atlasInterpolation:R,isSDF:D,hasHalo:H};if(x)for(var G=0,W=A.segments.get();G<W.length;G+=1){var X=W[G];C.push({segments:new t.SegmentVector([X]),sortKey:X.sortKey,state:Z})}else C.push({segments:A.segments,sortKey:0,state:Z})}}}x&&C.sort(function(t,e){return t.sortKey-e.sortKey});for(var K=0,Y=C;K<Y.length;K+=1){var J=Y[K],$=J.state;if($.atlasTexture.bind($.atlasInterpolation,m.CLAMP_TO_EDGE),$.isSDF){var Q=$.uniformValues;$.hasHalo&&(Q.u_is_halo=1,Hn($.buffers,J.segments,r,e,$.program,k,h,f,Q)),Q.u_is_halo=0}Hn($.buffers,J.segments,r,e,$.program,k,h,f,$.uniformValues)}}function Hn(t,e,n,r,i,o,a,s,u){var c=r.context;i.draw(c,c.gl.TRIANGLES,o,a,s,kt.disabled,u,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Zn(t,e,n,r,i,o,a){var s,u,c,l,h,f=t.context.gl,d=n.paint.get("fill-pattern"),p=d&&d.constantOr(1),v=n.getCrossfadeParameters();a?(u=p&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=f.LINES):(u=p?"fillPattern":"fill",s=f.TRIANGLES);for(var m=0,y=r;m<y.length;m+=1){var g=y[m],_=e.getTile(g);if(!p||_.patternsLoaded()){var b=_.getBucket(n);if(b){var w=b.programConfigurations.get(n.id),x=t.useProgram(u,w);p&&(t.context.activeTexture.set(f.TEXTURE0),_.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),w.updatePatternPaintBuffers(v));var k=d.constantOr(null);if(k&&_.imageAtlas){var C=_.imageAtlas.patternPositions[k.to],S=_.imageAtlas.patternPositions[k.from];C&&S&&w.setConstantPatternPositions(C,S)}var E=t.translatePosMatrix(g.posMatrix,_,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){l=b.indexBuffer2,h=b.segments2;var P=[f.drawingBufferWidth,f.drawingBufferHeight];c="fillOutlinePattern"===u&&p?yn(E,t,v,_,P):mn(E,P)}else l=b.indexBuffer,h=b.segments,c=p?vn(E,t,v,_):pn(E);x.draw(t.context,s,i,t.stencilModeForClipping(g),o,kt.disabled,c,n.id,b.layoutVertexBuffer,l,h,n.paint,t.transform.zoom,w)}}}}function Gn(e,n){var r=e.context,i=r.gl,o=n.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!o){var a=new t.Texture(r,{width:e.width,height:e.height,data:null},i.RGBA);a.bind(i.LINEAR,i.CLAMP_TO_EDGE),(o=n.viewportFrame=r.createFramebuffer(e.width,e.height)).colorAttachment.set(a.texture)}r.bindFramebuffer.set(o.framebuffer),o.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(r.clear({depth:1}),e.depthRboNeedsClear=!1),r.clear({color:t.Color.transparent}),r.setStencilMode(wt.disabled),r.setDepthMode(new bt(i.LEQUAL,bt.ReadWrite,[0,1])),r.setColorMode(e.colorModeForRenderPass())}function Wn(t,e,n){var r=e.viewportFrame;if(r){var i=t.context,o=i.gl;i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),t.useProgram("extrusionTexture").draw(i,o.TRIANGLES,bt.disabled,wt.disabled,t.colorModeForRenderPass(),kt.disabled,dn(t,n,0),e.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,e.paint,t.transform.zoom)}}function Xn(t,e,n,r,i,o){var a=t.context,s=a.gl,u=e.fbo;if(u){var c=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var l=function(t,e,n){var r=n.paint.get("hillshade-shadow-color"),i=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:Cn(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:i,u_accent:o}}(t,e,n);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?c.draw(a,s.TRIANGLES,r,i,o,kt.disabled,l,n.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):c.draw(a,s.TRIANGLES,r,i,o,kt.disabled,l,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function Kn(e,n,r,i,o,a,s){var u=e.context,c=u.gl;if(n.dem&&n.dem.data){var l=n.dem.dim,h=n.dem.stride,f=n.dem.getPixels();if(u.activeTexture.set(c.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(h),n.demTexture){var d=n.demTexture;d.update(f,{premultiply:!1}),d.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(u,f,c.RGBA,{premultiply:!1}),n.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);u.activeTexture.set(c.TEXTURE0);var p=n.fbo;if(!p){var v=new t.Texture(u,{width:l,height:l,data:null},c.RGBA);v.bind(c.LINEAR,c.CLAMP_TO_EDGE),(p=n.fbo=u.createFramebuffer(l,l)).colorAttachment.set(v.texture)}u.bindFramebuffer.set(p.framebuffer),u.viewport.set([0,0,l,l]),e.useProgram("hillshadePrepare").draw(u,c.TRIANGLES,o,a,s,kt.disabled,function(e,n){var r=e.dem.stride,i=t.create$1();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.tileID.overscaledZ,u_maxzoom:n}}(n,i),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Yn(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,c=n?(s-n.timeAdded)/a:-1,l=r.getSource(),h=o.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),f=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=f&&e.refreshedUponExpiration?1:t.clamp(f?u:1-c,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}function Jn(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),u=bt.disabled,c=wt.disabled,l=e.colorModeForRenderPass(),h="$debug";s.draw(i,o.LINE_STRIP,u,c,l,kt.disabled,wn(a,t.Color.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var f=function(t,e,n,r){r=r||1;var i,o,a,s,u,c,l,h,f=[];for(i=0,o=t.length;i<o;i++)if(u=$n[t[i]]){for(h=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?h=null:(c=e+u[1][a]*r,l=200-u[1][a+1]*r,h&&f.push(h.x,h.y,c,l),h={x:c,y:l});e+=u[0]*r}return f}(r.toString(),50,0,5),d=new t.StructArrayLayout2i4,p=new t.StructArrayLayout2ui4,v=0;v<f.length;v+=2)d.emplaceBack(f[v],f[v+1]),p.emplaceBack(v,v+1);for(var m=i.createVertexBuffer(d,De.members),y=i.createIndexBuffer(p),g=t.SegmentVector.simpleSegment(0,0,d.length/2,d.length/2),_=n.getTile(r).tileSize,b=t.EXTENT/(Math.pow(2,e.transform.zoom-r.overscaledZ)*_),w=[[-1,-1],[-1,1],[1,-1],[1,1]],x=0;x<w.length;x++){var k=w[x];s.draw(i,o.LINES,u,c,l,kt.disabled,wn(t.translate([],a,[b*k[0],b*k[1],0]),t.Color.white),h,m,y,g)}s.draw(i,o.LINES,u,c,l,kt.disabled,wn(a,t.Color.black),h,m,y,g)}var $n={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Qn={symbol:function(t,e,n,r){if("translucent"===t.renderPass){var i=wt.disabled,o=t.colorModeForRenderPass();0!==n.paint.get("icon-opacity").constantOr(1)&&qn(t,e,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),i,o),0!==n.paint.get("text-opacity").constantOr(1)&&qn(t,e,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),i,o),e.map.showCollisionBoxes&&function(t,e,n,r){zn(t,e,n,r,!1),zn(t,e,n,r,!0)}(t,e,n,r)}},circle:function(t,e,n,r){if("translucent"===t.renderPass){var i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=t.context,u=s.gl,c=t.depthModeForSublayer(0,bt.ReadOnly),l=wt.disabled,h=t.colorModeForRenderPass(),f=0;f<r.length;f++){var d=r[f],p=e.getTile(d),v=p.getBucket(n);if(v){var m=v.programConfigurations.get(n.id);t.useProgram("circle",m).draw(s,u.TRIANGLES,c,l,h,kt.disabled,gn(t,d,p,n),n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,n.paint,t.transform.zoom,m)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=e.depthModeForSublayer(0,bt.ReadOnly),u=wt.disabled,c=new xt([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,n,r,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,n,r,i))}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(var l=0;l<i.length;l++){var h=i[l];if(!n.hasRenderableParent(h)){var f=n.getTile(h),d=f.getBucket(r);if(d){var p=d.programConfigurations.get(r.id);e.useProgram("heatmap",p).draw(o,a.TRIANGLES,s,u,c,kt.disabled,kn(h.posMatrix,f,e.transform.zoom,r.paint.get("heatmap-intensity")),r.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,r.paint,e.transform.zoom,p)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,bt.disabled,wt.disabled,e.colorModeForRenderPass(),kt.disabled,function(e,n,r,i){var o=t.create$1();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,bt.ReadOnly),u=e.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),l=r.paint.get("line-pattern"),h=l.constantOr(1),f=r.paint.get("line-gradient"),d=r.getCrossfadeParameters(),p=c?"lineSDF":h?"linePattern":f?"lineGradient":"line",v=e.context,m=v.gl,y=!0;if(f){v.activeTexture.set(m.TEXTURE0);var g=r.gradientTexture;if(!r.gradient)return;g||(g=r.gradientTexture=new t.Texture(v,r.gradient,m.RGBA)),g.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var _=0,b=i;_<b.length;_+=1){var w=b[_],x=n.getTile(w);if(!h||x.patternsLoaded()){var k=x.getBucket(r);if(k){var C=k.programConfigurations.get(r.id),S=e.context.program.get(),E=e.useProgram(p,C),P=y||E.program!==S,O=l.constantOr(null);if(O&&x.imageAtlas){var T=x.imageAtlas.patternPositions[O.to],A=x.imageAtlas.patternPositions[O.from];T&&A&&C.setConstantPatternPositions(T,A)}var I=c?On(e,x,r,c,d):h?Pn(e,x,r,d):f?En(e,x,r):Sn(e,x,r);c&&(P||e.lineAtlas.dirty)?(v.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(v)):h&&(v.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),C.updatePatternPaintBuffers(d)),E.draw(v,m.TRIANGLES,s,e.stencilModeForClipping(w),u,kt.disabled,I,r.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,r.paint,e.transform.zoom,C),y=!1}}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=r.paint.get("fill-pattern").constantOr(1)||1!==o.constantOr(t.Color.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";if(e.renderPass===u){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?bt.ReadWrite:bt.ReadOnly);Zn(e,n,r,i,c,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var l=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,bt.ReadOnly);Zn(e,n,r,i,l,s,!0)}}},"fill-extrusion":function(t,e,n,r){if(0!==n.paint.get("fill-extrusion-opacity"))if("offscreen"===t.renderPass){Gn(t,n);var i=new bt(t.context.gl.LEQUAL,bt.ReadWrite,[0,1]),o=wt.disabled,a=t.colorModeForRenderPass();!function(t,e,n,r,i,o,a){for(var s=t.context,u=s.gl,c=n.paint.get("fill-extrusion-pattern"),l=c.constantOr(1),h=n.getCrossfadeParameters(),f=0,d=r;f<d.length;f+=1){var p=d[f],v=e.getTile(p),m=v.getBucket(n);if(m){var y=m.programConfigurations.get(n.id),g=t.useProgram(l?"fillExtrusionPattern":"fillExtrusion",y);l&&(t.context.activeTexture.set(u.TEXTURE0),v.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),y.updatePatternPaintBuffers(h));var _=c.constantOr(null);if(_&&v.imageAtlas){var b=v.imageAtlas.patternPositions[_.to],w=v.imageAtlas.patternPositions[_.from];b&&w&&y.setConstantPatternPositions(b,w)}var x=t.translatePosMatrix(p.posMatrix,v,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),k=n.paint.get("fill-extrusion-vertical-gradient"),C=l?fn(x,t,k,p,h,v):hn(x,t,k);g.draw(s,s.gl.TRIANGLES,i,o,a,kt.backCCW,C,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,n.paint,t.transform.zoom,y)}}}(t,e,n,r,i,o,a)}else"translucent"===t.renderPass&&Wn(t,n,n.paint.get("fill-extrusion-opacity"))},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,bt.ReadOnly),s=wt.disabled,u=t.colorModeForRenderPass(),c=0,l=r;c<l.length;c+=1){var h=e.getTile(l[c]);h.needsHillshadePrepare&&"offscreen"===t.renderPass?Kn(t,h,n,o,a,s,u):"translucent"===t.renderPass&&Xn(t,h,n,a,s,u)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity"))for(var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),u=wt.disabled,c=t.colorModeForRenderPass(),l=r.length&&r[0].overscaledZ,h=!t.options.moving,f=0,d=r;f<d.length;f+=1){var p=d[f],v=t.depthModeForSublayer(p.overscaledZ-l,1===n.paint.get("raster-opacity")?bt.ReadWrite:bt.ReadOnly,o.LESS),m=e.getTile(p),y=t.transform.calculatePosMatrix(p.toUnwrapped(),h);m.registerFadeDuration(n.paint.get("raster-fade-duration"));var g=e.findLoadedParent(p,0),_=Yn(m,g,e,n,t.transform),b=void 0,w=void 0,x="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),m.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),g?(g.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,g.tileID.overscaledZ-m.tileID.overscaledZ),w=[m.tileID.canonical.x*b%1,m.tileID.canonical.y*b%1]):m.texture.bind(x,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var k=In(y,w||[0,0],b||1,_,n);a instanceof T?s.draw(i,o.TRIANGLES,v,u,c,kt.disabled,k,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?s.draw(i,o.TRIANGLES,v,u,c,kt.disabled,k,n.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,n.paint,t.transform.zoom):s.draw(i,o.TRIANGLES,v,u,c,kt.disabled,k,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,c=n.paint.get("background-pattern");if(!t.isPatternMissing(c)){var l=c||1!==r.a||1!==i?"translucent":"opaque";if(t.renderPass===l){var h=wt.disabled,f=t.depthModeForSublayer(0,"opaque"===l?bt.ReadWrite:bt.ReadOnly),d=t.colorModeForRenderPass(),p=t.useProgram(c?"backgroundPattern":"background"),v=s.coveringTiles({tileSize:u});c&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var m=n.getCrossfadeParameters(),y=0,g=v;y<g.length;y+=1){var _=g[y],b=t.transform.calculatePosMatrix(_.toUnwrapped()),w=c?Rn(b,i,t,c,{tileID:_,tileSize:u},m):jn(b,i,r);p.draw(o,a.TRIANGLES,f,h,d,kt.disabled,w,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)Jn(t,e,n[r])},custom:function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),o.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState()),"3d"===i.renderingMode&&(t.setCustomLayerDefaults(),Gn(t,n),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass)if("3d"===i.renderingMode)Wn(t,n,1);else{t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(wt.disabled);var a=t.depthModeForSublayer(0,bt.ReadOnly);r.setDepthMode(a),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},tr=function(e,n){this.context=new Ct(e),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=St.maxUnderzooming+St.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new Pe};function er(t,e){if(t.y>e.y){var n=t;t=e,e=n}return{x0:t.x,y0:t.y,x1:e.x,y1:e.y,dx:e.x-t.x,dy:e.y-t.y}}function nr(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,c=e.dx/e.dy,l=t.dx>0,h=e.dx<0,f=o;f<a;f++){var d=u*Math.max(0,Math.min(t.dy,f+l-t.y0))+t.x0,p=c*Math.max(0,Math.min(e.dy,f+h-e.y0))+e.x0;i(Math.floor(p),Math.ceil(d),f)}}function rr(t,e,n,r,i,o){var a,s=er(t,e),u=er(e,n),c=er(n,t);s.dy>u.dy&&(a=s,s=u,u=a),s.dy>c.dy&&(a=s,s=c,c=a),u.dy>c.dy&&(a=u,u=c,c=a),s.dy&&nr(c,s,r,i,o),u.dy&&nr(c,u,r,i,o)}tr.prototype.resize=function(e,n){var r=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1)this.style._layers[o[i]].resize();this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},tr.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,De.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,De.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,De.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var u=this.context.gl;this.stencilClearMode=new wt({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},tr.prototype.clearStencil=function(){var e=this.context,n=e.gl,r=t.create$1();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,bt.disabled,this.stencilClearMode,xt.disabled,kt.disabled,xn(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},tr.prototype._renderTileClippingMasks=function(t){var e=this.context,n=e.gl;e.setColorMode(xt.disabled),e.setDepthMode(bt.disabled);var r=this.useProgram("clippingMask"),i=1;this._tileClippingMaskIDs={};for(var o=0,a=t;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=i++;r.draw(e,n.TRIANGLES,bt.disabled,new wt({func:n.ALWAYS,mask:0},u,255,n.KEEP,n.KEEP,n.REPLACE),xt.disabled,kt.disabled,xn(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}},tr.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new wt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},tr.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new xt([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?xt.unblended:xt.alphaBlended},tr.prototype.depthModeForSublayer=function(t,e,n){var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new bt(n||this.context.gl.LEQUAL,e,[r,r])},tr.prototype.render=function(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now());var r=this.style._order,i=this.style.sourceCaches;for(var o in i){var a=i[o];a.used&&a.prepare(this.context)}var s,u={},c={},l={};for(var h in i){var f=i[h];u[h]=f.getVisibleCoordinates(),c[h]=u[h].slice().reverse(),l[h]=f.getVisibleCoordinates(!0).reverse()}for(var d in i){var p=i[d],v=p.getSource();if("raster"===v.type||"raster-dem"===v.type){for(var m=[],y=0,g=u[d];y<g.length;y+=1)m.push(p.getTile(g[y]));Nn(m,this.context)}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var _=0,b=r;_<b.length;_+=1){var w=this.style._layers[b[_]];if(w.hasOffscreenPass()&&!w.isHidden(this.transform.zoom)){var x=c[w.source];("custom"===w.type||x.length)&&this.renderLayer(this,i[w.source],w,x)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var k=this.style._layers[r[this.currentLayer]],C=i[k.source],S=u[k.source];k.source!==s&&C&&(this.clearStencil(),C.getSource().isTileClipped&&this._renderTileClippingMasks(S)),this.renderLayer(this,C,k,S),s=k.source}for(this.renderPass="translucent",this.currentLayer=0,s=null;this.currentLayer<r.length;this.currentLayer++){var E=this.style._layers[r[this.currentLayer]],P=i[E.source],O=("symbol"===E.type?l:c)[E.source];E.source!==s&&P&&(this.clearStencil(),P.getSource().isTileClipped&&this._renderTileClippingMasks(u[E.source])),this.renderLayer(this,P,E,O),s=E.source}if(this.options.showTileBoundaries)for(var T in i){Qn.debug(this,i[T],u[T]);break}this.setCustomLayerDefaults()},tr.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},tr.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,Qn[n.type](t,e,n,r))},tr.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var c=[o?r[0]:oe(n,r[0],this.transform.zoom),o?r[1]:oe(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,c),l},tr.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},tr.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},tr.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from),n=this.imageManager.getPattern(t.to);return!e||!n},tr.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new cn(this.context,sn[t],e,Fn[t],this._showOverdrawInspector)),this.cache[n]},tr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},tr.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var ir=function(e,n,r){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===r||r,this._minZoom=e||0,this._maxZoom=n||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},or={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ir.prototype.clone=function(){var t=new ir(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},or.minZoom.get=function(){return this._minZoom},or.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},or.maxZoom.get=function(){return this._maxZoom},or.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},or.renderWorldCopies.get=function(){return this._renderWorldCopies},or.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},or.worldSize.get=function(){return this.tileSize*this.scale},or.centerPoint.get=function(){return this.size._div(2)},or.size.get=function(){return new t.Point(this.width,this.height)},or.bearing.get=function(){return-this.angle/Math.PI*180},or.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},or.pitch.get=function(){return this._pitch/Math.PI*180},or.pitch.set=function(e){var n=t.clamp(e,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},or.fov.get=function(){return this._fov/Math.PI*180},or.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},or.zoom.get=function(){return this._zoom},or.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},or.center.get=function(){return this._center},or.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},ir.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},ir.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),u=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=s-1;c<=u+1;c++)0!==c&&n.push(new t.UnwrappedTileID(c,e));return n},ir.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=new t.Point(o*i.x-.5,o*i.y-.5);return function(e,n,r,i){void 0===i&&(i=!0);var o=1<<e,a={};function s(n,s,u){var c,l,h;if(u>=0&&u<=o)for(c=n;c<s;c++)0!==(l=Math.floor(c/o))&&!0!==i||(h=new t.OverscaledTileID(r,l,e,(c%o+o)%o,u),a[h.key]=h)}var u=n.map(function(e){return new t.Point(e.x,e.y)._mult(o)});return rr(u[0],u[1],u[2],0,o,s),rr(u[2],u[3],u[0],0,o,s),Object.keys(a).map(function(t){return a[t]})}(n,[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))],e.reparseOverscaled?r:n,this._renderWorldCopies).sort(function(t,e){return a.dist(t.canonical)-a.dist(e.canonical)})},ir.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},or.unmodified.get=function(){return this._unmodified},ir.prototype.zoomScale=function(t){return Math.pow(2,t)},ir.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},ir.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},ir.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},or.point.get=function(){return this.project(this.center)},ir.prototype.setLocationAtPoint=function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},ir.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},ir.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},ir.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},ir.prototype.coordinateLocation=function(t){return t.toLngLat()},ir.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[1]/i,s=r[1]/o,u=n[2]/i,c=r[2]/o,l=u===c?0:(0-u)/(c-u);return new t.MercatorCoordinate(t.number(n[0]/i,r[0]/o,l)/this.worldSize,t.number(a,s,l)/this.worldSize)},ir.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},ir.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},ir.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ir.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ir.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},ir.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ir.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,u=180,c=this.size,l=this._unmodified;if(this.latRange){var h=this.latRange;o=t.mercatorYfromLat(h[1])*this.worldSize,e=(a=t.mercatorYfromLat(h[0])*this.worldSize)-o<c.y?c.y/(a-o):0}if(this.lngRange){var f=this.lngRange;s=t.mercatorXfromLng(f[0])*this.worldSize,n=(u=t.mercatorXfromLng(f[1])*this.worldSize)-s<c.x?c.x/(u-s):0}var d=this.point,p=Math.max(n||0,e||0);if(p)return this.center=this.unproject(new t.Point(n?(u+s)/2:d.x,e?(a+o)/2:d.y)),this.zoom+=this.scaleZoom(p),this._unmodified=l,void(this._constraining=!1);if(this.latRange){var v=d.y,m=c.y/2;v-m<o&&(i=o+m),v+m>a&&(i=a-m)}if(this.lngRange){var y=d.x,g=c.x/2;y-g<s&&(r=s+g),y+g>u&&(r=u-g)}void 0===r&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==r?r:d.x,void 0!==i?i:d.y))),this._unmodified=l,this._constraining=!1}},ir.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,n=Math.PI/2+this._pitch,r=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-n-e),i=this.point,o=i.x,a=i.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),u=new Float64Array(16);t.perspective(u,this._fov,this.width/this.height,1,s),t.scale(u,u,[1,-1,1]),t.translate(u,u,[0,0,-this.cameraToCenterDistance]),t.rotateX(u,u,this._pitch),t.rotateZ(u,u,this.angle),t.translate(u,u,[-o,-a,0]),this.mercatorMatrix=t.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),t.scale(u,u,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u;var c=this.width%2/2,l=this.height%2/2,h=Math.cos(this.angle),f=Math.sin(this.angle),d=o-Math.round(o)+h*c+f*l,p=a-Math.round(a)+h*l+f*c,v=new Float64Array(u);if(t.translate(v,v,[d>.5?d-1:d,p>.5?p-1:p,0]),this.alignedProjMatrix=v,u=t.create$1(),t.scale(u,u,[this.width/2,-this.height/2,1]),t.translate(u,u,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),u,this.projMatrix),!(u=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ir.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},ir.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},ir.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var r=n.x,i=n.y,o=n.x,a=n.y,s=0,u=e;s<u.length;s+=1){var c=u[s];r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}return[new t.Point(r,i),new t.Point(o,i),new t.Point(o,a),new t.Point(r,a),new t.Point(r,i)]},Object.defineProperties(ir.prototype,or);var ar=function(){var e,n,r,i;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),n=!1,r=0,i=function(){r=0,n&&(e(),r=setTimeout(i,300),n=!1)},function(){return n=!0,r||i(),r})};ar.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ar.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ar.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),c="";return c+=t?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(c+="/"+Math.round(10*s)/10),u&&(c+="/"+Math.round(u)),c},ar.prototype._onHashChange=function(){var e=t.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},ar.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var sr=function(e){function r(r,i,o,a){void 0===a&&(a={});var s=n.mousePos(i.getCanvasContainer(),o),u=i.unproject(s);e.call(this,r,t.extend({point:s,lngLat:u,originalEvent:o},a)),this._defaultPrevented=!1,this.target=i}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),ur=function(e){function r(r,i,o){var a=n.touchPos(i.getCanvasContainer(),o),s=a.map(function(t){return i.unproject(t)}),u=a.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new t.Point(0,0)),c=i.unproject(u);e.call(this,r,{points:a,point:u,lngLats:s,lngLat:c,originalEvent:o}),this._defaultPrevented=!1}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),cr=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),lr=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};lr.prototype.isEnabled=function(){return!!this._enabled},lr.prototype.isActive=function(){return!!this._active},lr.prototype.isZooming=function(){return!!this._zooming},lr.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},lr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},lr.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},lr.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},lr.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var r=n.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},lr.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,u=this._easing,c=!1;if("wheel"===this._type&&s&&u){var l=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),h=u(l);n.zoom=t.number(s,a,h),l<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):c=!0}else n.zoom=a,c=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),c&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},lr.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n};var hr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};hr.prototype.isEnabled=function(){return!!this._enabled},hr.prototype.isActive=function(){return!!this._active},hr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},hr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},hr.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),n.disableDrag(),this._startPos=this._lastPos=n.mousePos(this._el,e),this._active=!0)},hr.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=e,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(r.x,e.x),o=Math.max(r.x,e.x),a=Math.min(r.y,e.y),s=Math.max(r.y,e.y);n.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"}},hr.prototype._onMouseUp=function(e){if(0===e.button){var r=this._startPos,i=n.mousePos(this._el,e);this._finish(),n.suppressClick(),r.x===i.x&&r.y===i.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},hr.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},hr.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},hr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var fr=t.bezier(0,0,.25,1),dr=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};dr.prototype.isEnabled=function(){return"disabled"!==this._state},dr.prototype.isActive=function(){return"active"===this._state},dr.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},dr.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},dr.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=n.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==n.mouseButton(e))return;this._eventButton=0}n.disableDrag(),t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=n.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},dr.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},dr.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,r=this._startPos,i=this._lastPos,o=n.bearing-.8*(r.x-i.x),a=n.pitch- -.5*(r.y-i.y),s=this._inertia,u=s[s.length-1];this._drainInertiaBuffer(),s.push([t.browser.now(),this._map._normalizeBearing(o,u[1])]),n.bearing=o,this._pitchWithRotate&&(this._fireEvent("pitch",e),n.pitch=a),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},dr.prototype._onMouseUp=function(t){if(n.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},dr.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},dr.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),n.enableDrag()},dr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},dr.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],u=n._normalizeBearing(r,i[i.length-2][1]),c=s[1]-a[1],l=c<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==c&&0!==h){var f=Math.abs(c*(.25/h));f>180&&(f=180);var d=f/180;u+=l*f*(d/2),Math.abs(n._normalizeBearing(u,0))<this._bearingSnap&&(u=n._normalizeBearing(0,u)),n.rotateTo(u,{duration:1e3*d,easing:fr,noMoveStart:!0},{originalEvent:t})}else o()}},dr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},dr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var pr=t.bezier(0,0,.3,1),vr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};vr.prototype.isEnabled=function(){return"disabled"!==this._state},vr.prototype.isActive=function(){return"active"===this._state},vr.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},vr.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},vr.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==n.mouseButton(e)||(n.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},vr.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(n.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},vr.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=n.mousePos(this._el,e),this._inertia=[[t.browser.now(),this._startPos]]},vr.prototype._onMove=function(e){e.preventDefault();var r=n.mousePos(this._el,e);this._lastPos.equals(r)||"pending"===this._state&&r.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=r,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},vr.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},vr.prototype._onMouseUp=function(t){if(0===n.mouseButton(t))switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},vr.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},vr.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},vr.prototype._unbind=function(){n.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onTouchEnd),n.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.removeEventListener(t.window.document,"mouseup",this._onMouseUp),n.removeEventListener(t.window,"blur",this._onBlur)},vr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},vr.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],r=e[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",t);else{var a=i.mult(.3/o),s=a.mag();s>1400&&(s=1400,a._unit()._mult(s));var u=s/750,c=a.mult(-u/2);this._map.panBy(c,{duration:1e3*u,easing:pr,noMoveStart:!0},{originalEvent:t})}}},vr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},vr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var mr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function yr(t){return t*(2-t)}mr.prototype.isEnabled=function(){return!!this._enabled},mr.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},mr.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},mr.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:yr,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*r,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(u,{originalEvent:t})}};var gr=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};gr.prototype.isEnabled=function(){return!!this._enabled},gr.prototype.isActive=function(){return!!this._active},gr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},gr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},gr.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},gr.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},gr.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},gr.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var _r=t.bezier(0,0,.15,1),br=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};br.prototype.isEnabled=function(){return!!this._enabled},br.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},br.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},br.prototype.disableRotation=function(){this._rotationDisabled=!0},br.prototype.enableRotation=function(){this._rotationDisabled=!1},br.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var r=n.mousePos(this._el,e.touches[0]),i=n.mousePos(this._el,e.touches[1]),o=r.add(i).div(2);this._startVec=r.sub(i),this._startAround=this._map.transform.pointLocation(o),this._gestureIntent=void 0,this._inertia=[],n.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.addEventListener(t.window.document,"touchend",this._onEnd)}},br.prototype._getTouchEventData=function(t){var e=n.mousePos(this._el,t.touches[0]),r=n.mousePos(this._el,t.touches[1]),i=e.sub(r);return{vec:i,center:e.add(r).div(2),scale:i.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI}},br.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),r=n.vec,i=n.scale,o=n.bearing;if(!this._gestureIntent){var a=this._rotationDisabled&&1!==i||Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=r)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},br.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,o=r.bearing,a=r.scale,s=n.pointLocation(i),u=n.locationPoint(s);"rotate"===e&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(this._startAround,u),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,i])}},br.prototype._onEnd=function(e){n.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onEnd);var r=this._gestureIntent,i=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,r){this._map.fire(new t.Event(r+"end",{originalEvent:e})),this._drainInertiaBuffer();var o=this._inertia,a=this._map;if(o.length<2)a.snapToNorth({},{originalEvent:e});else{var s=o[o.length-1],u=o[0],c=a.transform.scaleZoom(i*s[1]),l=a.transform.scaleZoom(i*u[1]),h=(s[0]-u[0])/1e3,f=s[2];if(0!==h&&c!==l){var d=.15*(c-l)/h;Math.abs(d)>2.5&&(d=d>0?2.5:-2.5);var p=1e3*Math.abs(d/(12*.15)),v=c+d*p/2e3;v<0&&(v=0),a.easeTo({zoom:v,duration:p,easing:_r,around:this._aroundCenter?a.getCenter():a.unproject(f),noMoveStart:!0},{originalEvent:e})}else a.snapToNorth({},{originalEvent:e})}}},br.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>2&&n-e[0][0]>160;)e.shift()};var wr={scrollZoom:lr,boxZoom:hr,dragRotate:dr,dragPan:vr,keyboard:mr,doubleClickZoom:gr,touchZoomRotate:br},xr=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCenter=function(){return this.transform.center},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(e,n,r,i){if("number"==typeof(i=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var o=i.padding;i.padding={top:o,bottom:o,right:o,left:o}}if(t.isEqual(Object.keys(i.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){var a=this.transform,s=a.project(t.LngLat.convert(e)),u=a.project(t.LngLat.convert(n)),c=s.rotate(-r*Math.PI/180),l=u.rotate(-r*Math.PI/180),h=new t.Point(Math.max(c.x,l.x),Math.max(c.y,l.y)),f=new t.Point(Math.min(c.x,l.x),Math.min(c.y,l.y)),d=h.sub(f),p=(a.width-i.padding.left-i.padding.right)/d.x,v=(a.height-i.padding.top-i.padding.bottom)/d.y;if(!(v<0||p<0)){var m=Math.min(a.scaleZoom(a.scale*Math.min(p,v)),i.maxZoom),y=t.Point.convert(i.offset),g=new t.Point(y.x+(i.padding.left-i.padding.right)/2,y.y+(i.padding.top-i.padding.bottom)/2).mult(a.scale/a.zoomScale(m));return{center:a.unproject(s.add(u).div(2).sub(g)),zoom:m,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),r,i),i,o)},n.prototype._fitInternal=function(e,n,r){return e?(n=t.extend(e,n)).linear?this.easeTo(n,r):this.flyTo(n,r):this},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in e?+e.zoom:o,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,l="pitch"in e?+e.pitch:s,h=i.centerPoint.add(t.Point.convert(e.offset)),f=i.pointLocation(h),d=t.LngLat.convert(e.center||f);this._normalizeCenter(d);var p,v,m=i.project(f),y=i.project(d).sub(m),g=i.zoomScale(u-o);return e.around&&(p=t.LngLat.convert(e.around),v=i.locationPoint(p)),this._zooming=u!==o,this._rotating=a!==c,this._pitching=l!==s,this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(r._zooming&&(i.zoom=t.number(o,u,e)),r._rotating&&(i.bearing=t.number(a,c,e)),r._pitching&&(i.pitch=t.number(s,l,e)),p)i.setLocationAtPoint(p,v);else{var f=i.zoomScale(i.zoom-o),d=u>o?Math.min(2,g):Math.max(.5,g),_=Math.pow(d,1-e),b=i.unproject(m.add(y.mult(e*_)).mult(f));i.setLocationAtPoint(i.renderWorldCopies?b.wrap():b,h)}r._fireMoveEvents(n)},function(){e.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(n)},e.delayEndEvents):r._afterEase(n)},e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){var r=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in e?t.clamp(+e.zoom,i.minZoom,i.maxZoom):o,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,l="pitch"in e?+e.pitch:s,h=i.zoomScale(u-o),f=i.centerPoint.add(t.Point.convert(e.offset)),d=i.pointLocation(f),p=t.LngLat.convert(e.center||d);this._normalizeCenter(p);var v=i.project(d),m=i.project(p).sub(v),y=e.curve,g=Math.max(i.width,i.height),_=g/h,b=m.mag();if("minZoom"in e){var w=t.clamp(Math.min(e.minZoom,o,u),i.minZoom,i.maxZoom),x=g/i.zoomScale(w-o);y=Math.sqrt(x/b*2)}var k=y*y;function C(t){var e=(_*_-g*g+(t?-1:1)*k*k*b*b)/(2*(t?_:g)*k*b);return Math.log(Math.sqrt(e*e+1)-e)}function S(t){return(Math.exp(t)-Math.exp(-t))/2}function E(t){return(Math.exp(t)+Math.exp(-t))/2}var P=C(0),O=function(t){return E(P)/E(P+y*t)},T=function(t){return g*((E(P)*(S(e=P+y*t)/E(e))-S(P))/k)/b;var e},A=(C(1)-P)/y;if(Math.abs(b)<1e-6||!isFinite(A)){if(Math.abs(g-_)<1e-6)return this.easeTo(e,n);var I=_<g?-1:1;A=Math.abs(Math.log(_/g))/y,T=function(){return 0},O=function(t){return Math.exp(I*y*t)}}return e.duration="duration"in e?+e.duration:1e3*A/("screenSpeed"in e?+e.screenSpeed/y:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==c,this._pitching=l!==s,this._prepareEase(n,!1),this._ease(function(e){var h=e*A,d=1/O(h);i.zoom=1===e?u:o+i.scaleZoom(d),r._rotating&&(i.bearing=t.number(a,c,e)),r._pitching&&(i.pitch=t.number(s,l,e));var y=1===e?p:i.unproject(v.add(m.mult(T(h))).mult(d));i.setLocationAtPoint(i.renderWorldCopies?y.wrap():y,f),r._fireMoveEvents(n)},function(){return r._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),kr=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};kr.prototype.getDefaultPosition=function(){return"bottom-right"},kr.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},kr.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},kr.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:t.config.ACCESS_TOKEN}];if(e){var r=n.reduce(function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<n.length-1?"&":"")),t},"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):"")}},kr.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},kr.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).length?(this._innerContainer.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},kr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Cr=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Cr.prototype.onAdd=function(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");var e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Cr.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Cr.prototype.getDefaultPosition=function(){return"bottom-left"},Cr.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Cr.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Cr.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Sr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Sr.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Sr.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},Sr.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Sr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Er=t.window.HTMLImageElement,Pr=t.window.HTMLElement,Or={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Tr=function(r){function i(e){var i=this;if(null!=(e=t.extend({},Or,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var o=new ir(e.minZoom,e.maxZoom,e.renderWorldCopies);r.call(this,o,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Sr,this._controls=[],this._mapId=t.uniqueId();var a=e.transformRequest;if(this._transformRequest=a?function(t,e){return a(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Pr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return i._update(!1)}),this.on("moveend",function(){return i._update(!1)}),this.on("zoom",function(){return i._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var r=t.getCanvasContainer(),i=null,o=!1,a=null;for(var s in wr)t[s]=new wr[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);n.addEventListener(r,"mouseout",function(e){t.fire(new sr("mouseout",t,e))}),n.addEventListener(r,"mousedown",function(i){o=!0,a=n.mousePos(r,i);var s=new sr("mousedown",t,i);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(i),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(i),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(i))}),n.addEventListener(r,"mouseup",function(e){var n=t.dragRotate.isActive();i&&!n&&t.fire(new sr("contextmenu",t,i)),i=null,o=!1,t.fire(new sr("mouseup",t,e))}),n.addEventListener(r,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var n=e.target;n&&n!==r;)n=n.parentNode;n===r&&t.fire(new sr("mousemove",t,e))}}),n.addEventListener(r,"mouseover",function(e){for(var n=e.target;n&&n!==r;)n=n.parentNode;n===r&&t.fire(new sr("mouseover",t,e))}),n.addEventListener(r,"touchstart",function(n){var r=new ur("touchstart",t,n);t.fire(r),r.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(r))},{passive:!1}),n.addEventListener(r,"touchmove",function(e){t.fire(new ur("touchmove",t,e))},{passive:!1}),n.addEventListener(r,"touchend",function(e){t.fire(new ur("touchend",t,e))}),n.addEventListener(r,"touchcancel",function(e){t.fire(new ur("touchcancel",t,e))}),n.addEventListener(r,"click",function(i){var o=n.mousePos(r,i);(o.equals(a)||o.dist(a)<e.clickTolerance)&&t.fire(new sr("click",t,i))}),n.addEventListener(r,"dblclick",function(e){var n=new sr("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)}),n.addEventListener(r,"contextmenu",function(e){var n=t.dragRotate.isActive();o||n?o&&(i=e):t.fire(new sr("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()}),n.addEventListener(r,"wheel",function(n){e.interactive&&t.stop();var r=new cr("wheel",t,n);t.fire(r),r.defaultPrevented||t.scrollZoom.onWheel(n)},{passive:!1})}(this,e),this._hash=e.hash&&(new ar).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new kr({customAttribution:e.customAttribution})),this.addControl(new Cr,e.logoPosition),this.on("style.load",function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)}),this.on("data",function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){i.fire(new t.Event(e.dataType+"dataloading",e))})}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var o={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},i.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},i.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},i.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},i.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},i.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},i.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},i.prototype.on=function(t,e,n){var i=this;if(void 0===n)return r.prototype.on.call(this,t,e);var o=function(){var r;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){var a=i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(i,new sr(t,i,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){(i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(i,new sr(t,i,r.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(i,new sr(t,i,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(r={},r[t]=function(t){var r=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(i,t),delete t.features)},r)}}();for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(o),o.delegates)this.on(a,o.delegates[a]);return this},i.prototype.off=function(t,e,n){if(void 0===n)return r.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===e&&a.listener===n){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},i.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},i.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},i.prototype.setStyle=function(t,e){return(!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t?(this._diffStyle(t,e),this):this._updateStyle(t,e)},i.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Ie(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},i.prototype._diffStyle=function(e,n){var r=this;if("string"==typeof e){var i=t.normalizeStyleURL(e),o=this._transformRequest(i,t.ResourceType.Style);t.getJSON(o,function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)})}else"object"==typeof e&&this._updateDiff(e,n)},i.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},i.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},i.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},i.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},i.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},i.prototype.getSource=function(t){return this.style.getSource(t)},i.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;if(void 0===o&&(o=!1),n instanceof Er){var a=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:a.width,height:a.height},a.data),pixelRatio:i,sdf:o})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:i,sdf:o})}},i.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(t){this.style.removeImage(t)},i.prototype.loadImage=function(e,n){t.getImage(this._transformRequest(e,t.ResourceType.Image),n)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},i.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},i.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},i.prototype.getLayer=function(t){return this.style.getLayer(t)},i.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},i.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},i.prototype.getFilter=function(t){return this.style.getFilter(t)},i.prototype.setPaintProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,n,r),this._update(!0)},i.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},i.prototype.setLayoutProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,n,r),this._update(!0)},i.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},i.prototype.setLight=function(t,e){return void 0===e&&(e={}),this.style.setLight(t,e),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},i.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},i.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=n.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){o[t]=n.create("div","mapboxgl-ctrl-"+t,i)})},i.prototype._resizeCanvas=function(e,n){var r=t.window.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},i.prototype._setupPainter=function(){var n=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},e.webGLContextAttributes),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new tr(r,this.transform),t.webpSupported.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},i.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},i.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},i.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,r=t.browser.now();this.style.zoomHistory.update(n,r);var i=new t.EvaluationParameters(n,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(e=!0,this._crossFadingFactor=o),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Ar(this._canvasContainer),Ar(this._controlContainer),Ar(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},i.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},Object.defineProperties(i.prototype,o),i}(xr);function Ar(t){t.parentNode&&t.parentNode.removeChild(t)}var Ir={showCompass:!0,showZoom:!0},Dr=function(e){var r=this;this.options=t.extend({},Ir,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return r._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return r._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return r._map.resetNorth()}),this._compassArrow=n.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function Mr(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}Dr.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},Dr.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dr(t,{button:"left",element:this._compass}),n.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Dr.prototype.onRemove=function(){n.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),n.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Dr.prototype._createButton=function(t,e,r){var i=n.create("button",t,this._container);return i.type="button",i.title=e,i.setAttribute("aria-label",e),i.addEventListener("click",r),i};var Lr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function jr(t,e,n){var r=t.classList;for(var i in Lr)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}var Rr,Fr=function(e){function r(r,i){if(e.call(this),(r instanceof t.window.HTMLElement||i)&&(r=t.extend({element:r},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._draggable=r&&r.draggable||!1,this._state="inactive",r&&r.element)this._element=r.element,this._offset=t.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div");var o=n.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var a=n.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var u=n.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var c=0,l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<l.length;c+=1){var h=l[c],f=n.createNS("http://www.w3.org/2000/svg","ellipse");f.setAttributeNS(null,"opacity","0.04"),f.setAttributeNS(null,"cx","10.5"),f.setAttributeNS(null,"cy","5.80029008"),f.setAttributeNS(null,"rx",h.rx),f.setAttributeNS(null,"ry",h.ry),u.appendChild(f)}var d=n.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var p=n.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(p);var v=n.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"fill","#000000");var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),v.appendChild(m);var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _=n.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),g.appendChild(_),g.appendChild(b),s.appendChild(u),s.appendChild(d),s.appendChild(v),s.appendChild(y),s.appendChild(g),o.appendChild(s),this._element.appendChild(o),this._offset=t.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},r.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},r.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Mr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,Lr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),jr(this._element,this._anchor,"marker"))},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},r.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r}(t.Evented),Nr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Br=function(e){function r(n){e.call(this),this.options=t.extend({},Nr,n),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.onAdd=function(e){var r;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Rr?r(Rr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){r(Rr="denied"!==t.state)}):r(Rr=!!t.window.navigator.geolocation),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),n.remove(this._container),this._map=void 0},r.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},r.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._map.fitBounds(n.toBounds(e.coords.accuracy),this.options.fitBoundsOptions,{geolocateSource:!0})},r.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},r.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(e){var r=this;!1!==e?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Fr(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==r._watchState||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},r.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(t.Evented),zr={maxWidth:100,unit:"metric"},Vr=function(e){this.options=t.extend({},zr,e),t.bindAll(["_onMove","setUnit"],this)};function Ur(t,e,n){var r,i,o,a,s,u,c=n&&n.maxWidth||100,l=t._container.clientHeight/2,h=(r=t.unproject([0,l]),i=t.unproject([c,l]),o=Math.PI/180,a=r.lat*o,s=i.lat*o,u=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((i.lng-r.lng)*o),6371e3*Math.acos(Math.min(u,1)));if(n&&"imperial"===n.unit){var f=3.2808*h;f>5280?qr(e,c,f/5280,"mi"):qr(e,c,f,"ft")}else n&&"nautical"===n.unit?qr(e,c,h/1852,"nm"):qr(e,c,h,"m")}function qr(t,e,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a))),u=s/n;"m"===r&&s>=1e3&&(s/=1e3,r="km"),t.style.width=e*u+"px",t.innerHTML=s+r}Vr.prototype.getDefaultPosition=function(){return"bottom-left"},Vr.prototype._onMove=function(){Ur(this._map,this._container,this.options)},Vr.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Vr.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Vr.prototype.setUnit=function(t){this.options.unit=t,Ur(this._map,this._container,this.options)};var Hr=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Hr.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Hr.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Hr.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Hr.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Hr.prototype._isFullscreen=function(){return this._fullscreen},Hr.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},Hr.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Zr={closeButton:!0,closeOnClick:!0,className:""},Gr=function(e){function r(n){e.call(this),this.options=t.extend(Object.create(Zr),n),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this.fire(new t.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),delete this._map),this.fire(new t.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._update(),this},r.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},r.prototype.setHTML=function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},r.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},r.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},r.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=Mr(this._lngLat,this._pos,this._map.transform));var r=this._pos=this._map.project(this._lngLat),i=this.options.anchor,o=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-n),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var i=t.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!i){var a,s=this._container.offsetWidth,u=this._container.offsetHeight;a=r.y+o.bottom.y<u?["top"]:r.y>this._map.transform.height-u?["bottom"]:[],r.x<s/2?a.push("left"):r.x>this._map.transform.width-s/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}var c=r.add(o[i]).round();n.setTransform(this._container,Lr[i]+" translate("+c.x+"px,"+c.y+"px)"),jr(this._container,i,"popup")}},r.prototype._onClickClose=function(){this.remove()},r}(t.Evented),Wr={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,Map:Tr,NavigationControl:Dr,GeolocateControl:Br,AttributionControl:kr,ScaleControl:Vr,FullscreenControl:Hr,Popup:Gr,Marker:Fr,Style:Ie,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Tt.workerCount},set workerCount(t){Tt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},workerUrl:""};return Wr}),n}()},"+ntK":function(t,e,n){var r,i=n("Tnqc"),o=n("WLGk"),a=n("U6bO"),s=n("zMFY"),u=n("44nb");"undefined"!=typeof ArrayBuffer&&(r=n("dOpE"));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),h=c||l;e.protocol=3;var f=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=i(f),p={type:"error",data:"parser error"},v=n("q2jb");function m(t,e,n){for(var r=new Array(t.length),i=s(t.length,n),o=function(t,n,i){e(n,function(e,n){r[t]=n,i(e,r)})},a=0;a<t.length;a++)o(a,t[a],i)}e.encodePacket=function(t,n,r,i){"function"==typeof n&&(i=n,n=!1),"function"==typeof r&&(i=r,r=null);var o=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=t.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=f[t.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}(t,n,i);if(void 0!==v&&o instanceof v)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(h)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var i=new FileReader;return i.onload=function(){e.encodePacket({type:t.type,data:i.result},n,!0,r)},i.readAsArrayBuffer(t.data)}(t,n,r);var i=new Uint8Array(1);return i[0]=f[t.type],r(new v([i.buffer,t.data]))}(t,n,i);if(o&&o.base64)return function(t,n){return n("b"+e.packets[t.type]+t.data.data)}(t,i);var a=f[t.type];return void 0!==t.data&&(a+=r?u.encode(String(t.data),{strict:!1}):String(t.data)),i(""+a)},e.encodeBase64Packet=function(t,n){var r,i="b"+e.packets[t.type];if(void 0!==v&&t.data instanceof v){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];n(i+t)},o.readAsDataURL(t.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(c){for(var a=new Uint8Array(t.data),s=new Array(a.length),u=0;u<a.length;u++)s[u]=a[u];r=String.fromCharCode.apply(null,s)}return i+=btoa(r),n(i)},e.decodePacket=function(t,n,r){if(void 0===t)return p;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&!1===(t=function(t){try{t=u.decode(t,{strict:!1})}catch(e){return!1}return t}(t)))return p;var i=t.charAt(0);return Number(i)==i&&d[i]?t.length>1?{type:d[i],data:t.substring(1)}:{type:d[i]}:p}i=new Uint8Array(t)[0];var o=a(t,1);return v&&"blob"===n&&(o=new v([o])),{type:d[i],data:o}},e.decodeBase64Packet=function(t,e){var n=d[t.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:t.substr(1)}};var i=r.decode(t.substr(1));return"blob"===e&&v&&(i=new v([i])),{type:n,data:i}},e.encodePayload=function(t,n,r){"function"==typeof n&&(r=n,n=null);var i=o(t);return n&&i?v&&!h?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void m(t,function(t,r){e.encodePacket(t,!!i&&n,!1,function(t){r(null,function(t){return t.length+":"+t}(t))})},function(t,e){return r(e.join(""))}):r("0:")},e.decodePayload=function(t,n,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,r);var i;if("function"==typeof n&&(r=n,n=null),""===t)return r(p,0,1);for(var o,a,s="",u=0,c=t.length;u<c;u++){var l=t.charAt(u);if(":"===l){if(""===s||s!=(o=Number(s)))return r(p,0,1);if(s!=(a=t.substr(u+1,o)).length)return r(p,0,1);if(a.length){if(i=e.decodePacket(a,n,!1),p.type===i.type&&p.data===i.data)return r(p,0,1);if(!1===r(i,u+o,c))return}u+=o,s=""}else s+=l}return""!==s?r(p,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));m(t,function(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})},function(t,e){var r=e.reduce(function(t,e){var n;return t+(n="string"==typeof e?e.length:e.byteLength).toString().length+n+2},0),i=new Uint8Array(r),o=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);n=r.buffer}i[o++]=e?0:1;var s=n.byteLength.toString();for(a=0;a<s.length;a++)i[o++]=parseInt(s[a]);for(i[o++]=255,r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]}),n(i.buffer)})},e.encodePayloadAsBlob=function(t,n){m(t,function(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,e[0]=0}var o=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),a=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)a[i]=parseInt(o[i]);if(a[o.length]=255,v){var s=new v([e.buffer,a.buffer,t]);n(null,s)}})},function(t,e){return n(new v(e))})},e.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var i=t,o=[];i.byteLength>0;){for(var s=new Uint8Array(i),u=0===s[0],c="",l=1;255!==s[l];l++){if(c.length>310)return r(p,0,1);c+=s[l]}i=a(i,2+c.length),c=parseInt(c);var h=a(i,0,c);if(u)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(v){var f=new Uint8Array(h);for(h="",l=0;l<f.length;l++)h+=String.fromCharCode(f[l])}o.push(h),i=a(i,c)}var d=o.length;o.forEach(function(t,i){r(e.decodePacket(t,n,!0),i,d)})}},"/uUt":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}var o=function(){function t(e,n){y(this,t),this.compare=e,this.keySelector=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.compare,this.keySelector))}}]),t}(),a=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).keySelector=i,o.hasKey=!1,"function"==typeof r&&(o.compare=r),o}return _(n,[{key:"compare",value:function(t,e){return t===e}},{key:"_next",value:function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}]),n}(r.a)},0:function(t,e,n){t.exports=n("0zUw")},"0EUg":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("bHdf");function i(){return Object(r.a)(1)}},"0GDk":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Deferred=void 0,e.Deferred=function(){function t(){var e=this;y(this,t),this.status=0,this.promise=new Promise(function(t,n){e._resolve=t,e._reject=n,void 0!==e._resolveValue&&e.resolve(e._resolveValue),void 0!==e._rejectValue&&e.reject(e._resolveValue)})}return _(t,[{key:"resolve",value:function(t){return this._resolveValue=t,this._resolve&&this._resolve(t),this.status=1,this}},{key:"reject",value:function(t){return this._rejectValue=t,this.status=2,this._reject&&this._reject(t),this}}]),t}()},"0QMH":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hmrBootstrap=void 0;var r=n("fXoL"),i=n("rB/T");e.hmrBootstrap=function(t,e){var n;t.hot.accept(),e().then(function(t){return n=t}),t.hot.dispose(function(){var t=n.injector.get(r.ApplicationRef).components.map(function(t){return t.location.nativeElement}),e=i.createNewHosts(t);n.destroy(),e()})}},"0RL5":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceService=e.Device=void 0,n("fXoL"),n("XVN5");var a=n("vGoH"),s=n("q7Eg"),u=n("JLh1"),c=o(n("fXoL")),l=o(n("XVN5")),h=_(function t(){y(this,t),this.move="#1E90FF",this.stop="#06dc00",this.rest="#ffff00",this.dead="#FFFFFF",this.DEAD_TIME=432e5,this.MOVE_TIME=6e4}),f=function(){function t(e,n,r,i,o){var a=this;y(this,t),this.map=n,this.injector=r,this.applicationRef=i,this.componentFactoryResolver=o,this.id=null,this.user_id=null,this.device_key=null,this.name=null,this.phone=null,this.image=null,this.sharedLink=null,this.speed=0,this.marker=null,this.isMove=!1,this.color=new h,this.background=this.color.dead,e&&["id","user_id","device_key","phone","image","lng","lat","name"].forEach(function(t){a[t]=e[t]})}return _(t,[{key:"timerStart",value:function(){var t=this;this.timerId=setInterval(function(){t.calcColorTime(),t.elapseTime=(new Date).getTime()-t.date.getTime(),t.marker.setIconColor(t.background)},1e3)}},{key:"setIconEl",value:function(t){return this}},{key:"onMarker",value:function(t){var e=1/0,n=new Date(t.date);this.date&&(e=n.getTime()-this.date.getTime()),this.timerId||this.timerStart(),this.date=n,this.elapseTime=(new Date).getTime()-this.date.getTime();var r=new s.LngLat(t.lng,t.lat);if(this.lngLat&&this.lngLat.toString()!==r.toString()){this.isMove=!0;var i=u.distance([this.lngLat.lng,this.lngLat.lat],[r.lng,r.lat]);this.speed=36e5*i/e}this.lngLat=r,this.calcColorTime(),this.marker?this.marker.updateLodData(t):this.markerCreate(t),this.marker.setIconColor(this.background),!this.name&&t.name&&(this.name=t.name,this.marker.setName(this.name))}},{key:"markerCreate",value:function(t){this.marker=new a.Marker(this.map,this.injector,this.applicationRef,this.componentFactoryResolver).setDevice(this).setImage(this.image).setName(this.name).setLogData(t).addToMap()}},{key:"calcColorTime",value:function(){this.background=this.elapseTime<this.color.MOVE_TIME&&this.isMove?this.color.move:this.elapseTime<this.color.MOVE_TIME?this.color.stop:this.color.DEAD_TIME<this.elapseTime?this.color.dead:this.getColor(this.elapseTime)}},{key:"getColor",value:function(t){var e="FF",n="00",r=(new h).DEAD_TIME/4;return t<r?e=(e=(Math.round(127*t/r)+127).toString(16)).length<2?"0".concat(e):e:n=(n=Math.round(255*t/(3*r)).toString(16)).length<2?"0".concat(n):n,"#FF".concat(e).concat(n)}},{key:"remove",value:function(){return clearInterval(this.timerId),this.marker&&this.marker.remove(),this}},{key:"toJson",value:function(){var t=this,e={};return["id","user_id","device_key","phone","image","lng","lat","name"].map(function(n){e[n]=t[n]}),e}}]),t}();e.Device=f;var d=function(){function t(e,n,r,i){y(this,t),this.io=e,this.injector=n,this.applicationRef=r,this.componentFactoryResolver=i,this.devices=[],this.socket=e.socket}return _(t,[{key:"setMapGl",value:function(t){return this.map=t,this}},{key:"getDeviceList",value:function(){return this.devices}},{key:"onLocationUpdate",value:function(t){return this.socket.$get("update-location",{device_key:t.device_key})}},{key:"getDeviceByDeviceKey",value:function(t){if(!this.devices.find(function(e){return e.device_key===t})){var e=this.createDevice(t);this.devices.push(e)}return this.devices.find(function(e){return e.device_key===t})}},{key:"createDevice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=new f(null,this.map,this.injector,this.applicationRef,this.componentFactoryResolver);return e.device_key=t,e}},{key:"onDevices",value:function(){var t=this;return this.socket.$get("onDevices",{}).then(function(e){return e&&"ok"==e.result?(t.devices.length=0,e.devices.forEach(function(e){var n=new f(e,t.map,t.injector,t.applicationRef,t.componentFactoryResolver);t.devices.push(n)}),Promise.resolve(t.devices)):Promise.reject(e.error)})}},{key:"updateDevices",value:function(){return this.clearDevices(),this.onDevices()}},{key:"onAddDevice",value:function(t){var e=t.toJson();return this.socket.$get("onAddDevice",e)}},{key:"onDelDevice",value:function(t){var e=this,n=t.toJson();return this.socket.$get("onDelDevice",n).then(function(n){if("ok"==n.result){var r=e.devices.indexOf(t);-1<r&&(e.devices[r].remove(),e.devices.splice(r,1))}return n})}},{key:"clearDevices",value:function(){this.devices.forEach(function(t){t.remove()}),this.devices.length=0}},{key:"onAddDeviceImage",value:function(t){return this.socket.$get("onAddDeviceImage",{deviceKey:t.device_key,image:t.image})}},{key:"setCurrentChildName",value:function(t){this.currentChildName=t}}]),t}();e.DeviceService=d,d.\u0275fac=function(t){return new(t||d)(c.\u0275\u0275inject(l.Io),c.\u0275\u0275inject(c.Injector),c.\u0275\u0275inject(c.ApplicationRef),c.\u0275\u0275inject(c.ComponentFactoryResolver))},d.\u0275prov=c.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"})},"0Rmf":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceHelpComponent=void 0,n("tyNb");var a=n("AytR"),s=(n("0RL5"),n("GdlM")),u=n("kU1M"),c=o(n("fXoL")),h=o(n("tyNb")),d=o(n("0RL5")),p=o(n("JttP")),v=o(n("ofXK"));function m(t,e){if(1&t&&(c.\u0275\u0275elementStart(0,"div"),c.\u0275\u0275elementStart(1,"div",1),c.\u0275\u0275element(2,"a",2),c.\u0275\u0275elementStart(3,"a",2),c.\u0275\u0275text(4,"GPS-\u043b\u043e\u0433\u0433\u0435\u0440 (GPS Logger)"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(5,"table"),c.\u0275\u0275elementStart(6,"tbody"),c.\u0275\u0275elementStart(7,"tr"),c.\u0275\u0275elementStart(8,"td"),c.\u0275\u0275text(9,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0437\u0430\u043f\u0438\u0441\u0438 \u043b\u043e\u0433\u0430"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(10,"td"),c.\u0275\u0275text(11,"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u043e\u043e\u0440\u0434\u0438\u0442\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440 OpenGTS"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(12,"td"),c.\u0275\u0275elementStart(13,"p"),c.\u0275\u0275text(14,"\u0421\u0435\u0440\u0432\u0435\u0440 \u0418\u043c\u044f \u0445\u043e\u0441\u0442\u0430 \u0438\u043b\u0438 IP"),c.\u0275\u0275elementStart(15,"span"),c.\u0275\u0275text(16," 178.62.44.54"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(17,"p"),c.\u0275\u0275text(18,"\u041f\u043e\u0440\u0442"),c.\u0275\u0275elementStart(19,"span"),c.\u0275\u0275text(20,"8080"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(21,"p"),c.\u0275\u0275text(22," \u0421\u043f\u043e\u0441\u043e\u0431 \u0441\u0432\u044f\u0437\u0438"),c.\u0275\u0275elementStart(23,"span"),c.\u0275\u0275text(24,"HTTP"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(25,"p"),c.\u0275\u0275text(26,"\u041f\u0443\u0442\u044c \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435"),c.\u0275\u0275elementStart(27,"span"),c.\u0275\u0275text(28,"log"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(29,"td"),c.\u0275\u0275elementStart(30,"p"),c.\u0275\u0275text(31,"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440"),c.\u0275\u0275elementStart(32,"span"),c.\u0275\u0275text(33," 12 \u0446\u0438\u0444\u0440"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(34,"tr"),c.\u0275\u0275elementStart(35,"td"),c.\u0275\u0275element(36,"img",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(37,"td"),c.\u0275\u0275element(38,"img",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(39,"td"),c.\u0275\u0275element(40,"img",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(41,"td"),c.\u0275\u0275element(42,"img",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&t){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(36),c.\u0275\u0275property("src",n.hostPrefix+"img/help/01.png",c.\u0275\u0275sanitizeUrl),c.\u0275\u0275advance(2),c.\u0275\u0275property("src",n.hostPrefix+"img/help/02.png",c.\u0275\u0275sanitizeUrl),c.\u0275\u0275advance(2),c.\u0275\u0275property("src",n.hostPrefix+"img/help/03.png",c.\u0275\u0275sanitizeUrl),c.\u0275\u0275advance(2),c.\u0275\u0275property("src",n.hostPrefix+"img/help/04.png",c.\u0275\u0275sanitizeUrl)}}function g(t,e){1&t&&(c.\u0275\u0275elementStart(0,"div"),c.\u0275\u0275elementStart(1,"div",4),c.\u0275\u0275text(2," Send couple of command for bind to this server (@Example use sim card 3mob mobile operator) "),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(3,"div",4),c.\u0275\u0275elementStart(4,"div",5),c.\u0275\u0275text(5," AT+GTQSS=gl520,3g.utel.ua,,,1,,0,178.62.44.54,8090,0.0.0.0,0,+380660000000,0,0,0,,FFFF$ "),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(6,"div",4),c.\u0275\u0275elementStart(7,"div",5),c.\u0275\u0275text(8," AT+GTGBC=gl520,,GL520,,,1B,0,5,1,1200,1,4,2,1,0,5,20,0,1,,,,0,11111111111111,0,0,0,1100,0,,0,FFFF$ "),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd())}var b=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this)).route=t,i.deviceService=r,i.hostPrefix=a.environment.hostPrefix,i.route.params.pipe(u.takeUntil(i.onDestroy$)).subscribe(function(t){i.deviceName=t.device,r.setCurrentChildName(t.device)}),i}return _(n,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.deviceService.setCurrentChildName(null)}}]),n}(s.SelfUnsubscribable);e.DeviceHelpComponent=b,b.\u0275fac=function(t){return new(t||b)(c.\u0275\u0275directiveInject(h.ActivatedRoute),c.\u0275\u0275directiveInject(d.DeviceService))},b.\u0275cmp=c.\u0275\u0275defineComponent({type:b,selectors:[["ng-component"]],features:[c.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[4,"ngIf"],[1,"help"],["href","https://play.google.com/store/apps/details?id=com.mendhak.gpslogger","target","_blank"],[3,"src"],[1,"row"],[1,"cell"]],template:function(t,e){1&t&&(c.\u0275\u0275elementStart(0,"help-container"),c.\u0275\u0275template(1,m,43,4,"div",0),c.\u0275\u0275template(2,g,9,0,"div",0),c.\u0275\u0275elementEnd()),2&t&&(c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf","gps-logger"===e.deviceName),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf","gl-520"===e.deviceName))},directives:[p.HelpContainer,v.NgIf],styles:["help-container[_ngcontent-%COMP%]{display:block;overflow:auto;font-size:12px;padding:0 15px;width:100%}help-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}help-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:200px}help-container[_ngcontent-%COMP%]   img.ico[_ngcontent-%COMP%]{width:60px;height:60px;float:left;margin-right:10px}help-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;margin:5px;color:#1e90ff}"]})},"0z79":function(t,e,n){var r=n("AdPF"),i=n("CUme"),o=n("2xqC"),a=n("Yvos"),s=n("x7D4")("engine.io-client:polling-xhr"),u=n("2UHX");function c(){}function l(t){if(i.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}}function h(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function f(){for(var t in h.requests)h.requests.hasOwnProperty(t)&&h.requests[t].abort()}t.exports=l,t.exports.Request=h,a(l,i),l.prototype.supportsBinary=!0,l.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new h(t)},l.prototype.doWrite=function(t,e){var n=this.request({method:"POST",data:t,isBinary:"string"!=typeof t&&void 0!==t}),r=this;n.on("success",e),n.on("error",function(t){r.onError("xhr post error",t)}),this.sendXhr=n},l.prototype.doPoll=function(){s("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},o(h.prototype),h.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new r(t),n=this;try{s("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&e.setRequestHeader(i,this.extraHeaders[i])}catch(o){}if("POST"===this.method)try{e.setRequestHeader("Content-type",this.isBinary?"application/octet-stream":"text/plain;charset=UTF-8")}catch(o){}try{e.setRequestHeader("Accept","*/*")}catch(o){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(o){}4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout(function(){n.onError("number"==typeof e.status?e.status:0)},0))},s("xhr data %s",this.data),e.send(this.data)}catch(o){return void setTimeout(function(){n.onError(o)},0)}"undefined"!=typeof document&&(this.index=h.requestsCount++,h.requests[this.index]=this)},h.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},h.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},h.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},h.prototype.cleanup=function(t){if(null!=this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,t)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete h.requests[this.index],this.xhr=null}},h.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(n){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},h.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},h.prototype.abort=function(){this.cleanup()},h.requestsCount=0,h.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",f):"function"==typeof addEventListener&&addEventListener("onpagehide"in u?"pagehide":"unload",f,!1))},"0zUw":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n("jhN1")),s=n("fXoL"),u=n("ZAI4"),c=n("AytR");n("0QMH"),c.environment.production&&s.enableProdMode(),c.environment.hmr?(console.error("HMR is not enabled for webpack-dev-server!"),console.log("Are you using the --hmr flag for ng serve?")):a.platformBrowser().bootstrapModule(u.AppModule).catch(function(t){return console.log(t)})},1:function(t,e){},"1G5W":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("zx2A");function i(t){return function(e){return e.lift(new o(t))}}var o=function(){function t(e){y(this,t),this.notifier=e}return _(t,[{key:"call",value:function(t,e){var n=new a(t),i=Object(r.c)(this.notifier,new r.a(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}]),t}(),a=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).seenValue=!1,r}return _(n,[{key:"notifyNext",value:function(){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(r.b)},"1jsm":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Md5=void 0;var a=o(n("fXoL")),s=function(){function t(){y(this,t)}return _(t,[{key:"hash",value:function(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n,r,i,o,a;return i=2147483648&t,o=2147483648&e,a=(1073741823&t)+(1073741823&e),(n=1073741824&t)&(r=1073741824&e)?2147483648^a^i^o:n|r?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o}function r(t,r,i,o,a,s,u){return t=n(t,n(n(function(t,e,n){return t&e|~t&n}(r,i,o),a),u)),n(e(t,s),r)}function i(t,r,i,o,a,s,u){return t=n(t,n(n(function(t,e,n){return t&n|e&~n}(r,i,o),a),u)),n(e(t,s),r)}function o(t,r,i,o,a,s,u){return t=n(t,n(n(function(t,e,n){return t^e^n}(r,i,o),a),u)),n(e(t,s),r)}function a(t,r,i,o,a,s,u){return t=n(t,n(n(function(t,e,n){return e^(t|~n)}(r,i,o),a),u)),n(e(t,s),r)}function s(t){var e,n="",r="";for(e=0;e<=3;e++)n+=(r="0"+(t>>>8*e&255).toString(16)).substr(r.length-2,2);return n}var u,c,l,h,f,d,p,v,m,y=Array();for(y=function(t){for(var e,n=t.length,r=n+8,i=16*((r-r%64)/64+1),o=Array(i-1),a=0,s=0;s<n;)a=s%4*8,o[e=(s-s%4)/4]=o[e]|t.charCodeAt(s)<<a,s++;return o[e=(s-s%4)/4]=o[e]|128<<(a=s%4*8),o[i-2]=n<<3,o[i-1]=n>>>29,o}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),d=1732584193,p=4023233417,v=2562383102,m=271733878,u=0;u<y.length;u+=16)c=d,l=p,h=v,f=m,d=r(d,p,v,m,y[u+0],7,3614090360),m=r(m,d,p,v,y[u+1],12,3905402710),v=r(v,m,d,p,y[u+2],17,606105819),p=r(p,v,m,d,y[u+3],22,3250441966),d=r(d,p,v,m,y[u+4],7,4118548399),m=r(m,d,p,v,y[u+5],12,1200080426),v=r(v,m,d,p,y[u+6],17,2821735955),p=r(p,v,m,d,y[u+7],22,4249261313),d=r(d,p,v,m,y[u+8],7,1770035416),m=r(m,d,p,v,y[u+9],12,2336552879),v=r(v,m,d,p,y[u+10],17,4294925233),p=r(p,v,m,d,y[u+11],22,2304563134),d=r(d,p,v,m,y[u+12],7,1804603682),m=r(m,d,p,v,y[u+13],12,4254626195),v=r(v,m,d,p,y[u+14],17,2792965006),d=i(d,p=r(p,v,m,d,y[u+15],22,1236535329),v,m,y[u+1],5,4129170786),m=i(m,d,p,v,y[u+6],9,3225465664),v=i(v,m,d,p,y[u+11],14,643717713),p=i(p,v,m,d,y[u+0],20,3921069994),d=i(d,p,v,m,y[u+5],5,3593408605),m=i(m,d,p,v,y[u+10],9,38016083),v=i(v,m,d,p,y[u+15],14,3634488961),p=i(p,v,m,d,y[u+4],20,3889429448),d=i(d,p,v,m,y[u+9],5,568446438),m=i(m,d,p,v,y[u+14],9,3275163606),v=i(v,m,d,p,y[u+3],14,4107603335),p=i(p,v,m,d,y[u+8],20,1163531501),d=i(d,p,v,m,y[u+13],5,2850285829),m=i(m,d,p,v,y[u+2],9,4243563512),v=i(v,m,d,p,y[u+7],14,1735328473),d=o(d,p=i(p,v,m,d,y[u+12],20,2368359562),v,m,y[u+5],4,4294588738),m=o(m,d,p,v,y[u+8],11,2272392833),v=o(v,m,d,p,y[u+11],16,1839030562),p=o(p,v,m,d,y[u+14],23,4259657740),d=o(d,p,v,m,y[u+1],4,2763975236),m=o(m,d,p,v,y[u+4],11,1272893353),v=o(v,m,d,p,y[u+7],16,4139469664),p=o(p,v,m,d,y[u+10],23,3200236656),d=o(d,p,v,m,y[u+13],4,681279174),m=o(m,d,p,v,y[u+0],11,3936430074),v=o(v,m,d,p,y[u+3],16,3572445317),p=o(p,v,m,d,y[u+6],23,76029189),d=o(d,p,v,m,y[u+9],4,3654602809),m=o(m,d,p,v,y[u+12],11,3873151461),v=o(v,m,d,p,y[u+15],16,530742520),d=a(d,p=o(p,v,m,d,y[u+2],23,3299628645),v,m,y[u+0],6,4096336452),m=a(m,d,p,v,y[u+7],10,1126891415),v=a(v,m,d,p,y[u+14],15,2878612391),p=a(p,v,m,d,y[u+5],21,4237533241),d=a(d,p,v,m,y[u+12],6,1700485571),m=a(m,d,p,v,y[u+3],10,2399980690),v=a(v,m,d,p,y[u+10],15,4293915773),p=a(p,v,m,d,y[u+1],21,2240044497),d=a(d,p,v,m,y[u+8],6,1873313359),m=a(m,d,p,v,y[u+15],10,4264355552),v=a(v,m,d,p,y[u+6],15,2734768916),p=a(p,v,m,d,y[u+13],21,1309151649),d=a(d,p,v,m,y[u+4],6,4149444226),m=a(m,d,p,v,y[u+11],10,3174756917),v=a(v,m,d,p,y[u+2],15,718787259),p=a(p,v,m,d,y[u+9],21,3951481745),d=n(d,c),p=n(p,l),v=n(v,h),m=n(m,f);return(s(d)+s(p)+s(v)+s(m)).toLowerCase()}}]),t}();e.Md5=s,s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=a.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac})},"1uah":function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var r=n("yCtX"),i=n("DH7j"),o=n("7o/Q"),a=n("Lhse"),s=n("zx2A");function u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[e.length-1];return"function"==typeof i&&e.pop(),Object(r.a)(e,void 0).lift(new c(i))}var c=function(){function t(e){y(this,t),this.resultSelector=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new h(t,this.resultSelector))}}]),t}(),h=function(t){l(n,t);var e=f(n);function n(t,r){var i;arguments.length>2&&void 0!==arguments[2]||Object.create(null);return y(this,n),(i=e.call(this,t)).resultSelector=r,i.iterators=[],i.active=0,i.resultSelector="function"==typeof r?r:void 0,i}return _(n,[{key:"_next",value:function(t){var e=this.iterators;Object(i.a)(t)?e.push(new p(t)):e.push("function"==typeof t[a.a]?new d(t[a.a]()):new v(this.destination,this,t))}},{key:"_complete",value:function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}else this.destination.complete()}},{key:"notifyInactive",value:function(){this.active--,0===this.active&&this.destination.complete()}},{key:"checkIterators",value:function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){var i=t[r];if("function"==typeof i.hasValue&&!i.hasValue())return}for(var o=!1,a=[],s=0;s<e;s++){var u=t[s],c=u.next();if(u.hasCompleted()&&(o=!0),c.done)return void n.complete();a.push(c.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),o&&n.complete()}},{key:"_tryresultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(o.a),d=function(){function t(e){y(this,t),this.iterator=e,this.nextResult=e.next()}return _(t,[{key:"hasValue",value:function(){return!0}},{key:"next",value:function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t}},{key:"hasCompleted",value:function(){var t=this.nextResult;return Boolean(t&&t.done)}}]),t}(),p=function(t){function e(t){y(this,e),this.array=t,this.index=0,this.length=0,this.length=t.length}return _(e,[{key:t,value:function(){return this}},{key:"next",value:function(t){var e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}},{key:"hasValue",value:function(){return this.array.length>this.index}},{key:"hasCompleted",value:function(){return this.array.length===this.index}}]),e}(a.a),v=function(t,e){l(r,t);var n=f(r);function r(t,e,i){var o;return y(this,r),(o=n.call(this,t)).parent=e,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return _(r,[{key:e,value:function(){return this}},{key:"next",value:function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}},{key:"hasValue",value:function(){return this.buffer.length>0}},{key:"hasCompleted",value:function(){return 0===this.buffer.length&&this.isComplete}},{key:"notifyComplete",value:function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}},{key:"notifyNext",value:function(t){this.buffer.push(t),this.parent.checkIterators()}},{key:"subscribe",value:function(){return Object(s.c)(this.observable,new s.a(this))}}]),r}(s.b,a.a)},"1xHg":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.JournalService=void 0,n("XVN5");var a=n("8R26"),s=o(n("fXoL")),u=o(n("XVN5")),c=function(){function t(e){y(this,t),this._devices={},this.dateCache=[],this.socket=e.socket,this.list=[];var n=new Date;this.selectDate=new Date(n.getFullYear(),n.getMonth(),n.getDate())}return _(t,[{key:"setSelectDate",value:function(t){return this.selectDate=t,t}},{key:"stepGo",value:function(t){var e=this.selectDate;return this.selectDate=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t),new Date(this.selectDate.getFullYear(),this.selectDate.getMonth(),this.selectDate.getDate()+1),this.selectDate}},{key:"getTrack",value:function(t,e,n){var r=this,i=t.device_key,o=String(new Date(e).toISOString()).concat(new Date(n).toISOString());return this.socket.$get("trackDeviceFromTo",{device_key:i,from:e,to:n}).then(function(e){if(e&&"ok"==e.result){var n=e.list.map(function(e){return Object.assign(Object.assign({},e),{image:t.image})});return r.fillList(n,o),e}return null})}},{key:"getLastDate",value:function(){return this.socket.$get("getLastDate",null)}},{key:"getLastDeviceDate",value:function(t){return this.socket.$get("getLastDeviceDate",t)}},{key:"fillList",value:function(t,e){var n=this;t.forEach(function(t){if(t.points.length){var r=[];t.points.forEach(function(t){var e=new a.Point(t.lng,t.lat,t.azimuth);e.date=t.date,e.speed=t.speed,e.id=t.id,r.push(e)});var i=Object.assign(Object.assign({},t),{image:t.image,points:r,userId:t.userId,name:t.name,rangeOfDate:e}),o=n.list.findIndex(function(t){return t.rangeOfDate==e});-1<o?n.list[o]=i:n.list.unshift(i)}})}},{key:"cleadData",value:function(){this.list.length=0}},{key:"selectDate",get:function(){return this._selectDate},set:function(t){this._selectDate=t}},{key:"devices",get:function(){return this._devices},set:function(t){for(var e in t)this._devices[e]=t[e]}}]),t}();e.JournalService=c,c.\u0275fac=function(t){return new(t||c)(s.\u0275\u0275inject(u.Io))},c.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac})},"1ymD":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.GtgbcService=void 0,n("XVN5"),n("otBb");var a=o(n("fXoL")),s=o(n("XVN5")),u=function(){function t(e){y(this,t),this.io=e,this.socket=e.socket}return _(t,[{key:"getLatLng",value:function(t){return console.log(t),this.socket.$get("onGtgbc",t).then(function(t){return t.error?Promise.reject(t.error):t.cells})}}]),t}();e.GtgbcService=u,u.\u0275fac=function(t){return new(t||u)(a.\u0275\u0275inject(s.Io))},u.\u0275prov=a.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac})},"23l2":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.PopupModule=void 0;var a=n("hVDi"),s=n("28QR"),u=n("ofXK"),c=n("x2wM"),l=n("3Pt+"),h=o(n("fXoL")),f=o(n("hVDi")),d=o(n("ofXK")),p=_(function t(e){y(this,t),e.init()});e.PopupModule=p,p.\u0275fac=function(t){return new(t||p)(h.\u0275\u0275inject(f.PopupService))},p.\u0275mod=h.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=h.\u0275\u0275defineInjector({providers:[a.PopupService,a.PopupInitialState],imports:[[u.CommonModule,l.FormsModule]]}),h.\u0275\u0275setComponentScope(s.PopupContainerComponent,[d.NgIf,d.NgForOf,c.PopupItemComponent],[])},"28QR":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.PopupContainerComponent=void 0;var a=n("ng2J"),s=o(n("fXoL"));function u(t,e){if(1&t){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"popup-item-component",3),s.\u0275\u0275listener("onClose",function(t){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext(2).onClose(t)}),s.\u0275\u0275elementEnd()}2&t&&s.\u0275\u0275property("popup",e.$implicit)}function c(t,e){if(1&t){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",1),s.\u0275\u0275listener("@popupMaskInAnimation.done",function(t){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().animationEnd(t)}),s.\u0275\u0275template(1,u,1,1,"popup-item-component",2),s.\u0275\u0275elementEnd()}if(2&t){var r=s.\u0275\u0275nextContext();s.\u0275\u0275property("@popupMaskInAnimation",void 0),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngForOf",r.popupList)}}var l=function(){function t(){y(this,t),this.isShowMask=!1,this.popupList=[]}return _(t,[{key:"ngOnInit",value:function(){this.popupList=this.popupService.popupList}},{key:"onClose",value:function(t){this.popupService.remove(t)}},{key:"animationEnd",value:function(t){"void"===t.toState&&this.popupService.removeMask(),"void"===t.fromState&&this.popupService.animationShowEnd()}}]),t}();e.PopupContainerComponent=l,l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=s.\u0275\u0275defineComponent({type:l,selectors:[["popup-container"]],decls:1,vars:1,consts:[["class","mask",4,"ngIf"],[1,"mask"],[3,"popup","onClose",4,"ngFor","ngForOf"],[3,"popup","onClose"]],template:function(t,e){1&t&&s.\u0275\u0275template(0,c,2,2,"div",0),2&t&&s.\u0275\u0275property("ngIf",e.isShowMask)},styles:["[_nghost-%COMP%]{position:fixed;z-index:5;left:0;top:0;height:100%;width:100%}.mask[_ngcontent-%COMP%]{width:100%;height:100%;background:rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center}"],data:{animation:[a.popupMaskInAnimation]}})},"2Dig":function(t,e){t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2UHX":function(t,e){t.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("9ppp"),o=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this))._value=t,r}return _(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(t){var e=u(m(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}},{key:"next",value:function(t){u(m(n.prototype),"next",this).call(this,this._value=t)}}]),n}(r.a)},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"2pII":function(t,e,n){var r=n("akSB"),i=n("2xqC"),o=n("x7D4")("engine.io-client:socket"),a=n("7jRU"),s=n("+ntK"),u=n("mn31"),c=n("KT0R");function l(t,e){if(!(this instanceof l))return new l(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=u(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=u(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=l,l.priorWebsocketSuccess=!1,i(l.prototype),l.protocol=s.protocol,l.Socket=l,l.Transport=n("Gbct"),l.transports=n("akSB"),l.parser=n("+ntK"),l.prototype.createTransport=function(t){o('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.query);e.EIO=s.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new r[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var t;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},l.prototype.setTransport=function(t){o("setting transport %s",t.name);var e=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},l.prototype.probe=function(t){o('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,r=this;function i(){r.onlyBinaryUpgrades&&(n=n||!this.supportsBinary&&r.transport.supportsBinary),n||(o('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',t),r.upgrading=!0,r.emit("upgrading",e),!e)return;l.priorWebsocketSuccess="websocket"===e.name,o('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||"closed"!==r.readyState&&(o("changing transport and sending upgrade packet"),f(),r.setTransport(e),e.send([{type:"upgrade"}]),r.emit("upgrade",e),e=null,r.upgrading=!1,r.flush())})}else{o('probe transport "%s" failed',t);var a=new Error("probe error");a.transport=e.name,r.emit("upgradeError",a)}}))}function a(){n||(n=!0,f(),e.close(),e=null)}function s(n){var i=new Error("probe error: "+n);i.transport=e.name,a(),o('probe transport "%s" failed because of error: %s',t,n),r.emit("upgradeError",i)}function u(){s("transport closed")}function c(){s("socket closed")}function h(t){e&&t.name!==e.name&&(o('"%s" works - aborting "%s"',t.name,e.name),a())}function f(){e.removeListener("open",i),e.removeListener("error",s),e.removeListener("close",u),r.removeListener("close",c),r.removeListener("upgrading",h)}l.priorWebsocketSuccess=!1,e.once("open",i),e.once("error",s),e.once("close",u),this.once("close",c),this.once("upgrading",h),e.open()},l.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},l.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else o('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},l.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},l.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},l.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}function e(){t.onClose("forced close"),o("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return this},l.prototype.onError=function(t){o("socket error %j",t),l.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},l.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(o('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},l.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~a(this.transports,t[n])&&e.push(t[n]);return e}},"2xqC":function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},"3Df6":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceIconComponent=void 0;var a=n("qCKp"),s=o(n("fXoL")),u=o(n("ofXK")),c=function(t){return{background:t}},l=function(){function t(){var e=this;y(this,t),this.TIME_LIMIT=6e5,this.background="white",this.colorSubject=new a.Subject,this.colorSubject.subscribe(function(t){e.background=t})}return _(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){}}]),t}();e.DeviceIconComponent=l,l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=s.\u0275\u0275defineComponent({type:l,selectors:[["device-icon-component"]],decls:2,vars:4,consts:[[1,"ico-container"],[3,"ngStyle","src"]],template:function(t,e){1&t&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275element(1,"img",1),s.\u0275\u0275elementEnd()),2&t&&(s.\u0275\u0275advance(1),s.\u0275\u0275property("ngStyle",s.\u0275\u0275pureFunction1(2,c,e.background))("src",e.src,s.\u0275\u0275sanitizeUrl))},directives:[u.NgStyle],styles:["[_nghost-%COMP%]{border-radius:50%;background:#fff}[status=yellow][_nghost-%COMP%]{background:#ff0}[status=green][_nghost-%COMP%]{background:#2ff63a}[status=arrow][_nghost-%COMP%]{background:#3690f6}img[_ngcontent-%COMP%]{display:block;width:40px;height:40px;padding:3px;border-radius:50%;transition:background-color 2s ease-in}"]})},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.pending=!1,i}return _(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(function(t){l(n,t);var e=f(n);function n(t,r){return y(this,n),e.call(this)}return _(n,[{key:"schedule",value:function(t){return this}}]),n}(n("quSY").a))},"3Pt+":function(t,e,n){"use strict";n.r(e),n.d(e,"AbstractControl",function(){return _t}),n.d(e,"AbstractControlDirective",function(){return X}),n.d(e,"AbstractFormGroupDirective",function(){return Et}),n.d(e,"COMPOSITION_BUFFER_MODE",function(){return g}),n.d(e,"CheckboxControlValueAccessor",function(){return v}),n.d(e,"CheckboxRequiredValidator",function(){return he}),n.d(e,"ControlContainer",function(){return K}),n.d(e,"DefaultValueAccessor",function(){return b}),n.d(e,"EmailValidator",function(){return pe}),n.d(e,"FormArray",function(){return xt}),n.d(e,"FormArrayName",function(){return Yt}),n.d(e,"FormBuilder",function(){return Pe}),n.d(e,"FormControl",function(){return bt}),n.d(e,"FormControlDirective",function(){return Ht}),n.d(e,"FormControlName",function(){return Qt}),n.d(e,"FormGroup",function(){return wt}),n.d(e,"FormGroupDirective",function(){return Gt}),n.d(e,"FormGroupName",function(){return Xt}),n.d(e,"FormsModule",function(){return Se}),n.d(e,"MaxLengthValidator",function(){return ge}),n.d(e,"MinLengthValidator",function(){return me}),n.d(e,"NG_ASYNC_VALIDATORS",function(){return C}),n.d(e,"NG_VALIDATORS",function(){return k}),n.d(e,"NG_VALUE_ACCESSOR",function(){return d}),n.d(e,"NgControl",function(){return J}),n.d(e,"NgControlStatus",function(){return tt}),n.d(e,"NgControlStatusGroup",function(){return et}),n.d(e,"NgForm",function(){return St}),n.d(e,"NgModel",function(){return Dt}),n.d(e,"NgModelGroup",function(){return Tt}),n.d(e,"NgSelectOption",function(){return re}),n.d(e,"NumberValueAccessor",function(){return jt}),n.d(e,"PatternValidator",function(){return be}),n.d(e,"RadioControlValueAccessor",function(){return Bt}),n.d(e,"RangeValueAccessor",function(){return Vt}),n.d(e,"ReactiveFormsModule",function(){return Ee}),n.d(e,"RequiredValidator",function(){return le}),n.d(e,"SelectControlValueAccessor",function(){return ne}),n.d(e,"SelectMultipleControlValueAccessor",function(){return ae}),n.d(e,"VERSION",function(){return Oe}),n.d(e,"Validators",function(){return E}),n.d(e,"\u0275InternalFormsSharedModule",function(){return Ce}),n.d(e,"\u0275NgNoValidate",function(){return Mt}),n.d(e,"\u0275NgSelectMultipleOption",function(){return se}),n.d(e,"\u0275angular_packages_forms_forms_a",function(){return we}),n.d(e,"\u0275angular_packages_forms_forms_b",function(){return xe}),n.d(e,"\u0275angular_packages_forms_forms_ba",function(){return Mt}),n.d(e,"\u0275angular_packages_forms_forms_bb",function(){return ue}),n.d(e,"\u0275angular_packages_forms_forms_bc",function(){return ce}),n.d(e,"\u0275angular_packages_forms_forms_bd",function(){return de}),n.d(e,"\u0275angular_packages_forms_forms_be",function(){return ve}),n.d(e,"\u0275angular_packages_forms_forms_bf",function(){return ye}),n.d(e,"\u0275angular_packages_forms_forms_bg",function(){return _e}),n.d(e,"\u0275angular_packages_forms_forms_bh",function(){return P}),n.d(e,"\u0275angular_packages_forms_forms_bi",function(){return O}),n.d(e,"\u0275angular_packages_forms_forms_bj",function(){return T}),n.d(e,"\u0275angular_packages_forms_forms_bk",function(){return A}),n.d(e,"\u0275angular_packages_forms_forms_bl",function(){return I}),n.d(e,"\u0275angular_packages_forms_forms_bm",function(){return D}),n.d(e,"\u0275angular_packages_forms_forms_bn",function(){return M}),n.d(e,"\u0275angular_packages_forms_forms_bo",function(){return L}),n.d(e,"\u0275angular_packages_forms_forms_bp",function(){return j}),n.d(e,"\u0275angular_packages_forms_forms_c",function(){return ke}),n.d(e,"\u0275angular_packages_forms_forms_d",function(){return Ce}),n.d(e,"\u0275angular_packages_forms_forms_e",function(){return p}),n.d(e,"\u0275angular_packages_forms_forms_f",function(){return h}),n.d(e,"\u0275angular_packages_forms_forms_g",function(){return m}),n.d(e,"\u0275angular_packages_forms_forms_h",function(){return $}),n.d(e,"\u0275angular_packages_forms_forms_i",function(){return Q}),n.d(e,"\u0275angular_packages_forms_forms_j",function(){return kt}),n.d(e,"\u0275angular_packages_forms_forms_k",function(){return At}),n.d(e,"\u0275angular_packages_forms_forms_l",function(){return Ot}),n.d(e,"\u0275angular_packages_forms_forms_m",function(){return Lt}),n.d(e,"\u0275angular_packages_forms_forms_n",function(){return Rt}),n.d(e,"\u0275angular_packages_forms_forms_o",function(){return Ft}),n.d(e,"\u0275angular_packages_forms_forms_p",function(){return Nt}),n.d(e,"\u0275angular_packages_forms_forms_q",function(){return zt}),n.d(e,"\u0275angular_packages_forms_forms_r",function(){return Ut}),n.d(e,"\u0275angular_packages_forms_forms_s",function(){return qt}),n.d(e,"\u0275angular_packages_forms_forms_t",function(){return $t}),n.d(e,"\u0275angular_packages_forms_forms_u",function(){return Zt}),n.d(e,"\u0275angular_packages_forms_forms_v",function(){return Wt}),n.d(e,"\u0275angular_packages_forms_forms_w",function(){return Kt}),n.d(e,"\u0275angular_packages_forms_forms_x",function(){return te}),n.d(e,"\u0275angular_packages_forms_forms_y",function(){return ie}),n.d(e,"\u0275angular_packages_forms_forms_z",function(){return se});var r=n("fXoL"),a=n("ofXK"),s=n("Cfvw"),u=n("cp0P"),c=n("lJxs"),h=_(function t(){y(this,t)}),d=new r.InjectionToken("NgValueAccessor"),p={provide:d,useExisting:Object(r.forwardRef)(function(){return v}),multi:!0},v=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this))._renderer=t,i._elementRef=r,i.onChange=function(t){},i.onTouched=function(){},i}return _(n,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),n}(h);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](r.ElementRef))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r["\u0275\u0275listener"]("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r["\u0275\u0275ProvidersFeature"]([p]),r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),m={provide:d,useExisting:Object(r.forwardRef)(function(){return b}),multi:!0},g=new r.InjectionToken("CompositionEventMode"),b=function(){var t=function(){function t(e,n,r){var i;y(this,t),this._renderer=e,this._elementRef=n,this._compositionMode=r,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=Object(a["\u0275getDOM"])()?Object(a["\u0275getDOM"])().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return _(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_handleInput",value:function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](r.ElementRef),r["\u0275\u0275directiveInject"](g,8))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r["\u0275\u0275listener"]("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r["\u0275\u0275ProvidersFeature"]([m])]}),t}();function w(t){return null==t||0===t.length}function x(t){return null!=t&&"number"==typeof t.length}var k=new r.InjectionToken("NgValidators"),C=new r.InjectionToken("NgAsyncValidators"),S=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,E=function(){function t(){y(this,t)}return _(t,null,[{key:"min",value:function(t){return P(t)}},{key:"max",value:function(t){return O(t)}},{key:"required",value:function(t){return T(t)}},{key:"requiredTrue",value:function(t){return A(t)}},{key:"email",value:function(t){return I(t)}},{key:"minLength",value:function(t){return D(t)}},{key:"maxLength",value:function(t){return M(t)}},{key:"pattern",value:function(t){return L(t)}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){return V(t)}},{key:"composeAsync",value:function(t){return q(t)}}]),t}();function P(t){return function(e){if(w(e.value)||w(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function O(t){return function(e){if(w(e.value)||w(t))return null;var n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function T(t){return w(t.value)?{required:!0}:null}function A(t){return!0===t.value?null:{required:!0}}function I(t){return w(t.value)||S.test(t.value)?null:{email:!0}}function D(t){return function(e){return w(e.value)||!x(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}}function M(t){return function(e){return x(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}}function L(t){return t?("string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),function(t){if(w(t.value))return null;var r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}):j;var e,n}function j(t){return null}function R(t){return null!=t}function F(t){var e=Object(r["\u0275isPromise"])(t)?Object(s.a)(t):t;return Object(r["\u0275isObservable"])(e),e}function N(t){var e={};return t.forEach(function(t){e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function B(t,e){return e.map(function(e){return e(t)})}function z(t){return t.map(function(t){return function(t){return!t.validate}(t)?t:function(e){return t.validate(e)}})}function V(t){if(!t)return null;var e=t.filter(R);return 0==e.length?null:function(t){return N(B(t,e))}}function U(t){return null!=t?V(z(t)):null}function q(t){if(!t)return null;var e=t.filter(R);return 0==e.length?null:function(t){var n=B(t,e).map(F);return Object(u.a)(n).pipe(Object(c.a)(N))}}function H(t){return null!=t?q(z(t)):null}function Z(t,e){return null===t?[e]:Array.isArray(t)?[].concat(o(t),[e]):[t,e]}function G(t){return t._rawValidators}function W(t){return t._rawAsyncValidators}var X=function(){var t=function(){function t(){y(this,t),this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return _(t,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"_setValidators",value:function(t){this._rawValidators=t||[],this._composedValidatorFn=U(this._rawValidators)}},{key:"_setAsyncValidators",value:function(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=H(this._rawAsyncValidators)}},{key:"validator",get:function(){return this._composedValidatorFn||null}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn||null}},{key:"_registerOnDestroy",value:function(t){this._onDestroyCallbacks.push(t)}},{key:"_invokeOnDestroyCallbacks",value:function(){this._onDestroyCallbacks.forEach(function(t){return t()}),this._onDestroyCallbacks=[]}},{key:"reset",value:function(t){this.control&&this.control.reset(t)}},{key:"hasError",value:function(t,e){return!!this.control&&this.control.hasError(t,e)}},{key:"getError",value:function(t,e){return this.control?this.control.getError(t,e):null}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t}),t}(),K=function(){var t=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(X);return t.\u0275fac=function(e){return Y(e||t)},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,features:[r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),Y=r["\u0275\u0275getInheritedFactory"](K),J=function(t){l(n,t);var e=f(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments))._parent=null,t.name=null,t.valueAccessor=null,t}return _(n)}(X),$=function(){function t(e){y(this,t),this._cd=e}return _(t,[{key:"is",value:function(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}]),t}(),Q={"[class.ng-untouched]":'is("untouched")',"[class.ng-touched]":'is("touched")',"[class.ng-pristine]":'is("pristine")',"[class.ng-dirty]":'is("dirty")',"[class.ng-valid]":'is("valid")',"[class.ng-invalid]":'is("invalid")',"[class.ng-pending]":'is("pending")'},tt=function(){var t=function(t){l(n,t);var e=f(n);function n(t){return y(this,n),e.call(this,t)}return _(n)}($);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](J,2))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r["\u0275\u0275classProp"]("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),et=function(){var t=function(t){l(n,t);var e=f(n);function n(t){return y(this,n),e.call(this,t)}return _(n)}($);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](K,10))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r["\u0275\u0275classProp"]("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r["\u0275\u0275InheritDefinitionFeature"]]}),t}();function nt(t,e){return[].concat(o(e.path),[t])}function rt(t,e){at(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(function(n){t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ut(t,e)})}(t,e),function(t,e){var n=function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(function(){t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ut(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){var n=function(t){e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(function(){t._unregisterOnDisabledChange(n)})}}(t,e)}function it(t,e){var n=function(){};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),st(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(function(){}))}function ot(t,e){t.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function at(t,e,n){var r=G(t);null!==e.validator?t.setValidators(Z(r,e.validator)):"function"==typeof r&&t.setValidators([r]);var i=W(t);if(null!==e.asyncValidator?t.setAsyncValidators(Z(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){var o=function(){return t.updateValueAndValidity()};ot(e._rawValidators,o),ot(e._rawAsyncValidators,o)}}function st(t,e,n){var r=!1;if(null!==t){if(null!==e.validator){var i=G(t);if(Array.isArray(i)&&i.length>0){var o=i.filter(function(t){return t!==e.validator});o.length!==i.length&&(r=!0,t.setValidators(o))}}if(null!==e.asyncValidator){var a=W(t);if(Array.isArray(a)&&a.length>0){var s=a.filter(function(t){return t!==e.asyncValidator});s.length!==a.length&&(r=!0,t.setAsyncValidators(s))}}}if(n){var u=function(){};ot(e._rawValidators,u),ot(e._rawAsyncValidators,u)}return r}function ut(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ct(t,e){at(t,e,!1)}function lt(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function ht(t,e){t._syncPendingControls(),e.forEach(function(t){var e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function ft(t,e){return e?(Array.isArray(e),e.forEach(function(t){t.constructor===b?n=t:Object.getPrototypeOf(t.constructor)===h?r=t:i=t}),i||r||n||null):null;var n,r,i}function dt(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}function pt(t){return(gt(t)?t.validators:t)||null}function vt(t){return Array.isArray(t)?U(t):t||null}function mt(t,e){return(gt(e)?e.asyncValidators:t)||null}function yt(t){return Array.isArray(t)?H(t):t||null}function gt(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var _t=function(){function t(e,n){y(this,t),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=n,this._composedValidatorFn=vt(this._rawValidators),this._composedAsyncValidatorFn=yt(this._rawAsyncValidators)}return _(t,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(t){this._rawValidators=this._composedValidatorFn=t}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(t){this._rawValidators=t,this._composedValidatorFn=vt(t)}},{key:"setAsyncValidators",value:function(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=yt(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild(function(t){return t.markAllAsTouched()})}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(function(e){e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(function(t){return t(!0)})}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(function(e){e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(function(t){return t(!1)})}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var e=this;if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;var n=F(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){e._hasOwnPendingAsyncValidator=!1,e.setErrors(n,{emitEvent:t})})}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;var r=t;return e.forEach(function(t){r=r instanceof wt?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof xt&&r.at(t)||null}),r}(this,t)}},{key:"getError",value:function(t,e){var n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new r.EventEmitter,this.statusChanges=new r.EventEmitter}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls(function(e){return e.status===t})}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(t){return t.dirty})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(t){return t.touched})}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){gt(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}]),t}(),bt=function(t){l(n,t);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return y(this,n),(t=e.call(this,pt(i),mt(o,i)))._onChange=[],t._applyFormState(r),t._setUpdateStrategy(i),t._initObservables(),t.updateValueAndValidity({onlySelf:!0,emitEvent:!!o}),t}return _(n,[{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(t){return t(e.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_unregisterOnChange",value:function(t){dt(this._onChange,t)}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_unregisterOnDisabledChange",value:function(t){dt(this._onDisabledChange,t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),n}(_t),wt=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,pt(r),mt(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!i}),o}return _(n,[{key:"registerControl",value:function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach(function(r){e._throwIfControlMissing(r),e.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=t&&(Object.keys(t).forEach(function(r){e.controls[r]&&e.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(t,e,n){return t[n]=e instanceof bt?e.value:e.getRawValue(),t})}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,function(t,e){return!!e._syncPendingControls()||t});return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var e=this;Object.keys(this.controls).forEach(function(n){var r=e.controls[n];r&&t(r,n)})}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){for(var e=0,n=Object.keys(this.controls);e<n.length;e++){var r=n[e],i=this.controls[r];if(this.contains(r)&&t(i))return!0}return!1}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},function(e,n,r){return(n.enabled||t.disabled)&&(e[r]=n.value),e})}},{key:"_reduceChildren",value:function(t,e){var n=t;return this._forEachChild(function(t,r){n=e(n,t,r)}),n}},{key:"_allControlsDisabled",value:function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))})}}]),n}(_t),xt=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,pt(r),mt(i,r))).controls=t,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!i}),o}return _(n,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach(function(t,r){e._throwIfControlMissing(r),e.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=t&&(t.forEach(function(t,r){e.at(r)&&e.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}},{key:"getRawValue",value:function(){return this.controls.map(function(t){return t instanceof bt?t.value:t.getRawValue()})}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild(function(t){return t._registerOnCollectionChange(function(){})}),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce(function(t,e){return!!e._syncPendingControls()||t},!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index ".concat(t))}},{key:"_forEachChild",value:function(t){this.controls.forEach(function(e,n){t(e,n)})}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(t){return t.value})}},{key:"_anyControls",value:function(t){return this.controls.some(function(e){return e.enabled&&t(e)})}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))})}},{key:"_allControlsDisabled",value:function(){var t,e=i(this.controls);try{for(e.s();!(t=e.n()).done;){if(t.value.enabled)return!1}}catch(n){e.e(n)}finally{e.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}]),n}(_t),kt={provide:K,useExisting:Object(r.forwardRef)(function(){return St})},Ct=Promise.resolve(null),St=function(){var t=function(t){l(n,t);var e=f(n);function n(t,i){var o;return y(this,n),(o=e.call(this)).submitted=!1,o._directives=[],o.ngSubmit=new r.EventEmitter,o.form=new wt({},U(t),H(i)),o}return _(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}},{key:"addControl",value:function(t){var e=this;Ct.then(function(){var n=e._findContainer(t.path);t.control=n.registerControl(t.name,t.control),rt(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),e._directives.push(t)})}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){var e=this;Ct.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name),dt(e._directives,t)})}},{key:"addFormGroup",value:function(t){var e=this;Ct.then(function(){var n=e._findContainer(t.path),r=new wt({});ct(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}},{key:"removeFormGroup",value:function(t){var e=this;Ct.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)})}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){var n=this;Ct.then(function(){n.form.get(t.path).setValue(e)})}},{key:"setValue",value:function(t){this.control.setValue(t)}},{key:"onSubmit",value:function(t){return this.submitted=!0,ht(this.form,this._directives),this.ngSubmit.emit(t),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(t){return t.pop(),t.length?this.form.get(t):this.form}}]),n}(K);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](k,10),r["\u0275\u0275directiveInject"](C,10))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r["\u0275\u0275listener"]("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r["\u0275\u0275ProvidersFeature"]([kt]),r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),Et=function(){var t=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return nt(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"_checkParentType",value:function(){}}]),n}(K);return t.\u0275fac=function(e){return Pt(e||t)},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,features:[r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),Pt=r["\u0275\u0275getInheritedFactory"](Et),Ot={provide:K,useExisting:Object(r.forwardRef)(function(){return Tt})},Tt=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this))._parent=t,o._setValidators(r),o._setAsyncValidators(i),o}return _(n,[{key:"_checkParentType",value:function(){}}]),n}(Et);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](K,5),r["\u0275\u0275directiveInject"](k,10),r["\u0275\u0275directiveInject"](C,10))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[r["\u0275\u0275ProvidersFeature"]([Ot]),r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),At={provide:J,useExisting:Object(r.forwardRef)(function(){return Dt})},It=Promise.resolve(null),Dt=function(){var t=function(t){l(n,t);var e=f(n);function n(t,i,o,a){var s;return y(this,n),(s=e.call(this)).control=new bt,s._registered=!1,s.update=new r.EventEmitter,s._parent=t,s._setValidators(i),s._setAsyncValidators(o),s.valueAccessor=ft(0,a),s}return _(n,[{key:"ngOnChanges",value:function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),lt(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"path",get:function(){return this._parent?nt(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){rt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}},{key:"_updateValue",value:function(t){var e=this;It.then(function(){e.control.setValue(t,{emitViewToModelChange:!1})})}},{key:"_updateDisabled",value:function(t){var e=this,n=t.isDisabled.currentValue,r=""===n||n&&"false"!==n;It.then(function(){r&&!e.control.disabled?e.control.disable():!r&&e.control.disabled&&e.control.enable()})}}]),n}(J);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](K,9),r["\u0275\u0275directiveInject"](k,10),r["\u0275\u0275directiveInject"](C,10),r["\u0275\u0275directiveInject"](d,10))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r["\u0275\u0275ProvidersFeature"]([At]),r["\u0275\u0275InheritDefinitionFeature"],r["\u0275\u0275NgOnChangesFeature"]]}),t}(),Mt=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t}(),Lt={provide:d,useExisting:Object(r.forwardRef)(function(){return jt}),multi:!0},jt=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this))._renderer=t,i._elementRef=r,i.onChange=function(t){},i.onTouched=function(){},i}return _(n,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),n}(h);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](r.ElementRef))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r["\u0275\u0275listener"]("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r["\u0275\u0275ProvidersFeature"]([Lt]),r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),Rt={provide:d,useExisting:Object(r.forwardRef)(function(){return Bt}),multi:!0},Ft=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({}),t}(),Nt=function(){var t=function(){function t(){y(this,t),this._accessors=[]}return _(t,[{key:"add",value:function(t,e){this._accessors.push([t,e])}},{key:"remove",value:function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}},{key:"select",value:function(t){var e=this;this._accessors.forEach(function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)})}},{key:"_isSameGroup",value:function(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:Ft}),t}(),Bt=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this))._renderer=t,a._elementRef=r,a._registry=i,a._injector=o,a.onChange=function(){},a.onTouched=function(){},a}return _(n,[{key:"ngOnInit",value:function(){this._control=this._injector.get(J),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}}},{key:"fireUncheck",value:function(t){this.writeValue(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_checkName",value:function(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}]),n}(h);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](r.ElementRef),r["\u0275\u0275directiveInject"](Nt),r["\u0275\u0275directiveInject"](r.Injector))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r["\u0275\u0275listener"]("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r["\u0275\u0275ProvidersFeature"]([Rt]),r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),zt={provide:d,useExisting:Object(r.forwardRef)(function(){return Vt}),multi:!0},Vt=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this))._renderer=t,i._elementRef=r,i.onChange=function(t){},i.onTouched=function(){},i}return _(n,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}},{key:"registerOnChange",value:function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),n}(h);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](r.ElementRef))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r["\u0275\u0275listener"]("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r["\u0275\u0275ProvidersFeature"]([zt]),r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),Ut=new r.InjectionToken("NgModelWithFormControlWarning"),qt={provide:J,useExisting:Object(r.forwardRef)(function(){return Ht})},Ht=function(){var t=function(t){l(n,t);var e=f(n);function n(t,i,o,a){var s;return y(this,n),(s=e.call(this))._ngModelWarningConfig=a,s.update=new r.EventEmitter,s._ngModelWarningSent=!1,s._setValidators(t),s._setAsyncValidators(i),s.valueAccessor=ft(0,o),s}return _(n,[{key:"isDisabled",set:function(t){}},{key:"ngOnChanges",value:function(t){if(this._isControlChanged(t)){var e=t.form.previousValue;e&&it(e,this,!1),rt(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}lt(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.form&&it(this.form,this,!1)}},{key:"path",get:function(){return[]}},{key:"control",get:function(){return this.form}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_isControlChanged",value:function(t){return t.hasOwnProperty("form")}}]),n}(J);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](k,10),r["\u0275\u0275directiveInject"](C,10),r["\u0275\u0275directiveInject"](d,10),r["\u0275\u0275directiveInject"](Ut,8))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[r["\u0275\u0275ProvidersFeature"]([qt]),r["\u0275\u0275InheritDefinitionFeature"],r["\u0275\u0275NgOnChangesFeature"]]}),t._ngModelWarningSentOnce=!1,t}(),Zt={provide:K,useExisting:Object(r.forwardRef)(function(){return Gt})},Gt=function(){var t=function(t){l(n,t);var e=f(n);function n(t,i){var o;return y(this,n),(o=e.call(this)).validators=t,o.asyncValidators=i,o.submitted=!1,o._onCollectionChange=function(){return o._updateDomValue()},o.directives=[],o.form=null,o.ngSubmit=new r.EventEmitter,o._setValidators(t),o._setAsyncValidators(i),o}return _(n,[{key:"ngOnChanges",value:function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}},{key:"ngOnDestroy",value:function(){this.form&&(st(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(function(){}))}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"addControl",value:function(t){var e=this.form.get(t.path);return rt(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){it(t.control||null,t,!1),dt(this.directives,t)}},{key:"addFormGroup",value:function(t){this._setUpFormContainer(t)}},{key:"removeFormGroup",value:function(t){this._cleanUpFormContainer(t)}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"addFormArray",value:function(t){this._setUpFormContainer(t)}},{key:"removeFormArray",value:function(t){this._cleanUpFormContainer(t)}},{key:"getFormArray",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,e){this.form.get(t.path).setValue(e)}},{key:"onSubmit",value:function(t){return this.submitted=!0,ht(this.form,this.directives),this.ngSubmit.emit(t),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_updateDomValue",value:function(){var t=this;this.directives.forEach(function(e){var n=e.control,r=t.form.get(e.path);n!==r&&(it(n||null,e),r instanceof bt&&(rt(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_setUpFormContainer",value:function(t){var e=this.form.get(t.path);ct(e,t),e.updateValueAndValidity({emitEvent:!1})}},{key:"_cleanUpFormContainer",value:function(t){if(this.form){var e=this.form.get(t.path);e&&function(t,e){return st(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}},{key:"_updateRegistrations",value:function(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){})}},{key:"_updateValidators",value:function(){at(this.form,this,!1),this._oldForm&&st(this._oldForm,this,!1)}},{key:"_checkFormPresent",value:function(){}}]),n}(K);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](k,10),r["\u0275\u0275directiveInject"](C,10))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r["\u0275\u0275listener"]("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r["\u0275\u0275ProvidersFeature"]([Zt]),r["\u0275\u0275InheritDefinitionFeature"],r["\u0275\u0275NgOnChangesFeature"]]}),t}(),Wt={provide:K,useExisting:Object(r.forwardRef)(function(){return Xt})},Xt=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this))._parent=t,o._setValidators(r),o._setAsyncValidators(i),o}return _(n,[{key:"_checkParentType",value:function(){Jt(this._parent)}}]),n}(Et);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](K,13),r["\u0275\u0275directiveInject"](k,10),r["\u0275\u0275directiveInject"](C,10))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[r["\u0275\u0275ProvidersFeature"]([Wt]),r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),Kt={provide:K,useExisting:Object(r.forwardRef)(function(){return Yt})},Yt=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this))._parent=t,o._setValidators(r),o._setAsyncValidators(i),o}return _(n,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormArray(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormArray(this)}},{key:"control",get:function(){return this.formDirective.getFormArray(this)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"path",get:function(){return nt(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"_checkParentType",value:function(){Jt(this._parent)}}]),n}(K);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](K,13),r["\u0275\u0275directiveInject"](k,10),r["\u0275\u0275directiveInject"](C,10))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[r["\u0275\u0275ProvidersFeature"]([Kt]),r["\u0275\u0275InheritDefinitionFeature"]]}),t}();function Jt(t){return!(t instanceof Xt||t instanceof Gt||t instanceof Yt)}var $t={provide:J,useExisting:Object(r.forwardRef)(function(){return Qt})},Qt=function(){var t=function(t){l(n,t);var e=f(n);function n(t,i,o,a,s){var u;return y(this,n),(u=e.call(this))._ngModelWarningConfig=s,u._added=!1,u.update=new r.EventEmitter,u._ngModelWarningSent=!1,u._parent=t,u._setValidators(i),u._setAsyncValidators(o),u.valueAccessor=ft(0,a),u}return _(n,[{key:"isDisabled",set:function(t){}},{key:"ngOnChanges",value:function(t){this._added||this._setUpControl(),lt(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"path",get:function(){return nt(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"_checkParentType",value:function(){}},{key:"_setUpControl",value:function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}]),n}(J);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](K,13),r["\u0275\u0275directiveInject"](k,10),r["\u0275\u0275directiveInject"](C,10),r["\u0275\u0275directiveInject"](d,10),r["\u0275\u0275directiveInject"](Ut,8))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r["\u0275\u0275ProvidersFeature"]([$t]),r["\u0275\u0275InheritDefinitionFeature"],r["\u0275\u0275NgOnChangesFeature"]]}),t._ngModelWarningSentOnce=!1,t}(),te={provide:d,useExisting:Object(r.forwardRef)(function(){return ne}),multi:!0};function ee(t,e){return null==t?"".concat(e):(e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}var ne=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this))._renderer=t,i._elementRef=r,i._optionMap=new Map,i._idCounter=0,i.onChange=function(t){},i.onTouched=function(){},i._compareWith=Object.is,i}return _(n,[{key:"compareWith",set:function(t){this._compareWith=t}},{key:"writeValue",value:function(t){this.value=t;var e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=ee(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){e.value=e._getOptionValue(n),t(e.value)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r),t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}]),n}(h);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](r.ElementRef))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r["\u0275\u0275listener"]("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r["\u0275\u0275ProvidersFeature"]([te]),r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),re=function(){var t=function(){function t(e,n,r){y(this,t),this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}return _(t,[{key:"ngValue",set:function(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(ee(this.id,t)),this._select.writeValue(this._select.value))}},{key:"value",set:function(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}},{key:"_setElementValue",value:function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](r.ElementRef),r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](ne,9))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t}(),ie={provide:d,useExisting:Object(r.forwardRef)(function(){return ae}),multi:!0};function oe(t,e){return null==t?"".concat(e):("string"==typeof e&&(e="'".concat(e,"'")),e&&"object"==typeof e&&(e="Object"),"".concat(t,": ").concat(e).slice(0,50))}var ae=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this))._renderer=t,i._elementRef=r,i._optionMap=new Map,i._idCounter=0,i.onChange=function(t){},i.onTouched=function(){},i._compareWith=Object.is,i}return _(n,[{key:"compareWith",set:function(t){this._compareWith=t}},{key:"writeValue",value:function(t){var e,n=this;if(this.value=t,Array.isArray(t)){var r=t.map(function(t){return n._getOptionId(t)});e=function(t,e){t._setSelected(r.indexOf(e.toString())>-1)}}else e=function(t,e){t._setSelected(!1)};this._optionMap.forEach(e)}},{key:"registerOnChange",value:function(t){var e=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=e._getOptionValue(a.value);r.push(s)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=e._getOptionValue(l.value);r.push(h)}}e.value=r,t(r)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}},{key:"_getOptionId",value:function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var r=n[e];if(this._compareWith(this._optionMap.get(r)._value,t))return r}return null}},{key:"_getOptionValue",value:function(t){var e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}]),n}(h);return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](r.ElementRef))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r["\u0275\u0275listener"]("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r["\u0275\u0275ProvidersFeature"]([ie]),r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),se=function(){var t=function(){function t(e,n,r){y(this,t),this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}return _(t,[{key:"ngValue",set:function(t){null!=this._select&&(this._value=t,this._setElementValue(oe(this.id,t)),this._select.writeValue(this._select.value))}},{key:"value",set:function(t){this._select?(this._value=t,this._setElementValue(oe(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}},{key:"_setElementValue",value:function(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}},{key:"_setSelected",value:function(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](r.ElementRef),r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](ae,9))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t}(),ue={provide:k,useExisting:Object(r.forwardRef)(function(){return le}),multi:!0},ce={provide:k,useExisting:Object(r.forwardRef)(function(){return he}),multi:!0},le=function(){var t=function(){function t(){y(this,t),this._required=!1}return _(t,[{key:"required",get:function(){return this._required},set:function(t){this._required=null!=t&&!1!==t&&"false"!="".concat(t),this._onChange&&this._onChange()}},{key:"validate",value:function(t){return this.required?T(t):null}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r["\u0275\u0275attribute"]("required",e.required?"":null)},inputs:{required:"required"},features:[r["\u0275\u0275ProvidersFeature"]([ue])]}),t}(),he=function(){var t=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"validate",value:function(t){return this.required?A(t):null}}]),n}(le);return t.\u0275fac=function(e){return fe(e||t)},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r["\u0275\u0275attribute"]("required",e.required?"":null)},features:[r["\u0275\u0275ProvidersFeature"]([ce]),r["\u0275\u0275InheritDefinitionFeature"]]}),t}(),fe=r["\u0275\u0275getInheritedFactory"](he),de={provide:k,useExisting:Object(r.forwardRef)(function(){return pe}),multi:!0},pe=function(){var t=function(){function t(){y(this,t),this._enabled=!1}return _(t,[{key:"email",set:function(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()}},{key:"validate",value:function(t){return this._enabled?I(t):null}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[r["\u0275\u0275ProvidersFeature"]([de])]}),t}(),ve={provide:k,useExisting:Object(r.forwardRef)(function(){return me}),multi:!0},me=function(){var t=function(){function t(){y(this,t),this._validator=j}return _(t,[{key:"ngOnChanges",value:function(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(t){return null==this.minlength?null:this._validator(t)}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}},{key:"_createValidator",value:function(){this._validator=D("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r["\u0275\u0275attribute"]("minlength",e.minlength?e.minlength:null)},inputs:{minlength:"minlength"},features:[r["\u0275\u0275ProvidersFeature"]([ve]),r["\u0275\u0275NgOnChangesFeature"]]}),t}(),ye={provide:k,useExisting:Object(r.forwardRef)(function(){return ge}),multi:!0},ge=function(){var t=function(){function t(){y(this,t),this._validator=j}return _(t,[{key:"ngOnChanges",value:function(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(t){return null!=this.maxlength?this._validator(t):null}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}},{key:"_createValidator",value:function(){this._validator=M("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r["\u0275\u0275attribute"]("maxlength",e.maxlength?e.maxlength:null)},inputs:{maxlength:"maxlength"},features:[r["\u0275\u0275ProvidersFeature"]([ye]),r["\u0275\u0275NgOnChangesFeature"]]}),t}(),_e={provide:k,useExisting:Object(r.forwardRef)(function(){return be}),multi:!0},be=function(){var t=function(){function t(){y(this,t),this._validator=j}return _(t,[{key:"ngOnChanges",value:function(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}},{key:"validate",value:function(t){return this._validator(t)}},{key:"registerOnValidatorChange",value:function(t){this._onChange=t}},{key:"_createValidator",value:function(){this._validator=L(this.pattern)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r["\u0275\u0275attribute"]("pattern",e.pattern?e.pattern:null)},inputs:{pattern:"pattern"},features:[r["\u0275\u0275ProvidersFeature"]([_e]),r["\u0275\u0275NgOnChangesFeature"]]}),t}(),we=[Mt,re,se,b,jt,Vt,v,ne,ae,Bt,tt,et,le,me,ge,be,he,pe],xe=[Dt,Tt,St],ke=[Ht,Gt,Qt,Xt,Yt],Ce=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[Ft]]}),t}(),Se=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[Ce]}),t}(),Ee=function(){var t=function(){function t(){y(this,t)}return _(t,null,[{key:"withConfig",value:function(e){return{ngModule:t,providers:[{provide:Ut,useValue:e.warnOnNgModelWithFormControl}]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[Ce]}),t}(),Pe=function(){var t=function(){function t(){y(this,t)}return _(t,[{key:"group",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this._reduceControls(t),i=null,o=null;return null!=n&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(n)?(i=null!=n.validators?n.validators:null,o=null!=n.asyncValidators?n.asyncValidators:null,e=null!=n.updateOn?n.updateOn:void 0):(i=null!=n.validator?n.validator:null,o=null!=n.asyncValidator?n.asyncValidator:null)),new wt(r,{asyncValidators:o,updateOn:e,validators:i})}},{key:"control",value:function(t,e,n){return new bt(t,e,n)}},{key:"array",value:function(t,e,n){var r=this,i=t.map(function(t){return r._createControl(t)});return new xt(i,e,n)}},{key:"_reduceControls",value:function(t){var e=this,n={};return Object.keys(t).forEach(function(r){n[r]=e._createControl(t[r])}),n}},{key:"_createControl",value:function(t){return t instanceof bt||t instanceof wt||t instanceof xt?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r["\u0275\u0275defineInjectable"])({factory:function(){return new t},token:t,providedIn:Ee}),t}(),Oe=new r.Version("11.2.14")},"44nb":function(t,e){var n,r,i,o=String.fromCharCode;function a(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function s(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function u(t,e){return o(t>>e&63|128)}function c(t,e){if(0==(4294967168&t))return o(t);var n="";return 0==(4294965248&t)?n=o(t>>6&31|192):0==(4294901760&t)?(s(t,e)||(t=65533),n=o(t>>12&15|224),n+=u(t,6)):0==(4292870144&t)&&(n=o(t>>18&7|240),n+=u(t,12),n+=u(t,6)),n+o(63&t|128)}function l(){if(i>=r)throw Error("Invalid byte index");var t=255&n[i];if(i++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function h(t){var e,o;if(i>r)throw Error("Invalid byte index");if(i==r)return!1;if(e=255&n[i],i++,0==(128&e))return e;if(192==(224&e)){if((o=(31&e)<<6|l())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&e)){if((o=(15&e)<<12|l()<<6|l())>=2048)return s(o,t)?o:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(o=(7&e)<<18|l()<<12|l()<<6|l())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,r=a(t),i=r.length,o=-1,s="";++o<i;)s+=c(r[o],n);return s},decode:function(t,e){var s=!1!==(e=e||{}).strict;n=a(t),r=n.length,i=0;for(var u,c=[];!1!==(u=h(s));)c.push(u);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)(e=t[r])>65535&&(i+=o((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=o(e);return i}(c)}}},"4I5i":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}()},"4er6":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MenuTrackComponent=void 0;var s=n("fXoL"),u=(n("BD2p"),n("XVN5"),n("+ZYu"),n("tyNb"),a(n("N5Cg"))),c=(n("UFmM"),n("qCKp")),l=o(n("fXoL")),h=o(n("BD2p")),f=o(n("XVN5")),d=o(n("+ZYu")),p=o(n("tyNb")),v=o(n("UFmM")),m=o(n("ofXK")),g=o(n("3Pt+")),b=o(n("sYmb"));function w(t,e){if(1&t){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"li",1),l.\u0275\u0275listener("click",function(t){l.\u0275\u0275restoreView(n);var r=e.$implicit;return l.\u0275\u0275nextContext().onSelect(r,t)}),l.\u0275\u0275elementStart(1,"div"),l.\u0275\u0275text(2),l.\u0275\u0275pipe(3,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(4,"form",2),l.\u0275\u0275elementStart(5,"div"),l.\u0275\u0275text(6,"\u0414\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f *.gpx \u0444\u0430\u0439\u043b"),l.\u0275\u0275elementEnd(),l.\u0275\u0275element(7,"input",3),l.\u0275\u0275element(8,"input",4),l.\u0275\u0275elementStart(9,"button",1),l.\u0275\u0275listener("click",function(t){l.\u0275\u0275restoreView(n);var r=e.$implicit;return l.\u0275\u0275nextContext().onSelect(r,t)}),l.\u0275\u0275text(10,"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit;l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(l.\u0275\u0275pipeBind1(3,1,r.text))}}var x=console.log,k=[{value:"strava",text:"Strava"},{value:"journal",text:"JOURNAL"},{value:"myMarker",text:"MY_MARKER"},{value:"load",text:"UPLOAD_GPX",enctype:"multipart/form-data"},{value:"import",text:"IMPORT_FROM_GOOGLE_KML"},{value:"gl520",text:"GL520BS"}],C=function(){function t(e,n,r,i,o){y(this,t),this.ms=e,this.io=n,this.trackService=r,this.router=i,this.myMarkerService=o,this.menu=k,this.clickLoad=0,this.onCloseMenuTrack=new s.EventEmitter,this.socket=n.socket}return _(t,[{key:"clickIn",value:function(t){t.stopPropagation(),this.onCloseMenuTrack.emit(!1)}},{key:"ngAfterViewInit",value:function(){var t=this,e=c.fromEvent(document.body,"click");setTimeout(function(){t.subscription=e.subscribe(function(e){t.onCloseMenuTrack.emit(!1)})},10)}},{key:"ngOnDestroy",value:function(){var t;null===(t=this.subscription)||void 0===t||t.unsubscribe()}},{key:"onSelect",value:function(t,e){switch(t.value){case"load":this.loadFile(e);break;case"import":this.importFromGoogleKml(e);break;case"journal":this.router.navigate(["/auth/map/journal"]);break;case"strava":this.router.navigate(["/auth/map/strava-invite"]);break;case"myMarker":this.myMarkerService.show();break;case"gl520":this.router.navigate(["/auth/map/","gtgbc"]);break;default:return null}}},{key:"loadFile",value:function(t){var e=this;this.clickLoad++;var n=t.target.parentElement.getElementsByTagName("input")[1];function r(){this.ms.menuOpen=!1,this.clickLoad=0,(new FileReader).onload=function(t){console.log(t)};var t=n.files[0],e=u.default.createStream();u.default(this.socket).emit("file",e,{size:t.size}),u.default.createBlobReadStream(t).pipe(e)}n.addEventListener("change",function(){r.call(e)}),2==this.clickLoad&&r.call(this),n.addEventListener("click",function(t){t.stopPropagation()}),n.click()}},{key:"importFromGoogleKml",value:function(t){var e=this;this.clickLoad++;var n=t.target.parentElement.getElementsByTagName("input")[1];function r(){this.ms.menuOpen=!1,this.clickLoad=0,(new FileReader).onload=function(t){console.log(t)};var t=n.files[0],e=u.default.createStream();u.default(this.socket).emit("importFromGoogleKml",e,{size:t.size}),u.default.createBlobReadStream(t).pipe(e)}n.addEventListener("change",function(){r.call(e)}),2==this.clickLoad&&r.call(this),n.addEventListener("click",function(t){t.stopPropagation()}),n.click()}},{key:"importFile",value:function(t){this.clickLoad++;var e=this.trackService;this.ms.menuOpen=!1;var n=t.target.parentElement.getElementsByTagName("input")[1];function r(){this.clickLoad=0;var t=n.files[0],r=new XMLHttpRequest;r.upload.onprogress=function(t){console.log(t.loaded+" / "+t.total)},r.onload=r.onerror=function(){200==this.status?(e.showGpxTrack(this.response),function(t,e){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}(t.name.replace(/kml$/,"gpx"),this.response)):x("error "+this.status)},r.open("POST","/import/kml-data",!0);var i=new FormData;i.append("file",t),r.send(i)}n.addEventListener("change",r.bind(this)),n.addEventListener("click",function(t){t.stopPropagation()}),n.click(),2==this.clickLoad&&r.call(this)}}]),t}();e.MenuTrackComponent=C,C.\u0275fac=function(t){return new(t||C)(l.\u0275\u0275directiveInject(h.MenuService),l.\u0275\u0275directiveInject(f.Io),l.\u0275\u0275directiveInject(d.TrackService),l.\u0275\u0275directiveInject(p.Router),l.\u0275\u0275directiveInject(v.MyMarkerService))},C.\u0275cmp=l.\u0275\u0275defineComponent({type:C,selectors:[["menu-track"]],hostBindings:function(t,e){1&t&&l.\u0275\u0275listener("click",function(t){return e.clickIn(t)})},outputs:{onCloseMenuTrack:"onCloseMenuTrack"},decls:2,vars:1,consts:[[3,"click",4,"ngFor","ngForOf"],[3,"click"],["enctype","multipart/form-data","action","php/upload.php","method","POST",2,"display","none"],["type","hidden","name","afile","value","30000"],["name","afile","id","file-select","type","file",2,"display","none"]],template:function(t,e){1&t&&(l.\u0275\u0275elementStart(0,"ul"),l.\u0275\u0275template(1,w,11,3,"li",0),l.\u0275\u0275elementEnd()),2&t&&(l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",e.menu))},directives:[m.NgForOf,g.\u0275angular_packages_forms_forms_ba,g.NgControlStatusGroup,g.NgForm],pipes:[b.TranslatePipe],styles:["[_nghost-%COMP%]{position:absolute;left:80px;top:100%;z-index:2}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;background-color:hsla(0,0%,100%,.8);padding:15px;min-width:80px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#fff}"]})},"5+tZ":function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return c});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(o){return o.pipe(a(function(n,o){return Object(i.a)(t(n,o)).pipe(Object(r.a)(function(t,r){return e(n,t,o,r)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new s(t,n))})}var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;y(this,t),this.project=e,this.concurrent=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}]),t}(),u=function(t){l(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return y(this,n),(i=e.call(this,t)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return _(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=new o.a(this),n=this.destination;n.add(e);var r=Object(o.c)(t,e);r!==e&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(o.b),c=a},"5FMk":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.LogService=void 0,n("XVN5"),n("0RL5"),n("iX35");var u,c=n("y2tO"),l=(n("mr0/"),a(n("fXoL"))),h=a(n("XVN5")),f=a(n("iX35")),d=a(n("0RL5")),p=a(n("mr0/"));e.LogService=((u=function(){function t(e,n,r,i){var o=this;y(this,t),this.markerService=n,this.deviceService=r,this.mapService=i,this.socket=e.socket,i.onLoad.then(function(){o.socket.on("log",o.log)}),this.devices={}}return _(t,[{key:"emitLastPosition",value:function(){this.socket.emit("emitLastPosition")}},{key:"log",value:function(t){console.log("log -> ",t),t&&this.deviceService.getDeviceByDeviceKey(t.device_key).onMarker(t)}},{key:"clearDevices",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||u)(l.\u0275\u0275inject(h.Io),l.\u0275\u0275inject(f.MarkerService),l.\u0275\u0275inject(d.DeviceService),l.\u0275\u0275inject(p.MapService))},u.\u0275prov=l.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac}),o([c.autobind(),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],u.prototype,"log",null),u)},"5IPO":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;var r=n("q7Eg");e.Util=function(){function t(){y(this,t)}return _(t,[{key:"distance",value:function(t){for(var e=t.points,n=0,i=0;i<e.length-1;i++)n+=this.distanceBetween2(new r.LngLat(e[i].lng,e[i].lat),new r.LngLat(e[i+1].lng,e[i+1].lat));return n/=1e3,parseFloat(n.toFixed(3))}},{key:"distanceBetween2",value:function(t,e){var n,r,i,o;n=t.lat,i=t.lng,r=e.lat,o=e.lng,n*=Math.PI/180,r*=Math.PI/180,i*=Math.PI/180,o*=Math.PI/180;var a=Math.cos(n),s=Math.cos(r),u=Math.sin(n),c=Math.sin(r),l=o-i,h=Math.cos(l),f=Math.sin(l),d=Math.sqrt(Math.pow(s*f,2)+Math.pow(a*c-u*s*h,2));return 6372795*Math.atan2(d,u*c+a*s*h)}},{key:"bearing",value:function(t){function e(t){return t*(Math.PI/180)}t.forEach(function(n,r){r!=t.length-1&&(t[r+1].bearing=function(t,n,r,i){t=e(t),n=e(n),r=e(r);var o=(i=e(i))-n,a=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(t/2+Math.PI/4));return Math.abs(o)>Math.PI&&(o=o>0?-(2*Math.PI-o):2*Math.PI+o),(Math.atan2(o,a)*(180/Math.PI)+360)%360}(n.lat,n.lng,t[r+1].lat,t[r+1].lng))})}}]),t}()},"5LH7":function(t,e){var n=1e3,r=60*n,i=60*r,o=24*i;function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var s,u=typeof t;if("string"===u&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===u&&!1===isNaN(t))return e.long?a(s=t,o,"day")||a(s,i,"hour")||a(s,r,"minute")||a(s,n,"second")||s+" ms":function(t){return t>=o?Math.round(t/o)+"d":t>=i?Math.round(t/i)+"h":t>=r?Math.round(t/r)+"m":t>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},"6LkE":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.AuthComponent=void 0;var a=n("RMdn"),s=n("W1q8"),u=n("GW7a"),c=n("zu+5"),l=(n("6uu6"),o(n("fXoL"))),h=o(n("6uu6")),f=o(n("zu+5")),d=o(n("tyNb")),p=o(n("otXa")),v=_(function t(e){y(this,t),this.as=e,this.as=e});e.AuthComponent=v,v.\u0275fac=function(t){return new(t||v)(l.\u0275\u0275directiveInject(h.AuthService))},v.\u0275cmp=l.\u0275\u0275defineComponent({type:v,selectors:[["ng-component"]],features:[l.\u0275\u0275ProvidersFeature([a.Mercator,u.InfoPositionComponent,s.PositionSize,c.MenuComponent])],decls:9,vars:0,consts:[[1,"menu"],[1,"other"]],template:function(t,e){1&t&&(l.\u0275\u0275elementStart(0,"table"),l.\u0275\u0275elementStart(1,"tbody"),l.\u0275\u0275elementStart(2,"tr",0),l.\u0275\u0275elementStart(3,"td"),l.\u0275\u0275element(4,"menu"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"tr",1),l.\u0275\u0275elementStart(6,"td"),l.\u0275\u0275element(7,"router-outlet"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275element(8,"chat-component"))},directives:[f.MenuComponent,d.RouterOutlet,p.ChatComponent],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}table[_ngcontent-%COMP%]{width:100%;height:100%}table[_ngcontent-%COMP%]   tr.menu[_ngcontent-%COMP%]{height:40px}table[_ngcontent-%COMP%]   tr.other[_ngcontent-%COMP%]{height:100%;background:gray}"]})},"6uu6":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.AuthService=void 0,n("XVN5"),n("kQ+e"),n("tyNb"),n("tpgc"),n("mu9K"),n("jHPu"),n("UFmM");var u,c=n("y2tO"),l=(n("0RL5"),n("5FMk"),n("mr0/"),n("wlYr"),n("qCKp")),h=a(n("fXoL")),f=a(n("XVN5")),d=a(n("kQ+e")),p=a(n("tpgc")),v=a(n("mu9K")),m=a(n("jHPu")),g=a(n("wlYr")),b=a(n("UFmM")),w=a(n("0RL5")),x=a(n("5FMk")),k=a(n("tyNb")),C=a(n("mr0/"));e.AuthService=((u=function(){function t(e,n,r,i,o,a,s,u,c,h,f,d,p){y(this,t),this.io=e,this.ls=n,this.friend=r,this.userService=i,this.friendsService=o,this.chatService=a,this.toast=s,this.myMarkerService=u,this.deviceService=c,this.logService=h,this.router=f,this.mapService=d,this.route=p,this.unsubscribe$=new l.Subject,this.can=new l.Subject,this.socket=e.socket,this.socket.on("connect",this.onConnect),this.socket.on("disconnect",this.onDisconnect)}return _(t,[{key:"canActivate",value:function(t,e){return this.can}},{key:"onEnter",value:function(t){var e=t.name,n=t.pass;return console.log("name pass",e,n),this.socket.$get("onEnter",{name:e,pass:n}).then(this.setHashName)}},{key:"setHashName",value:function(t){switch(t.result){case"ok":this.ls.userKey=t.hash,this.onAuth();break;case!1:this.toast.show({type:"warning",text:"\u041d\u0435\u0432\u0435\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"})}}},{key:"onAuth",value:function(){var t=this;return this.socket.$get("onAuth",{hash:this.ls.userKey}).then(function(e){return t.can.next(!0),"ok"==e.result?(t.userService.setUser(e.user),t.friendsService.requestFriends(),t.friendsService.requestInvites(),t.friendsService.requestRequests(),t.myMarkerService.requestMarkers()):t.userService.clearUser(),t.mapService.onLoad}).then(function(e){return t.deviceService.setMapGl(e).onDevices().then(function(){return t.logService.emitLastPosition(),!0})}).catch(function(t){console.error(t)})}},{key:"onConnect",value:function(){this.toast.show({type:"success",text:"On Air ... "}),this.onAuth()}},{key:"onDisconnect",value:function(){console.info("disconnect"),this.toast.show({type:"warning",text:"You are disconnected"})}},{key:"onExit",value:function(t){var e=this;this.socket.$emit("onExit",{hash:this.ls.userKey}).then(function(t){"ok"==t.result&&(e.ls.userKey=null,e.userService.clearUser(),e.deviceService.clearDevices(),e.myMarkerService.clearAll())})}}]),t}()).\u0275fac=function(t){return new(t||u)(h.\u0275\u0275inject(f.Io),h.\u0275\u0275inject(d.LocalStorage),h.\u0275\u0275inject(p.FriendsService),h.\u0275\u0275inject(v.UserService),h.\u0275\u0275inject(p.FriendsService),h.\u0275\u0275inject(m.ChatService),h.\u0275\u0275inject(g.ToastService),h.\u0275\u0275inject(b.MyMarkerService),h.\u0275\u0275inject(w.DeviceService),h.\u0275\u0275inject(x.LogService),h.\u0275\u0275inject(k.Router),h.\u0275\u0275inject(C.MapService),h.\u0275\u0275inject(k.ActivatedRoute))},u.\u0275prov=h.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),o([c.autobind(),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],u.prototype,"setHashName",null),o([c.autobind(),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],u.prototype,"onConnect",null),o([c.autobind(),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],u.prototype,"onDisconnect",null),o([c.autobind(),s("design:type",Function),s("design:paramtypes",[Event]),s("design:returntype",void 0)],u.prototype,"onExit",null),u)},"7+OI":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t){return!!t&&(t instanceof r.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}},"7HRe":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("quSY"),o=n("kJWO"),a=n("jZKg"),s=n("Lhse"),u=n("c2HN"),c=n("I55L");function l(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.a]}(t))return function(t,e){return new r.a(function(n){var r=new i.a;return r.add(e.schedule(function(){var i=t[o.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r})}(t,e);if(Object(u.a)(t))return function(t,e){return new r.a(function(n){var r=new i.a;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r})}(t,e);if(Object(c.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[s.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(function(n){var r,o=new i.a;return o.add(function(){r&&"function"==typeof r.return&&r.return()}),o.add(e.schedule(function(){r=t[s.a](),o.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}}))})),o})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},"7Hc7":function(t,e,n){"use strict";n.d(e,"b",function(){return d}),n.d(e,"a",function(){return p});var r=1,i=Promise.resolve(),o={};function a(t){return t in o&&(delete o[t],!0)}var s=function(t){var e=r++;return o[e]=!0,i.then(function(){return a(e)&&t()}),e},c=function(t){a(t)},h=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return _(n,[{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?u(m(n.prototype),"requestAsyncId",this).call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=s(t.flush.bind(t,null))))}},{key:"recycleAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return u(m(n.prototype),"recycleAsyncId",this).call(this,t,e,r);0===t.actions.length&&(c(e),t.scheduled=void 0)}}]),n}(n("3N8a").a),d=new(function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(n("IjjT").a))(h),p=d},"7jRU":function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},"7mgA":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.StravaAuthComponent=void 0,n("tyNb"),n("XVN5"),n("Zq4v");var a=o(n("fXoL")),s=o(n("tyNb")),u=o(n("XVN5")),c=o(n("Zq4v")),l=o(n("ofXK"));function h(t,e){1&t&&(a.\u0275\u0275elementStart(0,"div",10),a.\u0275\u0275elementStart(1,"div",5),a.\u0275\u0275text(2,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f.."),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"div",5),a.\u0275\u0275element(4,"div",11),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function f(t,e){if(1&t&&(a.\u0275\u0275elementStart(0,"div",10),a.\u0275\u0275elementStart(1,"table",12),a.\u0275\u0275elementStart(2,"tr"),a.\u0275\u0275elementStart(3,"td",13),a.\u0275\u0275element(4,"img",14),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"td"),a.\u0275\u0275text(6,"FirstName"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"td"),a.\u0275\u0275text(8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"tr"),a.\u0275\u0275elementStart(10,"td"),a.\u0275\u0275text(11,"LastName"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"td"),a.\u0275\u0275text(13),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"tr"),a.\u0275\u0275elementStart(15,"td"),a.\u0275\u0275text(16,"City"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"td"),a.\u0275\u0275text(18),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&t){var n=a.\u0275\u0275nextContext();a.\u0275\u0275advance(4),a.\u0275\u0275property("src",n.profile,a.\u0275\u0275sanitizeUrl),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(n.firstName),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate(n.lastName),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate(n.city)}}function d(t,e){if(1&t){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",15),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().goNext()}),a.\u0275\u0275text(1,"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"),a.\u0275\u0275elementEnd()}}var p=function(){function t(e,n,r){y(this,t),this.router=e,this.io=n,this.stravaService=r,this.authInProgress=!0,this.socket=n.socket,this.authInProgress=!0}return _(t,[{key:"ngOnInit",value:function(){var t=this;this.router.routerState.root.queryParams.subscribe(function(e){t.code=e.code,t.code&&t.socket.$emit("stravaUpdateCode",t.code).then(function(e){console.log("stravaUpdateCode->",e),t.stravaOauth(t.code)}),console.log(t.code)})}},{key:"stravaOauth",value:function(t){var e=this;this.stravaService.stravaOauth(t).then(function(t){if("ok"==t.result){var n=t.data.athlete;e.firstName=n.firstname,e.lastName=n.lastname,e.profile=n.profile,e.city=n.city}e.authInProgress=!1})}},{key:"goToAuth",value:function(){this.router.navigate(["/auth/map/strava-invite"])}},{key:"onClose",value:function(){this.router.navigate(["/auth/map"])}},{key:"goNext",value:function(){this.router.navigate(["/auth/map/strava-invite"])}}]),t}();e.StravaAuthComponent=p,p.\u0275fac=function(t){return new(t||p)(a.\u0275\u0275directiveInject(s.Router),a.\u0275\u0275directiveInject(u.Io),a.\u0275\u0275directiveInject(c.StravaService))},p.\u0275cmp=a.\u0275\u0275defineComponent({type:p,selectors:[["ng-component"]],decls:16,vars:3,consts:[[1,"content"],[1,"close",3,"click"],[1,"row"],[1,"flex-cell","gray"],[1,"flex","center","row","space-between"],[1,"flex-cell"],[1,"ico-strava-text"],["class","flex row center",4,"ngIf"],[1,"flex","flex-end"],["class","button primary",3,"click",4,"ngIf"],[1,"flex","row","center"],[1,"ico-z"],[1,"athlete"],["rowspan","3"],[1,"profile",3,"src"],[1,"button","primary",3,"click"]],template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275elementStart(1,"div"),a.\u0275\u0275elementStart(2,"div"),a.\u0275\u0275elementStart(3,"div",1),a.\u0275\u0275listener("click",function(){return e.onClose()}),a.\u0275\u0275text(4,"\xd7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"div",2),a.\u0275\u0275elementStart(6,"div",3),a.\u0275\u0275text(7,"\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 *"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"div",4),a.\u0275\u0275elementStart(9,"div",5),a.\u0275\u0275element(10,"div",6),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(11,h,5,0,"div",7),a.\u0275\u0275template(12,f,19,4,"div",7),a.\u0275\u0275elementStart(13,"div",8),a.\u0275\u0275elementStart(14,"div",5),a.\u0275\u0275template(15,d,2,0,"div",9),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&t&&(a.\u0275\u0275advance(11),a.\u0275\u0275property("ngIf",e.authInProgress),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.firstName),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",e.code))},directives:[l.NgIf],styles:["[_nghost-%COMP%]{position:absolute;left:0;top:0;z-index:5;width:100%}*[_ngcontent-%COMP%]{box-sizing:border-box}.gray[_ngcontent-%COMP%]{color:#a9a9a9}h4[_ngcontent-%COMP%]{padding:8px 0}.invite[_ngcontent-%COMP%]{font-size:12px;float:right;cursor:pointer;text-align:right;margin-left:20px}.invite.accept[_ngcontent-%COMP%]{color:#1e90ff;font-weight:700}.invite.reject[_ngcontent-%COMP%]{color:gray}.content[_ngcontent-%COMP%]{position:absolute;background:hsla(0,0%,100%,.9);min-width:600px;max-width:600px;margin-left:-300px;padding:0;left:50%;top:calc(100% + 20px);box-shadow:1px 1px 3px rgba(0,0,0,.4)}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:30px}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;cursor:pointer;padding:15px;font-size:20px;font:30px/15px bold}.ico-strava-text[_ngcontent-%COMP%]{width:80px;height:20px;background:url(http://178.62.44.54:8080/ico-strava-text.png) no-repeat 50%;background-size:100%}.ico-routs[_ngcontent-%COMP%]{background:url(http://178.62.44.54:8080/ico-routs.png) no-repeat;background-size:auto 80%;padding:5px 5px 5px 30px;color:#1e90ff;cursor:pointer}table.strava[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{white-space:nowrap}a[_ngcontent-%COMP%]{font-size:14px;cursor:pointer;color:#1e90ff;margin-left:5px}table.strava[_ngcontent-%COMP%]{width:100%}table.strava[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;padding:10px}table.strava[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:80%}table.athlete[_ngcontent-%COMP%]{width:100%}table.athlete[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;padding:10px}.profile[_ngcontent-%COMP%]{width:80px;height:80px}.input[_ngcontent-%COMP%]{width:100%}.bnt-help[_ngcontent-%COMP%]{cursor:pointer}.strava-help[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.scroll[_ngcontent-%COMP%]{max-height:560px;overflow-y:auto}.scroll[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px}@media screen and (max-height:600px){.scroll[_ngcontent-%COMP%]{max-height:100px}}@media screen and (max-width:600px){.content[_ngcontent-%COMP%]{position:relative;width:100%;min-width:inherit;left:0;margin-left:0}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:15px}}"]})},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),a=n("2QA8"),s=n("2fFW"),c=n("NJ4a"),h=function(t,e){l(r,t);var n=f(r);function r(t,e,o){var a;switch(y(this,r),(a=n.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=i.a;break;case 1:if(!t){a.destination=i.a;break}if("object"==typeof t){t instanceof r?(a.syncErrorThrowable=t.syncErrorThrowable,a.destination=t,t.add(p(a))):(a.syncErrorThrowable=!0,a.destination=new d(p(a),t));break}default:a.syncErrorThrowable=!0,a.destination=new d(p(a),t,e,o)}return a}return _(r,[{key:e,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,u(m(r.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}],[{key:"create",value:function(t,e,n){var i=new r(t,e,n);return i.syncErrorThrowable=!1,i}}]),r}(o.a,a.a),d=function(t){l(n,t);var e=f(n);function n(t,o,a,s){var u,c;y(this,n),(u=e.call(this))._parentSubscriber=t;var l=p(u);return Object(r.a)(o)?c=o:o&&(c=o.next,a=o.error,s=o.complete,o!==i.a&&(l=Object.create(o),Object(r.a)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(p(u)))),u._context=l,u._next=c,u._error=a,u._complete=s,u}return _(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=s.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(c.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(c.a)(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};s.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.a.useDeprecatedSynchronousErrorHandling)throw n;Object(c.a)(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!s.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return s.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(c.a)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(h)},"8Qeq":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t){for(;t;){var e=t,n=e.closed,i=e.destination,o=e.isStopped;if(n||o)return!1;t=i&&i instanceof r.a?i:null}return!0}},"8R26":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0,e.Point=function(t){l(n,t);var e=f(n);function n(){y(this,n);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.call.apply(e,[this].concat(r))}return _(n,[{key:"lng",get:function(){return this[0]}},{key:"lat",get:function(){return this[1]}},{key:"azimuth",get:function(){return this[2]}},{key:"bearing",get:function(){return this[2]},set:function(t){this[2]=t}},{key:"date",get:function(){return this._date},set:function(t){this._date=new Date(t)}}]),n}(n(Array))},"9e0j":function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Aes=void 0;var i=r(n("cke4"));e.Aes=function(){function t(e){y(this,t),this.key=this.geyGen(e)}return _(t,[{key:"encodeTextToByte",value:function(t){var e=i.default.utils.utf8.toBytes(t);return new i.default.ModeOfOperation.ctr(this.key,new i.default.Counter(5)).encrypt(e)}},{key:"encodeByteToByte",value:function(t){return new i.default.ModeOfOperation.ctr(this.key,new i.default.Counter(5)).encrypt(t)}},{key:"decodeByteToText",value:function(t){var e=new i.default.ModeOfOperation.ctr(this.key,new i.default.Counter(5)).decrypt(t);return i.default.utils.utf8.fromBytes(e)}},{key:"decodeByteToByte",value:function(t){return new i.default.ModeOfOperation.ctr(this.key,new i.default.Counter(5)).decrypt(t)}},{key:"geyGen",value:function(t){for(var e=[],n=0;n<t;n++)e.push(this.getRandom(0,9,!0));return e}},{key:"getRandom",value:function(t,e,n){var r=t+Math.random()*(e-t);return n&&(r=Math.round(r)),r}}]),t}()},"9lQw":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forToastAnimation=e.fadeInAnimation=e.ngIfAnimation=void 0;var r=n("R0Ic");r.trigger("ngIfAnimation",[r.transition("void => *",[r.style({opacity:0}),r.animate(100,r.style({opacity:1}))]),r.transition("* => void",[r.animate(100,r.style({opacity:0}))])]),e.ngIfAnimation=r.trigger("ngIfAnimation",[r.transition("void => *",[r.style({opacity:0,transform:"translateY(-20px)"}),r.animate(100,r.style({opacity:1,transform:"translateY(0)"}))]),r.transition("* => void",[r.animate(100,r.style({opacity:0}))])]),e.fadeInAnimation=r.trigger("fadeInAnimation",[r.transition(":enter",[r.style({opacity:0}),r.animate(100,r.style({opacity:1}))]),r.transition(":leave",[r.style({opacity:100}),r.animate(100,r.style({opacity:0}))])]),e.forToastAnimation=r.trigger("forToastAnimation",[r.transition(":enter",[r.style({opacity:0,height:0,overflow:"hidden",paddingTop:0,paddingBottom:0}),r.animate(100,r.style({opacity:1,height:"38px",paddingTop:"10px",paddingBottom:"10px"}))]),r.transition(":leave",[r.style({opacity:1,height:"38px",paddingTop:"10px",paddingBottom:"10px"}),r.animate(100,r.style({opacity:0,height:0,overflow:"hidden",paddingTop:0,paddingBottom:0}))])])},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},"AQ+O":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xml2string=e.pointsToXmlDoc=void 0,e.pointsToXmlDoc=function(t){return new Promise(function(e,n){new DOMParser;var r=document.createElement("gpx");r.setAttribute("xmlns","http://www.topografix.com/GPX/1/0"),r.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),r.setAttribute("version","1.0"),r.setAttribute("creator","Bike-Atlas");var i=document.createElement("time");i.innerText=(new Date).toISOString(),r.appendChild(i);var o=document.createElement("trk");r.appendChild(o);var a=document.createElement("trkseg");o.appendChild(a),t.forEach(function(t){var e=document.createElement("trkpt");e.setAttribute("lat",t.lat.toString()),e.setAttribute("lon",t.lng.toString());var n=document.createElement("time");n.innerText=new Date(t.date).toISOString(),e.appendChild(n);var r=document.createElement("speed");r.innerText=t.speed.toString(),e.appendChild(r),a.appendChild(e)}),e(r)})},e.xml2string=function(t){return"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(t):t.xml?t.xml:void 0}},AdPF:function(t,e,n){var r=n("yeub"),i=n("2UHX");t.exports=function(t){var e=t.xdomain,n=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(a){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(a){}if(!e)try{return new(i[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(a){}}},Aplp:function(t,e,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},a=0,s=0;function u(t){var e="";do{e=i[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function c(){var t=u(+new Date);return t!==r?(a=0,r=t):t+"."+u(a++)}for(;s<64;s++)o[i[s]]=s;c.encode=u,c.decode=function(t){var e=0;for(s=0;s<t.length;s++)e=64*e+o[t.charAt(s)];return e},t.exports=c},AytR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.environment=void 0,e.environment={production:!0,hostPrefix:"http://178.62.44.54:8080/",hmr:!1}},BD2p:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MenuService=void 0;var a=o(n("fXoL")),s=function(){function t(){y(this,t),this._menuOpen=!1,this.menuOpenLogin=!1,this._menuDevice=!1,this._menuAthlete=!1}return _(t,[{key:"menuAthlete",get:function(){return this._menuAthlete},set:function(t){var e=(function(t){document.body.removeEventListener("click",e),this.menuAthlete=!1}).bind(this);t?setTimeout(function(){document.body.addEventListener("click",e)},100):document.body.removeEventListener("click",e),this._menuAthlete=t}},{key:"menuOpen",get:function(){return this._menuOpen},set:function(t){var e=(function(t){document.body.removeEventListener("click",e),this.menuOpen=!1}).bind(this);t?setTimeout(function(){document.body.addEventListener("click",e)},100):document.body.removeEventListener("click",e),this._menuOpen=t}},{key:"menuOpenLogin",get:function(){return this._menuOpenLogin},set:function(t){var e=(function(t){document.body.removeEventListener("click",e),this.menuOpenLogin=!1}).bind(this);t?setTimeout(function(){document.body.addEventListener("click",e)},100):document.body.removeEventListener("click",e),this._menuOpenLogin=t}}]),t}();e.MenuService=s,s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=a.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac})},BFxc:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function a(t){return function(e){return 0===t?Object(o.b)():e.lift(new s(t))}}var s=function(){function t(e){if(y(this,t),this.total=e,this.total<0)throw new i.a}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.total))}}]),t}(),u=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).total=r,i.ring=new Array,i.count=0,i}return _(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()}}]),n}(r.a)},C2QD:function(t,e){function n(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},C6GA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hashGenerate=void 0;e.hashGenerate=function(){for(var t,e,n,r,i="",o=0;o<32;o++)i+=""+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[(t=0,e=61,n=!0,r=void 0,r=t+Math.random()*(e-t),n&&(r=Math.round(r)),r)];return i}},CIKq:function(t,e,n){var r,i,o=n("Gbct"),a=n("+ntK"),s=n("KT0R"),u=n("Yvos"),c=n("Aplp"),l=n("x7D4")("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{i=n(1)}catch(d){}var h=r||i;function f(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=r&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(h=i),o.call(this,t)}t.exports=f,u(f,o),f.prototype.name="websocket",f.prototype.supportsBinary=!0,f.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new h(t,e):new h(t):new h(t,e,n)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},f.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},f.prototype.write=function(t){var e=this;this.writable=!1;for(var n=t.length,r=0,i=n;r<i;r++)!function(t){a.encodePacket(t,e.supportsBinary,function(r){if(!e.usingBrowserWebSocket){var i={};t.options&&(i.compress=t.options.compress),e.perMessageDeflate&&("string"==typeof r?Buffer.byteLength(r):r.length)<e.perMessageDeflate.threshold&&(i.compress=!1)}try{e.usingBrowserWebSocket?e.ws.send(r):e.ws.send(r,i)}catch(d){l("websocket closed before onclose event")}--n||(e.emit("flush"),setTimeout(function(){e.writable=!0,e.emit("drain")},0))})}(t[r])},f.prototype.onClose=function(){o.prototype.onClose.call(this)},f.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},f.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||(t.b64=1),(t=s.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},f.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===f.prototype.name)}},CUme:function(t,e,n){var r=n("Gbct"),i=n("KT0R"),o=n("+ntK"),a=n("Yvos"),s=n("Aplp"),u=n("x7D4")("engine.io-client:polling");t.exports=l;var c=null!=new(n("AdPF"))({xdomain:!1}).responseType;function l(t){c&&!(t&&t.forceBase64)||(this.supportsBinary=!1),r.call(this,t)}a(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(t){var e=this;function n(){u("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||n()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||n()}))}else n()},l.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(t){var e=this;u("polling got data %s",t),o.decodePayload(t,this.socket.binaryType,function(t,n,r){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var t=this;function e(){u("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},l.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};o.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},l.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=s()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("SeVD"),o=n("7HRe");function a(t,e){return e?Object(o.a)(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},Cl5A:function(t,e,n){var r=n("CUme"),i=n("Yvos"),o=n("2UHX");t.exports=l;var a,s=/\n/g,u=/\\n/g;function c(){}function l(t){r.call(this,t),this.query=this.query||{},a||(a=o.___eio=o.___eio||[]),this.index=a.length;var e=this;a.push(function(t){e.onData(t)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){e.script&&(e.script.onerror=c)},!1)}i(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},l.prototype.doWrite=function(t,e){var n=this;if(!this.form){var r,i=document.createElement("form"),o=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=a,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function c(){l(),e()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{r=document.createElement('<iframe src="javascript:0" name="'+n.iframeId+'">')}catch(t){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),t=t.replace(u,"\\\n"),this.area.value=t.replace(s,"\\n");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a"),i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},Dk7Y:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.SharedModule=void 0;var a=n("ofXK"),s=n("ui/d"),u=n("iBJV"),c=o(n("fXoL")),l=_(function t(){y(this,t)});e.SharedModule=l,l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=c.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=c.\u0275\u0275defineInjector({providers:[],imports:[[a.CommonModule,u.MyTranslateModule],s.ToastModule,u.MyTranslateModule]})},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return h});var r,i=n("XNiG"),o=n("HDdC"),a=(n("7o/Q"),n("quSY")),s=n("x+ZX"),c=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this)).source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return _(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=a.a.EMPTY)),t}},{key:"refCount",value:function(){return Object(s.a)()(this)}}]),n}(o.a),h={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(r=c.prototype)._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}},d=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).connectable=r,i}return _(n,[{key:"_error",value:function(t){this._unsubscribe(),u(m(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),u(m(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(i.b)},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC"),i=new r.a(function(t){return t.complete()});function o(t){return t?function(t){return new r.a(function(e){return t.schedule(function(){return e.complete()})})}(t):i}},"F97/":function(t,e,n){"use strict";function r(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}n.d(e,"a",function(){return r})},FjQK:function(t,e,n){var r,i;!function(o,a,s){var u,c={version:"1.0.3+ed36a04"};"object"==typeof t.exports?t.exports=c:void 0===(i="function"==typeof(r=c)?r.call(e,n,e,t):r)||(t.exports=i),void 0!==o&&(u=o.L,c.noConflict=function(){return o.L=u,this},o.L=c),c.Util={extend:function(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++c.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)}},wrapNum:function(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return c.Util.trim(t).split(/\s+/)},setOptions:function(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?c.Util.create(t.options):{}),e)t.options[n]=e[n];return t.options},getParamString:function(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")},template:function(t,e){return t.replace(c.Util.templateRe,function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(e)),r})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){return o["webkit"+t]||o["moz"+t]||o["ms"+t]}var e=0;function n(t){var n=+new Date,r=Math.max(0,16-(n-e));return e=n+r,o.setTimeout(t,r)}var r=o.requestAnimationFrame||t("RequestAnimationFrame")||n,i=o.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){o.clearTimeout(t)};c.Util.requestAnimFrame=function(t,e,i){if(!i||r!==n)return r.call(o,c.bind(t,e));t.call(e)},c.Util.cancelAnimFrame=function(t){t&&i.call(o,t)}}(),c.extend=c.Util.extend,c.bind=c.Util.bind,c.stamp=c.Util.stamp,c.setOptions=c.Util.setOptions,c.Class=function(){},c.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,r=c.Util.create(n);for(var i in r.constructor=e,e.prototype=r,this)this.hasOwnProperty(i)&&"prototype"!==i&&(e[i]=this[i]);return t.statics&&(c.extend(e,t.statics),delete t.statics),t.includes&&(c.Util.extend.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=c.Util.extend(c.Util.create(r.options),t.options)),c.extend(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},c.Class.include=function(t){return c.extend(this.prototype,t),this},c.Class.mergeOptions=function(t){return c.extend(this.prototype.options,t),this},c.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this},c.Evented=c.Class.extend({on:function(t,e,n){if("object"==typeof t)for(var r in t)this._on(r,t[r],e);else for(var i=0,o=(t=c.Util.splitWords(t)).length;i<o;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var r in t)this._off(r,t[r],e);else for(var i=0,o=(t=c.Util.splitWords(t)).length;i<o;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(this._events[t]=r=[]),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(i)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t]))if(e){if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var a=r[i];if(a.ctx===n&&a.fn===e)return a.fn=c.Util.falseFn,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,o=r.length;i<o;i++)r[i].fn=c.Util.falseFn;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var r=c.Util.extend({},e,{type:t,target:this});if(this._events){var i=this._events[t];if(i){this._firingCount=this._firingCount+1||1;for(var o=0,a=i.length;o<a;o++){var s=i[o];s.fn.call(s.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var i=c.bind(function(){this.off(t,e,n).off(t,i,n)},this);return this.on(t,e,n).on(t,i,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[c.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[c.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,c.extend({layer:t.target},t),!0)}});var l,h,f=c.Evented.prototype;f.addEventListener=f.on,f.removeEventListener=f.clearAllEventListeners=f.off,f.addOneTimeEventListener=f.once,f.fireEvent=f.fire,f.hasEventListeners=f.listens,c.Mixin={Events:f},function(){var t=navigator.userAgent.toLowerCase(),e=a.documentElement,n="ActiveXObject"in o,r=-1!==t.indexOf("webkit"),i=-1!==t.indexOf("phantom"),s=-1!==t.search("android [23]"),u=-1!==t.indexOf("chrome"),l=-1!==t.indexOf("gecko")&&!r&&!o.opera&&!n,h=0===navigator.platform.indexOf("Win"),f="undefined"!=typeof orientation||-1!==t.indexOf("mobile"),d=!o.PointerEvent&&o.MSPointerEvent,p=o.PointerEvent||d,v=n&&"transition"in e.style,m="WebKitCSSMatrix"in o&&"m11"in new o.WebKitCSSMatrix&&!s,y="MozPerspective"in e.style,g="OTransition"in e.style,_=!o.L_NO_TOUCH&&(p||"ontouchstart"in o||o.DocumentTouch&&a instanceof o.DocumentTouch);c.Browser={ie:n,ielt9:n&&!a.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in a),webkit:r,gecko:l,android:-1!==t.indexOf("android"),android23:s,chrome:u,safari:!u&&-1!==t.indexOf("safari"),win:h,ie3d:v,webkit3d:m,gecko3d:y,opera12:g,any3d:!o.L_DISABLE_3D&&(v||m||y)&&!g&&!i,mobile:f,mobileWebkit:f&&r,mobileWebkit3d:f&&m,mobileOpera:f&&o.opera,mobileGecko:f&&l,touch:!!_,msPointer:!!d,pointer:!!p,retina:(o.devicePixelRatio||o.screen.deviceXDPI/o.screen.logicalXDPI)>1}}(),c.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},c.Point.prototype={clone:function(){return new c.Point(this.x,this.y)},add:function(t){return this.clone()._add(c.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(c.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new c.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new c.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){var e=(t=c.point(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=c.point(t)).x===this.x&&t.y===this.y},contains:function(t){return t=c.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c.Util.formatNum(this.x)+", "+c.Util.formatNum(this.y)+")"}},c.point=function(t,e,n){return t instanceof c.Point?t:c.Util.isArray(t)?new c.Point(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new c.Point(t.x,t.y):new c.Point(t,e,n)},c.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])},c.Bounds.prototype={extend:function(t){return t=c.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new c.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new c.Point(this.min.x,this.max.y)},getTopRight:function(){return new c.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof c.Point?c.point(t):c.bounds(t))instanceof c.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=c.bounds(t);var e=this.min,n=this.max,r=t.min,i=t.max;return i.x>=e.x&&r.x<=n.x&&i.y>=e.y&&r.y<=n.y},overlaps:function(t){t=c.bounds(t);var e=this.min,n=this.max,r=t.min,i=t.max;return i.x>e.x&&r.x<n.x&&i.y>e.y&&r.y<n.y},isValid:function(){return!(!this.min||!this.max)}},c.bounds=function(t,e){return!t||t instanceof c.Bounds?t:new c.Bounds(t,e)},c.Transformation=function(t,e,n,r){this._a=t,this._b=e,this._c=n,this._d=r},c.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return t.x=(e=e||1)*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return new c.Point((t.x/(e=e||1)-this._b)/this._a,(t.y/e-this._d)/this._c)}},c.DomUtil={get:function(t){return"string"==typeof t?a.getElementById(t):t},getStyle:function(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&a.defaultView){var r=a.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n},create:function(t,e,n){var r=a.createElement(t);return r.className=e||"",n&&n.appendChild(r),r},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=c.DomUtil.getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(void 0!==t.classList)for(var n=c.Util.splitWords(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!c.DomUtil.hasClass(t,e)){var o=c.DomUtil.getClass(t);c.DomUtil.setClass(t,(o?o+" ":"")+e)}},removeClass:function(t,e){void 0!==t.classList?t.classList.remove(e):c.DomUtil.setClass(t,c.Util.trim((" "+c.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e},getClass:function(t){return void 0===t.className.baseVal?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&c.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(i){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"},testProp:function(t){for(var e=a.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},setTransform:function(t,e,n){var r=e||new c.Point(0,0);t.style[c.DomUtil.TRANSFORM]=(c.Browser.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")},setPosition:function(t,e){t._leaflet_pos=e,c.Browser.any3d?c.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new c.Point(0,0)}},function(){c.DomUtil.TRANSFORM=c.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var t=c.DomUtil.TRANSITION=c.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(c.DomUtil.TRANSITION_END="webkitTransition"===t||"OTransition"===t?t+"End":"transitionend","onselectstart"in a)c.DomUtil.disableTextSelection=function(){c.DomEvent.on(o,"selectstart",c.DomEvent.preventDefault)},c.DomUtil.enableTextSelection=function(){c.DomEvent.off(o,"selectstart",c.DomEvent.preventDefault)};else{var e=c.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);c.DomUtil.disableTextSelection=function(){if(e){var t=a.documentElement.style;this._userSelect=t[e],t[e]="none"}},c.DomUtil.enableTextSelection=function(){e&&(a.documentElement.style[e]=this._userSelect,delete this._userSelect)}}c.DomUtil.disableImageDrag=function(){c.DomEvent.on(o,"dragstart",c.DomEvent.preventDefault)},c.DomUtil.enableImageDrag=function(){c.DomEvent.off(o,"dragstart",c.DomEvent.preventDefault)},c.DomUtil.preventOutline=function(t){for(;-1===t.tabIndex;)t=t.parentNode;t&&t.style&&(c.DomUtil.restoreOutline(),this._outlineElement=t,this._outlineStyle=t.style.outline,t.style.outline="none",c.DomEvent.on(o,"keydown",c.DomUtil.restoreOutline,this))},c.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,c.DomEvent.off(o,"keydown",c.DomUtil.restoreOutline,this))}}(),c.LatLng=function(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)},c.LatLng.prototype={equals:function(t,e){return!!t&&(t=c.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+c.Util.formatNum(this.lat,t)+", "+c.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return c.CRS.Earth.distance(this,c.latLng(t))},wrap:function(){return c.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return c.latLngBounds([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new c.LatLng(this.lat,this.lng,this.alt)}},c.latLng=function(t,e,n){return t instanceof c.LatLng?t:c.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new c.LatLng(t[0],t[1],t[2]):2===t.length?new c.LatLng(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new c.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new c.LatLng(t,e,n)},c.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])},c.LatLngBounds.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof c.LatLng)e=t,n=t;else{if(!(t instanceof c.LatLngBounds))return t?this.extend(c.latLng(t)||c.latLngBounds(t)):this;if(n=t._northEast,!(e=t._southWest)||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new c.LatLng(e.lat,e.lng),this._northEast=new c.LatLng(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new c.LatLngBounds(new c.LatLng(e.lat-r,e.lng-i),new c.LatLng(n.lat+r,n.lng+i))},getCenter:function(){return new c.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new c.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new c.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof c.LatLng||"lat"in t?c.latLng(t):c.latLngBounds(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof c.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=c.latLngBounds(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast();return i.lat>=e.lat&&r.lat<=n.lat&&i.lng>=e.lng&&r.lng<=n.lng},overlaps:function(t){t=c.latLngBounds(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast();return i.lat>e.lat&&r.lat<n.lat&&i.lng>e.lng&&r.lng<n.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=c.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},c.latLngBounds=function(t,e){return t instanceof c.LatLngBounds?t:new c.LatLngBounds(t,e)},c.Projection={},c.Projection.LonLat={project:function(t){return new c.Point(t.lng,t.lat)},unproject:function(t){return new c.LatLng(t.y,t.x)},bounds:c.bounds([-180,-90],[180,90])},c.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new c.Point(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new c.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(l=6378137*Math.PI,c.bounds([-l,-l],[l,l]))},c.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),r=this.transformation.transform(e.min,n),i=this.transformation.transform(e.max,n);return c.bounds(r,i)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?c.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?c.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat;return c.latLng(n,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast(),s=c.latLng({lat:o.lat-r,lng:o.lng-i}),u=c.latLng({lat:a.lat-r,lng:a.lng-i});return new c.LatLngBounds(s,u)}},c.CRS.Simple=c.extend({},c.CRS,{projection:c.Projection.LonLat,transformation:new c.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0}),c.CRS.Earth=c.extend({},c.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((e.lng-t.lng)*n);return this.R*Math.acos(Math.min(o,1))}}),c.CRS.EPSG3857=c.extend({},c.CRS.Earth,{code:"EPSG:3857",projection:c.Projection.SphericalMercator,transformation:(h=.5/(Math.PI*c.Projection.SphericalMercator.R),new c.Transformation(h,.5,-h,.5))}),c.CRS.EPSG900913=c.extend({},c.CRS.EPSG3857,{code:"EPSG:900913"}),c.CRS.EPSG4326=c.extend({},c.CRS.Earth,{code:"EPSG:4326",projection:c.Projection.LonLat,transformation:new c.Transformation(1/180,1,-1/180,.5)}),c.Map=c.Evented.extend({options:{crs:c.CRS.EPSG3857,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=c.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=c.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(c.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=c.DomUtil.TRANSITION&&c.Browser.any3d&&!c.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),c.DomEvent.on(this._proxy,c.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(c.latLng(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=c.extend({animate:n.animate},n.zoom),n.pan=c.extend({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t=t||(c.Browser.any3d?this.options.zoomDelta:1)),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t=t||(c.Browser.any3d?this.options.zoomDelta:1)),e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=(t instanceof c.Point?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/r),a=this.containerPointToLatLng(i.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():c.latLngBounds(t);var n=c.point(e.paddingTopLeft||e.padding||[0,0]),r=c.point(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i;var o=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i);return{center:this.unproject(a.add(s).divideBy(2).add(o),i),zoom:i}},fitBounds:function(t,e){if(!(t=c.latLngBounds(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=c.point(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new c.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){c.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!c.Browser.any3d)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),i=this.project(t),o=this.getSize(),a=this._zoom;t=c.latLng(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),u=s*this.getZoomScale(a,e),l=i.distanceTo(r)||1;function h(t){var e=(u*u-s*s+2.0164*(t?-1:1)*2.0164*l*l)/(2*(t?u:s)*2.0164*l),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function d(t){return(Math.exp(t)+Math.exp(-t))/2}var p=h(0),v=Date.now(),m=(h(1)-p)/1.42,y=n.duration?1e3*n.duration:1e3*m*.8;return this._moveStart(!0),(function n(){var o=(Date.now()-v)/y,u=function(t){return 1-Math.pow(1-t,1.5)}(o)*m;o<=1?(this._flyToFrame=c.Util.requestAnimFrame(n,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(function(t){return s*(d(p)*(f(e=p+1.42*t)/d(e))-f(p))/2.0164;var e}(u)/l)),a),this.getScaleZoom(s/function(t){return s*(d(p)/d(p+1.42*t))}(u),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}).call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=c.latLngBounds(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,c.latLngBounds(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=c.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),r=e.divideBy(2).round(),i=n.divideBy(2).round(),o=r.subtract(i);return o.x||o.y?(t.animate&&t.pan?this.panBy(o):(t.pan&&this._rawPanBy(o),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=c.extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=c.bind(this._handleGeolocationResponse,this),n=c.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new c.LatLng(t.coords.latitude,t.coords.longitude),n=e.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(e,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}for(var t in c.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();return this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),r=c.DomUtil.create("div",n,e||this._mapPane);return t&&(this._panes[t]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new c.LatLngBounds(e,n)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=c.latLngBounds(t),n=c.point(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),l=c.bounds(this.project(s,r),this.project(a,r)).getSize(),h=c.Browser.any3d?this.options.zoomSnap:1,f=Math.min(u.x/l.x,u.y/l.y);return r=this.getScaleZoom(f,r),h&&(r=Math.round(r/(h/100))*(h/100),r=e?Math.ceil(r/h)*h:Math.floor(r/h)*h),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new c.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new c.Bounds(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs,r=n.zoom(t*n.scale(e=void 0===e?this._zoom:e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(c.latLng(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(c.point(t),e)},layerPointToLatLng:function(t){var e=c.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(c.latLng(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(c.latLng(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(c.latLngBounds(t))},distance:function(t,e){return this.options.crs.distance(c.latLng(t),c.latLng(e))},containerPointToLayerPoint:function(t){return c.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return c.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(c.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(c.latLng(t)))},mouseEventToContainerPoint:function(t){return c.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=c.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");c.DomEvent.addListener(e,"scroll",this._onScroll,this),this._containerId=c.Util.stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&c.Browser.any3d,c.DomUtil.addClass(t,"leaflet-container"+(c.Browser.touch?" leaflet-touch":"")+(c.Browser.retina?" leaflet-retina":"")+(c.Browser.ielt9?" leaflet-oldie":"")+(c.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=c.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),c.DomUtil.setPosition(this._mapPane,new c.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(c.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),c.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){c.DomUtil.setPosition(this._mapPane,new c.Point(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return c.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){c.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(c.DomEvent){this._targets={},this._targets[c.stamp(this._container)]=this;var e=t?"off":"on";c.DomEvent[e](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&c.DomEvent[e](o,"resize",this._onResize,this),c.Browser.any3d&&this.options.transform3DLimit&&this[e]("moveend",this._onMoveEnd)}},_onResize:function(){c.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=c.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,a=!1;o;){if((n=this._targets[c.stamp(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(i&&!c.DomEvent._isExternalTarget(o,t))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||a||i||!c.DomEvent._isExternalTarget(o,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!c.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&c.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,n){if("click"===t.type){var r=c.Util.extend({},t);r.type="preclick",this._fireDOMEvent(r,r.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var i=n[0];"contextmenu"===e&&i.listens(e,!0)&&c.DomEvent.preventDefault(t);var o={originalEvent:t};if("keypress"!==t.type){var a=i instanceof c.Marker;o.containerPoint=a?this.latLngToContainerPoint(i.getLatLng()):this.mouseEventToContainerPoint(t),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=a?i.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var s=0;s<n.length;s++)if(n[s].fire(e,o,!0),o.originalEvent._stopped||n[s].options.nonBubblingEvents&&-1!==c.Util.indexOf(n[s].options.nonBubblingEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return c.DomUtil.getPosition(this._mapPane)||new c.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return c.bounds([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new c.Bounds(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new c.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=c.bounds(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max),a=this._rebound(i.x,-o.x),s=this._rebound(i.y,-o.y);return new c.Point(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=c.Browser.any3d?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){c.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=c.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=c.DomUtil.TRANSFORM,r=t.style[n];c.DomUtil.setTransform(t,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),r===t.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),n=this.getZoom();c.DomUtil.setTransform(t,this.project(e,n),this.getZoomScale(n,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i)||(c.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,r){n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,c.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(c.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(c.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),c.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),c.map=function(t,e){return new c.Map(t,e)},c.Layer=c.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[c.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[c.stamp(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),c.Map.include({addLayer:function(t){var e=c.stamp(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=c.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&c.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?c.Util.isArray(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[c.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=c.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var d="_leaflet_events";c.DomEvent={on:function(t,e,n,r){if("object"==typeof e)for(var i in e)this._on(t,i,e[i],n);else for(var o=0,a=(e=c.Util.splitWords(e)).length;o<a;o++)this._on(t,e[o],n,r);return this},off:function(t,e,n,r){if("object"==typeof e)for(var i in e)this._off(t,i,e[i],n);else for(var o=0,a=(e=c.Util.splitWords(e)).length;o<a;o++)this._off(t,e[o],n,r);return this},_on:function(t,e,n,r){var i=e+c.stamp(n)+(r?"_"+c.stamp(r):"");if(t[d]&&t[d][i])return this;var a=function(e){return n.call(r||t,e||o.event)},s=a;return c.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,a,i):!c.Browser.touch||"dblclick"!==e||!this.addDoubleTapListener||c.Browser.pointer&&c.Browser.chrome?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):"mouseenter"===e||"mouseleave"===e?t.addEventListener("mouseenter"===e?"mouseover":"mouseout",a=function(e){c.DomEvent._isExternalTarget(t,e=e||o.event)&&s(e)},!1):("click"===e&&c.Browser.android&&(a=function(t){return c.DomEvent._filterClick(t,s)}),t.addEventListener(e,a,!1)):"attachEvent"in t&&t.attachEvent("on"+e,a):this.addDoubleTapListener(t,a,i),t[d]=t[d]||{},t[d][i]=a,this},_off:function(t,e,n,r){var i=e+c.stamp(n)+(r?"_"+c.stamp(r):""),o=t[d]&&t[d][i];return o?(c.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,i):c.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?t.removeEventListener("mousewheel"===e?"onwheel"in t?"wheel":"mousewheel":"mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o),t[d][i]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,c.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return c.DomEvent.on(t,"mousewheel",c.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=c.DomEvent.stopPropagation;return c.DomEvent.on(t,c.Draggable.START.join(" "),e),c.DomEvent.on(t,{click:c.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return c.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new c.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new c.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},_wheelPxFactor:c.Browser.win&&c.Browser.chrome?2:c.Browser.gecko?o.devicePixelRatio:1,getWheelDelta:function(t){return c.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/c.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){c.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(r){return!1}return n!==t},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,r=c.DomEvent._lastClick&&n-c.DomEvent._lastClick;r&&r>100&&r<500||t.target._simulatedClick&&!t._simulated?c.DomEvent.stop(t):(c.DomEvent._lastClick=n,e(t))}},c.DomEvent.addListener=c.DomEvent.on,c.DomEvent.removeListener=c.DomEvent.off,c.PosAnimation=c.Evented.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=c.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=c.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),c.DomUtil.setPosition(this._el,n),this.fire("step")},_complete:function(){c.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),c.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:c.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new c.Point(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=l=Math.PI/2-2*Math.atan(a*e)-s;return new c.LatLng(s*n,t.x*n/r)}},c.CRS.EPSG3395=c.extend({},c.CRS.Earth,{code:"EPSG:3395",projection:c.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*c.Projection.Mercator.R);return new c.Transformation(t,.5,-t,.5)}()}),c.GridLayer=c.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:c.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){c.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),c.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(c.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(c.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return a.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof c.Point?t:new c.Point(t,t)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!c.Browser.ielt9){c.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);c.DomUtil.setOpacity(i.el,o),o<1?e=!0:(i.active&&(n=!0),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(c.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=c.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=c.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?this._levels[n].el.style.zIndex=e-Math.abs(t-n):(c.DomUtil.remove(this._levels[n].el),this._removeTilesAtZoom(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=c.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),c.Util.falseFn(r.el.offsetWidth)),this._level=r,r}},_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)c.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new c.Point(+i,+o);s.z=+a;var u=this._tileCoordsToKey(s),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),a>r&&this._retainParent(i,o,a,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=new c.Point(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,n,r){var i=Math.round(e);(void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom)&&(i=void 0),r&&!(this.options.updateWhenZooming&&i!==this._tileZoom)||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();c.Browser.any3d?c.DomUtil.setTransform(t.el,i,r):c.DomUtil.setPosition(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new c.Bounds(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=e.getZoom();if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),s=[],u=this.options.keepBuffer,l=new c.Bounds(i.getBottomLeft().subtract([u,-u]),i.getTopRight().add([u,-u]));for(var h in this._tiles){var f=this._tiles[h].coords;f.z===this._tileZoom&&l.contains(c.point(f.x,f.y))||(this._tiles[h].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var d=i.min.y;d<=i.max.y;d++)for(var p=i.min.x;p<=i.max.x;p++){var v=new c.Point(p,d);if(v.z=this._tileZoom,this._isValidTile(v)){var m=this._tiles[this._tileCoordsToKey(v)];m?m.current=!0:s.push(v)}}if(s.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var y=a.createDocumentFragment();for(p=0;p<s.length;p++)this._addTile(s[p],y);this._level.el.appendChild(y)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return c.latLngBounds(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n),o=e.unproject(r,t.z),a=e.unproject(i,t.z),s=new c.LatLngBounds(o,a);return this.options.noWrap||e.wrapLatLngBounds(s),s},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new c.Point(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(c.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){c.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c.Util.falseFn,t.onmousemove=c.Util.falseFn,c.Browser.ielt9&&this.options.opacity<1&&c.DomUtil.setOpacity(t,this.options.opacity),c.Browser.android&&!c.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),i=this.createTile(this._wrapCoords(t),c.bind(this._tileReady,this,t));this._initTile(i),this.createTile.length<2&&c.Util.requestAnimFrame(c.bind(this._tileReady,this,t,null,i)),c.DomUtil.setPosition(i,n),this._tiles[r]={el:i,coords:t,current:!0},e.appendChild(i),this.fire("tileloadstart",{tile:i,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(c.DomUtil.setOpacity(n.el,0),c.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=c.Util.requestAnimFrame(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(c.DomUtil.addClass(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),c.Browser.ielt9||!this._map._fadeAnimated?c.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(c.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new c.Point(this._wrapX?c.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?c.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new c.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),c.gridLayer=function(t){return new c.GridLayer(t)},c.TileLayer=c.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=c.setOptions(this,e)).detectRetina&&c.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),c.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=a.createElement("img");return c.DomEvent.on(n,"load",c.bind(this._tileOnLoad,this,e,n)),c.DomEvent.on(n,"error",c.bind(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:c.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return c.Util.template(this._url,c.extend(e,this.options))},_tileOnLoad:function(t,e){c.Browser.ielt9?setTimeout(c.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.src!==r&&(e.src=r),t(n,e)},getTileSize:function(){var t=this._map,e=c.GridLayer.prototype.getTileSize.call(this),n=this._tileZoom+this.options.zoomOffset,r=this.options.minNativeZoom,i=this.options.maxNativeZoom;return null!==r&&n<r?e.divideBy(t.getZoomScale(r,n)).round():null!==i&&n>i?e.divideBy(t.getZoomScale(i,n)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.minNativeZoom,n=this.options.maxNativeZoom;return this.options.zoomReverse&&(t=this.options.maxZoom-t),t+=this.options.zoomOffset,null!==e&&t<e?e:null!==n&&t>n?n:t},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c.Util.falseFn,e.onerror=c.Util.falseFn,e.complete||(e.src=c.Util.emptyImageUrl,c.DomUtil.remove(e)))}}),c.tileLayer=function(t,e){return new c.TileLayer(t,e)},c.TileLayer.WMS=c.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=c.extend({},this.defaultWmsParams);for(var r in e)r in this.options||(n[r]=e[r]);e=c.setOptions(this,e),n.width=n.height=e.tileSize*(e.detectRetina&&c.Browser.retina?2:1),this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,c.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),r=this._crs.project(e.getSouthEast()),i=(this._wmsVersion>=1.3&&this._crs===c.CRS.EPSG4326?[r.y,n.x,n.y,r.x]:[n.x,r.y,r.x,n.y]).join(","),o=c.TileLayer.prototype.getTileUrl.call(this,t);return o+c.Util.getParamString(this.wmsParams,o,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+i},setParams:function(t,e){return c.extend(this.wmsParams,t),e||this.redraw(),this}}),c.tileLayer.wms=function(t,e){return new c.TileLayer.WMS(t,e)},c.ImageOverlay=c.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(t,e,n){this._url=t,this._bounds=c.latLngBounds(e),c.setOptions(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(c.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){c.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&c.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&c.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=c.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=c.Util.falseFn,t.onmousemove=c.Util.falseFn,t.onload=c.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;c.DomUtil.setTransform(this._image,n,e)},_reset:function(){var t=this._image,e=new c.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();c.DomUtil.setPosition(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){c.DomUtil.setOpacity(this._image,this.options.opacity)}}),c.imageOverlay=function(t,e,n){return new c.ImageOverlay(t,e,n)},c.Icon=c.Class.extend({initialize:function(t){c.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"==typeof r&&(r=[r,r]);var i=c.point(r),o=c.point("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||a.createElement("img")).src=t,e},_getIconUrl:function(t){return c.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),c.icon=function(t){return new c.Icon(t)},c.Icon.Default=c.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return c.Icon.Default.imagePath||(c.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||c.Icon.Default.imagePath)+c.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=c.DomUtil.create("div","leaflet-default-icon-path",a.body),e=c.DomUtil.getStyle(t,"background-image")||c.DomUtil.getStyle(t,"backgroundImage");return a.body.removeChild(t),0===e.indexOf("url")?e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),c.Marker=c.Layer.extend({options:{icon:new c.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){c.setOptions(this,e),this._latlng=c.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=c.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),t.alt&&(n.alt=t.alt)),c.DomUtil.addClass(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(c.DomUtil.addClass(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),c.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&c.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){c.DomUtil.setPosition(this._icon,t),this._shadow&&c.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(c.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),c.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new c.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;c.DomUtil.setOpacity(this._icon,t),this._shadow&&c.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),c.marker=function(t,e){return new c.Marker(t,e)},c.DivIcon=c.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:a.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=c.point(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),c.divIcon=function(t){return new c.DivIcon(t)},c.DivOverlay=c.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){c.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&c.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&c.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(c.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(c.bind(c.DomUtil.remove,c.DomUtil,this._container),200)):c.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=c.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&c.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&c.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=c.point(this.options.offset),n=this._getAnchor();this._zoomAnimated?c.DomUtil.setPosition(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),c.Popup=c.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){c.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof c.Path||this._source.on("preclick",c.DomEvent.stopPropagation))},onRemove:function(t){c.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof c.Path||this._source.off("preclick",c.DomEvent.stopPropagation))},getEvents:function(){var t=c.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=c.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var n=this._closeButton=c.DomUtil.create("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",c.DomEvent.on(n,"click",this._onCloseButtonClick,this)}var r=this._wrapper=c.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=c.DomUtil.create("div",t+"-content",r),c.DomEvent.disableClickPropagation(r).disableScrollPropagation(this._contentNode).on(r,"contextmenu",c.DomEvent.stopPropagation),this._tipContainer=c.DomUtil.create("div",t+"-tip-container",e),this._tip=c.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=this.options.maxHeight;r&&t.offsetHeight>r?(e.height=r+"px",c.DomUtil.addClass(t,"leaflet-popup-scrolled")):c.DomUtil.removeClass(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();c.DomUtil.setPosition(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(c.DomUtil.getStyle(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new c.Point(this._containerLeft,-n-this._containerBottom);i._add(c.DomUtil.getPosition(this._container));var o=t.layerPointToContainerPoint(i),a=c.point(this.options.autoPanPadding),s=c.point(this.options.autoPanPaddingTopLeft||a),u=c.point(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),h=0,f=0;o.x+r+u.x>l.x&&(h=o.x+r-l.x+u.x),o.x-h-s.x<0&&(h=o.x-s.x),o.y+n+u.y>l.y&&(f=o.y+n-l.y+u.y),o.y-f-s.y<0&&(f=o.y-s.y),(h||f)&&t.fire("autopanstart").panBy([h,f])}},_onCloseButtonClick:function(t){this._close(),c.DomEvent.stop(t)},_getAnchor:function(){return c.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),c.popup=function(t,e){return new c.Popup(t,e)},c.Map.mergeOptions({closePopupOnClick:!0}),c.Map.include({openPopup:function(t,e,n){return t instanceof c.Popup||(t=new c.Popup(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),c.Layer.include({bindPopup:function(t,e){return t instanceof c.Popup?(c.setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new c.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof c.Layer||(e=t,t=this),t instanceof c.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(c.DomEvent.stop(t),e instanceof c.Path?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),c.Tooltip=c.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){c.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){c.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=c.DivOverlay.prototype.getEvents.call(this);return c.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){this._contentNode=this._container=c.DomUtil.create("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,r=e.latLngToContainerPoint(e.getCenter()),i=e.layerPointToContainerPoint(t),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,u=c.point(this.options.offset),l=this._getAnchor();"top"===o?t=t.add(c.point(-a/2+u.x,-s+u.y+l.y,!0)):"bottom"===o?t=t.subtract(c.point(a/2-u.x,-u.y,!0)):"center"===o?t=t.subtract(c.point(a/2+u.x,s/2-l.y+u.y,!0)):"right"===o||"auto"===o&&i.x<r.x?(o="right",t=t.add(c.point(u.x+l.x,l.y-s/2+u.y,!0))):(o="left",t=t.subtract(c.point(a+l.x-u.x,s/2-l.y-u.y,!0))),c.DomUtil.removeClass(n,"leaflet-tooltip-right"),c.DomUtil.removeClass(n,"leaflet-tooltip-left"),c.DomUtil.removeClass(n,"leaflet-tooltip-top"),c.DomUtil.removeClass(n,"leaflet-tooltip-bottom"),c.DomUtil.addClass(n,"leaflet-tooltip-"+o),c.DomUtil.setPosition(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&c.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return c.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),c.tooltip=function(t,e){return new c.Tooltip(t,e)},c.Map.include({openTooltip:function(t,e,n){return t instanceof c.Tooltip||(t=new c.Tooltip(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),c.Layer.include({bindTooltip:function(t,e){return t instanceof c.Tooltip?(c.setOptions(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=c.tooltip(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),c.Browser.touch&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof c.Layer||(e=t,t=this),t instanceof c.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(c.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(c.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){this._tooltip&&this._map&&this.openTooltip(t.layer||t.target,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}}),c.LayerGroup=c.Layer.extend({initialize:function(t){var e,n;if(this._layers={},t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return c.stamp(t)}}),c.layerGroup=function(t){return new c.LayerGroup(t)},c.FeatureGroup=c.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),c.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),c.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new c.LatLngBounds;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),c.featureGroup=function(t){return new c.FeatureGroup(t)},c.Renderer=c.Layer.extend({options:{padding:.1},initialize:function(t){c.setOptions(this,t),c.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&c.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){c.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=c.DomUtil.getPosition(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=i.multiplyBy(-n).add(r).add(i).subtract(a);c.Browser.any3d?c.DomUtil.setTransform(this._container,s,n):c.DomUtil.setPosition(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new c.Bounds(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),c.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&c.canvas()||c.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=c.SVG&&c.svg({pane:t})||c.Canvas&&c.canvas({pane:t}),this._paneRenderers[t]=e),e}}),c.Path=c.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return c.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(c.Browser.touch?10:0)}}),c.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,this._simplifyDPStep(t,r,e,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(t[i]);return o},_simplifyDPStep:function(t,e,n,r,i){var o,a,s,u=0;for(a=r+1;a<=i-1;a++)(s=this._sqClosestPointOnSegment(t[a],t[r],t[i],!0))>u&&(o=a,u=s);u>n&&(e[o]=1,this._simplifyDPStep(t,e,n,r,o),this._simplifyDPStep(t,e,n,o,i))},_reducePoints:function(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)this._sqDist(t[r],t[i])>e&&(n.push(t[r]),i=r);return i<o-1&&n.push(t[o-1]),n},clipSegment:function(t,e,n,r,i){var o,a,s,u=r?this._lastCode:this._getBitCode(t,n),c=this._getBitCode(e,n);for(this._lastCode=c;;){if(!(u|c))return[t,e];if(u&c)return!1;a=this._getEdgeIntersection(t,e,o=u||c,n,i),s=this._getBitCode(a,n),o===u?(t=a,u=s):(e=a,c=s)}},_getEdgeIntersection:function(t,e,n,r,i){var o,a,s=e.x-t.x,u=e.y-t.y,l=r.min,h=r.max;return 8&n?(o=t.x+s*(h.y-t.y)/u,a=h.y):4&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):2&n?(o=h.x,a=t.y+u*(h.x-t.x)/s):1&n&&(o=l.x,a=t.y+u*(l.x-t.x)/s),new c.Point(o,a,i)},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},_sqClosestPointOnSegment:function(t,e,n,r){var i,o=e.x,a=e.y,s=n.x-o,u=n.y-a,l=s*s+u*u;return l>0&&((i=((t.x-o)*s+(t.y-a)*u)/l)>1?(o=n.x,a=n.y):i>0&&(o+=s*i,a+=u*i)),s=t.x-o,u=t.y-a,r?s*s+u*u:new c.Point(o,a)}},c.Polyline=c.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){c.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=c.LineUtil._sqClosestPointOnSegment,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],l=1,h=u.length;l<h;l++){var f=o(t,e=u[l-1],n=u[l],!0);f<r&&(r=f,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,r=0;t<u-1;t++)if((r+=n=(i=s[t]).distanceTo(o=s[t+1]))>e)return this._map.layerPointToLatLng([o.x-(a=(r-e)/n)*(o.x-i.x),o.y-a*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=c.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new c.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return c.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=c.Polyline._flat(t),r=0,i=t.length;r<i;r++)n?(e[r]=c.latLng(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new c.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new c.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var r,i,o=t.length;if(t[0]instanceof c.LatLng){for(i=[],r=0;r<o;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<o;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,a,s,u=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=c.LineUtil.clipSegment(s[n],s[n+1],t,n,!0))&&(u[r]=u[r]||[],u[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=c.LineUtil.simplify(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),c.polyline=function(t,e){return new c.Polyline(t,e)},c.Polyline._flat=function(t){return!c.Util.isArray(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]},c.PolyUtil={},c.PolyUtil.clipPolygon=function(t,e,n){var r,i,o,a,s,u,l,h,f,d=[1,4,2,8],p=c.LineUtil;for(i=0,l=t.length;i<l;i++)t[i]._code=p._getBitCode(t[i],e);for(a=0;a<4;a++){for(h=d[a],r=[],i=0,o=(l=t.length)-1;i<l;o=i++)u=t[o],(s=t[i])._code&h?u._code&h||((f=p._getEdgeIntersection(u,s,h,e,n))._code=p._getBitCode(f,e),r.push(f)):(u._code&h&&((f=p._getEdgeIntersection(u,s,h,e,n))._code=p._getBitCode(f,e),r.push(f)),r.push(s));t=r}return t},c.Polygon=c.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s,u=this._rings[0],c=u.length;if(!c)return null;for(o=a=s=0,t=0,e=c-1;t<c;e=t++)a+=((n=u[t]).x+(r=u[e]).x)*(i=n.y*r.x-r.y*n.x),s+=(n.y+r.y)*i,o+=3*i;return this._map.layerPointToLatLng(0===o?u[0]:[a/o,s/o])},_convertLatLngs:function(t){var e=c.Polyline.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof c.LatLng&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){c.Polyline.prototype._setLatLngs.call(this,t),c.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return c.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new c.Point(e,e);if(t=new c.Bounds(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=c.PolyUtil.clipPolygon(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),c.polygon=function(t,e){return new c.Polygon(t,e)},c.Rectangle=c.Polygon.extend({initialize:function(t,e){c.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=c.latLngBounds(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),c.rectangle=function(t,e){return new c.Rectangle(t,e)},c.CircleMarker=c.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){c.setOptions(this,e),this._latlng=c.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=c.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return c.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new c.Bounds(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),c.circleMarker=function(t,e){return new c.CircleMarker(t,e)},c.Circle=c.CircleMarker.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=c.extend({},n,{radius:e})),c.setOptions(this,e),this._latlng=c.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new c.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:c.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===c.CRS.Earth.distance){var i=Math.PI/180,o=this._mRadius/c.CRS.Earth.R/i,a=n.project([e+o,t]),s=n.project([e-o,t]),u=a.add(s).divideBy(2),l=n.unproject(u).lat,h=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(l*i))/(Math.cos(e*i)*Math.cos(l*i)))/i;(isNaN(h)||0===h)&&(h=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(h)?0:Math.max(Math.round(u.x-n.project([l,t-h]).x),1),this._radiusY=Math.max(Math.round(u.y-a.y),1)}else{var f=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(f).x}this._updateBounds()}}),c.circle=function(t,e,n){return new c.Circle(t,e,n)},c.SVG=c.Renderer.extend({getEvents:function(){var t=c.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=c.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=c.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){c.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),c.DomUtil.setPosition(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=c.SVG.create("path");t.options.className&&c.DomUtil.addClass(e,t.options.className),t.options.interactive&&c.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[c.stamp(t)]=t},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){c.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path),delete this._layers[c.stamp(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,c.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,n=t._radius,r="a"+n+","+(t._radiusY||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){c.DomUtil.toFront(t._path)},_bringToBack:function(t){c.DomUtil.toBack(t._path)}}),c.extend(c.SVG,{create:function(t){return a.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var n,r,i,o,a,s,u="";for(n=0,i=t.length;n<i;n++){for(r=0,o=(a=t[n]).length;r<o;r++)u+=(r?"L":"M")+(s=a[r]).x+" "+s.y;u+=e?c.Browser.svg?"z":"x":""}return u||"M0 0"}}),c.Browser.svg=!(!a.createElementNS||!c.SVG.create("svg").createSVGRect),c.svg=function(t){return c.Browser.svg||c.Browser.vml?new c.SVG(t):null},c.Browser.vml=!c.Browser.svg&&function(){try{var t=a.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(n){return!1}}(),c.SVG.include(c.Browser.vml?{_initContainer:function(){this._container=c.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(c.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=c.SVG.create("shape");c.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=c.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[c.stamp(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;c.DomUtil.remove(e),t.removeInteractiveTarget(e),delete this._layers[c.stamp(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=c.SVG.create("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,e.dashStyle=r.dashArray?c.Util.isArray(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):"",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=c.SVG.create("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){c.DomUtil.toFront(t._container)},_bringToBack:function(t){c.DomUtil.toBack(t._container)}}:{}),c.Browser.vml&&(c.SVG.create=function(){try{return a.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return a.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return a.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),c.Canvas=c.Renderer.extend({getEvents:function(){var t=c.Renderer.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){c.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=a.createElement("canvas");c.DomEvent.on(t,"mousemove",c.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},c.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=c.Browser.retina?2:1;c.DomUtil.setPosition(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",c.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){c.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[c.stamp(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[c.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),r=[];for(e=0;e<n.length;e++)r.push(Number(n[e]));t.options._dashArray=r}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||c.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new c.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,u.beginPath(),u.setLineDash&&u.setLineDash(t.options&&t.options._dashArray||[]),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)u[r?"lineTo":"moveTo"]((o=a[n][r]).x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=t._radius,i=(t._radiusY||r)/r;this._drawnLayers[t._leaflet_id]=t,1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&!this._map._draggableMoved(e)&&(n=e);n&&(c.DomEvent._fakeStop(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(c.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,r,i=this._drawFirst;i;i=i.next)(n=i.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(c.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),c.Browser.canvas=!!a.createElement("canvas").getContext,c.canvas=function(t){return c.Browser.canvas?new c.Canvas(t):null},c.Polyline.prototype._containsPoint=function(t,e){var n,r,i,o,a,s,u=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(a=(s=this._parts[n]).length)-1;r<a;i=r++)if((e||0!==r)&&c.LineUtil.pointToSegmentDistance(t,s[i],s[r])<=u)return!0;return!1},c.Polygon.prototype._containsPoint=function(t){var e,n,r,i,o,a,s,u,l=!1;if(!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,a=(u=(e=this._parts[i]).length)-1;o<u;a=o++)(n=e[o]).y>t.y!=(r=e[a]).y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(l=!l);return l||c.Polyline.prototype._containsPoint.call(this,t,!0)},c.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},c.GeoJSON=c.FeatureGroup.extend({initialize:function(t,e){c.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=c.Util.isArray(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=c.GeoJSON.geometryToLayer(t,o);return a?(a.feature=c.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=c.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),c.extend(c.GeoJSON,{geometryToLayer:function(t,e){var n,r,i,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],l=e&&e.pointToLayer,h=e&&e.coordsToLatLng||this.coordsToLatLng;if(!s&&!a)return null;switch(a.type){case"Point":return n=h(s),l?l(t,n):new c.Marker(n);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=h(s[i]),u.push(l?l(t,n):new c.Marker(n));return new c.FeatureGroup(u);case"LineString":case"MultiLineString":return r=this.coordsToLatLngs(s,"LineString"===a.type?0:1,h),new c.Polyline(r,e);case"Polygon":case"MultiPolygon":return r=this.coordsToLatLngs(s,"Polygon"===a.type?1:2,h),new c.Polygon(r,e);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var f=this.geometryToLayer({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);f&&u.push(f)}return new c.FeatureGroup(u);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new c.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){for(var r,i=[],o=0,a=t.length;o<a;o++)r=e?this.coordsToLatLngs(t[o],e-1,n):(n||this.coordsToLatLng)(t[o]),i.push(r);return i},latLngToCoords:function(t){return void 0!==t.alt?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,n){for(var r=[],i=0,o=t.length;i<o;i++)r.push(e?c.GeoJSON.latLngsToCoords(t[i],e-1,n):c.GeoJSON.latLngToCoords(t[i]));return!e&&n&&r.push(r[0]),r},getFeature:function(t,e){return t.feature?c.extend({},t.feature,{geometry:e}):c.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var p={toGeoJSON:function(){return c.GeoJSON.getFeature(this,{type:"Point",coordinates:c.GeoJSON.latLngToCoords(this.getLatLng())})}};c.Marker.include(p),c.Circle.include(p),c.CircleMarker.include(p),c.Polyline.prototype.toGeoJSON=function(){var t=!c.Polyline._flat(this._latlngs),e=c.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return c.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},c.Polygon.prototype.toGeoJSON=function(){var t=!c.Polyline._flat(this._latlngs),e=t&&!c.Polyline._flat(this._latlngs[0]),n=c.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(n=[n]),c.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:n})},c.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),c.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var e="GeometryCollection"===t,n=[];return this.eachLayer(function(t){if(t.toGeoJSON){var r=t.toGeoJSON();n.push(e?r.geometry:c.GeoJSON.asFeature(r))}}),e?c.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}}),c.geoJSON=function(t,e){return new c.GeoJSON(t,e)},c.geoJson=c.geoJSON,c.Draggable=c.Evented.extend({options:{clickTolerance:3},statics:{START:c.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,n){this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(c.DomEvent.on(this._dragStartTarget,c.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(c.Draggable._dragging===this&&this.finishDrag(),c.DomEvent.off(this._dragStartTarget,c.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!c.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(c.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(c.Draggable._dragging=this,this._preventOutline&&c.DomUtil.preventOutline(this._element),c.DomUtil.disableImageDrag(),c.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new c.Point(e.clientX,e.clientY),c.DomEvent.on(a,c.Draggable.MOVE[t.type],this._onMove,this).on(a,c.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new c.Point(e.clientX,e.clientY).subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(c.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=c.DomUtil.getPosition(this._element).subtract(n),c.DomUtil.addClass(a.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,o.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),c.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,c.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=c.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),c.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in c.DomUtil.removeClass(a.body,"leaflet-dragging"),this._lastTarget&&(c.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),c.Draggable.MOVE)c.DomEvent.off(a,c.Draggable.MOVE[t],this._onMove,this).off(a,c.Draggable.END[t],this._onUp,this);c.DomUtil.enableImageDrag(),c.DomUtil.enableTextSelection(),this._moved&&this._moving&&(c.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,c.Draggable._dragging=!1}}),c.Handler=c.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),c.Map.mergeOptions({dragging:!0,inertia:!c.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),c.Map.Drag=c.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new c.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}c.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){c.DomUtil.removeClass(this._map._container,"leaflet-grab"),c.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=c.latLngBounds(this._map.options.maxBounds);this._offsetLimit=c.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{var i=this._lastPos.subtract(this._positions[0]),o=n.easeLinearity,a=i.multiplyBy(o/((this._lastTime-this._times[0])/1e3)),s=a.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,s),l=a.multiplyBy(u/s),h=u/(n.inertiaDeceleration*o),f=l.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),c.Util.requestAnimFrame(function(){e.panBy(f,{duration:h,easeLinearity:o,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),c.Map.addInitHook("addHandler","dragging",c.Map.Drag),c.Map.mergeOptions({doubleClickZoom:!0}),c.Map.DoubleClickZoom=c.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}}),c.Map.addInitHook("addHandler","doubleClickZoom",c.Map.DoubleClickZoom),c.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),c.Map.ScrollWheelZoom=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){c.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=c.DomEvent.getWheelDelta(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c.bind(this._performZoom,this),r),c.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,i=n?Math.ceil(r/n)*n:r,o=t._limitZoom(e+(this._delta>0?i:-i))-e;this._delta=0,this._startTime=null,o&&("center"===t.options.scrollWheelZoom?t.setZoom(e+o):t.setZoomAround(this._lastMousePos,e+o))}}),c.Map.addInitHook("addHandler","scrollWheelZoom",c.Map.ScrollWheelZoom),c.extend(c.DomEvent,{_touchstart:c.Browser.msPointer?"MSPointerDown":c.Browser.pointer?"pointerdown":"touchstart",_touchend:c.Browser.msPointer?"MSPointerUp":c.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,n){var r,i,o=!1;function a(t){var e;if(c.Browser.pointer){if(!c.Browser.edge||"mouse"===t.pointerType)return;e=c.DomEvent._pointersCount}else e=t.touches.length;if(!(e>1)){var n=Date.now(),a=n-(r||n);i=t.touches?t.touches[0]:t,o=a>0&&a<=250,r=n}}function s(t){if(o&&!i.cancelBubble){if(c.Browser.pointer){if(!c.Browser.edge||"mouse"===t.pointerType)return;var n,a,s={};for(a in i)s[a]=(n=i[a])&&n.bind?n.bind(i):n;i=s}i.type="dblclick",e(i),r=null}}var u="_leaflet_",l=this._touchstart,h=this._touchend;return t[u+l+n]=a,t[u+h+n]=s,t[u+"dblclick"+n]=e,t.addEventListener(l,a,!1),t.addEventListener(h,s,!1),t.addEventListener("dblclick",e,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_",r=t[n+this._touchend+e],i=t[n+"dblclick"+e];return t.removeEventListener(this._touchstart,t[n+this._touchstart+e],!1),t.removeEventListener(this._touchend,r,!1),c.Browser.edge||t.removeEventListener("dblclick",i,!1),this}}),c.extend(c.DomEvent,{POINTER_DOWN:c.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:c.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:c.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:c.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,n,r){return"touchstart"===e?this._addPointerStart(t,n,r):"touchmove"===e?this._addPointerMove(t,n,r):"touchend"===e&&this._addPointerEnd(t,n,r),this},removePointerListener:function(t,e,n){var r=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,r,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,r,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,r,!1),t.removeEventListener(this.POINTER_CANCEL,r,!1)),this},_addPointerStart:function(t,e,n){var r=c.bind(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;c.DomEvent.preventDefault(t)}this._handlePointer(t,e)},this);if(t["_leaflet_touchstart"+n]=r,t.addEventListener(this.POINTER_DOWN,r,!1),!this._pointerDocListener){var i=c.bind(this._globalPointerUp,this);a.documentElement.addEventListener(this.POINTER_DOWN,c.bind(this._globalPointerDown,this),!0),a.documentElement.addEventListener(this.POINTER_MOVE,c.bind(this._globalPointerMove,this),!0),a.documentElement.addEventListener(this.POINTER_UP,i,!0),a.documentElement.addEventListener(this.POINTER_CANCEL,i,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){for(var n in t.touches=[],this._pointers)t.touches.push(this._pointers[n]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,n){var r=c.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+n]=r,t.addEventListener(this.POINTER_MOVE,r,!1)},_addPointerEnd:function(t,e,n){var r=c.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+n]=r,t.addEventListener(this.POINTER_UP,r,!1),t.addEventListener(this.POINTER_CANCEL,r,!1)}}),c.Map.mergeOptions({touchZoom:c.Browser.touch&&!c.Browser.android23,bounceAtZoomLimits:!0}),c.Map.TouchZoom=c.Handler.extend({addHooks:function(){c.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),c.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){c.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),c.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),c.DomEvent.on(a,"touchmove",this._onTouchMove,this).on(a,"touchend",this._onTouchEnd,this),c.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),i=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(i,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&i<1||this._zoom>e.getMaxZoom()&&i>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===i)return}else{var o=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===i&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),c.Util.cancelAnimFrame(this._animRequest);var a=c.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=c.Util.requestAnimFrame(a,this,!0),c.DomEvent.preventDefault(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,c.Util.cancelAnimFrame(this._animRequest),c.DomEvent.off(a,"touchmove",this._onTouchMove).off(a,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}}),c.Map.addInitHook("addHandler","touchZoom",c.Map.TouchZoom),c.Map.mergeOptions({tap:!0,tapTolerance:15}),c.Map.Tap=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){c.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(c.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new c.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&c.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(c.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),c.DomEvent.on(a,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),c.DomEvent.off(a,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&c.DomUtil.removeClass(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new c.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=a.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,o,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}),c.Browser.touch&&!c.Browser.pointer&&c.Map.addInitHook("addHandler","tap",c.Map.Tap),c.Map.mergeOptions({boxZoom:!0}),c.Map.BoxZoom=c.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){c.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){c.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._resetState(),c.DomUtil.disableTextSelection(),c.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),c.DomEvent.on(a,{contextmenu:c.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=c.DomUtil.create("div","leaflet-zoom-box",this._container),c.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new c.Bounds(this._point,this._startPoint),n=e.getSize();c.DomUtil.setPosition(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(c.DomUtil.remove(this._box),c.DomUtil.removeClass(this._container,"leaflet-crosshair")),c.DomUtil.enableTextSelection(),c.DomUtil.enableImageDrag(),c.DomEvent.off(a,{contextmenu:c.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(c.bind(this._resetState,this),0);var e=new c.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),c.Map.addInitHook("addHandler","boxZoom",c.Map.BoxZoom),c.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),c.Map.Keyboard=c.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),c.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),c.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=a.body,e=a.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),o.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){c.DomEvent.on(a,"keydown",this._onKeyDown,this)},_removeHooks:function(){c.DomEvent.off(a,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys){if(r._panAnim&&r._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=c.point(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n)return;r.closePopup()}c.DomEvent.stop(t)}}}),c.Map.addInitHook("addHandler","keyboard",c.Map.Keyboard),c.Handler.MarkerDrag=c.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new c.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),c.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&c.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,r=c.DomUtil.getPosition(e._icon),i=e._map.layerPointToLatLng(r);n&&c.DomUtil.setPosition(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),c.Control=c.Class.extend({options:{position:"topright"},initialize:function(t){c.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return c.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this},remove:function(){return this._map?(c.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),c.control=function(t){return new c.Control(t)},c.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=c.DomUtil.create("div",e+"control-container",this._container);function r(r,i){t[r+i]=c.DomUtil.create("div",e+r+" "+e+i,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){c.DomUtil.remove(this._controlContainer)}}),c.Control.Zoom=c.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=c.DomUtil.create("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=c.DomUtil.create("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),c.DomEvent.on(o,"mousedown dblclick",c.DomEvent.stopPropagation).on(o,"click",c.DomEvent.stop).on(o,"click",i,this).on(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";c.DomUtil.removeClass(this._zoomInButton,e),c.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&c.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&c.DomUtil.addClass(this._zoomInButton,e)}}),c.Map.mergeOptions({zoomControl:!0}),c.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new c.Control.Zoom,this.addControl(this.zoomControl))}),c.control.zoom=function(t){return new c.Control.Zoom(t)},c.Control.Attribution=c.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){c.setOptions(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=c.DomUtil.create("div","leaflet-control-attribution"),c.DomEvent&&c.DomEvent.disableClickPropagation(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}}),c.Map.mergeOptions({attributionControl:!0}),c.Map.addInitHook(function(){this.options.attributionControl&&(new c.Control.Attribution).addTo(this)}),c.control.attribution=function(t){return new c.Control.Attribution(t)},c.Control.Scale=c.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=c.DomUtil.create("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=c.DomUtil.create("div",e,n)),t.imperial&&(this._iScale=c.DomUtil.create("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t);this._updateScale(this._mScale,e<1e3?e+" m":e/1e3+" km",e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(n=this._getRoundNum(e=i/5280),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),c.control.scale=function(t){return new c.Control.Scale(t)},c.Control.Layers=c.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in c.setOptions(this,n),this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(c.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){c.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(c.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):c.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return c.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=c.DomUtil.create("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),c.DomEvent.disableClickPropagation(e),c.Browser.touch||c.DomEvent.disableScrollPropagation(e);var r=this._form=c.DomUtil.create("form",t+"-list");n&&(this._map.on("click",this.collapse,this),c.Browser.android||c.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=c.DomUtil.create("a",t+"-toggle",e);i.href="#",i.title="Layers",c.Browser.touch?c.DomEvent.on(i,"click",c.DomEvent.stop).on(i,"click",this.expand,this):c.DomEvent.on(i,"focus",this.expand,this),c.DomEvent.on(r,"click",function(){setTimeout(c.bind(this._onInputClick,this),0)},this),n||this.expand(),this._baseLayersList=c.DomUtil.create("div",t+"-base",r),this._separator=c.DomUtil.create("div",t+"-separator",r),this._overlaysList=c.DomUtil.create("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&c.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(c.bind(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;c.DomUtil.empty(this._baseLayersList),c.DomUtil.empty(this._overlaysList);var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)this._addItem(r=this._layers[n]),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(t=t&&i>1)?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(c.stamp(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=a.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=a.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=a.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers",r),e.layerId=c.stamp(t.layer),c.DomEvent.on(e,"click",this._onInputClick,this);var i=a.createElement("span");i.innerHTML=" "+t.name;var o=a.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n,r=this._form.getElementsByTagName("input"),i=[],o=[];this._handlingClick=!0;for(var a=r.length-1;a>=0;a--)e=this._getLayer((t=r[a]).layerId).layer,n=this._map.hasLayer(e),t.checked&&!n?i.push(e):!t.checked&&n&&o.push(e);for(a=0;a<o.length;a++)this._map.removeLayer(o[a]);for(a=0;a<i.length;a++)this._map.addLayer(i[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._form.getElementsByTagName("input"),r=this._map.getZoom(),i=n.length-1;i>=0;i--)e=this._getLayer((t=n[i]).layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),c.control.layers=function(t,e,n){return new c.Control.Layers(t,e,n)}}(window,document)},GW7a:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.InfoPositionComponent=void 0,n("mr0/"),n("RMdn");var a=o(n("fXoL")),s=o(n("RMdn")),u=o(n("mr0/")),c=_(function t(e,n){var r=this;y(this,t),this.changes=function(t,e,n){r.mapService.latMap=String(t),r.mapService.lngMap=String(e)},this.mercator=e,this.mapService=n,n.registerChanges(this.changes)});e.InfoPositionComponent=c,c.\u0275fac=function(t){return new(t||c)(a.\u0275\u0275directiveInject(s.Mercator),a.\u0275\u0275directiveInject(u.MapService))},c.\u0275cmp=a.\u0275\u0275defineComponent({type:c,selectors:[["info-position"]],decls:26,vars:7,template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"table"),a.\u0275\u0275elementStart(1,"tr"),a.\u0275\u0275elementStart(2,"td"),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"td"),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"td"),a.\u0275\u0275text(7),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"tr"),a.\u0275\u0275elementStart(9,"td"),a.\u0275\u0275text(10,"Mouse"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"td"),a.\u0275\u0275elementStart(12,"div"),a.\u0275\u0275text(13),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"td"),a.\u0275\u0275elementStart(15,"div"),a.\u0275\u0275text(16),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"tr"),a.\u0275\u0275elementStart(18,"td"),a.\u0275\u0275text(19,"Map"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(20,"td"),a.\u0275\u0275elementStart(21,"div"),a.\u0275\u0275text(22),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(23,"td"),a.\u0275\u0275elementStart(24,"div"),a.\u0275\u0275text(25),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&t&&(a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1("zoom: ",e.mapService.zoom,""),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1("bearing: ",e.mapService.bearing,""),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1("pitch: ",e.mapService.pitch,""),a.\u0275\u0275advance(6),a.\u0275\u0275textInterpolate1("lng: ",e.mapService.lng,""),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1("lat: ",e.mapService.lat,""),a.\u0275\u0275advance(6),a.\u0275\u0275textInterpolate1("lng: ",e.mapService.lngMap,""),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1("lat: ",e.mapService.latMap,""))},styles:["[_nghost-%COMP%]{min-width:300px;position:absolute;z-index:2;bottom:0;left:0;display:block;background:#fff;background:linear-gradient(90deg,hsla(0,0%,100%,.8) 0,hsla(0,0%,100%,.7) 70%,hsla(0,0%,100%,0))}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px;font-size:14px}"]})},Gbct:function(t,e,n){var r=n("+ntK"),i=n("2xqC");function o(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=o,i(o.prototype),o.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(t){var e=r.decodePacket(t,this.socket.binaryType);this.onPacket(e)},o.prototype.onPacket=function(t){this.emit("packet",t)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},GdlM:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.SelfUnsubscribable=void 0;var a=n("qCKp"),s=o(n("fXoL")),u=function(){function t(){y(this,t),this.onDestroy$=new a.Subject}return _(t,[{key:"ngOnDestroy",value:function(){this.onDestroy$.next(),this.onDestroy$.complete()}}]),t}();e.SelfUnsubscribable=u,u.\u0275fac=function(t){return new(t||u)},u.\u0275prov=s.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac})},GyhO:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("LRne"),i=n("0EUg");function o(){return Object(i.a)()(Object(r.a).apply(void 0,arguments))}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,i=n("8Qeq"),o=n("7o/Q"),a=n("2QA8"),s=n("gRHU"),u=n("kJWO"),c=n("mCNh"),l=n("2fFW"),h=((r=function(t){function e(t){y(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof o.a)return t;if(t[a.a])return t[a.a]()}return t||e||n?new o.a(t,e,n):new o.a(s.a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||l.a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),l.a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){l.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Object(i.a)(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=f(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:t,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:Object(c.b)(e)(this)}},{key:"toPromise",value:function(t){var e=this;return new(t=f(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})}}]),e}(u.a)).create=function(t){return new r(t)},r);function f(t){if(t||(t=l.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},HkUL:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.TrackList=void 0,n("+ZYu");var a=o(n("fXoL")),s=o(n("+ZYu")),u=o(n("ofXK")),c=o(n("p23U"));function l(t,e){if(1&t&&(a.\u0275\u0275elementStart(0,"li"),a.\u0275\u0275element(1,"one-item-track-component",1),a.\u0275\u0275elementEnd()),2&t){var n=e.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("track",n)}}var h=_(function t(e){y(this,t),this.trackService=e,this.list=e.trackList});e.TrackList=h,h.\u0275fac=function(t){return new(t||h)(a.\u0275\u0275directiveInject(s.TrackService))},h.\u0275cmp=a.\u0275\u0275defineComponent({type:h,selectors:[["track-list"]],decls:5,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"track"]],template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275text(1,"Track list"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(2,"div"),a.\u0275\u0275elementStart(3,"ul"),a.\u0275\u0275template(4,l,2,1,"li",0),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&t&&(a.\u0275\u0275advance(4),a.\u0275\u0275property("ngForOf",e.list))},directives:[u.NgForOf,c.OneItemTrackComponent],styles:["[_nghost-%COMP%]{position:absolute;bottom:0;background:hsla(0,0%,100%,.8);z-index:2;padding:15px;min-width:200px}@media screen and (max-width:650px){[_nghost-%COMP%]{min-width:100%}}"]})},I2Mf:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.PrivateArea=void 0,n("tyNb"),n("Sy1n"),n("ofXK"),n("yvHX"),n("mu9K");var a=n("JLh1"),s=o(n("fXoL")),u=o(n("Sy1n")),c=o(n("ofXK")),l=o(n("tyNb")),h=o(n("mu9K")),f=o(n("yvHX")),d=o(n("dWTu")),p=o(n("3Pt+"));function v(t,e){1&t&&(s.\u0275\u0275elementStart(0,"div",11),s.\u0275\u0275text(1,"\u0441\u043d\u044f\u0442\u044c \u0433\u0430\u043b\u043e\u0447\u043a\u0443 \u0447\u0442\u043e\u0431\u044b \u0432\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0432\u0430\u0441 \u0432\u0438\u0434\u0435\u043b\u0438 \u043e\u043d\u043b\u0430\u0439\u043d, \u0435\u0441\u043b\u0438 \u0432\u044b \u043d\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0432 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0439 \u0437\u043e\u043d\u0435"),s.\u0275\u0275elementEnd())}function m(t,e){1&t&&(s.\u0275\u0275elementStart(0,"div",11),s.\u0275\u0275text(1,"\u043f\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0433\u0430\u043b\u043e\u0447\u043a\u0443 \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u043f\u043e\u043a\u0430\u0437 \u043c\u043e\u0435\u0433\u043e \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432\u0441\u0435\u043c \u043a\u0440\u043e\u043c\u0435 \u0434\u0440\u0443\u0437\u0435\u0439"),s.\u0275\u0275elementEnd())}function g(t,e){if(1&t){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",12),s.\u0275\u0275listener("mouseover",function(){s.\u0275\u0275restoreView(n);var t=e.$implicit;return s.\u0275\u0275nextContext().onOver(t)}),s.\u0275\u0275elementStart(1,"div",8),s.\u0275\u0275text(2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"div",8),s.\u0275\u0275text(4),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(5,"div",8),s.\u0275\u0275text(6),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"div",13),s.\u0275\u0275elementStart(8,"div",14),s.\u0275\u0275listener("click",function(){s.\u0275\u0275restoreView(n);var t=e.$implicit;return s.\u0275\u0275nextContext().onDel(t)}),s.\u0275\u0275text(9,"\xd7"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit;s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(r.lng),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(r.lat),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(r.radius)}}function b(t,e){if(1&t){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div"),s.\u0275\u0275elementStart(1,"div",15),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().onDrawArea()}),s.\u0275\u0275text(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}}function w(t,e){if(1&t){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div"),s.\u0275\u0275elementStart(1,"div",15),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().onFinish()}),s.\u0275\u0275text(2,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}}var x=function(){function t(e,n,r,i,o){var a=this;y(this,t),this.lh=e,this.location=n,this.router=r,this.userService=i,this.areaService=o,this.clickCount=0,this.myArea={layerId:null,lng:null,lat:null,radius:null,update:null,remove:null},this.areas=o.areas,this.setting=i.getSetting(),this.areaService.onLoadMap.then(function(t){a.map=t,a.areaService.showArea()})}return _(t,[{key:"saveLock",value:function(t){this.areaService.saveLock(t)}},{key:"lng",get:function(){return this.myArea.lng?parseFloat(this.myArea.lng.toFixed(5)):null}},{key:"lat",get:function(){return this.myArea.lat?parseFloat(this.myArea.lat.toFixed(5)):null}},{key:"rad",get:function(){return this.myArea.radius?parseFloat(this.myArea.radius.toFixed(5)):null}},{key:"onDrawArea",value:function(){var t=this;this.clickCount++;var e=function(e){var n=a.distance([t.myArea.lng,t.myArea.lat],[e.lngLat.lng,e.lngLat.lat]);t.myArea.update([t.myArea.lng,t.myArea.lat],t.myArea.radius=n)},n=function n(r){1==t.clickCount?(t.myArea.layerId&&t.myArea.remove(),t.myArea.lng=r.lngLat.lng,t.myArea.lat=r.lngLat.lat,t.myArea=t.areaService.createArea(t.myArea),t.map.on("mousemove",e),t.clickCount++):(t.map.off("mousemove",e),t.clickCount=1,t.onFinish=function(){t.map.off("click",n),t.clickCount=0,t.onSave()})};1==this.clickCount&&this.areaService.onLoadMap.then(function(t){t.on("click",n)})}},{key:"onFinish",value:function(){}},{key:"onDel",value:function(t){console.log(t),this.areaService.removeArea(t.id)}},{key:"onOver",value:function(t){this.map.panTo([t.lng,t.lat])}},{key:"onSave",value:function(){var t=this;this.myArea.layerId&&this.areaService.onSave(this.myArea).then(function(e){e&&(t.myArea.remove(),t.myArea={layerId:null,lng:null,lat:null,radius:null,update:null,remove:null})})}},{key:"onClose",value:function(){this.lh.is?this.location.back():this.router.navigate(["/auth/map"])}},{key:"ngOnDestroy",value:function(){this.myArea.layerId&&this.myArea.remove(),this.areaService.hideArea()}}]),t}();e.PrivateArea=x,x.\u0275fac=function(t){return new(t||x)(s.\u0275\u0275directiveInject(u.NavigationHistory),s.\u0275\u0275directiveInject(c.Location),s.\u0275\u0275directiveInject(l.Router),s.\u0275\u0275directiveInject(h.UserService),s.\u0275\u0275directiveInject(f.PrivateAreaService))},x.\u0275cmp=s.\u0275\u0275defineComponent({type:x,selectors:[["ng-component"]],decls:27,vars:9,consts:[[1,"content"],[1,"close",3,"click"],[1,"row"],["type","checkbox","id","test1",3,"ngModel","ngModelChange"],["for","test1"],["class","help",4,"ngIf"],["class","table saves-area",3,"mouseover",4,"ngFor","ngForOf"],[1,"table"],[1,"cell"],[4,"ngIf"],[1,"border-hidden"],[1,"help"],[1,"table","saves-area",3,"mouseover"],[1,"cell","del"],[3,"click"],[1,"button","add",3,"click"]],template:function(t,e){1&t&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275elementStart(1,"div"),s.\u0275\u0275elementStart(2,"div",1),s.\u0275\u0275listener("click",function(){return e.onClose()}),s.\u0275\u0275text(3,"\xd7"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"users-container"),s.\u0275\u0275elementStart(5,"div",2),s.\u0275\u0275elementStart(6,"p"),s.\u0275\u0275text(7,"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0435 \u0437\u043e\u043d\u044b (\u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435..)"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"div",2),s.\u0275\u0275elementStart(9,"p"),s.\u0275\u0275elementStart(10,"input",3),s.\u0275\u0275listener("ngModelChange",function(t){return e.setting.lock=t})("ngModelChange",function(){return e.saveLock(e.setting.lock)}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"label",4),s.\u0275\u0275text(12,"\u041c\u043e\u0439 \u043b\u043e\u0433 \u0437\u0430\u043a\u0440\u044b\u0442\u044b\u0439"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(13,v,2,0,"div",5),s.\u0275\u0275template(14,m,2,0,"div",5),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(15,g,10,3,"div",6),s.\u0275\u0275elementStart(16,"div",7),s.\u0275\u0275elementStart(17,"div",8),s.\u0275\u0275text(18),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(19,"div",8),s.\u0275\u0275text(20),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(21,"div",8),s.\u0275\u0275text(22),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(23,"div",8),s.\u0275\u0275template(24,b,3,0,"div",9),s.\u0275\u0275template(25,w,3,0,"div",9),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(26,"div",10),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&t&&(s.\u0275\u0275advance(10),s.\u0275\u0275property("ngModel",e.setting.lock),s.\u0275\u0275advance(3),s.\u0275\u0275property("ngIf",e.setting.lock),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",!e.setting.lock),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngForOf",e.areas),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(e.lng),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(e.lat),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(e.rad),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",0==e.clickCount),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",0!=e.clickCount))},directives:[d.UsersContainer,p.CheckboxControlValueAccessor,p.NgControlStatus,p.NgModel,c.NgIf,c.NgForOf],styles:["[_nghost-%COMP%]{position:absolute;left:0;top:0;z-index:5;width:100%}.content[_ngcontent-%COMP%]{position:absolute;background:hsla(0,0%,100%,.9);min-width:600px;margin-left:-300px;padding:0;left:50%;top:calc(100% + 20px);box-shadow:1px 1px 3px rgba(0,0,0,.4)}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:30px}.button.add[_ngcontent-%COMP%]{float:right;cursor:pointer;text-decoration:underline}.help[_ngcontent-%COMP%]{font-size:12px;color:gray}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;cursor:pointer;padding:15px;font-size:20px;font:30px/15px bold}.table[_ngcontent-%COMP%]{width:100%}.table[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{width:25%;padding:8px 0;vertical-align:middle}.table[_ngcontent-%COMP%]   .del[_ngcontent-%COMP%]{padding:0}.table[_ngcontent-%COMP%]   .del[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:right;cursor:pointer;padding:8px}.saves-area[_ngcontent-%COMP%]:hover{background-color:rgba(255,0,0,.2)}@media screen and (max-width:600px){.content[_ngcontent-%COMP%]{position:relative;width:100%;min-width:inherit;left:0;margin-left:0}}"]})},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},IfXh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deepCopy=void 0,e.deepCopy=function(t){var n=t;if(t&&"object"==typeof t)for(var r in n="[object Array]"===Object.prototype.toString.call(t)?[]:{},t)n[r]=e.deepCopy(t[r]);return n}},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("Y/cZ"),i=function(t){l(n,t);var e=f(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a.now;return y(this,n),(i=e.call(this,t,function(){return n.delegate&&n.delegate!==p(i)?n.delegate.now():o()})).actions=[],i.active=!1,i.scheduled=void 0,i}return _(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,r):u(m(n.prototype),"schedule",this).call(this,t,e,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(r.a)},IzEk:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("4I5i"),o=n("EY2u");function a(t){return function(e){return 0===t?Object(o.b)():e.lift(new s(t))}}var s=function(){function t(e){if(y(this,t),this.total=e,this.total<0)throw new i.a}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.total))}}]),t}(),u=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return _(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(r.a)},JHfl:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MenuAthleteItemComponent=void 0;var a=n("qCKp"),s=(n("0RL5"),n("RVpw"),n("AytR")),u=n("kU1M"),c=(n("wlYr"),o(n("fXoL"))),l=o(n("RVpw")),h=o(n("0RL5")),f=o(n("wlYr")),d=o(n("ofXK")),p=o(n("jfAM"));function v(t,e){if(1&t){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",9),c.\u0275\u0275listener("mouseover",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().onMouseOver()})("click",function(t){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().onRequestLocation(t)})("mouseleave",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().onMouseLeave()}),c.\u0275\u0275text(1," Location Update "),c.\u0275\u0275elementEnd()}}function m(t,e){if(1&t&&(c.\u0275\u0275elementStart(0,"div",10),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&t){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",n.elapsed,"")}}function g(t,e){if(1&t&&(c.\u0275\u0275elementStart(0,"div",11),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&t){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",n.speed," km/h")}}var b=function(t){return{background:t}},w=function(){function t(e,n,r){y(this,t),this.timerService=e,this.deviceService=n,this.toast=r,this.mouseEnterLive$=new a.ReplaySubject(1),this.onDestroy$=new a.Subject,this.isVisible=!1}return _(t,[{key:"outsideClick",value:function(){this.isVisible=!1}},{key:"ngOnInit",value:function(){var t=this;this.mouseEnterLive$.pipe(u.takeUntil(this.onDestroy$),u.tap(function(e){e&&(t.isVisible=!0)}),u.debounceTime(5e3),u.filter(function(t){return!t})).subscribe(function(){t.isVisible=!1})}},{key:"showButton",value:function(t){t.stopPropagation(),this.mouseEnterLive$.next(!0),this.mouseEnterLive$.next(!1)}},{key:"onRequestLocation",value:function(t){var e=this;t.stopPropagation(),this.isVisible=!1,this.deviceService.onLocationUpdate(this.device).then(function(t){var n,r;t.success?e.toast.show({type:"success",text:"Location request has been sent"}):(null===(n=t.error)||void 0===n?void 0:n.message)&&e.toast.show({type:"warning",text:null===(r=t.error)||void 0===r?void 0:r.message}),console.log(t)})}},{key:"onMouseOver",value:function(){this.mouseEnterLive$.next(!0)}},{key:"onMouseLeave",value:function(){this.mouseEnterLive$.next(!1)}},{key:"batt",get:function(){var t;return null===(t=this.device.marker)||void 0===t?void 0:t.batt}},{key:"speed",get:function(){return this.device.speed.toFixed(1)}},{key:"elapsed",get:function(){return this.timerService.elapse(this.device.date.toISOString())}},{key:"image",get:function(){return this.device.image||"".concat(s.environment.hostPrefix,"img/speedway_4_logo.jpg")}},{key:"ngOnDestroy",value:function(){this.onDestroy$.next(void 0),this.onDestroy$.complete()}}]),t}();e.MenuAthleteItemComponent=w,w.\u0275fac=function(t){return new(t||w)(c.\u0275\u0275directiveInject(l.TimerService),c.\u0275\u0275directiveInject(h.DeviceService),c.\u0275\u0275directiveInject(f.ToastService))},w.\u0275cmp=c.\u0275\u0275defineComponent({type:w,selectors:[["menu-athlete-item"]],hostBindings:function(t,e){1&t&&c.\u0275\u0275listener("click",function(){return e.outsideClick()},!1,c.\u0275\u0275resolveDocument)},inputs:{device:"device"},decls:12,vars:9,consts:[[1,"inner-row"],[1,"inner-cell"],[1,"status",3,"ngStyle"],["alt","",3,"src"],[1,"name",3,"click"],["class","location-update",3,"mouseover","click","mouseleave",4,"ngIf"],["class","passed",4,"ngIf"],["class","speed",4,"ngIf"],[3,"level"],[1,"location-update",3,"mouseover","click","mouseleave"],[1,"passed"],[1,"speed"]],template:function(t,e){1&t&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275elementStart(1,"div",1),c.\u0275\u0275elementStart(2,"div",2),c.\u0275\u0275element(3,"img",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"div",1),c.\u0275\u0275elementStart(5,"div",4),c.\u0275\u0275listener("click",function(t){return e.showButton(t)}),c.\u0275\u0275elementStart(6,"span"),c.\u0275\u0275text(7),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(8,v,2,0,"div",5),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(9,m,2,1,"div",6),c.\u0275\u0275template(10,g,2,1,"div",7),c.\u0275\u0275element(11,"ats-batt-level",8),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&t&&(c.\u0275\u0275advance(2),c.\u0275\u0275property("ngStyle",c.\u0275\u0275pureFunction1(7,b,e.device.background)),c.\u0275\u0275advance(1),c.\u0275\u0275property("src",e.image,c.\u0275\u0275sanitizeUrl),c.\u0275\u0275advance(4),c.\u0275\u0275textInterpolate1(" ",e.device.name," "),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",e.isVisible),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",e.device.marker),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",e.device.marker),c.\u0275\u0275advance(1),c.\u0275\u0275property("level",e.batt))},directives:[d.NgStyle,d.NgIf,p.BattLevelComponent],styles:[".passed[_ngcontent-%COMP%]{font-size:10px;text-align:right}.batt[_ngcontent-%COMP%], .speed[_ngcontent-%COMP%]{font-size:12px;text-align:right}.inner-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:10px 0;min-width:240px}.inner-row[_ngcontent-%COMP%]   .inner-cell[_ngcontent-%COMP%]{padding:0 10px}.inner-row[_ngcontent-%COMP%]   .inner-cell[_ngcontent-%COMP%]:nth-child(2){width:100%}.status[_ngcontent-%COMP%]{width:60px;height:60px;margin-top:-2px;border-radius:50%;box-shadow:1px 1px 3px rgba(0,0,0,.5);transition:background-color 2s ease-in;padding:5px}.status.yellow[_ngcontent-%COMP%]{background:#ff0}.status.green[_ngcontent-%COMP%]{background:#2ff63a}.status.arrow[_ngcontent-%COMP%]{background:#3690f6}img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;border-radius:50%}.name[_ngcontent-%COMP%]{text-align:right;margin-bottom:8px;position:relative;color:#1e90ff;padding:4px}.name[_ngcontent-%COMP%]:hover{background-color:#e6f4fd}.name[_ngcontent-%COMP%]   .location-update[_ngcontent-%COMP%]{box-shadow:1px 1px 3px rgba(0,0,0,.5);position:absolute;left:100%;top:0;margin-left:20px;padding:5px;background-color:hsla(89,92%,90%,.8);white-space:nowrap;font-size:12px;font-weight:700;color:#444a56}"]})},JIr8:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("zx2A");function i(t){return function(e){var n=new o(t),r=e.lift(n);return n.caught=r}}var o=function(){function t(e){y(this,t),this.selector=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.selector,this.caught))}}]),t}(),a=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).selector=r,o.caught=i,o}return _(n,[{key:"error",value:function(t){if(!this.isStopped){var e;try{e=this.selector(t,this.caught)}catch(a){return void u(m(n.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var i=new r.a(this);this.add(i);var o=Object(r.c)(e,i);o!==i&&this.add(o)}}}]),n}(r.b)},JLh1:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.distance=void 0,n.distance=function(t,n){for(var r,i,o,a,s=e(t,2),u=s[0],c=s[1],l=e(n,2),h=[{lng:u,lat:c},{lng:l[0],lat:l[1]}],f=0,d=0;d<h.length-1;d++){r=h[d].lat,o=h[d].lng,i=h[d+1].lat,a=h[d+1].lng,r*=Math.PI/180,i*=Math.PI/180,o*=Math.PI/180,a*=Math.PI/180;var p=Math.cos(r),v=Math.cos(i),m=Math.sin(r),y=Math.sin(i),g=a-o,_=Math.cos(g),b=Math.sin(g),w=Math.sqrt(Math.pow(v*b,2)+Math.pow(p*y-m*v*_,2));f+=6372795*Math.atan2(w,m*y+p*v*_)}return f/=1e3,f=parseFloat(f.toFixed(3))}},JX91:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("GyhO"),i=n("z+Ro");function o(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=e[e.length-1];return Object(i.a)(o)?(e.pop(),function(t){return Object(r.a)(e,t,o)}):function(t){return Object(r.a)(e,t)}}},JttP:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceComponent=e.IsOwner=e.HelpContainer=void 0,n("fXoL"),n("tyNb"),n("0RL5"),n("Sy1n"),n("mu9K");var u=n("AytR"),c=(n("hVDi"),n("gZ7C")),l=n("y2tO"),h=(n("5FMk"),n("wlYr"),n("C6GA")),f=a(n("fXoL")),d=a(n("mu9K")),p=a(n("tyNb")),v=a(n("0RL5")),m=a(n("wlYr")),g=a(n("Sy1n")),b=a(n("hVDi")),w=a(n("5FMk")),x=a(n("3Pt+")),k=a(n("ofXK"));function C(t,e){if(1&t){var n=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"div",28),f.\u0275\u0275listener("click",function(t){f.\u0275\u0275restoreView(n);var e=f.\u0275\u0275nextContext().$implicit;return f.\u0275\u0275nextContext().createSharedLink(t,e)}),f.\u0275\u0275text(1," create "),f.\u0275\u0275elementEnd()}}function S(t,e){if(1&t&&(f.\u0275\u0275elementStart(0,"div"),f.\u0275\u0275text(1),f.\u0275\u0275elementEnd()),2&t){var n=f.\u0275\u0275nextContext().$implicit;f.\u0275\u0275advance(1),f.\u0275\u0275textInterpolate1(" ",n.sharedLink," ")}}function E(t,e){if(1&t){var n=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"div",29),f.\u0275\u0275listener("click",function(t){f.\u0275\u0275restoreView(n);var e=f.\u0275\u0275nextContext().$implicit;return f.\u0275\u0275nextContext().preDel2(t,e)}),f.\u0275\u0275text(1,"\xd7"),f.\u0275\u0275elementEnd()}}var P=function(t){return{selected:t}},O=function(t){return{background:t}};function T(t,e){if(1&t){var n=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"tr",21),f.\u0275\u0275listener("click",function(t){f.\u0275\u0275restoreView(n);var r=e.index;return f.\u0275\u0275nextContext().preDel(t,r)}),f.\u0275\u0275elementStart(1,"td"),f.\u0275\u0275elementStart(2,"img",22),f.\u0275\u0275listener("click",function(){f.\u0275\u0275restoreView(n);var t=e.$implicit,r=e.index;return f.\u0275\u0275nextContext().onLoadImage(t,r)}),f.\u0275\u0275elementEnd(),f.\u0275\u0275element(3,"input",23),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(4,"td"),f.\u0275\u0275text(5),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(6,"td"),f.\u0275\u0275text(7),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(8,"td"),f.\u0275\u0275text(9),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(10,"td"),f.\u0275\u0275template(11,C,2,0,"div",24),f.\u0275\u0275template(12,S,2,1,"ng-template",null,25,f.\u0275\u0275templateRefExtractor),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(14,"td",26),f.\u0275\u0275template(15,E,2,0,"div",27),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit,i=e.index,o=f.\u0275\u0275reference(13),a=f.\u0275\u0275nextContext();f.\u0275\u0275property("ngClass",f.\u0275\u0275pureFunction1(10,P,a.btnPreDel.index==i)),f.\u0275\u0275advance(2),f.\u0275\u0275property("src",r.image||a.hostPrefix+"img/speedway_4_logo.jpg",f.\u0275\u0275sanitizeUrl)("ngStyle",f.\u0275\u0275pureFunction1(12,O,r.background)),f.\u0275\u0275advance(1),f.\u0275\u0275attribute("id","input-img-"+i),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate(r.name),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate(r.device_key),f.\u0275\u0275advance(2),f.\u0275\u0275textInterpolate(r.phone),f.\u0275\u0275advance(2),f.\u0275\u0275property("ngIf",!r.sharedLink)("ngIfElse",o),f.\u0275\u0275advance(4),f.\u0275\u0275property("ngIf",a.btnPreDel.index==i)}}function A(t,e){1&t&&(f.\u0275\u0275elementStart(0,"div"),f.\u0275\u0275text(1,"must be at least 12 characters long."),f.\u0275\u0275elementEnd())}function I(t,e){if(1&t&&(f.\u0275\u0275elementStart(0,"div",30),f.\u0275\u0275template(1,A,2,0,"div",31),f.\u0275\u0275elementEnd()),2&t){f.\u0275\u0275nextContext();var n=f.\u0275\u0275reference(31);f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",n.errors.minlength)}}var D=function(t){return{disabled:t}},M=function(t){return{selected:t}},L=function(){function t(e){y(this,t),this.el=e,this.top=0;var n=window,r=document,i=r.documentElement,o=r.getElementsByTagName("body")[0];this.y=n.innerHeight||i.clientHeight||o.clientHeight}return _(t,[{key:"ngAfterViewInit",value:function(){this.top=function(t){for(var e=0,n=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e+=t.offsetLeft-t.scrollLeft,n+=t.offsetTop-t.scrollTop,t=t.offsetParent;return{top:n,left:e}}(this.el.nativeElement).top+180,this.el.nativeElement.style.height=this.y-this.top+"px"}}]),t}();e.HelpContainer=L,L.\u0275fac=function(t){return new(t||L)(f.\u0275\u0275directiveInject(f.ElementRef))},L.\u0275dir=f.\u0275\u0275defineDirective({type:L,selectors:[["help-container"]]});var j,R=function(){function t(e){y(this,t),this.userService=e}return _(t,[{key:"transform",value:function(t,e){var n=this;return t.filter(function(t){return t.ownerId==n.userService.id})}}]),t}();e.IsOwner=R,R.\u0275fac=function(t){return new(t||R)(f.\u0275\u0275directiveInject(d.UserService))},R.\u0275pipe=f.\u0275\u0275definePipe({name:"isOwner",type:R,pure:!1}),e.DeviceComponent=((j=function(){function t(e,n,r,i,o,a,s,c,l){y(this,t),this.router=e,this.activatedRoute=n,this.userService=r,this.deviceService=i,this.toast=o,this.lh=a,this.el=s,this.popupService=c,this.logService=l,this.showHelp=!1,this.hostPrefix=u.environment.hostPrefix,this.inputList=new Set,this.user=r.getUser(),this.device=i.createDevice(),this.btnPreDel={index:-1},this.devices=i.getDeviceList()}return _(t,[{key:"deviceNameSelected",get:function(){return this.deviceService.currentChildName}},{key:"onShowHelp",value:function(){this.showHelp=!this.showHelp}},{key:"onAdd",value:function(t){var e=this;t.preventDefault(),this.device.name=this.device.name.replace(/^\s+/,""),this.device.device_key=this.device.device_key.replace(/^\s+/,""),console.log(this.device),this.device.name&&this.device.device_key?this.deviceService.onAddDevice(this.device).then(function(t){t&&t.error&&(console.warn(t.error),e.toast.show({type:"warning",text:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e \u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})),t&&"ok"==t.result&&e.reset()}):this.toast.show({type:"warning",text:"\u0418\u043c\u044f \u0438\u043b\u0438 \u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e"})}},{key:"preDel2",value:function(t,e){var n=this;this.popupService.show({body:c.DeviceDelPopupComponent,title:"Confirm",windowClass:"popup-del-device",initialParams:{name:e.name},buttons:[{label:"Cancel",windowClass:"reject",click:function(){return!0}},{label:"Delete",windowClass:"resolve",click:function(t){return n.deviceService.onDelDevice(e).then(function(e){t.close()}),!1}}]})}},{key:"onDelete",value:function(){}},{key:"preDel",value:function(t,e){t.stopPropagation(),this.btnPreDel.index=e}},{key:"clearPredel",value:function(){this.btnPreDel.index=-1}},{key:"createSharedLink",value:function(t,e){t.stopPropagation(),e.sharedLink=h.hashGenerate()}},{key:"reset",value:function(){var t=this;this.device=this.deviceService.createDevice(),this.deviceService.updateDevices().then(function(){t.logService.emitLastPosition()})}},{key:"onLoadImage",value:function(t,e){var n=Array.from(this.el.nativeElement.getElementsByTagName("input")).find(function(t){return t.id==="input-img-"+e});this.initEl(n,t)}},{key:"navigateToHelp",value:function(t){this.router.navigate([t],{relativeTo:this.activatedRoute})}},{key:"initEl",value:function(t,e){var n=this;this.inputList.has(t)||(this.inputList.add(t),t.addEventListener("change",function(){var r=t.files[0],i=new FileReader;i.onload=function(t){e.image=n.crop(t.target.result),n.onAddDeviceImage(e)},i.readAsDataURL(r)})),t.click()}},{key:"onAddDeviceImage",value:function(t){var e=this;this.deviceService.onAddDeviceImage(t).then(function(t){t&&t.error&&e.toast.show({type:"error",text:t.error})})}},{key:"crop",value:function(t){var e=new Image;e.style.display="none";var n=document.createElement("canvas");n.width=100,n.height=100;var r=n.getContext("2d");return e.onload=function(){!function(t,e){t.save(),t.beginPath(),t.arc(50,50,50,0,2*Math.PI,!0),t.closePath(),t.clip(),t.drawImage(e,0,0,100,100),t.restore()}(r,e)},e.src=t,t}},{key:"ngDoCheck",value:function(){}},{key:"getF",value:function(t){console.log(t)}},{key:"onClose",value:function(){this.router.navigate(["/auth/map"])}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||j)(f.\u0275\u0275directiveInject(p.Router),f.\u0275\u0275directiveInject(p.ActivatedRoute),f.\u0275\u0275directiveInject(d.UserService),f.\u0275\u0275directiveInject(v.DeviceService),f.\u0275\u0275directiveInject(m.ToastService),f.\u0275\u0275directiveInject(g.NavigationHistory),f.\u0275\u0275directiveInject(f.ElementRef),f.\u0275\u0275directiveInject(b.PopupService),f.\u0275\u0275directiveInject(w.LogService))},j.\u0275cmp=f.\u0275\u0275defineComponent({type:j,selectors:[["ng-component"]],decls:58,vars:18,consts:[[1,"content"],[3,"click"],[1,"close",3,"click"],["id","oloe"],["f","ngForm"],[1,"row"],[1,"required"],[3,"ngClass","click",4,"ngFor","ngForOf"],["type","text","name","deviceName","required","required","minlength","3",3,"ngModel","placeholder","ngModelChange"],[1,"relative"],["type","text","id","deviceId","name","deviceId","placeholder","88888888888","required","required","minlength","12",3,"ngModel","ngModelChange"],["deviceId","ngModel"],["class","absolute helper",4,"ngIf"],["type","text","name","devicePhone",3,"ngModel","ngModelChange"],[3,"disabled","ngClass","click"],[1,"border-hidden"],[1,"row","flex","vertical-center",3,"ngClass","click"],[1,"cell"],[1,"ico",3,"src"],["ololo",""],[1,"bnt-help",3,"click"],[3,"ngClass","click"],[1,"logo",3,"src","ngStyle","click"],["type","file","name","files[]","multiple","",2,"display","none"],["class","pointer",3,"click",4,"ngIf","ngIfElse"],["sharedRef",""],[1,"predelCell"],["class","predel",3,"click",4,"ngIf"],[1,"pointer",3,"click"],[1,"predel",3,"click"],[1,"absolute","helper"],[4,"ngIf"]],template:function(t,e){if(1&t&&(f.\u0275\u0275elementStart(0,"div",0),f.\u0275\u0275elementStart(1,"div",1),f.\u0275\u0275listener("click",function(){return e.clearPredel()}),f.\u0275\u0275elementStart(2,"div",2),f.\u0275\u0275listener("click",function(){return e.onClose()}),f.\u0275\u0275text(3,"\xd7"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(4,"div",3),f.\u0275\u0275text(5,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(6,"form",null,4),f.\u0275\u0275elementStart(8,"div",5),f.\u0275\u0275elementStart(9,"table"),f.\u0275\u0275elementStart(10,"thead"),f.\u0275\u0275elementStart(11,"tr"),f.\u0275\u0275elementStart(12,"th"),f.\u0275\u0275text(13,"image"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(14,"th",6),f.\u0275\u0275text(15,"\u0418\u043c\u044f"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(16,"th",6),f.\u0275\u0275text(17,"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(18,"th"),f.\u0275\u0275text(19,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(20,"th"),f.\u0275\u0275text(21,"Share link"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(22,"tbody"),f.\u0275\u0275template(23,T,16,14,"tr",7),f.\u0275\u0275elementStart(24,"tr"),f.\u0275\u0275element(25,"td"),f.\u0275\u0275elementStart(26,"td"),f.\u0275\u0275elementStart(27,"input",8),f.\u0275\u0275listener("ngModelChange",function(t){return e.device.name=t}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(28,"td"),f.\u0275\u0275elementStart(29,"div",9),f.\u0275\u0275elementStart(30,"input",10,11),f.\u0275\u0275listener("ngModelChange",function(t){return e.device.device_key=t}),f.\u0275\u0275elementEnd(),f.\u0275\u0275template(32,I,2,1,"div",12),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(33,"td"),f.\u0275\u0275elementStart(34,"input",13),f.\u0275\u0275listener("ngModelChange",function(t){return e.device.phone=t}),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(35,"td"),f.\u0275\u0275elementStart(36,"button",14),f.\u0275\u0275listener("click",function(t){return e.onAdd(t)}),f.\u0275\u0275text(37," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(38,"div",1),f.\u0275\u0275listener("click",function(){return e.reset()}),f.\u0275\u0275text(39," reset "),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275element(40,"div",15),f.\u0275\u0275elementStart(41,"div",16),f.\u0275\u0275listener("click",function(){return e.navigateToHelp("gps-logger")}),f.\u0275\u0275elementStart(42,"div",17),f.\u0275\u0275element(43,"img",18),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(44,"div",17),f.\u0275\u0275text(45," GPS-\u043b\u043e\u0433\u0433\u0435\u0440 (GPS Logger) ? "),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(46,"div",16),f.\u0275\u0275listener("click",function(){return e.navigateToHelp("gl-520")}),f.\u0275\u0275elementStart(47,"div",17),f.\u0275\u0275element(48,"img",18),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(49,"div",17),f.\u0275\u0275text(50," GL-520, Gl-530 ? "),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(51,"div",5),f.\u0275\u0275element(52,"router-outlet",null,19),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(54,"div",5),f.\u0275\u0275elementStart(55,"div"),f.\u0275\u0275elementStart(56,"div",20),f.\u0275\u0275listener("click",function(){return e.onShowHelp()}),f.\u0275\u0275text(57,"\u25bc ?"),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementEnd()),2&t){var n=f.\u0275\u0275reference(7),r=f.\u0275\u0275reference(31);f.\u0275\u0275advance(23),f.\u0275\u0275property("ngForOf",e.devices),f.\u0275\u0275advance(4),f.\u0275\u0275propertyInterpolate("placeholder",e.user.name),f.\u0275\u0275property("ngModel",e.device.name),f.\u0275\u0275advance(3),f.\u0275\u0275property("ngModel",e.device.device_key),f.\u0275\u0275advance(2),f.\u0275\u0275property("ngIf",r.invalid&&(r.dirty||r.touched)),f.\u0275\u0275advance(2),f.\u0275\u0275property("ngModel",e.device.phone),f.\u0275\u0275advance(2),f.\u0275\u0275property("disabled",n.invalid)("ngClass",f.\u0275\u0275pureFunction1(12,D,n.invalid)),f.\u0275\u0275advance(5),f.\u0275\u0275property("ngClass",f.\u0275\u0275pureFunction1(14,M,"gps-logger"===e.deviceNameSelected)),f.\u0275\u0275advance(2),f.\u0275\u0275property("src",e.hostPrefix+"img/help/ico.webp",f.\u0275\u0275sanitizeUrl),f.\u0275\u0275advance(3),f.\u0275\u0275property("ngClass",f.\u0275\u0275pureFunction1(16,M,"gl-520"===e.deviceNameSelected)),f.\u0275\u0275advance(2),f.\u0275\u0275property("src",e.hostPrefix+"img/GL520_.png",f.\u0275\u0275sanitizeUrl)}},directives:[x.\u0275angular_packages_forms_forms_ba,x.NgControlStatusGroup,x.NgForm,k.NgForOf,x.DefaultValueAccessor,x.RequiredValidator,x.MinLengthValidator,x.NgControlStatus,x.NgModel,k.NgIf,k.NgClass,p.RouterOutlet,k.NgStyle],styles:['[_nghost-%COMP%]{position:absolute;left:0;top:0;z-index:5;width:100%}.content[_ngcontent-%COMP%]{position:absolute;background:hsla(0,0%,100%,.9);min-width:800px;max-width:800px;margin-left:-400px;padding:0;left:50%;top:calc(100% + 20px);box-shadow:1px 1px 3px rgba(0,0,0,.4)}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:30px}.logo[_ngcontent-%COMP%]{border-radius:50%;padding:3px}.ico[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%]{width:40px;height:40px}.ico[_ngcontent-%COMP%], .logo[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]{box-shadow:1px 1px 5px rgba(0,0,0,.2)}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;cursor:pointer;padding:15px;font-size:20px;font:30px/15px bold}.disabled[_ngcontent-%COMP%]{color:gray}.relative[_ngcontent-%COMP%]{position:relative}.absolute[_ngcontent-%COMP%]{position:absolute;top:100%}.absolute.helper[_ngcontent-%COMP%]{font-size:10px;color:#c80e00}@media screen and (max-width:600px){.content[_ngcontent-%COMP%]{position:relative;width:100%;min-width:inherit;left:0;margin-left:0}}input[_ngcontent-%COMP%]{display:block;width:100%;box-sizing:border-box;padding:8px 0;font-size:14px;outline:none;border-radius:2px;background:none;border:none;border-bottom:2px solid #a9a9a9;margin:-2px}table[_ngcontent-%COMP%]{margin-top:15px;width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:40px}.row[_ngcontent-%COMP%]{margin:10px -5px}.row[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{margin:5px}thead[_ngcontent-%COMP%]{font-size:10px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:5px;text-align:left}td[_ngcontent-%COMP%]:last-child, th[_ngcontent-%COMP%]:last-child{width:40px}td.required[_ngcontent-%COMP%], th.required[_ngcontent-%COMP%]{position:relative}td.required[_ngcontent-%COMP%]:after, th.required[_ngcontent-%COMP%]:after{position:absolute;left:-5px;top:0;padding:0 5px;content:"*";display:block;color:red}td.predelCell[_ngcontent-%COMP%], th.predelCell[_ngcontent-%COMP%]{padding:0}.predel[_ngcontent-%COMP%]{display:inline-block;color:darkred;font-size:20px;font:30px/15px bold}.bnt-help[_ngcontent-%COMP%], .predel[_ngcontent-%COMP%]{float:right;cursor:pointer;padding:5px}']}),o([l.autobind(),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],j.prototype,"onDelete",null),j)},KFGy:function(t,e,n){var r=n("Uwu7"),i=n("2xqC"),o=n("kSER"),a=n("2Dig"),s=n("QN7Q"),u=n("x7D4")("socket.io-client:socket"),c=n("KT0R"),l=n("WLGk");t.exports=d;var h={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;function d(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",s(this,"onopen")),a(t,"packet",s(this,"onpacket")),a(t,"close",s(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var t=o(arguments);return t.unshift("message"),this.emit.apply(this,t),this},d.prototype.emit=function(t){if(h.hasOwnProperty(t))return f.apply(this,arguments),this;var e=o(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(e))?r.BINARY_EVENT:r.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},d.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},d.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?c.encode(this.query):this.query;u("sending connect packet with query %s",t),this.packet({type:r.CONNECT,query:t})}else this.packet({type:r.CONNECT})},d.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},d.prototype.onpacket=function(t){if(t.nsp===this.nsp||t.type===r.ERROR&&"/"===t.nsp)switch(t.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(t);break;case r.ACK:case r.BINARY_ACK:this.onack(t);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",t.data)}},d.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},d.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);u("sending ack %j",i),e.packet({type:l(i)?r.BINARY_ACK:r.ACK,id:t,data:i})}}},d.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(t){return this.flags.compress=t,this},d.prototype.binary=function(t){return this.flags.binary=t,this}},KT0R:function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},Kqap:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}var o=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),a=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,t)).accumulator=r,a._seed=i,a.hasSeed=o,a.index=0,a}return _(n,[{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}},{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}}]),n}(r.a)},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=e[e.length-1];return Object(r.a)(a)?(e.pop(),Object(o.a)(e,a)):Object(i.a)(e)}},LbVS:function(t,e,n){"use strict";function r(t){return t}function i(){var t=document.querySelectorAll("input");return Array.prototype.slice.call(t).map(function(t){return t.value})}function o(t){var e=document.querySelectorAll("input");t&&e.length===t.length&&(t.forEach(function(t,n){var r=e[n];r.value=t,r.dispatchEvent(new CustomEvent("input",{detail:r.value}))}),t.length=0)}Object.defineProperty(e,"__esModule",{value:!0}),e.bootloader=function(t,e,n){"object"==typeof t&&(e=t.before,n=t.after,t=t.main),e=e||r,n=n||r;var i=document.readyState;switch(i){case"loading":document.addEventListener("DOMContentLoaded",function r(){document.removeEventListener("DOMContentLoaded",r),n(t(e(i)))});break;case"interactive":case"complete":default:n(t(e(i)))}},e.createNewHosts=function(t){var e=Array.prototype.map.call(t,function(t){var e=document.createElement(t.tagName),n=t.parentNode,r=e.style.display;return e.style.display="none",n.insertBefore(e,t),function(){e.style.display=r;try{n.removeChild(t)}catch(i){}}});return function(){e.forEach(function(t){return t()})}},e.removeNgStyles=function(){var t=document.head,e=t.querySelectorAll("style");Array.prototype.slice.call(e).filter(function(t){return-1!==t.innerText.indexOf("_ng")}).map(function(e){return t.removeChild(e)})},e.getInputValues=i,e.setInputValues=o,e.createInputTransfer=function(){var t=i();return function(){return o(t)}}},Lhse:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},MCUK:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileService=void 0,n("XVN5"),n("1jsm"),n("wlYr");var a=o(n("fXoL")),s=o(n("XVN5")),u=o(n("wlYr")),c=o(n("1jsm")),l=function(){function t(e,n,r){y(this,t),this.io=e,this.toast=n,this.md5=r,this.socket=e.socket}return _(t,[{key:"updatePass",value:function(t){var e=Object.assign(Object.assign({},t),{currentPass:this.md5.hash(t.currentPass),newPass:this.md5.hash(t.newPass),repeatNewPass:this.md5.hash(t.repeatNewPass)});return this.socket.$get("updatePass",e).catch(function(t){console.log(t)})}}]),t}();e.ProfileService=l,l.\u0275fac=function(t){return new(t||l)(a.\u0275\u0275inject(s.Io),a.\u0275\u0275inject(u.ToastService),a.\u0275\u0275inject(c.Md5))},l.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac})},Mttb:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MenuListComponent=void 0,n("fXoL");var a=o(n("fXoL")),s=o(n("ofXK"));function u(t,e){if(1&t){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"li",3),a.\u0275\u0275listener("click",function(t){a.\u0275\u0275restoreView(n);var r=e.$implicit;return a.\u0275\u0275nextContext(2).onAction(t,r)}),a.\u0275\u0275elementStart(1,"button",4),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(r.text)}}function c(t,e){if(1&t&&(a.\u0275\u0275elementStart(0,"ul"),a.\u0275\u0275template(1,u,3,1,"li",2),a.\u0275\u0275elementEnd()),2&t){var n=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",n.menu)}}var l=function(){function t(e){y(this,t),this.ref=e,this.isShow=!1,this.menu=[],this.documentClick=this.documentClick.bind(this)}return _(t,[{key:"onClose",value:function(){}},{key:"onOpen",value:function(){var t=this;this.isShow=!0,setTimeout(function(){document.removeEventListener("click",t.documentClick),document.addEventListener("click",t.documentClick)},100),this.ref.tick()}},{key:"documentClick",value:function(){this.isShow=!1,document.removeEventListener("click",this.documentClick)}},{key:"onAction",value:function(t,e){console.log("djsdkl"),t.stopPropagation(),e.action(this.item)&&(this.isShow=!1,document.removeEventListener("click",this.documentClick))}}]),t}();e.MenuListComponent=l,l.\u0275fac=function(t){return new(t||l)(a.\u0275\u0275directiveInject(a.ApplicationRef))},l.\u0275cmp=a.\u0275\u0275defineComponent({type:l,selectors:[["menu-list-component"]],hostBindings:function(t,e){1&t&&a.\u0275\u0275listener("click",function(){return e.onClose()},!1,a.\u0275\u0275resolveDocument)},inputs:{menu:"menu",item:"item"},decls:2,vars:1,consts:[[1,"list-menu",3,"click"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"primary"]],template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275listener("click",function(){return e.onOpen()}),a.\u0275\u0275template(1,c,2,1,"ul",1),a.\u0275\u0275elementEnd()),2&t&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.isShow))},directives:[s.NgIf,s.NgForOf],styles:["[_nghost-%COMP%]{display:block;width:16px;height:16px;background:url(http://178.62.44.54:8080/menu.png) no-repeat 50%;background-size:100%;opacity:.7;border-radius:50%}[_nghost-%COMP%]:hover{opacity:1}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{width:100%;height:100%;cursor:pointer}.list-menu[_ngcontent-%COMP%]{position:relative}ul[_ngcontent-%COMP%]{position:absolute;left:100%;top:100%;padding:10px;background:#fff}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin:0}"]})},N5Cg:function(t,e,n){t.exports=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){return i(e[a][1][t]||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){e.exports=t("./lib")},{"./lib":3}],2:[function(t,e,n){(function(n){var r=t("util"),i=t("stream").Readable,o=t("component-bind");function a(t,e){if(!(this instanceof a))return new a(t,e);var n;i.call(this,e),e=e||{},this.blob=t,this.slice=t.slice||t.webkitSlice||t.mozSlice,this.start=0,this.sync=e.synchronous||!1,(n=this.fileReader=e.synchronous?new FileReaderSync:new FileReader).onload=o(this,"_onload"),n.onerror=o(this,"_onerror")}e.exports=a,r.inherits(a,i),a.prototype._read=function(t){var e=this.start,r=this.start=this.start+t,i=this.slice.call(this.blob,e,r);if(i.size)if(this.sync){var o=new n(new Uint8Array(this.fileReader.readAsArrayBuffer(i)));this.push(o)}else this.fileReader.readAsArrayBuffer(i);else this.push(null)},a.prototype._onload=function(t){var e=new n(new Uint8Array(t.target.result));this.push(e)},a.prototype._onerror=function(t){this.emit("error",t.target.error)}}).call(this,t("buffer").Buffer)},{buffer:11,"component-bind":12,stream:35,util:40}],3:[function(t,e,n){(function(r){var i=t("./socket"),o=t("./iostream"),a=t("./blob-read-stream");(n=e.exports=function(t,e){return null==(e=e||{}).forceBase64&&(e.forceBase64=n.forceBase64),t._streamSocket||(t._streamSocket=new i(t,e)),t._streamSocket}).Buffer=r,n.Socket=i,n.IOStream=o,n.forceBase64=!1,n.createStream=function(t){return new o(t)},n.createBlobReadStream=function(t,e){return new a(t,e)}}).call(this,t("buffer").Buffer)},{"./blob-read-stream":2,"./iostream":4,"./socket":6,buffer:11}],4:[function(t,e,n){var r=t("util"),i=t("stream").Duplex,o=t("component-bind"),a=t("./uuid"),s=t("debug")("socket.io-stream:iostream");function u(t){if(!(this instanceof u))return new u(t);u.super_.call(this,t),this.options=t,this.id=a(),this.socket=null,this.pushBuffer=[],this.writeBuffer=[],this._readable=!1,this._writable=!1,this.destroyed=!1,this.allowHalfOpen=t&&t.allowHalfOpen||!1,this.on("finish",this._onfinish),this.on("end",this._onend),this.on("error",this._onerror)}e.exports=u,r.inherits(u,i),u.prototype.destroy=function(){s("destroy"),this.destroyed?s("already destroyed"):(this.readable=this.writable=!1,this.socket&&(s("clean up"),this.socket.cleanup(this.id),this.socket=null),this.destroyed=!0)},u.prototype._read=function(t){var e;if(!this.destroyed)if(this.pushBuffer.length)for(;(e=this.pushBuffer.shift())&&e(););else this._readable=!0,this.socket._read(this.id,t)},u.prototype._onread=function(t){var e=this.writeBuffer.shift();if(e)return e();this._writable=!0},u.prototype._write=function(t,e,n){var r=this;function i(){r.destroyed||(r._writable=!1,r.socket._write(r.id,t,e,n))}this._writable?i():this.writeBuffer.push(i)},u.prototype._onwrite=function(t,e,n){var r=this;function i(){r._readable=!1;var i=r.push(t||"",e);return n(),i}this._readable?i():this.pushBuffer.push(i)},u.prototype._end=function(){this.pushBuffer.length?this.pushBuffer.push(o(this,"_done")):this._done()},u.prototype._done=function(){return this._readable=!1,this.push(null)},u.prototype._onfinish=function(){if(s("_onfinish"),this.socket&&this.socket._end(this.id),this.writable=!1,this._writableState.ended=!0,!this.readable||this._readableState.ended)return s("_onfinish: ended, destroy %s",this._readableState),this.destroy();s("_onfinish: not ended"),this.allowHalfOpen||(this.push(null),this.readable&&!this._readableState.endEmitted&&this.read(0))},u.prototype._onend=function(){if(s("_onend"),this.readable=!1,this._readableState.ended=!0,!this.writable||this._writableState.finished)return s("_onend: %s",this._writableState),this.destroy();s("_onend: not finished"),this.allowHalfOpen||this.end()},u.prototype._onerror=function(t){!t.remote&&this.socket&&this.socket._error(this.id,t),this.destroy()}},{"./uuid":7,"component-bind":12,debug:14,stream:35,util:40}],5:[function(t,e,n){var r=t("util"),i=t("events").EventEmitter,o=t("./iostream");function a(){i.call(this)}function s(){i.call(this)}n.Encoder=a,n.Decoder=s,r.inherits(a,i),a.prototype.encode=function(t){return t instanceof o?this.encodeStream(t):r.isArray(t)?this.encodeArray(t):t&&"object"==typeof t?this.encodeObject(t):t},a.prototype.encodeStream=function(t){this.emit("stream",t);var e={$stream:t.id};return t.options&&(e.options=t.options),e},a.prototype.encodeArray=function(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(this.encode(t[n]));return e},a.prototype.encodeObject=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=this.encode(t[n]));return e},r.inherits(s,i),s.prototype.decode=function(t){return t&&t.$stream?this.decodeStream(t):r.isArray(t)?this.decodeArray(t):t&&"object"==typeof t?this.decodeObject(t):t},s.prototype.decodeStream=function(t){var e=new o(t.options);return e.id=t.$stream,this.emit("stream",e),e},s.prototype.decodeArray=function(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(this.decode(t[n]));return e},s.prototype.decodeObject=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=this.decode(t[n]));return e}},{"./iostream":4,events:16,util:40}],6:[function(t,e,n){(function(r,i){var o=t("util"),a=t("events").EventEmitter,s=t("component-bind"),u=(t("./iostream"),t("./parser")),c=t("debug")("socket.io-stream:socket"),l=a.prototype.emit,h=a.prototype.on,f=Array.prototype.slice;function d(t,e){if(!(this instanceof d))return new d(t,e);a.call(this),e=e||{},this.sio=t,this.forceBase64=!!e.forceBase64,this.streams={},this.encoder=new u.Encoder,this.decoder=new u.Decoder;var r=n.event;t.on(r,s(this,l)),t.on(r+"-read",s(this,"_onread")),t.on(r+"-write",s(this,"_onwrite")),t.on(r+"-end",s(this,"_onend")),t.on(r+"-error",s(this,"_onerror")),t.on("error",s(this,l,"error")),t.on("disconnect",s(this,"_ondisconnect")),this.encoder.on("stream",s(this,"_onencode")),this.decoder.on("stream",s(this,"_ondecode"))}(n=e.exports=d).event="$stream",n.events=["error","newListener","removeListener"],o.inherits(d,a),d.prototype.$emit=l,d.prototype.emit=function(t){return~n.events.indexOf(t)?l.apply(this,arguments):(this._stream.apply(this,arguments),this)},d.prototype.on=function(t,e){return~n.events.indexOf(t)?h.apply(this,arguments):(this._onstream(t,e),this)},d.prototype._stream=function(t){c("sending new streams");var e=this,r=f.call(arguments,1),i=r[r.length-1];"function"==typeof i&&(r[r.length-1]=function(){var t=f.call(arguments);t=e.decoder.decode(t),i.apply(this,t)}),r=this.encoder.encode(r);var o=this.sio;o.emit.apply(o,[n.event,t].concat(r))},d.prototype._read=function(t,e){this.sio.emit(n.event+"-read",t,e)},d.prototype._write=function(t,e,o,a){i.isBuffer(e)&&(this.forceBase64?e=e.toString(o="base64"):r.Buffer||(e=e.toArrayBuffer?e.toArrayBuffer():e.buffer)),this.sio.emit(n.event+"-write",t,e,o,a)},d.prototype._end=function(t){this.sio.emit(n.event+"-end",t)},d.prototype._error=function(t,e){this.sio.emit(n.event+"-error",t,e.message||e)},d.prototype._onstream=function(t,e){if("function"!=typeof e)throw TypeError("listener must be a function");function n(){c("new streams");var t=this,n=f.call(arguments),r=n[n.length-1];"function"==typeof r&&(n[n.length-1]=function(){var e=f.call(arguments);e=t.encoder.encode(e),r.apply(this,e)}),n=this.decoder.decode(n),e.apply(this,n)}n.listener=e,h.call(this,t,n)},d.prototype._onread=function(t,e){c('read: "%s"',t);var n=this.streams[t];n?n._onread(e):c("ignore invalid stream id")},d.prototype._onwrite=function(t,e,n,o){c('write: "%s"',t);var a=this.streams[t];a?(r.ArrayBuffer&&e instanceof ArrayBuffer&&(e=new i(new Uint8Array(e))),a._onwrite(e,n,o)):o("invalid stream id: "+t)},d.prototype._onend=function(t){c('end: "%s"',t);var e=this.streams[t];e?e._end():c('ignore non-existent stream id: "%s"',t)},d.prototype._onerror=function(t,e){c('error: "%s", "%s"',t,e);var n=this.streams[t];if(n){var r=new Error(e);r.remote=!0,n.emit("error",r)}else c('invalid stream id: "%s"',t)},d.prototype._ondisconnect=function(){var t;for(var e in this.streams)(t=this.streams[e]).destroy(),t.emit("close"),t.emit("error",new Error("Connection aborted"))},d.prototype._onencode=function(t){if(t.socket||t.destroyed)throw new Error("stream has already been sent.");var e=t.id;if(this.streams[e])throw new Error("Encoded stream already exists: "+e);this.streams[e]=t,t.socket=this},d.prototype._ondecode=function(t){var e=t.id;this.streams[e]?this._error(e,new Error("Decoded stream already exists: "+e)):(this.streams[e]=t,t.socket=this)},d.prototype.cleanup=function(t){delete this.streams[t]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"./iostream":4,"./parser":5,buffer:11,"component-bind":12,debug:14,events:16,util:40}],7:[function(t,e,n){e.exports=function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)}},{}],8:[function(t,e,n){"use strict";n.byteLength=function(t){return 3*t.length/4-c(t)},n.toByteArray=function(t){var e,n,r,a,s,u,l=t.length;s=c(t),u=new o(3*l/4-s),r=s>0?l-4:l;var h=0;for(e=0,n=0;e<r;e+=4,n+=3)a=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],u[h++]=a>>16&255,u[h++]=a>>8&255,u[h++]=255&a;return 2===s?(a=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,u[h++]=255&a):1===s&&(a=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,u[h++]=a>>8&255,u[h++]=255&a),u},n.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o="",a=[],s=0,u=n-i;s<u;s+=16383)a.push(l(t,s,s+16383>u?u:s+16383));return 1===i?(o+=r[(e=t[n-1])>>2],o+=r[e<<4&63],o+="=="):2===i&&(o+=r[(e=(t[n-2]<<8)+t[n-1])>>10],o+=r[e>>4&63],o+=r[e<<2&63],o+="="),a.push(o),a.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function l(t,e,n){for(var i=[],o=e;o<n;o+=3)i.push(r[(a=(t[o]<<16)+(t[o+1]<<8)+t[o+2])>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);var a;return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],9:[function(t,e,n){},{}],10:[function(t,e,n){(function(e){"use strict";var r=t("buffer"),i=r.Buffer,o=r.SlowBuffer,a=r.kMaxLength||2147483647;n.alloc=function(t,e,n){if("function"==typeof i.alloc)return i.alloc(t,e,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof t)throw new TypeError("size must be a number");if(t>a)throw new RangeError("size is too large");var r=n,o=e;void 0===o&&(r=void 0,o=0);var s=new i(t);if("string"==typeof o)for(var u=new i(o,r),c=u.length,l=-1;++l<t;)s[l]=u[l%c];else s.fill(o);return s},n.allocUnsafe=function(t){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>a)throw new RangeError("size is too large");return new i(t)},n.from=function(t,n,r){if("function"==typeof i.from&&(!e.Uint8Array||Uint8Array.from!==i.from))return i.from(t,n,r);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new i(t,n);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new i(t);void 0===o&&(o=0);var a=r;if(void 0===a&&(a=t.byteLength-o),o>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(a>t.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(t.slice(o,o+a))}if(i.isBuffer(t)){var s=new i(t.length);return t.copy(s,0,0,t.length),s}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new i(t);if("Buffer"===t.type&&Array.isArray(t.data))return new i(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},n.allocUnsafeSlow=function(t){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>=a)throw new RangeError("size is too large");return new o(t)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:11}],11:[function(t,e,n){(function(e){"use strict";var r=t("base64-js"),i=t("ieee754"),o=t("isarray");function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,r){return V(B(e,t.length-n),t,n,r)}function w(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return w(t,e,n,r)}function k(t,e,n,r){return V(z(e),t,n,r)}function C(t,e,n,r){return V(function(t,e){for(var n,r,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=(n=t.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function S(t,e,n){return r.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function T(t,e,n){var r,i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var o="",a=e;a<n;++a)o+=(r=t[a])<16?"0"+r.toString(16):r.toString(16);return o}function A(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function j(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(t,e,n,r,o){return o||j(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,o){return o||j(t,0,n,8),i.write(t,e,n,r,52,8),n+8}n.Buffer=u,n.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},n.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),n.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(null,e):void 0!==n?"string"==typeof r?s(null,e).fill(n,r):s(null,e).fill(n):s(null,e)}(0,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):v.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),h=0;h<s;++h)if(c[h]!==l[h]){o=c[h],a=l[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:B(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function B(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":8,ieee754:17,isarray:20}],12:[function(t,e,n){var r=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},{}],13:[function(t,e,n){(function(t){function e(t){return Object.prototype.toString.call(t)}n.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},n.isBoolean=function(t){return"boolean"==typeof t},n.isNull=function(t){return null===t},n.isNullOrUndefined=function(t){return null==t},n.isNumber=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=function(t){return void 0===t},n.isRegExp=function(t){return"[object RegExp]"===e(t)},n.isObject=function(t){return"object"==typeof t&&null!==t},n.isDate=function(t){return"[object Date]"===e(t)},n.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},n.isFunction=function(t){return"function"==typeof t},n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":19}],14:[function(t,e,n){function r(){var t;try{t=n.storage.debug}catch(e){}return t}(n=e.exports=t("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t},n.save=function(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(e){}},n.load=r,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(r())},{"./debug":15}],15:[function(t,e,n){(n=e.exports=function(t){function e(){}function i(){var t=i,e=+new Date;t.diff=e-(r||e),t.prev=r,t.curr=e,r=e,null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=o());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;s++;var i=n.formatters[r];return"function"==typeof i&&(e=i.call(t,a[s]),a.splice(s,1),s--),e}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(t,a)),(i.log||n.log||console.log.bind(console)).apply(t,a)}e.enabled=!1,i.enabled=!0;var a=n.enabled(t)?i:e;return a.namespace=t,a}).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,i=0;i<r;i++)e[i]&&("-"===(t=e[i].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={};var r,i=0;function o(){return n.colors[i++%n.colors.length]}},{ms:21}],16:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(a(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),r=(c=n.slice()).length,u=0;u<r;u++)c[u].apply(this,s);return!0},r.prototype.on=r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var n,r,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],17:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*v}},{}],18:[function(t,e,n){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],19:[function(t,e,n){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],20:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],21:[function(t,e,n){var r=1e3,i=60*r,o=60*i,a=24*o;function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}e.exports=function(t,e){return e=e||{},"string"==typeof t?function(t){if(!((t=""+t).length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}(t):e.long?s(n=t,a,"day")||s(n,o,"hour")||s(n,i,"minute")||s(n,r,"second")||n+" ms":function(t){return t>=a?Math.round(t/a)+"d":t>=o?Math.round(t/o)+"h":t>=i?Math.round(t/i)+"m":t>=r?Math.round(t/r)+"s":t+"ms"}(t);var n}},{}],22:[function(t,e,n){(function(t){"use strict";e.exports=!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}:t.nextTick}).call(this,t("_process"))},{_process:23}],23:[function(t,e,n){var r,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var c,l=[],h=!1,f=-1;function d(){h&&c&&(h=!1,c.length?l=c.concat(l):f=-1,l.length&&p())}function p(){if(!h){var t=u(d);h=!0;for(var e=l.length;e;){for(c=l,l=[];++f<e;)c&&c[f].run();f=-1,e=l.length}c=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new v(t,e)),1!==l.length||h||u(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],24:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":25}],25:[function(t,e,n){"use strict";var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=h;var i=t("process-nextick-args"),o=t("core-util-is");o.inherits=t("inherits");var a=t("./_stream_readable"),s=t("./_stream_writable");o.inherits(h,a);for(var u=r(s.prototype),c=0;c<u.length;c++){var l=u[c];h.prototype[l]||(h.prototype[l]=s.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||i(d,this)}function d(t){t.end()}},{"./_stream_readable":27,"./_stream_writable":29,"core-util-is":13,inherits:18,"process-nextick-args":22}],26:[function(t,e,n){"use strict";e.exports=o;var r=t("./_stream_transform"),i=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=t("inherits"),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":28,"core-util-is":13,inherits:18}],27:[function(t,e,n){(function(n){"use strict";e.exports=m;var r=t("process-nextick-args"),i=t("isarray");m.ReadableState=v,t("events");var o,a=function(t,e){return t.listeners(e).length};!function(){try{o=t("stream")}catch(e){}finally{o||(o=t("events").EventEmitter)}}();var s=t("buffer").Buffer,u=t("buffer-shims"),c=t("core-util-is");c.inherits=t("inherits");var l=t("util"),h=void 0;h=l&&l.debuglog?l.debuglog("stream"):function(){};var f,d,p=t("./internal/streams/BufferList");function v(e,n){d=d||t("./_stream_duplex"),this.objectMode=!!(e=e||{}).objectMode,n instanceof d&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark;this.highWaterMark=r||0===r?r:this.objectMode?16:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=t("string_decoder/").StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function m(e){if(d=d||t("./_stream_duplex"),!(this instanceof m))return new m(e);this._readableState=new v(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),o.call(this)}function y(t,e,n,i,o){var a=function(t,e){var n=null;return s.isBuffer(e)||"string"==typeof e||null==e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(e,n);if(a)t.emit("error",a);else if(null===n)e.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,_(t)}}(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!o){var u=new Error("stream.push() after EOF");t.emit("error",u)}else if(e.endEmitted&&o){var c=new Error("stream.unshift() after end event");t.emit("error",c)}else{var l;!e.decoder||o||i||(n=e.decoder.write(n),l=!e.objectMode&&0===n.length),o||(e.reading=!1),l||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,o?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&_(t))),function(t,e){e.readingMore||(e.readingMore=!0,r(w,t,e))}(t,e)}else o||(e.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(e)}function g(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function _(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r(b,t):b(t))}function b(t){h("emit readable"),t.emit("readable"),C(t)}function w(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(h("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function x(t){h("readable nexttick read 0"),t.read(0)}function k(t,e){e.reading||(h("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),C(t),e.flowing&&!e.reading&&t.read(0)}function C(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function S(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(i+=a===o.length?o:o.slice(0,t),0==(t-=a)){a===o.length?(++r,e.head=n.next?n.next:e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=u.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0==(t-=a)){a===o.length?(++i,e.head=r.next?r.next:e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e),r}(t,e.buffer,e.decoder),n);var n}function E(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r(P,e,t))}function P(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function O(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}c.inherits(m,o),m.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding)!==n.encoding&&(t=u.from(t,e),e=""),y(this,n,t,e,!1)},m.prototype.unshift=function(t){return y(this,this._readableState,t,"",!0)},m.prototype.isPaused=function(){return!1===this._readableState.flowing},m.prototype.setEncoding=function(e){return f||(f=t("string_decoder/").StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this},m.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?E(this):_(this),null;if(0===(t=g(t,e))&&e.ended)return 0===e.length&&E(this),null;var r,i=e.needReadable;return h("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",i=!0),e.ended||e.reading?h("reading or ended",i=!1):i&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=g(n,e))),null===(r=t>0?S(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&E(this)),null!==r&&this.emit("data",r),r},m.prototype._read=function(t){this.emit("error",new Error("not implemented"))},m.prototype.pipe=function(t,e){var o=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,h("pipe count=%d opts=%j",s.pipesCount,e);var u=e&&!1===e.end||t===n.stdout||t===n.stderr?p:l;function c(t){h("onunpipe"),t===o&&p()}function l(){h("onend"),t.end()}s.endEmitted?r(u):o.once("end",u),t.on("unpipe",c);var f=function(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,C(t))}}(o);t.on("drain",f);var d=!1;function p(){h("cleanup"),t.removeListener("close",g),t.removeListener("finish",_),t.removeListener("drain",f),t.removeListener("error",y),t.removeListener("unpipe",c),o.removeListener("end",l),o.removeListener("end",p),o.removeListener("data",m),d=!0,!s.awaitDrain||t._writableState&&!t._writableState.needDrain||f()}var v=!1;function m(e){h("ondata"),v=!1,!1!==t.write(e)||v||((1===s.pipesCount&&s.pipes===t||s.pipesCount>1&&-1!==O(s.pipes,t))&&!d&&(h("false write response, pause",o._readableState.awaitDrain),o._readableState.awaitDrain++,v=!0),o.pause())}function y(e){h("onerror",e),b(),t.removeListener("error",y),0===a(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",_),b()}function _(){h("onfinish"),t.removeListener("close",g),b()}function b(){h("unpipe"),o.unpipe(t)}return o.on("data",m),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener("error",n);t._events&&t._events.error?i(t._events.error)?t._events.error.unshift(n):t._events.error=[n,t._events.error]:t.on("error",n)}(t,0,y),t.once("close",g),t.once("finish",_),t.emit("pipe",o),s.flowing||(h("pipe resume"),o.resume()),t},m.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=O(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},m.prototype.addListener=m.prototype.on=function(t,e){var n=o.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&_(this):r(x,this))}return n},m.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r(k,t,e))}(this,t)),this},m.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},m.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;for(var i in t.on("end",function(){if(h("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){h("wrapped data"),e.decoder&&(i=e.decoder.write(i)),e.objectMode&&null==i||(e.objectMode||i&&i.length)&&(r.push(i)||(n=!0,t.pause()))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return function(e,n){for(var i=0,o=e.length;i<o;i++)t.on(a=e[i],r.emit.bind(r,a));var a}(["error","close","destroy","pause","resume"]),r._read=function(e){h("wrapped _read",e),n&&(n=!1,t.resume())},r},m._fromList=S}).call(this,t("_process"))},{"./_stream_duplex":25,"./internal/streams/BufferList":30,_process:23,buffer:11,"buffer-shims":10,"core-util-is":13,events:16,inherits:18,isarray:20,"process-nextick-args":22,"string_decoder/":36,util:9}],28:[function(t,e,n){"use strict";e.exports=a;var r=t("./_stream_duplex"),i=t("core-util-is");function o(t){this.afterTransform=function(e,n){return function(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!=n&&t.push(n),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState=new o(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._transformState;if(t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=t("inherits"),i.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,n){throw new Error("Not implemented")},a.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":25,"core-util-is":13,inherits:18}],29:[function(t,e,n){(function(n){"use strict";e.exports=p;var r=t("process-nextick-args"),i=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:r;p.WritableState=d;var o=t("core-util-is");o.inherits=t("inherits");var a,s={deprecate:t("util-deprecate")};!function(){try{a=t("stream")}catch(e){}finally{a||(a=t("events").EventEmitter)}}();var u,c=t("buffer").Buffer,l=t("buffer-shims");function h(){}function f(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function d(e,n){u=u||t("./_stream_duplex"),this.objectMode=!!(e=e||{}).objectMode,n instanceof u&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var o=e.highWaterMark;this.highWaterMark=o||0===o?o:this.objectMode?16:16384,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.decodeStrings=!(!1===e.decodeStrings),this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,o=n.sync,a=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,o){--e.pendingcb,n?r(o,i):o(i),t._writableState.errorEmitted=!0,t.emit("error",i)}(t,n,o,e,a);else{var s=g(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||y(t,n),o?i(m,t,n,s,a):m(t,n,s,a)}}(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this)}function p(e){if(u=u||t("./_stream_duplex"),!(this instanceof p||this instanceof u))return new p(e);this._writableState=new d(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),a.call(this)}function v(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function m(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),b(t,e)}function y(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=new Array(e.bufferedRequestCount),i=e.corkedRequestsFree;i.entry=n;for(var o=0;n;)r[o]=n,n=n.next,o+=1;v(t,e,!0,e.length,r,"",i.finish),e.pendingcb++,e.lastBufferedRequest=null,i.next?(e.corkedRequestsFree=i.next,i.next=null):e.corkedRequestsFree=new w(e)}else{for(;n;){var a=n.chunk;if(v(t,e,!1,e.objectMode?1:a.length,a,n.encoding,n.callback),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function g(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function b(t,e){var n=g(e);return n&&(0===e.pendingcb?(_(t,e),e.finished=!0,t.emit("finish")):_(t,e)),n}function w(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}o.inherits(p,a),d.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(d.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}(),p.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},p.prototype.write=function(t,e,n){var i=this._writableState,o=!1;return"function"==typeof e&&(n=e,e=null),c.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=h),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),r(e,n)}(this,n):function(t,e,n,i){var o=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):c.isBuffer(n)||"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),r(i,a),o=!1),o}(this,i,t,n)&&(i.pendingcb++,o=function(t,e,n,r,i){n=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,n)),e}(e,n,r),c.isBuffer(n)&&(r="buffer");var o=e.objectMode?1:n.length;e.length+=o;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var s=e.lastBufferedRequest;e.lastBufferedRequest=new f(n,r,i),s?s.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else v(t,e,!1,o,n,r,i);return a}(this,i,t,e,n)),o},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||y(this,t))},p.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},p.prototype._write=function(t,e,n){n(new Error("not implemented"))},p.prototype._writev=null,p.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,n){e.ending=!0,b(t,e),n&&(e.finished?r(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,i,n)}}).call(this,t("_process"))},{"./_stream_duplex":25,_process:23,buffer:11,"buffer-shims":10,"core-util-is":13,events:16,inherits:18,"process-nextick-args":22,"util-deprecate":37}],30:[function(t,e,n){"use strict";t("buffer");var r=t("buffer-shims");function i(){this.head=null,this.tail=null,this.length=0}e.exports=i,i.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},i.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},i.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,t}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},i.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e=r.allocUnsafe(t>>>0),n=this.head,i=0;n;)n.data.copy(e,i),i+=n.data.length,n=n.next;return e}},{buffer:11,"buffer-shims":10}],31:[function(t,e,n){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":26}],32:[function(t,e,n){(function(r){var i=function(){try{return t("stream")}catch(e){}}();(n=e.exports=t("./lib/_stream_readable.js")).Stream=i||n,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js"),!r.browser&&"disable"===r.env.READABLE_STREAM&&i&&(e.exports=i)}).call(this,t("_process"))},{"./lib/_stream_duplex.js":25,"./lib/_stream_passthrough.js":26,"./lib/_stream_readable.js":27,"./lib/_stream_transform.js":28,"./lib/_stream_writable.js":29,_process:23}],33:[function(t,e,n){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":28}],34:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":29}],35:[function(t,e,n){e.exports=i;var r=t("events").EventEmitter;function i(){r.call(this)}t("inherits")(i,r),i.Readable=t("readable-stream/readable.js"),i.Writable=t("readable-stream/writable.js"),i.Duplex=t("readable-stream/duplex.js"),i.Transform=t("readable-stream/transform.js"),i.PassThrough=t("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",c),t.on("error",c),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},{events:16,inherits:18,"readable-stream/duplex.js":24,"readable-stream/passthrough.js":31,"readable-stream/readable.js":32,"readable-stream/transform.js":33,"readable-stream/writable.js":34}],36:[function(t,e,n){var r=t("buffer").Buffer,i=r.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},o=n.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!i(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=a)}this.charBuffer=new r(6),this.charReceived=0,this.charLength=0};function a(t){return t.toString(this.encoding)}function s(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function u(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((r=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r,i=t.length;if(this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),(r=(e+=t.toString(this.encoding,0,i)).charCodeAt(i=e.length-1))>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},o.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},o.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.encoding;e+=this.charBuffer.slice(0,this.charReceived).toString(n)}return e}},{buffer:11}],37:[function(t,e,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(r){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(t,e,n){arguments[4][18][0].apply(n,arguments)},{dup:18}],39:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],40:[function(t,e,n){(function(e,r){var i=/%[sdj%]/g;n.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),u=r[n];n<o;u=r[++n])v(u)||!b(u)?a+=" "+u:a+=" "+s(u);return a},n.deprecate=function(t,i){if(g(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(!0===e.noDeprecation)return t;var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return t.apply(this,arguments)}};var o,a={};function s(t,e){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(e)?r.showHidden=e:e&&n._extend(r,e),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),l(r,t,r.depth)}function u(t,e){var n=s.styles[e];return n?"\x1b["+s.colors[n][0]+"m"+t+"\x1b["+s.colors[n][1]+"m":t}function c(t,e){return t}function l(t,e,r){if(t.customInspect&&e&&k(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return y(i)||(i=l(t,i,r)),i}var o=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):p(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}(t,e);if(o)return o;var a=Object.keys(e),s=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),x(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(e);if(0===a.length){if(k(e))return t.stylize("[Function"+(e.name?": "+e.name:"")+"]","special");if(_(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(w(e))return t.stylize(Date.prototype.toString.call(e),"date");if(x(e))return h(e)}var u,c="",b=!1,C=["{","}"];return d(e)&&(b=!0,C=["[","]"]),k(e)&&(c=" [Function"+(e.name?": "+e.name:"")+"]"),_(e)&&(c=" "+RegExp.prototype.toString.call(e)),w(e)&&(c=" "+Date.prototype.toUTCString.call(e)),x(e)&&(c=" "+h(e)),0!==a.length||b&&0!=e.length?r<0?_(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),u=b?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)O(e,String(a))?o.push(f(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))}),o}(t,e,r,s,a):a.map(function(n){return f(t,e,r,s,n,b)}),t.seen.pop(),function(t,e,n){return t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(u,c,C)):C[0]+c+C[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=t.stylize(u.set?"[Getter/Setter]":"[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),O(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=v(n)?l(t,u.value,null):l(t,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),g(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return"number"==typeof t}function y(t){return"string"==typeof t}function g(t){return void 0===t}function _(t){return b(t)&&"[object RegExp]"===C(t)}function b(t){return"object"==typeof t&&null!==t}function w(t){return b(t)&&"[object Date]"===C(t)}function x(t){return b(t)&&("[object Error]"===C(t)||t instanceof Error)}function k(t){return"function"==typeof t}function C(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(t){if(g(o)&&(o=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var r=e.pid;a[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else a[t]=function(){};return a[t]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=p,n.isNull=v,n.isNullOrUndefined=function(t){return null==t},n.isNumber=m,n.isString=y,n.isSymbol=function(t){return"symbol"==typeof t},n.isUndefined=g,n.isRegExp=_,n.isObject=b,n.isDate=w,n.isError=x,n.isFunction=k,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},n.isBuffer=t("./support/isBuffer");var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),E[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":39,_process:23,inherits:38}]},{},[1])(1)},"NHP+":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("quSY"),o=function(t){l(n,t);var e=f(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).value=null,t.hasNext=!1,t.hasCompleted=!1,t}return _(n,[{key:"_subscribe",value:function(t){return this.hasError?(t.error(this.thrownError),i.a.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),i.a.EMPTY):u(m(n.prototype),"_subscribe",this).call(this,t)}},{key:"next",value:function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)}},{key:"error",value:function(t){this.hasCompleted||u(m(n.prototype),"error",this).call(this,t)}},{key:"complete",value:function(){this.hasCompleted=!0,this.hasNext&&u(m(n.prototype),"next",this).call(this,this.value),u(m(n.prototype),"complete",this).call(this)}}]),n}(r.a)},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(function(){throw t},0)}n.d(e,"a",function(){return r})},NJ9Y:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("sVev"),i=n("pLZG"),o=n("BFxc"),a=n("XDbj"),s=n("xbPD"),u=n("SpAZ");function c(t,e){var n=arguments.length>=2;return function(c){return c.pipe(t?Object(i.a)(function(e,n){return t(e,n,c)}):u.a,Object(o.a)(1),n?Object(s.a)(e):Object(a.a)(function(){return new r.a}))}}},NXyV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("Cfvw"),o=n("EY2u");function a(t){return new r.a(function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(i.a)(n):Object(o.b)()).subscribe(e)})}},Njrz:function(t,e,n){var r=n("luTP"),i=n("qGlh"),o=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);function u(t,e){if(!t)return t;if(i(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(r(t)){for(var o=new Array(t.length),a=0;a<t.length;a++)o[a]=u(t[a],e);return o}if("object"==typeof t&&!(t instanceof Date)){for(var s in o={},t)o[s]=u(t[s],e);return o}return t}function c(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(r(t))for(var n=0;n<t.length;n++)t[n]=c(t[n],e);else if("object"==typeof t)for(var i in t)t[i]=c(t[i],e);return t}e.deconstructPacket=function(t){var e=[],n=t;return n.data=u(t.data,e),n.attachments=e.length,{packet:n,buffers:e}},e.reconstructPacket=function(t,e){return t.data=c(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var n=0,o=t;!function t(u,c,l){if(!u)return u;if(a&&u instanceof Blob||s&&u instanceof File){n++;var h=new FileReader;h.onload=function(){l?l[c]=this.result:o=this.result,--n||e(o)},h.readAsArrayBuffer(u)}else if(r(u))for(var f=0;f<u.length;f++)t(u[f],f,u);else if("object"==typeof u&&!i(u))for(var d in u)t(u[d],d,u)}(o),n||e(o)}},Nv8m:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("DH7j"),i=n("yCtX"),o=n("l7GE"),a=n("ZUHj");function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){if(!Object(r.a)(e[0]))return e[0];e=e[0]}return Object(i.a)(e,void 0).lift(new u)}var u=function(){function t(){y(this,t)}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new c(t))}}]),t}(),c=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).hasFirst=!1,r.observables=[],r.subscriptions=[],r}return _(n,[{key:"_next",value:function(t){this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Object(a.a)(this,r,void 0,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}}},{key:"notifyNext",value:function(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var i=this.subscriptions[r];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(e)}}]),n}(o.a)},"O7X+":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.RegistrationService=void 0,n("XVN5"),n("1jsm");var a=o(n("fXoL")),s=o(n("XVN5")),u=o(n("1jsm")),c=function(){function t(e,n){y(this,t),this.io=e,this.md5=n,this.socket=e.socket}return _(t,[{key:"onRegister",value:function(t){return this.socket.$get("onRegister",t)}}]),t}();e.RegistrationService=c,c.\u0275fac=function(t){return new(t||c)(a.\u0275\u0275inject(s.Io),a.\u0275\u0275inject(u.Md5))},c.\u0275prov=a.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac})},OQgR:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return p});var r=n("7o/Q"),i=n("quSY"),o=n("HDdC"),a=n("XNiG");function s(t,e,n,r){return function(i){return i.lift(new c(t,e,n,r))}}var c=function(){function t(e,n,r,i){y(this,t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new h(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}]),t}(),h=function(t){l(n,t);var e=f(n);function n(t,r,i,o,a){var s;return y(this,n),(s=e.call(this,t)).keySelector=r,s.elementSelector=i,s.durationSelector=o,s.subjectSelector=a,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return _(n,[{key:"_next",value:function(t){var e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}},{key:"_group",value:function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(u){this.error(u)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new a.a,n.set(e,i);var o=new p(e,i,this);if(this.destination.next(o),this.durationSelector){var s;try{s=this.durationSelector(new p(e,i))}catch(u){return void this.error(u)}this.add(s.subscribe(new d(e,i,this)))}}i.closed||i.next(r)}},{key:"_error",value:function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)}},{key:"_complete",value:function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()}},{key:"removeGroup",value:function(t){this.groups.delete(t)}},{key:"unsubscribe",value:function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&u(m(n.prototype),"unsubscribe",this).call(this))}}]),n}(r.a),d=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,r)).key=t,o.group=r,o.parent=i,o}return _(n,[{key:"_next",value:function(t){this.complete()}},{key:"_unsubscribe",value:function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)}}]),n}(r.a),p=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this)).key=t,o.groupSubject=r,o.refCountSubscription=i,o}return _(n,[{key:"_subscribe",value:function(t){var e=new i.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new v(n)),e.add(r.subscribe(t)),e}}]),n}(o.a),v=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this)).parent=t,t.count++,r}return _(n,[{key:"unsubscribe",value:function(){var t=this.parent;t.closed||this.closed||(u(m(n.prototype),"unsubscribe",this).call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}]),n}(i.a)},Oyyh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;var r=parseFloat;function i(t,e){var n=0;function i(t){return 255<(t=r(t))?255:t}return Array.prototype.forEach.call([t,e],function(t){n+=i(t)}),i(n)}function o(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function a(t,e,n){return"#"+o(t)+o(e)+o(n)}function s(t,e,n){return a.apply(this,function(t,e,n){n=void 0!==n?255-255*n/100:0,n=parseInt(n);var o=(e||150)/5;return(t=r(t))<o?[0,i((255/o*t).toFixed(0),n),255]:t<2*o?[n,255,i((255-255/o*(t-o)).toFixed(0),n)]:t<3*o?[i((255/o*(t-2*o)).toFixed(0),n),255,n]:t<4*o?[255,i((255-255/o*(t-3*o)).toFixed(0),n),n]:t<5*o?[255,n,i((255/o*(t-4*o)).toFixed(0),n)]:[255,n,n]}(t,e,n))}e.Color=function(){function t(e){y(this,t),this.points=e}return _(t,[{key:"getColors",value:function(){var t=this.points,e=this._getSpeedMax();t.forEach(function(t){t.color=s(t.speed,e)});var n=new Set(t.map(function(t){return t.color})),r=[];return Array.from(n).forEach(function(t){r.push([t,t])}),{points:t,resColors:r}}},{key:"_getSpeedMax",value:function(){var t=0;return this.points.forEach(function(e){t<e.speed&&(t=e.speed)}),t}}]),t}()},PqYM:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("D0XW"),o=n("Y7HM"),a=n("z+Ro");function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,s=-1;return Object(o.a)(e)?s=Number(e)<1?1:Number(e):Object(a.a)(e)&&(n=e),Object(a.a)(n)||(n=i.a),new r.a(function(e){var r=Object(o.a)(t)?t:+t-n.now();return n.schedule(u,r,{index:0,period:s,subscriber:e})})}function u(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},PsNa:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MODULE_CONFIG={OnInit:"hmrOnInit",OnStatus:"hmrOnStatus",OnCheck:"hmrOnCheck",OnDecline:"hmrOnDecline",OnDestroy:"hmrOnDestroy",AfterDestroy:"hmrAfterDestroy"},e.hmrModule=function(t,n,r){return void 0===r&&(r=e.MODULE_CONFIG),n.hot&&(n.hot.accept(),t.instance[e.MODULE_CONFIG.OnInit]&&n.hot.data&&t.instance[e.MODULE_CONFIG.OnInit](n.hot.data),t.instance[e.MODULE_CONFIG.OnStatus]&&n.hot.apply(function(n){t.instance[e.MODULE_CONFIG.OnStatus](n)}),t.instance[e.MODULE_CONFIG.OnCheck]&&n.hot.check(function(n,r){t.instance[e.MODULE_CONFIG.OnCheck](n,r)}),t.instance[e.MODULE_CONFIG.OnDecline]&&n.hot.decline(function(n){t.instance[e.MODULE_CONFIG.OnDecline](n)}),n.hot.dispose(function(n){t.instance[e.MODULE_CONFIG.OnDestroy]&&t.instance[e.MODULE_CONFIG.OnDestroy](n),t.destroy(),t.instance[e.MODULE_CONFIG.AfterDestroy]&&t.instance[e.MODULE_CONFIG.AfterDestroy](n)})),t}},Q80o:function(t,e,n){function r(t){var n;function r(){if(r.enabled){var t=r,i=+new Date,o=i-(n||i);t.diff=o,t.prev=n,t.curr=i,n=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var i=e.formatters[r];return"function"==typeof i&&(n=i.call(t,a[u]),a.splice(u,1),u--),n}),e.formatArgs.call(t,a);var c=r.log||e.log||console.log.bind(console);c.apply(t,a)}}return r.namespace=t,r.enabled=e.enabled(t),r.useColors=e.useColors(),r.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),r.destroy=i,"function"==typeof e.init&&e.init(r),e.instances.push(r),r}function i(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var n;e.save(t),e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(n=0;n<e.instances.length;n++){var o=e.instances[n];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n("5LH7"),e.instances=[],e.names=[],e.skips=[],e.formatters={}},QN7Q:function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},R0Ic:function(t,e,n){"use strict";n.r(e),n.d(e,"AUTO_STYLE",function(){return o}),n.d(e,"AnimationBuilder",function(){return r}),n.d(e,"AnimationFactory",function(){return i}),n.d(e,"NoopAnimationPlayer",function(){return x}),n.d(e,"animate",function(){return s}),n.d(e,"animateChild",function(){return v}),n.d(e,"animation",function(){return p}),n.d(e,"group",function(){return u}),n.d(e,"keyframes",function(){return f}),n.d(e,"query",function(){return g}),n.d(e,"sequence",function(){return c}),n.d(e,"stagger",function(){return b}),n.d(e,"state",function(){return h}),n.d(e,"style",function(){return l}),n.d(e,"transition",function(){return d}),n.d(e,"trigger",function(){return a}),n.d(e,"useAnimation",function(){return m}),n.d(e,"\u0275AnimationGroupPlayer",function(){return k}),n.d(e,"\u0275PRE_STYLE",function(){return C});var r=_(function t(){y(this,t)}),i=_(function t(){y(this,t)}),o="*";function a(t,e){return{type:7,name:t,definitions:e,options:{}}}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:e,timings:t}}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:3,steps:t,options:e}}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:t,options:e}}function l(t){return{type:6,styles:t,offset:null}}function h(t,e,n){return{type:0,name:t,styles:e,options:n}}function f(t){return{type:5,steps:t}}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:t,animation:e,options:n}}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:8,animation:t,options:e}}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:9,options:t}}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:10,animation:t,options:e}}function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:11,selector:t,animation:e,options:n}}function b(t,e){return{type:12,timings:t,animation:e}}function w(t){Promise.resolve(null).then(t)}var x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;y(this,t),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}return _(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var t=this;w(function(){return t._onFinish()})}},{key:"_onStart",value:function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"reset",value:function(){}},{key:"setPosition",value:function(t){this._position=this.totalTime?t*this.totalTime:1}},{key:"getPosition",value:function(){return this.totalTime?this._position/this.totalTime:1}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}}]),t}(),k=function(){function t(e){var n=this;y(this,t),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;var r=0,i=0,o=0,a=this.players.length;0==a?w(function(){return n._onFinish()}):this.players.forEach(function(t){t.onDone(function(){++r==a&&n._onFinish()}),t.onDestroy(function(){++i==a&&n._onDestroy()}),t.onStart(function(){++o==a&&n._onStart()})}),this.totalTime=this.players.reduce(function(t,e){return Math.max(t,e.totalTime)},0)}return _(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach(function(t){return t.init()})}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[])}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(t){return t.play()})}},{key:"pause",value:function(){this.players.forEach(function(t){return t.pause()})}},{key:"restart",value:function(){this.players.forEach(function(t){return t.restart()})}},{key:"finish",value:function(){this._onFinish(),this.players.forEach(function(t){return t.finish()})}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(t){return t.destroy()}),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach(function(t){return t.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(t){var e=t*this.totalTime;this.players.forEach(function(t){var n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}},{key:"getPosition",value:function(){var t=this.players.reduce(function(t,e){return null===t||e.totalTime>t.totalTime?e:t},null);return null!=t?t.getPosition():0}},{key:"beforeDestroy",value:function(){this.players.forEach(function(t){t.beforeDestroy&&t.beforeDestroy()})}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}}]),t}(),C="!"},R1ws:function(t,n,r){"use strict";r.r(n),r.d(n,"ANIMATION_MODULE_TYPE",function(){return je}),r.d(n,"BrowserAnimationsModule",function(){return Be}),r.d(n,"NoopAnimationsModule",function(){return ze}),r.d(n,"\u0275AnimationRenderer",function(){return Oe}),r.d(n,"\u0275AnimationRendererFactory",function(){return Ee}),r.d(n,"\u0275BrowserAnimationBuilder",function(){return be}),r.d(n,"\u0275BrowserAnimationFactory",function(){return we}),r.d(n,"\u0275InjectableAnimationEngine",function(){return Te}),r.d(n,"\u0275angular_packages_platform_browser_animations_animations_a",function(){return Ae}),r.d(n,"\u0275angular_packages_platform_browser_animations_animations_b",function(){return Ie}),r.d(n,"\u0275angular_packages_platform_browser_animations_animations_c",function(){return De}),r.d(n,"\u0275angular_packages_platform_browser_animations_animations_d",function(){return Fe}),r.d(n,"\u0275angular_packages_platform_browser_animations_animations_e",function(){return Ne}),r.d(n,"\u0275angular_packages_platform_browser_animations_animations_f",function(){return Pe});var a=r("fXoL"),s=r("jhN1"),c=r("R0Ic");function h(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function d(t){switch(t.length){case 0:return new c.NoopAnimationPlayer;case 1:return t[0];default:return new c["\u0275AnimationGroupPlayer"](t)}}function p(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=[],s=[],u=-1,l=null;if(r.forEach(function(t){var n=t.offset,r=n==u,h=r&&l||{};Object.keys(t).forEach(function(n){var r=n,s=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,a),s){case c["\u0275PRE_STYLE"]:s=i[n];break;case c.AUTO_STYLE:s=o[n];break;default:s=e.normalizeStyleValue(n,r,s,a)}h[r]=s}),r||s.push(h),l=h,u=n}),a.length){var h="\n - ";throw new Error("Unable to animate due to the following errors:".concat(h).concat(a.join(h)))}return s}function v(t,e,n,r){switch(e){case"start":t.onStart(function(){return r(n&&g(n,"start",t))});break;case"done":t.onDone(function(){return r(n&&g(n,"done",t))});break;case"destroy":t.onDestroy(function(){return r(n&&g(n,"destroy",t))})}}function g(t,e,n){var r=n.totalTime,i=b(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function b(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function w(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function x(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var k=function(t,e){return!1},C=function(t,e){return!1},S=function(t,e,n){return[]},E=h();(E||"undefined"!=typeof Element)&&(k=function(t,e){return t.contains(e)},C=function(){if(E||Element.prototype.matches)return function(t,e){return t.matches(e)};var t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?function(t,n){return e.apply(t,[n])}:C}(),S=function(t,e,n){var r=[];if(n)for(var i=t.querySelectorAll(e),o=0;o<i.length;o++)r.push(i[o]);else{var a=t.querySelector(e);a&&r.push(a)}return r});var P=null,O=!1;function T(t){P||(P=("undefined"!=typeof document?document.body:null)||{},O=!!P.style&&"WebkitAppearance"in P.style);var e=!0;return P.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(!(e=t in P.style)&&O)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in P.style),e}var A=C,I=k,D=S;function M(t){var e={};return Object.keys(t).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}var L,j=((L=function(){function t(){y(this,t)}return _(t,[{key:"validateStyleProperty",value:function(t){return T(t)}},{key:"matchesElement",value:function(t,e){return A(t,e)}},{key:"containsElement",value:function(t,e){return I(t,e)}},{key:"query",value:function(t,e,n){return D(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return n||""}},{key:"animate",value:function(t,e,n,r,i){return new c.NoopAnimationPlayer(n,r)}}]),t}()).\u0275fac=function(t){return new(t||L)},L.\u0275prov=a["\u0275\u0275defineInjectable"]({token:L,factory:L.\u0275fac}),L),R=function(){var t=_(function t(){y(this,t)});return t.NOOP=new j,t}();function F(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:N(parseFloat(e[1]),e[2])}function N(t,e){switch(e){case"s":return 1e3*t;default:return t}}function B(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,o="";if("string"==typeof t){var a=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push('The provided timing value "'.concat(t,'" is invalid.')),{duration:0,delay:0,easing:""};r=N(parseFloat(a[1]),a[2]);var s=a[3];null!=s&&(i=N(parseFloat(s),a[4]));var u=a[5];u&&(o=u)}else r=t;if(!n){var c=!1,l=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),c=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),c=!0),c&&e.splice(l,0,'The provided timing value "'.concat(t,'" is invalid.'))}return{duration:r,delay:i,easing:o}}(t,e,n)}function z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach(function(n){e[n]=t[n]}),e}function V(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var r in t)n[r]=t[r];else z(t,n);return n}function U(t,e,n){return n?e+":"+n+";":""}function q(t){for(var e="",n=0;n<t.style.length;n++){var r=t.style.item(n);e+=U(0,r,t.style.getPropertyValue(r))}for(var i in t.style)t.style.hasOwnProperty(i)&&!i.startsWith("_")&&(e+=U(0,i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[i]));t.setAttribute("style",e)}function H(t,e,n){t.style&&(Object.keys(e).forEach(function(r){var i=$(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),h()&&q(t))}function Z(t,e){t.style&&(Object.keys(e).forEach(function(e){var n=$(e);t.style[n]=""}),h()&&q(t))}function G(t){return Array.isArray(t)?1==t.length?t[0]:Object(c.sequence)(t):t}var W=new RegExp("{{\\s*(.+?)\\s*}}","g");function X(t){var e=[];if("string"==typeof t){for(var n;n=W.exec(t);)e.push(n[1]);W.lastIndex=0}return e}function K(t,e,n){var r=t.toString(),i=r.replace(W,function(t,r){var i=e[r];return e.hasOwnProperty(r)||(n.push("Please provide a value for the animation param ".concat(r)),i=""),i.toString()});return i==r?t:i}function Y(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var J=/-+([a-z0-9])/g;function $(t){return t.replace(J,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[1].toUpperCase()})}function Q(t,e){return 0===t||0===e}function tt(t,e,n){var r=Object.keys(n);if(r.length&&e.length){var i=e[0],o=[];if(r.forEach(function(t){i.hasOwnProperty(t)||o.push(t),i[t]=n[t]}),o.length)for(var a=function(){var n=e[s];o.forEach(function(e){n[e]=nt(t,e)})},s=1;s<e.length;s++)a()}return e}function et(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #".concat(e.type))}}function nt(t,e){return window.getComputedStyle(t)[e]}var rt=new Set(["true","1"]),it=new Set(["false","0"]);function ot(t,e){var n=rt.has(t)||it.has(t),r=rt.has(e)||it.has(e);return function(i,o){var a="*"==t||t==i,s="*"==e||e==o;return!a&&n&&"boolean"==typeof i&&(a=i?rt.has(t):it.has(t)),!s&&r&&"boolean"==typeof o&&(s=o?rt.has(e):it.has(e)),a&&s}}var at=new RegExp("s*:selfs*,?","g");function st(t,e,n){return new ut(t).build(e,n)}var ut=function(){function t(e){y(this,t),this._driver=e}return _(t,[{key:"build",value:function(t,e){var n=new ct(e);return this._resetContextStyleTimingState(n),et(this,G(t),n)}},{key:"_resetContextStyleTimingState",value:function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}},{key:"visitTrigger",value:function(t,e){var n=this,r=e.queryCount=0,i=e.depCount=0,o=[],a=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(function(t){if(n._resetContextStyleTimingState(e),0==t.type){var s=t,u=s.name;u.toString().split(/\s*,\s*/).forEach(function(t){s.name=t,o.push(n.visitState(s,e))}),s.name=u}else if(1==t.type){var c=n.visitTransition(t,e);r+=c.queryCount,i+=c.depCount,a.push(c)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}}},{key:"visitState",value:function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,o=r||{};if(n.styles.forEach(function(t){if(lt(t)){var e=t;Object.keys(e).forEach(function(t){X(e[t]).forEach(function(t){o.hasOwnProperty(t)||i.add(t)})})}}),i.size){var a=Y(i.values());e.errors.push('state("'.concat(t.name,'", ...) must define default values for all the following style substitutions: ').concat(a.join(", ")))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}},{key:"visitTransition",value:function(t,e){e.queryCount=0,e.depCount=0;var n,r,i,o=et(this,G(t.animation),e);return{type:1,matchers:(n=t.expr,r=e.errors,i=[],"string"==typeof n?n.split(/\s*,\s*/).forEach(function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'.concat(t,'" is not supported')),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'.concat(t,'" is not supported')),e;var o=i[1],a=i[2],s=i[3];e.push(ot(o,s)),"<"!=a[0]||"*"==o&&"*"==s||e.push(ot(s,o))}(t,i,r)}):i.push(n),i),animation:o,queryCount:e.queryCount,depCount:e.depCount,options:ht(t.options)}}},{key:"visitSequence",value:function(t,e){var n=this;return{type:2,steps:t.steps.map(function(t){return et(n,t,e)}),options:ht(t.options)}}},{key:"visitGroup",value:function(t,e){var n=this,r=e.currentTime,i=0,o=t.steps.map(function(t){e.currentTime=r;var o=et(n,t,e);return i=Math.max(i,e.currentTime),o});return e.currentTime=i,{type:3,steps:o,options:ht(t.options)}}},{key:"visitAnimate",value:function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return ft(B(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some(function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)})){var i=ft(0,0,"");return i.dynamic=!0,i.strValue=r,i}return ft((n=n||B(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:Object(c.style)({});if(5==i.type)n=this.visitKeyframes(i,e);else{var o=t.styles,a=!1;if(!o){a=!0;var s={};r.easing&&(s.easing=r.easing),o=Object(c.style)(s)}e.currentTime+=r.duration+r.delay;var u=this.visitStyle(o,e);u.isEmptyStep=a,n=u}return e.currentAnimateTimings=null,{type:4,timings:r,style:n,options:null}}},{key:"visitStyle",value:function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}},{key:"_makeStyleAst",value:function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach(function(t){"string"==typeof t?t==c.AUTO_STYLE?n.push(t):e.errors.push("The provided style string value ".concat(t," is not allowed.")):n.push(t)}):n.push(t.styles);var r=!1,i=null;return n.forEach(function(t){if(lt(t)){var e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(var o in e)if(e[o].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}},{key:"_validateStyleAst",value:function(t,e){var n=this,r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(function(t){"string"!=typeof t&&Object.keys(t).forEach(function(r){if(n._driver.validateStyleProperty(r)){var a,s,u,c,l,h=e.collectedStyles[e.currentQuerySelector],f=h[r],d=!0;f&&(o!=i&&o>=f.startTime&&i<=f.endTime&&(e.errors.push('The CSS property "'.concat(r,'" that exists between the times of "').concat(f.startTime,'ms" and "').concat(f.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(o,'ms" and "').concat(i,'ms"')),d=!1),o=f.startTime),d&&(h[r]={startTime:o,endTime:i}),e.options&&(a=t[r],s=e.options,u=e.errors,c=s.params||{},(l=X(a)).length&&l.forEach(function(t){c.hasOwnProperty(t)||u.push("Unable to resolve the local animation param ".concat(t," in the given list of values"))}))}else e.errors.push('The provided animation property "'.concat(r,'" is not a supported CSS property for animations'))})})}},{key:"visitKeyframes",value:function(t,e){var n=this,r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;var i=0,o=[],a=!1,s=!1,u=0,c=t.steps.map(function(t){var r=n._makeStyleAst(t,e),c=null!=r.offset?r.offset:function(t){if("string"==typeof t)return null;var e=null;if(Array.isArray(t))t.forEach(function(t){if(lt(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}});else if(lt(t)&&t.hasOwnProperty("offset")){var n=t;e=parseFloat(n.offset),delete n.offset}return e}(r.styles),l=0;return null!=c&&(i++,l=r.offset=c),s=s||l<0||l>1,a=a||l<u,u=l,o.push(l),r});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),a&&e.errors.push("Please ensure that all keyframe offsets are in order");var l=t.steps.length,h=0;i>0&&i<l?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(l-1));var f=l-1,d=e.currentTime,p=e.currentAnimateTimings,v=p.duration;return c.forEach(function(t,i){var a=h>0?i==f?1:h*i:o[i],s=a*v;e.currentTime=d+p.delay+s,p.duration=s,n._validateStyleAst(t,e),t.offset=a,r.styles.push(t)}),r}},{key:"visitReference",value:function(t,e){return{type:8,animation:et(this,G(t.animation),e),options:ht(t.options)}}},{key:"visitAnimateChild",value:function(t,e){return e.depCount++,{type:9,options:ht(t.options)}}},{key:"visitAnimateRef",value:function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ht(t.options)}}},{key:"visitQuery",value:function(t,n){var r=n.currentQuerySelector,i=t.options||{};n.queryCount++,n.currentQuery=t;var o=e(function(t){var e=!!t.split(/\s*,\s*/).find(function(t){return":self"==t});return e&&(t=t.replace(at,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,function(t){return".ng-trigger-"+t.substr(1)}).replace(/:animating/g,".ng-animating"),e]}(t.selector),2),a=o[0],s=o[1];n.currentQuerySelector=r.length?r+" "+a:a,w(n.collectedStyles,n.currentQuerySelector,{});var u=et(this,G(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:u,originalSelector:t.selector,options:ht(t.options)}}},{key:"visitStagger",value:function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:B(t.timings,e.errors,!0);return{type:12,animation:et(this,G(t.animation),e),timings:n,options:null}}}]),t}(),ct=_(function t(e){y(this,t),this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null});function lt(t){return!Array.isArray(t)&&"object"==typeof t}function ht(t){var e;return t?(t=z(t)).params&&(t.params=(e=t.params)?z(e):null):t={},t}function ft(t,e,n){return{duration:t,delay:e,easing:n}}function dt(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:s}}var pt=function(){function t(){y(this,t),this._map=new Map}return _(t,[{key:"consume",value:function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e}},{key:"append",value:function(t,e){var n,r=this._map.get(t);r||this._map.set(t,r=[]),(n=r).push.apply(n,o(e))}},{key:"has",value:function(t){return this._map.has(t)}},{key:"clear",value:function(){this._map.clear()}}]),t}(),vt=new RegExp(":enter","g"),mt=new RegExp(":leave","g");function yt(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new gt).buildKeyframes(t,e,n,r,i,o,a,s,u,c)}var gt=function(){function t(){y(this,t)}return _(t,[{key:"buildKeyframes",value:function(t,e,n,r,i,o,a,s,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];u=u||new pt;var l=new bt(t,e,u,r,i,c,[]);l.options=s,l.currentTimeline.setStyles([o],null,l.errors,s),et(this,n,l);var h=l.timelines.filter(function(t){return t.containsAnimation()});if(h.length&&Object.keys(a).length){var f=h[h.length-1];f.allowOnlyTimelineStyles()||f.setStyles([a],null,l.errors,s)}return h.length?h.map(function(t){return t.buildKeyframes()}):[dt(e,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(t,e){}},{key:"visitState",value:function(t,e){}},{key:"visitTransition",value:function(t,e){}},{key:"visitAnimateChild",value:function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}},{key:"visitAnimateRef",value:function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}},{key:"_visitSubInstructions",value:function(t,e,n){var r=e.currentTimeline.currentTime,i=null!=n.duration?F(n.duration):null,o=null!=n.delay?F(n.delay):null;return 0!==i&&t.forEach(function(t){var n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}},{key:"visitReference",value:function(t,e){e.updateOptions(t.options,!0),et(this,t.animation,e),e.previousNode=t}},{key:"visitSequence",value:function(t,e){var n=this,r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&((i=e.createSubContext(o)).transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=_t);var a=F(o.delay);i.delayNextStep(a)}t.steps.length&&(t.steps.forEach(function(t){return et(n,t,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}},{key:"visitGroup",value:function(t,e){var n=this,r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?F(t.options.delay):0;t.steps.forEach(function(a){var s=e.createSubContext(t.options);o&&s.delayNextStep(o),et(n,a,s),i=Math.max(i,s.currentTimeline.currentTime),r.push(s.currentTimeline)}),r.forEach(function(t){return e.currentTimeline.mergeTimelineCollectedStyles(t)}),e.transformIntoNewTimeline(i),e.previousNode=t}},{key:"_visitTiming",value:function(t,e){if(t.dynamic){var n=t.strValue;return B(e.params?K(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}},{key:"visitAnimate",value:function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}},{key:"visitStyle",value:function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}},{key:"visitKeyframes",value:function(t,e){var n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(function(t){o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}},{key:"visitQuery",value:function(t,e){var n=this,r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?F(i.delay):0;o&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=_t);var a=r,s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;var u=null;s.forEach(function(r,i){e.currentQueryIndex=i;var s=e.createSubContext(t.options,r);o&&s.delayNextStep(o),r===e.element&&(u=s.currentTimeline),et(n,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(a),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}},{key:"visitStagger",value:function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),a=o*(e.currentQueryTotal-1),s=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":s=a-s;break;case"full":s=n.currentStaggerTime}var u=e.currentTimeline;s&&u.delayNextStep(s);var c=u.currentTime;et(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}]),t}(),_t={},bt=function(){function t(e,n,r,i,o,a,s,u){y(this,t),this._driver=e,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=a,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=_t,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new wt(this._driver,n,0),s.push(this.currentTimeline)}return _(t,[{key:"params",get:function(){return this.options.params}},{key:"updateOptions",value:function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=F(r.duration)),null!=r.delay&&(i.delay=F(r.delay));var o=r.params;if(o){var a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(function(t){e&&a.hasOwnProperty(t)||(a[t]=K(o[t],a,n.errors))})}}}},{key:"_copyOptions",value:function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach(function(t){n[t]=e[t]})}}return t}},{key:"createSubContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n||this.element,o=new t(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}},{key:"transformIntoNewTimeline",value:function(t){return this.previousNode=_t,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new xt(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}},{key:"incrementTime",value:function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}},{key:"delayNextStep",value:function(t){t>0&&this.currentTimeline.delayNextStep(t)}},{key:"invokeQuery",value:function(t,e,n,r,i,a){var s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(vt,"."+this._enterClassName)).replace(mt,"."+this._leaveClassName);var u=this._driver.query(this.element,t,1!=n);0!==n&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),s.push.apply(s,o(u))}return i||0!=s.length||a.push('`query("'.concat(e,'")` returned zero elements. (Use `query("').concat(e,'", { optional: true })` if you wish to allow this.)')),s}}]),t}(),wt=function(){function t(e,n,r,i){y(this,t),this._driver=e,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return _(t,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"delayNextStep",value:function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}},{key:"fork",value:function(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}},{key:"_updateStyle",value:function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(function(t){e._backFill[t]=e._globalTimelineStyles[t]||c.AUTO_STYLE,e._currentKeyframe[t]=c.AUTO_STYLE}),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var o=r&&r.params||{},a=function(t,e){var n,r={};return t.forEach(function(t){"*"===t?(n=n||Object.keys(e)).forEach(function(t){r[t]=c.AUTO_STYLE}):V(t,!1,r)}),r}(t,this._globalTimelineStyles);Object.keys(a).forEach(function(t){var e=K(a[t],o,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:c.AUTO_STYLE),i._updateStyle(t,e)})}},{key:"applyStylesToKeyframe",value:function(){var t=this,e=this._pendingStyles,n=Object.keys(e);0!=n.length&&(this._pendingStyles={},n.forEach(function(n){t._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(function(e){t._currentKeyframe.hasOwnProperty(e)||(t._currentKeyframe[e]=t._localTimelineStyles[e])}))}},{key:"snapshotCurrentStyles",value:function(){var t=this;Object.keys(this._localTimelineStyles).forEach(function(e){var n=t._localTimelineStyles[e];t._pendingStyles[e]=n,t._updateStyle(e,n)})}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"properties",get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t}},{key:"mergeTimelineCollectedStyles",value:function(t){var e=this;Object.keys(t._styleSummary).forEach(function(n){var r=e._styleSummary[n],i=t._styleSummary[n];(!r||i.time>r.time)&&e._updateStyle(n,i.value)})}},{key:"buildKeyframes",value:function(){var t=this;this.applyStylesToKeyframe();var e=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration,i=[];this._keyframes.forEach(function(o,a){var s=V(o,!0);Object.keys(s).forEach(function(t){var r=s[t];r==c["\u0275PRE_STYLE"]?e.add(t):r==c.AUTO_STYLE&&n.add(t)}),r||(s.offset=a/t.duration),i.push(s)});var o=e.size?Y(e.values()):[],a=n.size?Y(n.values()):[];if(r){var s=i[0],u=z(s);s.offset=0,u.offset=1,i=[s,u]}return dt(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)}}]),t}(),xt=function(t){l(n,t);var e=f(n);function n(t,r,i,o,a,s){var u,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return y(this,n),(u=e.call(this,t,r,s.delay)).element=r,u.keyframes=i,u.preStyleProps=o,u.postStyleProps=a,u._stretchStartingKeyframe=c,u.timings={duration:s.duration,delay:s.delay,easing:s.easing},u}return _(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var o=[],a=r+n,s=n/a,u=V(t[0],!1);u.offset=0,o.push(u);var c=V(t[0],!1);c.offset=kt(s),o.push(c);for(var l=t.length-1,h=1;h<=l;h++){var f=V(t[h],!1);f.offset=kt((n+f.offset*r)/a),o.push(f)}r=a,n=0,i="",t=o}return dt(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}]),n}(wt);function kt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,e-1);return Math.round(t*n)/n}var Ct,St,Et=_(function t(){y(this,t)}),Pt=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"normalizePropertyName",value:function(t,e){return $(t)}},{key:"normalizeStyleValue",value:function(t,e,n,r){var i="",o=n.toString().trim();if(Ot[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push("Please provide a CSS unit value for ".concat(t,":").concat(n))}return o+i}}]),n}(Et),Ot=(Ct="width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","),St={},Ct.forEach(function(t){return St[t]=!0}),St);function Tt(t,e,n,r,i,o,a,s,u,c,l,h,f){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:a,timelines:s,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:f}}var At={},It=function(){function t(e,n,r){y(this,t),this._triggerName=e,this.ast=n,this._stateStyles=r}return _(t,[{key:"match",value:function(t,e,n,r){return function(t,e,n,r,i){return t.some(function(t){return t(e,n,r,i)})}(this.ast.matchers,t,e,n,r)}},{key:"buildStyles",value:function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}},{key:"build",value:function(t,e,n,r,i,o,a,s,u,c){var l=[],h=this.ast.options&&this.ast.options.params||At,f=this.buildStyles(n,a&&a.params||At,l),d=s&&s.params||At,p=this.buildStyles(r,d,l),v=new Set,m=new Map,y=new Map,g="void"===r,_={params:Object.assign(Object.assign({},h),d)},b=c?[]:yt(t,e,this.ast.animation,i,o,f,p,_,u,l),x=0;if(b.forEach(function(t){x=Math.max(t.duration+t.delay,x)}),l.length)return Tt(e,this._triggerName,n,r,g,f,p,[],[],m,y,x,l);b.forEach(function(t){var n=t.element,r=w(m,n,{});t.preStyleProps.forEach(function(t){return r[t]=!0});var i=w(y,n,{});t.postStyleProps.forEach(function(t){return i[t]=!0}),n!==e&&v.add(n)});var k=Y(v.values());return Tt(e,this._triggerName,n,r,g,f,p,b,k,m,y,x)}}]),t}(),Dt=function(){function t(e,n){y(this,t),this.styles=e,this.defaultParams=n}return _(t,[{key:"buildStyles",value:function(t,e){var n={},r=z(this.defaultParams);return Object.keys(t).forEach(function(e){var n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(function(t){if("string"!=typeof t){var i=t;Object.keys(i).forEach(function(t){var o=i[t];o.length>1&&(o=K(o,r,e)),n[t]=o})}}),n}}]),t}(),Mt=function(){function t(e,n){var r=this;y(this,t),this.name=e,this.ast=n,this.transitionFactories=[],this.states={},n.states.forEach(function(t){r.states[t.name]=new Dt(t.style,t.options&&t.options.params||{})}),Lt(this.states,"true","1"),Lt(this.states,"false","0"),n.transitions.forEach(function(t){r.transitionFactories.push(new It(e,t,r.states))}),this.fallbackTransition=new It(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},this.states)}return _(t,[{key:"containsQueries",get:function(){return this.ast.queryCount>0}},{key:"matchTransition",value:function(t,e,n,r){return this.transitionFactories.find(function(i){return i.match(t,e,n,r)})||null}},{key:"matchStyles",value:function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}]),t}();function Lt(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var jt=new pt,Rt=function(){function t(e,n,r){y(this,t),this.bodyNode=e,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return _(t,[{key:"register",value:function(t,e){var n=[],r=st(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: ".concat(n.join("\n")));this._animations[t]=r}},{key:"_buildPlayer",value:function(t,e,n){var r=t.element,i=p(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}},{key:"create",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],a=this._animations[t],s=new Map;if(a?(n=yt(this._driver,e,a,"ng-enter","ng-leave",{},{},i,jt,o)).forEach(function(t){var e=w(s,t.element,{});t.postStyleProps.forEach(function(t){return e[t]=null})}):(o.push("The requested animation doesn't exist or has already been destroyed"),n=[]),o.length)throw new Error("Unable to create the animation due to the following errors: ".concat(o.join("\n")));s.forEach(function(t,e){Object.keys(t).forEach(function(n){t[n]=r._driver.computeStyle(e,n,c.AUTO_STYLE)})});var u=d(n.map(function(t){var e=s.get(t.element);return r._buildPlayer(t,{},e)}));return this._playersById[t]=u,u.onDestroy(function(){return r.destroy(t)}),this.players.push(u),u}},{key:"destroy",value:function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}},{key:"_getPlayer",value:function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by ".concat(t));return e}},{key:"listen",value:function(t,e,n,r){var i=b(e,"","","");return v(this._getPlayer(t),n,i,r),function(){}}},{key:"command",value:function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else this.create(t,e,r[0]||{});else this.register(t,r[0])}}]),t}(),Ft=[],Nt={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Bt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";y(this,t),this.namespaceId=n;var r,i=e&&e.hasOwnProperty("value");if(this.value=null!=(r=i?e.value:e)?r:null,i){var o=z(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}return _(t,[{key:"params",get:function(){return this.options.params}},{key:"absorbOptions",value:function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach(function(t){null==n[t]&&(n[t]=e[t])})}}}]),t}(),Vt=new zt("void"),Ut=function(){function t(e,n,r){y(this,t),this.id=e,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Kt(n,this._hostClassName)}return _(t,[{key:"listen",value:function(t,e,n,r){var i,o=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'.concat(n,'" because the animation trigger "').concat(e,"\" doesn't exist!"));if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'.concat(e,'" because the provided event is undefined!'));if("start"!=(i=n)&&"done"!=i)throw new Error('The provided animation trigger event "'.concat(n,'" for the animation trigger "').concat(e,'" is not supported!'));var a=w(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};a.push(s);var u=w(this._engine.statesByElement,t,{});return u.hasOwnProperty(e)||(Kt(t,"ng-trigger"),Kt(t,"ng-trigger-"+e),u[e]=Vt),function(){o._engine.afterFlush(function(){var t=a.indexOf(s);t>=0&&a.splice(t,1),o._triggers[e]||delete u[e]})}}},{key:"register",value:function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}},{key:"_getTrigger",value:function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'.concat(t,'" has not been registered!'));return e}},{key:"trigger",value:function(t,e,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this._getTrigger(e),a=new Ht(this.id,e,t),s=this._engine.statesByElement.get(t);s||(Kt(t,"ng-trigger"),Kt(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));var u=s[e],c=new zt(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),s[e]=c,u||(u=Vt),"void"===c.value||u.value!==c.value){var l=w(this._engine.playersByElement,t,[]);l.forEach(function(t){t.namespaceId==r.id&&t.triggerName==e&&t.queued&&t.destroy()});var h=o.matchTransition(u.value,c.value,t,c.params),f=!1;if(!h){if(!i)return;h=o.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:u,toState:c,player:a,isFallbackTransition:f}),f||(Kt(t,"ng-animate-queued"),a.onStart(function(){Yt(t,"ng-animate-queued")})),a.onDone(function(){var e=r.players.indexOf(a);e>=0&&r.players.splice(e,1);var n=r._engine.playersByElement.get(t);if(n){var i=n.indexOf(a);i>=0&&n.splice(i,1)}}),this.players.push(a),l.push(a),a}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(!e.hasOwnProperty(o)||t[o]!==e[o])return!1}return!0}(u.params,c.params)){var d=[],p=o.matchStyles(u.value,u.params,d),v=o.matchStyles(c.value,c.params,d);d.length?this._engine.reportError(d):this._engine.afterFlush(function(){Z(t,p),H(t,v)})}}},{key:"deregister",value:function(t){var e=this;delete this._triggers[t],this._engine.statesByElement.forEach(function(e,n){delete e[t]}),this._elementListeners.forEach(function(n,r){e._elementListeners.set(r,n.filter(function(e){return e.name!=t}))})}},{key:"clearElementCache",value:function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach(function(t){return t.destroy()}),this._engine.playersByElement.delete(t))}},{key:"_signalRemovalForInnerTriggers",value:function(t,e){var n=this,r=this._engine.driver.query(t,".ng-trigger",!0);r.forEach(function(t){if(!t.__ng_removed){var r=n._engine.fetchNamespacesByElement(t);r.size?r.forEach(function(n){return n.triggerLeaveAnimation(t,e,!1,!0)}):n.clearElementCache(t)}}),this._engine.afterFlushAnimationsDone(function(){return r.forEach(function(t){return n.clearElementCache(t)})})}},{key:"triggerLeaveAnimation",value:function(t,e,n,r){var i=this,o=this._engine.statesByElement.get(t);if(o){var a=[];if(Object.keys(o).forEach(function(e){if(i._triggers[e]){var n=i.trigger(t,e,"void",r);n&&a.push(n)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&d(a).onDone(function(){return i._engine.processLeaveNode(t)}),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(t){var e=this,n=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(n&&r){var i=new Set;n.forEach(function(n){var o=n.name;if(!i.has(o)){i.add(o);var a=e._triggers[o].fallbackTransition,s=r[o]||Vt,u=new zt("void"),c=new Ht(e.id,o,t);e._engine.totalQueuedPlayers++,e._queue.push({element:t,triggerName:o,transition:a,fromState:s,toState:u,player:c,isFallbackTransition:!0})}})}}},{key:"removeNode",value:function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else for(var a=t;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{var s=t.__ng_removed;s&&s!==Nt||(r.afterFlush(function(){return n.clearElementCache(t)}),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}}},{key:"insertNode",value:function(t,e){Kt(t,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(t){var e=this,n=[];return this._queue.forEach(function(r){var i=r.player;if(!i.destroyed){var o=r.element,a=e._elementListeners.get(o);a&&a.forEach(function(e){if(e.name==r.triggerName){var n=b(o,r.triggerName,r.fromState.value,r.toState.value);n._data=t,v(r.player,e.phase,n,e.callback)}}),i.markedForDestroy?e._engine.afterFlush(function(){i.destroy()}):n.push(r)}}),this._queue=[],n.sort(function(t,n){var r=t.transition.ast.depCount,i=n.transition.ast.depCount;return 0==r||0==i?r-i:e._engine.driver.containsElement(t.element,n.element)?1:-1})}},{key:"destroy",value:function(t){this.players.forEach(function(t){return t.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,t)}},{key:"elementContainsData",value:function(t){var e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(function(e){return e.element===t})||e}}]),t}(),qt=function(){function t(e,n,r){y(this,t),this.bodyNode=e,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}return _(t,[{key:"_onRemovalComplete",value:function(t,e){this.onRemovalComplete(t,e)}},{key:"queuedPlayers",get:function(){var t=[];return this._namespaceList.forEach(function(e){e.players.forEach(function(e){e.queued&&t.push(e)})}),t}},{key:"createNamespace",value:function(t,e){var n=new Ut(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}},{key:"_balanceNamespaceList",value:function(t,e){var n=this._namespaceList.length-1;if(n>=0){for(var r=!1,i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}},{key:"register",value:function(t,e){var n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}},{key:"registerTrigger",value:function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}},{key:"destroy",value:function(t,e){var n=this;if(t){var r=this._fetchNamespace(t);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[t];var e=n._namespaceList.indexOf(r);e>=0&&n._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(e)})}}},{key:"_fetchNamespace",value:function(t){return this._namespaceLookup[t]}},{key:"fetchNamespacesByElement",value:function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=n[r[i]].namespaceId;if(o){var a=this._fetchNamespace(o);a&&e.add(a)}}return e}},{key:"trigger",value:function(t,e,n,r){if(Zt(e)){var i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}},{key:"insertNode",value:function(t,e,n,r){if(Zt(e)){var i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){var a=this._fetchNamespace(t);a&&a.insertNode(e,n)}r&&this.collectEnterElement(e)}}},{key:"collectEnterElement",value:function(t){this.collectedEnterElements.push(t)}},{key:"markElementAsDisabled",value:function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Kt(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Yt(t,"ng-animate-disabled"))}},{key:"removeNode",value:function(t,e,n,r){if(Zt(e)){var i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){var o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}},{key:"markElementAsRemoved",value:function(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}},{key:"listen",value:function(t,e,n,r,i){return Zt(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}}},{key:"_buildInstruction",value:function(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}},{key:"destroyInnerAnimations",value:function(t){var e=this,n=this.driver.query(t,".ng-trigger",!0);n.forEach(function(t){return e.destroyActiveAnimationsForElement(t)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,".ng-animating",!0)).forEach(function(t){return e.finishActiveQueriedAnimationOnElement(t)})}},{key:"destroyActiveAnimationsForElement",value:function(t){var e=this.playersByElement.get(t);e&&e.forEach(function(t){t.queued?t.markedForDestroy=!0:t.destroy()})}},{key:"finishActiveQueriedAnimationOnElement",value:function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach(function(t){return t.finish()})}},{key:"whenRenderingDone",value:function(){var t=this;return new Promise(function(e){if(t.players.length)return d(t.players).onDone(function(){return e()});e()})}},{key:"processLeaveNode",value:function(t){var e=this,n=t.__ng_removed;if(n&&n.setForRemoval){if(t.__ng_removed=Nt,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(function(t){e.markElementAsDisabled(t,!1)})}},{key:"flush",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(e,n){return t._balanceNamespaceList(e,n)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)Kt(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{n=this._flushAnimations(i,e)}finally{for(var o=0;o<i.length;o++)i[o]()}}else for(var a=0;a<this.collectedLeaveElements.length;a++)this.processLeaveNode(this.collectedLeaveElements[a]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(t){return t()}),this._flushFns=[],this._whenQuietFns.length){var s=this._whenQuietFns;this._whenQuietFns=[],n.length?d(n).onDone(function(){s.forEach(function(t){return t()})}):s.forEach(function(t){return t()})}}},{key:"reportError",value:function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(t.join("\n")))}},{key:"_flushAnimations",value:function(t,e){var n=this,r=new pt,i=[],a=new Map,s=[],u=new Map,l=new Map,h=new Map,f=new Set;this.disabledNodes.forEach(function(t){f.add(t);for(var e=n.driver.query(t,".ng-animate-queued",!0),r=0;r<e.length;r++)f.add(e[r])});var p=this.bodyNode,v=Array.from(this.statesByElement.keys()),m=Xt(v,this.collectedEnterElements),y=new Map,g=0;m.forEach(function(t,e){var n="ng-enter"+g++;y.set(e,n),t.forEach(function(t){return Kt(t,n)})});for(var _=[],b=new Set,x=new Set,k=0;k<this.collectedLeaveElements.length;k++){var C=this.collectedLeaveElements[k],S=C.__ng_removed;S&&S.setForRemoval&&(_.push(C),b.add(C),S.hasAnimation?this.driver.query(C,".ng-star-inserted",!0).forEach(function(t){return b.add(t)}):x.add(C))}var E=new Map,P=Xt(v,Array.from(b));P.forEach(function(t,e){var n="ng-leave"+g++;E.set(e,n),t.forEach(function(t){return Kt(t,n)})}),t.push(function(){m.forEach(function(t,e){var n=y.get(e);t.forEach(function(t){return Yt(t,n)})}),P.forEach(function(t,e){var n=E.get(e);t.forEach(function(t){return Yt(t,n)})}),_.forEach(function(t){n.processLeaveNode(t)})});for(var O=[],T=[],A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(function(t){var e=t.player,o=t.element;if(O.push(e),n.collectedEnterElements.length){var a=o.__ng_removed;if(a&&a.setForMove)return void e.destroy()}var c=!p||!n.driver.containsElement(p,o),f=E.get(o),d=y.get(o),v=n._buildInstruction(t,r,d,f,c);if(v.errors&&v.errors.length)T.push(v);else{if(c)return e.onStart(function(){return Z(o,v.fromStyles)}),e.onDestroy(function(){return H(o,v.toStyles)}),void i.push(e);if(t.isFallbackTransition)return e.onStart(function(){return Z(o,v.fromStyles)}),e.onDestroy(function(){return H(o,v.toStyles)}),void i.push(e);v.timelines.forEach(function(t){return t.stretchStartingKeyframe=!0}),r.append(o,v.timelines),s.push({instruction:v,player:e,element:o}),v.queriedElements.forEach(function(t){return w(u,t,[]).push(e)}),v.preStyleProps.forEach(function(t,e){var n=Object.keys(t);if(n.length){var r=l.get(e);r||l.set(e,r=new Set),n.forEach(function(t){return r.add(t)})}}),v.postStyleProps.forEach(function(t,e){var n=Object.keys(t),r=h.get(e);r||h.set(e,r=new Set),n.forEach(function(t){return r.add(t)})})}});if(T.length){var I=[];T.forEach(function(t){I.push("@".concat(t.triggerName," has failed due to:\n")),t.errors.forEach(function(t){return I.push("- ".concat(t,"\n"))})}),O.forEach(function(t){return t.destroy()}),this.reportError(I)}var D=new Map,M=new Map;s.forEach(function(t){var e=t.element;r.has(e)&&(M.set(e,e),n._beforeAnimationBuild(t.player.namespaceId,t.instruction,D))}),i.forEach(function(t){var e=t.element;n._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(function(t){w(D,e,[]).push(t),t.destroy()})});var L=_.filter(function(t){return Qt(t,l,h)}),j=new Map;Wt(j,this.driver,x,h,c.AUTO_STYLE).forEach(function(t){Qt(t,l,h)&&L.push(t)});var R=new Map;m.forEach(function(t,e){Wt(R,n.driver,new Set(t),l,c["\u0275PRE_STYLE"])}),L.forEach(function(t){var e=j.get(t),n=R.get(t);j.set(t,Object.assign(Object.assign({},e),n))});var F=[],N=[],B={};s.forEach(function(t){var e=t.element,o=t.player,s=t.instruction;if(r.has(e)){if(f.has(e))return o.onDestroy(function(){return H(e,s.toStyles)}),o.disabled=!0,o.overrideTotalTime(s.totalTime),void i.push(o);var u=B;if(M.size>1){for(var c=e,l=[];c=c.parentNode;){var h=M.get(c);if(h){u=h;break}l.push(c)}l.forEach(function(t){return M.set(t,u)})}var p=n._buildAnimation(o.namespaceId,s,D,a,R,j);if(o.setRealPlayer(p),u===B)F.push(o);else{var v=n.playersByElement.get(u);v&&v.length&&(o.parentPlayer=d(v)),i.push(o)}}else Z(e,s.fromStyles),o.onDestroy(function(){return H(e,s.toStyles)}),N.push(o),f.has(e)&&i.push(o)}),N.forEach(function(t){var e=a.get(t.element);if(e&&e.length){var n=d(e);t.setRealPlayer(n)}}),i.forEach(function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(var z=0;z<_.length;z++){var V=_[z],U=V.__ng_removed;if(Yt(V,"ng-leave"),!U||!U.hasAnimation){var q=[];if(u.size){var G=u.get(V);G&&G.length&&q.push.apply(q,o(G));for(var W=this.driver.query(V,".ng-animating",!0),X=0;X<W.length;X++){var K=u.get(W[X]);K&&K.length&&q.push.apply(q,o(K))}}var Y=q.filter(function(t){return!t.destroyed});Y.length?Jt(this,V,Y):this.processLeaveNode(V)}}return _.length=0,F.forEach(function(t){n.players.push(t),t.onDone(function(){t.destroy();var e=n.players.indexOf(t);n.players.splice(e,1)}),t.play()}),F}},{key:"elementContainsData",value:function(t,e){var n=!1,r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}},{key:"afterFlush",value:function(t){this._flushFns.push(t)}},{key:"afterFlushAnimationsDone",value:function(t){this._whenQuietFns.push(t)}},{key:"_getPreviousPlayers",value:function(t,e,n,r,i){var o=[];if(e){var a=this.playersByQueriedElement.get(t);a&&(o=a)}else{var s=this.playersByElement.get(t);if(s){var u=!i||"void"==i;s.forEach(function(t){t.queued||(u||t.triggerName==r)&&o.push(t)})}}return(n||r)&&(o=o.filter(function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)})),o}},{key:"_beforeAnimationBuild",value:function(t,e,n){var r,o=this,a=e.element,s=e.isRemovalTransition?void 0:t,u=e.isRemovalTransition?void 0:e.triggerName,c=i(e.timelines);try{var l=function(){var t=r.value.element,i=t!==a,c=w(n,t,[]);o._getPreviousPlayers(t,i,s,u,e.toState).forEach(function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),c.push(t)})};for(c.s();!(r=c.n()).done;)l()}catch(h){c.e(h)}finally{c.f()}Z(a,e.fromStyles)}},{key:"_buildAnimation",value:function(t,e,n,r,i,o){var a=this,s=e.triggerName,u=e.element,l=[],h=new Set,f=new Set,v=e.timelines.map(function(e){var d=e.element;h.add(d);var v=d.__ng_removed;if(v&&v.removedBeforeQueried)return new c.NoopAnimationPlayer(e.duration,e.delay);var m,y,g=d!==u,_=(m=(n.get(d)||Ft).map(function(t){return t.getRealPlayer()}),y=[],$t(m,y),y).filter(function(t){return!!t.element&&t.element===d}),b=i.get(d),w=o.get(d),x=p(0,a._normalizer,0,e.keyframes,b,w),k=a._buildPlayer(e,x,_);if(e.subTimeline&&r&&f.add(d),g){var C=new Ht(t,s,d);C.setRealPlayer(k),l.push(C)}return k});l.forEach(function(t){w(a.playersByQueriedElement,t.element,[]).push(t),t.onDone(function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else if(r=t[e]){if(r.length){var o=r.indexOf(n);r.splice(o,1)}0==r.length&&delete t[e]}return r}(a.playersByQueriedElement,t.element,t)})}),h.forEach(function(t){return Kt(t,"ng-animating")});var m=d(v);return m.onDestroy(function(){h.forEach(function(t){return Yt(t,"ng-animating")}),H(u,e.toStyles)}),f.forEach(function(t){w(r,t,[]).push(m)}),m}},{key:"_buildPlayer",value:function(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new c.NoopAnimationPlayer(t.duration,t.delay)}}]),t}(),Ht=function(){function t(e,n,r){y(this,t),this.namespaceId=e,this.triggerName=n,this.element=r,this._player=new c.NoopAnimationPlayer,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return _(t,[{key:"setRealPlayer",value:function(t){var e=this;this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(function(n){e._queuedCallbacks[n].forEach(function(e){return v(t,n,void 0,e)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(t){this.totalTime=t}},{key:"syncPlayerEvents",value:function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart(function(){return n.triggerCallback("start")}),t.onDone(function(){return e.finish()}),t.onDestroy(function(){return e.destroy()})}},{key:"_queueEvent",value:function(t,e){w(this._queuedCallbacks,t,[]).push(e)}},{key:"onDone",value:function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}},{key:"onStart",value:function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}},{key:"onDestroy",value:function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(t){this.queued||this._player.setPosition(t)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)}}]),t}();function Zt(t){return t&&1===t.nodeType}function Gt(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function Wt(t,e,n,r,i){var o=[];n.forEach(function(t){return o.push(Gt(t))});var a=[];r.forEach(function(n,r){var o={};n.forEach(function(t){var n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Bt,a.push(r))}),t.set(r,o)});var s=0;return n.forEach(function(t){return Gt(t,o[s++])}),a}function Xt(t,e){var n=new Map;if(t.forEach(function(t){return n.set(t,[])}),0==e.length)return n;var r=new Set(e),i=new Map;function o(t){if(!t)return 1;var e=i.get(t);if(e)return e;var a=t.parentNode;return e=n.has(a)?a:r.has(a)?1:o(a),i.set(t,e),e}return e.forEach(function(t){var e=o(t);1!==e&&n.get(e).push(t)}),n}function Kt(t,e){if(t.classList)t.classList.add(e);else{var n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Yt(t,e){if(t.classList)t.classList.remove(e);else{var n=t.$$classes;n&&delete n[e]}}function Jt(t,e,n){d(n).onDone(function(){return t.processLeaveNode(e)})}function $t(t,e){for(var n=0;n<t.length;n++){var r=t[n];r instanceof c["\u0275AnimationGroupPlayer"]?$t(r.players,e):e.push(r)}}function Qt(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach(function(t){return i.add(t)}):e.set(t,r),n.delete(t),!0}var te=function(){function t(e,n,r){var i=this;y(this,t),this.bodyNode=e,this._driver=n,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new qt(e,n,r),this._timelineEngine=new Rt(e,n,r),this._transitionEngine.onRemovalComplete=function(t,e){return i.onRemovalComplete(t,e)}}return _(t,[{key:"registerTrigger",value:function(t,e,n,r,i){var o=t+"-"+r,a=this._triggerCache[o];if(!a){var s=[],u=st(this._driver,i,s);if(s.length)throw new Error('The animation trigger "'.concat(r,'" has failed to build due to the following errors:\n - ').concat(s.join("\n - ")));a=function(t,e){return new Mt(t,e)}(r,u),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}},{key:"register",value:function(t,e){this._transitionEngine.register(t,e)}},{key:"destroy",value:function(t,e){this._transitionEngine.destroy(t,e)}},{key:"onInsert",value:function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}},{key:"onRemove",value:function(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}},{key:"disableAnimations",value:function(t,e){this._transitionEngine.markElementAsDisabled(t,e)}},{key:"process",value:function(t,n,r,i){if("@"==r.charAt(0)){var o=e(x(r),2),a=o[0],s=o[1];this._timelineEngine.command(a,n,s,i)}else this._transitionEngine.trigger(t,n,r,i)}},{key:"listen",value:function(t,n,r,i,o){if("@"==r.charAt(0)){var a=e(x(r),2),s=a[0],u=a[1];return this._timelineEngine.listen(s,n,u,o)}return this._transitionEngine.listen(t,n,r,i,o)}},{key:"flush",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(t)}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}}]),t}();function ee(t,e){var n=null,r=null;return Array.isArray(e)&&e.length?(n=re(e[0]),e.length>1&&(r=re(e[e.length-1]))):e&&(n=re(e)),n||r?new ne(t,n,r):null}var ne=function(){var t=function(){function t(e,n,r){y(this,t),this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;var i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}return _(t,[{key:"start",value:function(){this._state<1&&(this._startStyles&&H(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(H(this._element,this._initialStyles),this._endStyles&&(H(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Z(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Z(this._element,this._endStyles),this._endStyles=null),H(this._element,this._initialStyles),this._state=3)}}]),t}();return t.initialStylesByElement=new WeakMap,t}();function re(t){for(var e=null,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];ie(i)&&((e=e||{})[i]=t[i])}return e}function ie(t){return"display"===t||"position"===t}var oe=function(){function t(e,n,r,i,o,a,s){var u=this;y(this,t),this._element=e,this._name=n,this._duration=r,this._delay=i,this._easing=o,this._fillMode=a,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return u._handleCallback(t)}}return _(t,[{key:"apply",value:function(){var t,e,n;t=this._element,e="".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name),(n=he(t,"").trim()).length&&(function(t,e){for(var n=0;n<t.length;n++)t.charAt(n)}(n),e="".concat(n,", ").concat(e)),le(t,"",e),ce(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){ae(this._element,this._name,"paused")}},{key:"resume",value:function(){ae(this._element,this._name,"running")}},{key:"setPosition",value:function(t){var e=se(this._element,this._name);this._position=t*this._duration,le(this._element,"Delay","-".concat(this._position,"ms"),e)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),ce(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){var t,e,n,r;this._destroyed||(this._destroyed=!0,this.finish(),t=this._element,e=this._name,n=he(t,"").split(","),(r=ue(n,e))>=0&&(n.splice(r,1),le(t,"",n.join(","))))}}]),t}();function ae(t,e,n){le(t,"PlayState",n,se(t,e))}function se(t,e){var n=he(t,"");return n.indexOf(",")>0?ue(n.split(","),e):ue([n],e)}function ue(t,e){for(var n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function ce(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function le(t,e,n,r){var i="animation"+e;if(null!=r){var o=t.style[i];if(o.length){var a=o.split(",");a[r]=n,n=a.join(",")}}t.style[i]=n}function he(t,e){return t.style["animation"+e]||""}var fe=function(){function t(e,n,r,i,o,a,s,u){y(this,t),this.element=e,this.keyframes=n,this.animationName=r,this._duration=i,this._delay=o,this._finalStyles=s,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=a||"linear",this.totalTime=i+o,this._buildStyler()}return _(t,[{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"destroy",value:function(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(t){this._styler.setPosition(t)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var t=this;this._styler=new oe(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return t.finish()})}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}},{key:"beforeDestroy",value:function(){var t=this;this.init();var e={};if(this.hasStarted()){var n=this._state>=3;Object.keys(this._finalStyles).forEach(function(r){"offset"!=r&&(e[r]=n?t._finalStyles[r]:nt(t.element,r))})}this.currentSnapshot=e}}]),t}(),de=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this)).element=t,i._startingStyles={},i.__initialized=!1,i._styles=M(r),i}return _(n,[{key:"init",value:function(){var t=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(function(e){t._startingStyles[e]=t.element.style[e]}),u(m(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var t=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(function(e){return t.element.style.setProperty(e,t._styles[e])}),u(m(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var t=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach(function(e){var n=t._startingStyles[e];n?t.element.style.setProperty(e,n):t.element.style.removeProperty(e)}),this._startingStyles=null,u(m(n.prototype),"destroy",this).call(this))}}]),n}(c.NoopAnimationPlayer),pe=function(){function t(){y(this,t),this._count=0,this._head=document.querySelector("head")}return _(t,[{key:"validateStyleProperty",value:function(t){return T(t)}},{key:"matchesElement",value:function(t,e){return A(t,e)}},{key:"containsElement",value:function(t,e){return I(t,e)}},{key:"query",value:function(t,e,n){return D(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"buildKeyframeElement",value:function(t,e,n){n=n.map(function(t){return M(t)});var r="@keyframes ".concat(e," {\n"),i="";n.forEach(function(t){i=" ";var e=parseFloat(t.offset);r+="".concat(i).concat(100*e,"% {\n"),i+=" ",Object.keys(t).forEach(function(e){var n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+="".concat(i,"animation-timing-function: ").concat(n,";\n")));default:return void(r+="".concat(i).concat(e,": ").concat(n,";\n"))}}),r+="".concat(i,"}\n")}),r+="}\n";var o=document.createElement("style");return o.textContent=r,o}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=o.filter(function(t){return t instanceof fe}),s={};Q(n,r)&&a.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return s[t]=e[t]})});var u=function(t){var e={};return t&&(Array.isArray(t)?t:[t]).forEach(function(t){Object.keys(t).forEach(function(n){"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=tt(t,e,s));if(0==n)return new de(t,u);var c="gen_css_kf_"+this._count++,l=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(l);var h=ee(t,e),f=new fe(t,e,c,n,r,i,u,h);return f.onDestroy(function(){var t;(t=l).parentNode.removeChild(t)}),f}}]),t}(),ve=function(){function t(e,n,r,i){y(this,t),this.element=e,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return _(t,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",function(){return t._onFinish()})}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(t,e,n){return t.animate(e,n)}},{key:"onStart",value:function(t){this._onStartFns.push(t)}},{key:"onDone",value:function(t){this._onDoneFns.push(t)}},{key:"onDestroy",value:function(t){this._onDestroyFns.push(t)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])}},{key:"setPosition",value:function(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"totalTime",get:function(){return this._delay+this._duration}},{key:"beforeDestroy",value:function(){var t=this,e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(n){"offset"!=n&&(e[n]=t._finished?t._finalKeyframe[n]:nt(t.element,n))}),this.currentSnapshot=e}},{key:"triggerCallback",value:function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0}}]),t}(),me=function(){function t(){y(this,t),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ye().toString()),this._cssKeyframesDriver=new pe}return _(t,[{key:"validateStyleProperty",value:function(t){return T(t)}},{key:"matchesElement",value:function(t,e){return A(t,e)}},{key:"containsElement",value:function(t,e){return I(t,e)}},{key:"query",value:function(t,e,n){return D(t,e,n)}},{key:"computeStyle",value:function(t,e,n){return window.getComputedStyle(t)[e]}},{key:"overrideWebAnimationsSupport",value:function(t){this._isNativeImpl=t}},{key:"animate",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;if(!a&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);var s={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(s.easing=i);var u={},c=o.filter(function(t){return t instanceof ve});Q(n,r)&&c.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return u[t]=e[t]})});var l=ee(t,e=tt(t,e=e.map(function(t){return V(t,!1)}),u));return new ve(t,e,s,l)}}]),t}();function ye(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}var ge,_e=r("ofXK"),be=((ge=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this))._nextAnimationId=0,i._renderer=t.createRenderer(r.body,{id:"0",encapsulation:a.ViewEncapsulation.None,styles:[],data:{animation:[]}}),i}return _(n,[{key:"build",value:function(t){var e=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(t)?Object(c.sequence)(t):t;return ke(this._renderer,null,e,"register",[n]),new we(e,this._renderer)}}]),n}(c.AnimationBuilder)).\u0275fac=function(t){return new(t||ge)(a["\u0275\u0275inject"](a.RendererFactory2),a["\u0275\u0275inject"](_e.DOCUMENT))},ge.\u0275prov=a["\u0275\u0275defineInjectable"]({token:ge,factory:ge.\u0275fac}),ge),we=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this))._id=t,i._renderer=r,i}return _(n,[{key:"create",value:function(t,e){return new xe(this._id,t,e||{},this._renderer)}}]),n}(c.AnimationFactory),xe=function(){function t(e,n,r,i){y(this,t),this.id=e,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return _(t,[{key:"_listen",value:function(t,e){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(t),e)}},{key:"_command",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ke(this._renderer,this.element,this.id,t,n)}},{key:"onDone",value:function(t){this._listen("done",t)}},{key:"onStart",value:function(t){this._listen("start",t)}},{key:"onDestroy",value:function(t){this._listen("destroy",t)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset")}},{key:"setPosition",value:function(t){this._command("setPosition",t)}},{key:"getPosition",value:function(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}]),t}();function ke(t,e,n,r,i){return t.setProperty(e,"@@".concat(n,":").concat(r),i)}var Ce,Se,Ee=((Ce=function(){function t(e,n,r){y(this,t),this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=function(t,e){e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}return _(t,[{key:"createRenderer",value:function(t,e){var n=this,r=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){var i=this._rendererCache.get(r);return i||(i=new Pe("",r,this.engine),this._rendererCache.set(r,i)),i}var o=e.id,a=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(a,t),e.data.animation.forEach(function e(r){Array.isArray(r)?r.forEach(e):n.engine.registerTrigger(o,a,t,r.name,r)}),new Oe(this,a,r,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var t=this;this.promise.then(function(){t._microtaskId++})}},{key:"scheduleListenerCallback",value:function(t,n,r){var i=this;t>=0&&t<this._microtaskId?this._zone.run(function(){return n(r)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){i._zone.run(function(){i._animationCallbacksBuffer.forEach(function(t){var n=e(t,2);(0,n[0])(n[1])}),i._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}},{key:"end",value:function(){var t=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){t._scheduleCountTask(),t.engine.flush(t._microtaskId)}),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),t}()).\u0275fac=function(t){return new(t||Ce)(a["\u0275\u0275inject"](a.RendererFactory2),a["\u0275\u0275inject"](te),a["\u0275\u0275inject"](a.NgZone))},Ce.\u0275prov=a["\u0275\u0275defineInjectable"]({token:Ce,factory:Ce.\u0275fac}),Ce),Pe=function(){function t(e,n,r){y(this,t),this.namespaceId=e,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(t){return n.destroyNode(t)}:null}return _(t,[{key:"data",get:function(){return this.delegate.data}},{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(t,e){return this.delegate.createElement(t,e)}},{key:"createComment",value:function(t){return this.delegate.createComment(t)}},{key:"createText",value:function(t){return this.delegate.createText(t)}},{key:"appendChild",value:function(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}},{key:"insertBefore",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}},{key:"removeChild",value:function(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}},{key:"selectRootElement",value:function(t,e){return this.delegate.selectRootElement(t,e)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setAttribute",value:function(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}},{key:"removeAttribute",value:function(t,e,n){this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,r){this.delegate.setStyle(t,e,n,r)}},{key:"removeStyle",value:function(t,e,n){this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}},{key:"setValue",value:function(t,e){this.delegate.setValue(t,e)}},{key:"listen",value:function(t,e,n){return this.delegate.listen(t,e,n)}},{key:"disableAnimations",value:function(t,e){this.engine.disableAnimations(t,e)}}]),t}(),Oe=function(t){l(r,t);var n=f(r);function r(t,e,i,o){var a;return y(this,r),(a=n.call(this,e,i,o)).factory=t,a.namespaceId=e,a}return _(r,[{key:"setProperty",value:function(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,n,r){var i,o,a=this;if("@"==n.charAt(0)){var s,u=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t),c=n.substr(1),l="";return"@"!=c.charAt(0)&&(o=(i=c).indexOf("."),c=(s=e([i.substring(0,o),i.substr(o+1)],2))[0],l=s[1]),this.engine.listen(this.namespaceId,u,c,l,function(t){a.factory.scheduleListenerCallback(t._data||-1,r,t)})}return this.delegate.listen(t,n,r)}}]),r}(Pe),Te=((Se=function(t){l(n,t);var e=f(n);function n(t,r,i){return y(this,n),e.call(this,t.body,r,i)}return _(n)}(te)).\u0275fac=function(t){return new(t||Se)(a["\u0275\u0275inject"](_e.DOCUMENT),a["\u0275\u0275inject"](R),a["\u0275\u0275inject"](Et))},Se.\u0275prov=a["\u0275\u0275defineInjectable"]({token:Se,factory:Se.\u0275fac}),Se);function Ae(){return"function"==typeof ye()?new me:new pe}function Ie(){return new Pt}function De(t,e,n){return new Ee(t,e,n)}var Me,Le,je=new a.InjectionToken("AnimationModuleType"),Re=[{provide:c.AnimationBuilder,useClass:be},{provide:Et,useFactory:Ie},{provide:te,useClass:Te},{provide:a.RendererFactory2,useFactory:De,deps:[s["\u0275DomRendererFactory2"],te,a.NgZone]}],Fe=[{provide:R,useFactory:Ae},{provide:je,useValue:"BrowserAnimations"}].concat(Re),Ne=[{provide:R,useClass:j},{provide:je,useValue:"NoopAnimations"}].concat(Re),Be=((Le=_(function t(){y(this,t)})).\u0275fac=function(t){return new(t||Le)},Le.\u0275mod=a["\u0275\u0275defineNgModule"]({type:Le}),Le.\u0275inj=a["\u0275\u0275defineInjector"]({providers:Fe,imports:[s.BrowserModule]}),Le),ze=((Me=_(function t(){y(this,t)})).\u0275fac=function(t){return new(t||Me)},Me.\u0275mod=a["\u0275\u0275defineNgModule"]({type:Me}),Me.\u0275inj=a["\u0275\u0275defineInjector"]({providers:Ne,imports:[s.BrowserModule]}),Me)},RMdn:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Mercator=void 0;var a=o(n("fXoL")),s=function(){function t(){var e=this;y(this,t),this.getYpixel=function(t,n){var r=e.Pi,i=Math.tan(r/4+e.toRad(t)/2);return e.dy=128/r*Math.pow(2,n)*(r-Math.log(i)),Math.round(e.dy)},this.getXpixel=function(t,n){var r=e.Pi;return 128/r*Math.pow(2,n)*(e.toRad(t)+r)},this.Pi=Math.PI}return _(t,[{key:"toRad",value:function(t){return t*Math.PI/180}}]),t}();e.Mercator=s,s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=a.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac})},RVpw:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.TimerService=e.Timer=void 0;var a=o(n("fXoL"));e.Timer=function(){function t(e){y(this,t),this.date=new Date(e)}return _(t,[{key:"update",value:function(t){this.date=new Date(t)}},{key:"tick",value:function(t){var e=this.date;return this.date=new Date(t),this.date.getTime()-e.getTime()}}]),t}();var s=function(){function t(){y(this,t)}return _(t,[{key:"elapse",value:function(t){var e=(new Date).getTime()-new Date(t).getTime();e/=1e3;var n=Math.round(e%60);e=Math.floor(e/60);var r=Math.round(e%60);e=Math.floor(e/60);var i=Math.round(e%24),o="";return 0<(e=Math.floor(e/24))&&(o+=e+"\u0434 "),0<i&&(o+=i+"\u0447 "),0<r&&(o+=r+"min "),o+=n+"s"}}]),t}();e.TimerService=s,s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=a.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac})},SMZp:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MyMarkerListComponent=void 0,n("fXoL"),n("UFmM"),n("mr0/");var a=o(n("fXoL")),s=o(n("UFmM")),u=o(n("mr0/")),c=o(n("ofXK")),l=o(n("Mttb"));function h(t,e){if(1&t){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",6),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(n);var t=e.$implicit;return a.\u0275\u0275nextContext().onMarkerClick(t)}),a.\u0275\u0275element(1,"div",7),a.\u0275\u0275elementStart(2,"div",4),a.\u0275\u0275element(3,"menu-list-component",8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit,i=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("innerHtml",r.scope.title||"&nbsp;",a.\u0275\u0275sanitizeHtml),a.\u0275\u0275advance(2),a.\u0275\u0275property("menu",i.menu)("item",r)}}var f=function(t){return{active:t}},d=function(){function t(e,n){y(this,t),this.myMarkerService=e,this.mapService=n,this.active=!1,this.omMapClick=this.omMapClick.bind(this),this.menu=[{text:"remove",action:function(t){return console.log(t),t.remove(),!0}}]}return _(t,[{key:"onMarkerClick",value:function(t){t.click()}},{key:"onAddActive",value:function(t){this.active=!0,this.mapService.map.off("click",this.omMapClick),this.mapService.map.on("click",this.omMapClick)}},{key:"onClose",value:function(){this.myMarkerService.hide()}},{key:"omMapClick",value:function(t){this.mapService.map.off("click",this.omMapClick),this.active=!1,this.myMarkerService.createByClick(t.lngLat,{title:"",id:null})}},{key:"ngOnDestroy",value:function(){this.mapService.map.off("click",this.omMapClick)}}]),t}();e.MyMarkerListComponent=d,d.\u0275fac=function(t){return new(t||d)(a.\u0275\u0275directiveInject(s.MyMarkerService),a.\u0275\u0275directiveInject(u.MapService))},d.\u0275cmp=a.\u0275\u0275defineComponent({type:d,selectors:[["marker-list-component"]],decls:8,vars:4,consts:[[1,"relative"],[1,"close",3,"click"],["class","row flex marker-row vertical-center",3,"click",4,"ngFor","ngForOf"],[1,"row","flex"],[1,"flex-cell"],[1,"button","primary",3,"ngClass","click"],[1,"row","flex","marker-row","vertical-center",3,"click"],[1,"flex-cell","marker-cell",3,"innerHtml"],[3,"menu","item"]],template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275listener("click",function(){return e.onClose()}),a.\u0275\u0275text(2,"\xd7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,h,4,3,"div",2),a.\u0275\u0275elementStart(4,"div",3),a.\u0275\u0275elementStart(5,"div",4),a.\u0275\u0275elementStart(6,"div",5),a.\u0275\u0275listener("click",function(t){return e.onAddActive(t)}),a.\u0275\u0275text(7," \u0414\u043e\u0431\u0430\u0432\u0438\u0438\u0442\u044c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&t&&(a.\u0275\u0275advance(3),a.\u0275\u0275property("ngForOf",e.myMarkerService.markerList),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(2,f,e.active)))},directives:[c.NgForOf,c.NgClass,l.MenuListComponent],styles:["[_nghost-%COMP%]{display:block;position:absolute;z-index:2;top:40px;left:0;background:linear-gradient(90deg,hsla(0,0%,100%,.8) 0,hsla(0,0%,100%,.7) 70%,hsla(0,0%,100%,0));padding:15px;min-width:200px}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;cursor:pointer;padding:15px;font-size:20px;font:30px/15px bold}.marker-row[_ngcontent-%COMP%]{justify-content:space-between}.marker-cell[_ngcontent-%COMP%]{width:100%;border-bottom:1px solid #cfdcef}.row[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),a=n("kJWO"),s=n("I55L"),u=n("c2HN"),c=n("XoHu"),l=function(t){if(t&&"function"==typeof t[a.a])return l=t,function(t){var e=l[a.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(s.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,i.a),t};if(t&&"function"==typeof t[o.a])return e=t,function(t){for(var n=e[o.a]();;){var r=void 0;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t};var e,n,l,h=Object(c.a)(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(h," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},SxV6:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("sVev"),i=n("pLZG"),o=n("IzEk"),a=n("xbPD"),s=n("XDbj"),u=n("SpAZ");function c(t,e){var n=arguments.length>=2;return function(c){return c.pipe(t?Object(i.a)(function(e,n){return t(e,n,c)}):u.a,Object(o.a)(1),n?Object(a.a)(e):Object(s.a)(function(){return new r.a}))}}},Sy1n:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.AppComponent=e.NavigationHistory=void 0;var a=n("tyNb"),s=(n("BD2p"),n("+ZYu"),n("UFmM"),o(n("fXoL"))),u=o(n("tyNb")),c=o(n("BD2p")),l=o(n("+ZYu")),h=o(n("UFmM")),f=o(n("YzCF")),d=o(n("ofXK")),p=o(n("HkUL")),v=o(n("SMZp"));function m(t,e){1&t&&s.\u0275\u0275element(0,"track-list")}function g(t,e){1&t&&s.\u0275\u0275element(0,"marker-list-component")}var b=function(){function t(){y(this,t),this.history=[]}return _(t,[{key:"is",get:function(){return 1<this.history.length}}]),t}();e.NavigationHistory=b,b.\u0275fac=function(t){return new(t||b)},b.\u0275prov=s.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac});var w=function(){function t(e,n,r,i,o){y(this,t),this.router=e,this.menuService=r,this.track=i,this.myMarkerService=o,this.title="Tour of Heroes",this.router.events.subscribe(function(t){t instanceof a.NavigationEnd&&n.history.push(t.url)}),this.trackList=i.trackList,this.markerList=o.markerList}return _(t,[{key:"ngOnInit",value:function(){}}]),t}();e.AppComponent=w,w.\u0275fac=function(t){return new(t||w)(s.\u0275\u0275directiveInject(u.Router),s.\u0275\u0275directiveInject(b),s.\u0275\u0275directiveInject(c.MenuService),s.\u0275\u0275directiveInject(l.TrackService),s.\u0275\u0275directiveInject(h.MyMarkerService))},w.\u0275cmp=s.\u0275\u0275defineComponent({type:w,selectors:[["my-app"]],decls:4,vars:2,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(s.\u0275\u0275element(0,"toast-component"),s.\u0275\u0275element(1,"router-outlet"),s.\u0275\u0275template(2,m,1,0,"track-list",0),s.\u0275\u0275template(3,g,1,0,"marker-list-component",0)),2&t&&(s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",e.trackList.length),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",e.myMarkerService.isShow))},directives:[f.ToastComponent,u.RouterOutlet,d.NgIf,p.TrackList,v.MyMarkerListComponent],styles:["[_nghost-%COMP%]{display:block;position:relative;margin:0;padding:0;width:100%;height:100%}a[_ngcontent-%COMP%]{margin:10px}"]})},TECC:function(t,n,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(n,"__esModule",{value:!0}),n.GtgbcComponent=void 0;var s=r("9lQw"),u=(r("mr0/"),r("tyNb"),r("1ymD"),r("JLh1")),c=r("q7Eg"),l=a(r("fXoL")),h=a(r("mr0/")),f=a(r("tyNb")),d=a(r("1ymD")),p=a(r("3Pt+")),v=function(t){return t[t.GTSTR=0]="GTSTR",t[t.GTLBS=1]="GTLBS",t[t.GTGSM=2]="GTGSM",t}({}),m=function(){function t(e,n,r,i){y(this,t),this.mapService=e,this.router=n,this.route=r,this.gtgbcService=i,this.gtgbc=null,this.areaList=[],this.layerId=this.getLayerId("mobile-cell-")}return _(t,[{key:"onClose",value:function(){this.router.navigate(["/auth","map"])}},{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe(function(e){if(e.gtgbc){t.gtgbc=e.gtgbc;var n=t.messageType=t.getType(t.gtgbc);if(n===v.GTLBS||n===v.GTGSM){var r=t.convertToMobileCell();t.clearData(),t.gtgbcService.getLatLng(r).then(function(e){t.createStations(e)}).catch(function(t){console.error(t)})}else if(n===v.GTSTR){t.clearData();var i=t.convertToLngLat(t.gtgbc);t.createStations([i])}}})}},{key:"getType",value:function(t){switch(!0){case!t:case"string"!=typeof t:return null;case!!t.match(/^([\s]+)?\+?RESP:GTSTR,\d+,\d+,.+/):return this.messageTypeString="GTSTR",v.GTSTR;case!!t.match(/^([\s]+)?\+?RESP:GTLBS,\d+,\d+,.+/):return this.messageTypeString="GTLBS",v.GTLBS;case!!t.match(/^([\s]+)?\+?RESP:GTGSM,\d+,\d+,.+/):return this.messageTypeString="GTGSM",v.GTGSM;default:return null}}},{key:"createStations",value:function(t){var e=this;this.mapService.onLoad.then(function(n){e.map=n;var r=e.getBouds(t),i=r.bounds,o=r.max;i?n.fitBounds([[i[0].lng,i[0].lat],[i[1].lng,i[1].lat]],{padding:{top:100,bottom:100,left:100,right:100}}):e.map.panTo([t[0].lng,t[0].lat]),t.forEach(function(t){e.areaList.push(e.createArea(Object.assign({},Object.assign({},t),{radius:o})))}),e.drawPoints(t)})}},{key:"drawPoints",value:function(t){var e=this.getData(t),n=this.map,r=this.layerId;n.addSource(r,{type:"geojson",data:e}),n.addLayer({id:r,type:"circle",paint:{"circle-color":{property:"color",stops:[["#ff0000","#ff0000"]],type:"categorical"},"circle-radius":8},layout:{},source:r}),this.centerPoints={points:t,remove:function(){n.removeLayer(r),n.removeSource(r)}}}},{key:"getBouds",value:function(t){var e=[];if(t&&1<t.length){for(var n=1,r=0;r<t.length-1;r++){for(var i=n;i<t.length;i++)e.push([r,i]);n++}var o=[],a=0,s={lng:0,lat:0},c={lng:0,lat:0};return e.forEach(function(e){var n=t[e[0]],r=t[e[1]],i=u.distance([n.lng,n.lat],[r.lng,r.lat]);o.push({p1:n,p2:r,dist:i});var l=n.lng<r.lng?n.lng:r.lng;s.lng=s.lng||l,l<s.lng&&(s.lng=l);var h=n.lat<r.lat?n.lat:r.lat;s.lat=s.lat||h,h<s.lat&&(s.lat=h);var f=n.lng<r.lng?r.lng:n.lng;c.lng=c.lng||f,c.lng<f&&(c.lng=f);var d=n.lat<r.lat?r.lat:n.lat;c.lat=c.lat||d,c.lat<d&&(c.lat=d),a<i&&(a=i)}),{max:a,bounds:[{lng:s.lng,lat:s.lat},{lng:c.lng,lat:c.lat}]}}return{max:null,bounds:null}}},{key:"createArea",value:function(t){var n=this.getLayerId("mobile-cell-"),r=t.radius||.2,i=this.map;function o(t,e){for(var n,r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,a=t[1],s=t[0],u=e,c=[],l=u/(111.32*Math.cos(a*Math.PI/180)),h=u/110.574,f=0;f<o;f++)n=f/o*(2*Math.PI),r=l*Math.cos(n),i=h*Math.sin(n),c.push([s+r,a+i]);return c.push(c[0]),{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[c]}}]}}return this.map.addSource(n,{type:"geojson",data:o([t.lng,t.lat],r)}),this.map.addLayer({id:n,type:"fill",source:n,layout:{},paint:{"fill-color":"#ff0047","fill-opacity":.1}}),{id:t.id||null,layerId:n,lng:t.lng,lat:t.lat,radius:r,update:function(t,r){var a=e(t,2),s=a[0],u=a[1];return this.lng=s,this.lat=u,i.getSource(n).setData(o([s,u],r)),this},remove:function(){return i.removeLayer(n),i.removeSource(n),this}}}},{key:"getData",value:function(t){return{type:"FeatureCollection",features:(e=[],t.forEach(function(t,n){e.push({properties:{color:"#ff0000",point:t,id:t.id},type:"Feature",geometry:{type:"Point",coordinates:[t.lng,t.lat]}})}),e)};var e}},{key:"gtgbcOnChange",value:function(){}},{key:"onApplyClick",value:function(){this.router.navigate(["/auth","map","gtgbc",this.gtgbc])}},{key:"convertToLngLat",value:function(t){var e=this.gtgbc.split(",");return e.splice(0,12),new c.LngLat(Number(e[1]),Number(e[2]))}},{key:"convertToMobileCell",value:function(){var t=this.gtgbc.split(","),e=null;if(this.messageType===v.GTLBS){var n=t.splice(0,12);e=n[10]}if(this.messageType===v.GTGSM){var r=t.splice(0,4);e=r[2]}for(var i=[];t.length;)i.push(t.splice(0,6));return i.filter(function(t){return t[4]}).map(function(t){return{mcc:parseInt(t[0],10),mnc:parseInt(t[1],10),lac:parseInt(t[2],16),cellId:parseInt(t[3],16),deviceId:e}})}},{key:"transformToView",value:function(){var t=this.gtgbc?this.gtgbc.split(","):[];return this.cut(t)}},{key:"cut",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(t.length){var r=t.slice(0,e).join(",");return r.length<60&&e<t.length?this.cut(t,++e,n):(t.splice(0,e),n=n.concat(n.length?", "+r:r),t.length?this.cut(t,1,n):n)}return n}},{key:"getLayerId",value:function(e){var n=(e=e||"")+Math.round(0+1e4*Math.random()).toLocaleString();return-1<t.layerIds.indexOf(n)?this.getLayerId(e):(t.layerIds.push(n),n)}},{key:"clearData",value:function(){this.centerPoints&&this.centerPoints.remove(),this.areaList&&this.areaList.forEach(function(t){t&&t.remove()}),this.areaList.length=0}},{key:"ngOnDestroy",value:function(){this.clearData()}}]),t}();n.GtgbcComponent=m,m.layerIds=[],m.\u0275fac=function(t){return new(t||m)(l.\u0275\u0275directiveInject(h.MapService),l.\u0275\u0275directiveInject(f.Router),l.\u0275\u0275directiveInject(f.ActivatedRoute),l.\u0275\u0275directiveInject(d.GtgbcService))},m.\u0275cmp=l.\u0275\u0275defineComponent({type:m,selectors:[["ng-component"]],decls:14,vars:2,consts:[[1,"content"],[1,"close",3,"click"],[1,"row"],[1,"title-row"],[1,"scroll"],[3,"ngModel","ngModelChange"],[1,"row","flex","flex-end"],[1,"button","primary",3,"click"]],template:function(t,e){1&t&&(l.\u0275\u0275elementStart(0,"div",0),l.\u0275\u0275elementStart(1,"div"),l.\u0275\u0275elementStart(2,"div",1),l.\u0275\u0275listener("click",function(){return e.onClose()}),l.\u0275\u0275text(3,"\xd7"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(4,"div",2),l.\u0275\u0275elementStart(5,"div",3),l.\u0275\u0275elementStart(6,"p"),l.\u0275\u0275text(7),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(8,"div",4),l.\u0275\u0275elementStart(9,"div",2),l.\u0275\u0275elementStart(10,"textarea",5),l.\u0275\u0275listener("ngModelChange",function(t){return e.gtgbc=t})("ngModelChange",function(){return e.gtgbcOnChange()}),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(11,"div",6),l.\u0275\u0275elementStart(12,"div",7),l.\u0275\u0275listener("click",function(){return e.onApplyClick()}),l.\u0275\u0275text(13,"Apply"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()),2&t&&(l.\u0275\u0275advance(7),l.\u0275\u0275textInterpolate1("Response type: ",e.messageTypeString,""),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngModel",e.gtgbc))},directives:[p.DefaultValueAccessor,p.NgControlStatus,p.NgModel],styles:["[_nghost-%COMP%]{position:absolute;left:0;top:0;z-index:5;width:100%}.content[_ngcontent-%COMP%]{position:absolute;background:hsla(0,0%,100%,.9);width:600px;margin-left:-300px;padding:0;left:50%;top:calc(100% + 10px);box-shadow:1px 1px 3px rgba(0,0,0,.4)}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:30px}.content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:4px 8px;border:none;border-bottom:2px solid #b2b4b7;border-left:1px solid #b2b4b7;min-height:80px}.content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;cursor:pointer;padding:15px;font-size:20px;font:30px/15px bold}.title-row[_ngcontent-%COMP%]{margin:15px;display:flex;justify-content:space-between;align-items:center}.title-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:50%}@media screen and (max-width:600px){[_nghost-%COMP%]{position:absolute;left:0;top:inherit;bottom:0;z-index:5;width:100%}.content[_ngcontent-%COMP%]{position:relative;width:100%;min-width:inherit;left:0;margin-left:0;top:inherit;bottom:0}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:15px}}"],data:{animation:[s.ngIfAnimation]}})},Tnqc:function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},U6bO:function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),a=e,s=0;a<n;a++,s++)o[s]=i[a];return o.buffer}},UFmM:function(t,n,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.MyMarkerService=void 0,r("fXoL"),r("mr0/"),r("otBb");var u=r("VVPK"),c=(r("XVN5"),r("AytR")),l=(r("hVDi"),r("Zisu")),h=(r("wlYr"),s(r("+ZnK"))),f=a(r("fXoL")),d=a(r("XVN5")),p=a(r("mr0/")),v=a(r("wlYr")),m=a(r("hVDi")),g=function(){function t(e,n,r,i,o,a,s){y(this,t),this.io=e,this.mapService=n,this.injector=r,this.applicationRef=i,this.componentFactoryResolver=o,this.toast=a,this.popupService=s,this.isShow=!1,this.markerList=[],this.socket=e.socket}return _(t,[{key:"show",value:function(){this.isShow=!0}},{key:"hide",value:function(){this.isShow=!1}},{key:"requestMarkers",value:function(){var t=this;this.socket.$get("getMarkerList",null).then(function(e){console.log(e),e.forEach(function(e){var n=t.createMarker(new h.default.LngLat(e.lng,e.lat),e);t.markerList.push(n)})})}},{key:"addMarkers",value:function(t){var e=this;t.forEach(function(t){if(!e.markerList.find(function(e){return e.id===t.id})){var n=e.createMarker(new h.default.LngLat(t.lng,t.lat),t);e.markerList.push(n)}})}},{key:"clearAll",value:function(){for(;this.markerList.length;){e(this.markerList.splice(0,1),1)[0].clear()}}},{key:"createByClick",value:function(t,e){var n=this.createMarker(t,e);this.markerList.push(n)}},{key:"createMarker",value:function(t,e){var n=this,r=this.mapService.map,i=document.createElement("div"),o=new Image;o.src=c.environment.hostPrefix+"img/my-marker.png",o.style.width="100%",o.style.height="100%",i.appendChild(o),i.style.width="40px",i.style.height="40px";var a=document.createElement("div"),s=new h.default.Popup({offset:[0,-40]}).setLngLat([t.lng,t.lat]).setDOMContent(a),u=new h.default.Marker(i,{offset:[0,-20],draggable:!1});u.setLngLat([t.lng,t.lat]).addTo(r).setPopup(s),e.id||u.togglePopup();var f=this.createInputPopup(a,e.title,e.id),d={id:e.id,marker:u,popup:s,scope:f.instance,click:function(){r.flyTo({center:[t.lng,t.lat],zoom:r.getZoom()<12?12:r.getZoom()})},remove:function(){n.popupService.show({body:l.MyPopupDelMyMarker,title:"Confirm",windowClass:"popup-del-device",initialParams:{name:f.instance.title},buttons:[{label:"Cancel",windowClass:"reject",click:function(){return!0}},{label:"Delete",windowClass:"resolve",click:function(t){return u.remove(),s.remove(),n.applicationRef.detachView(f.hostView),f.destroy(),n.markerList.splice(n.markerList.indexOf(d),1),n.applicationRef.tick(),n.removeMarker(d),t.close(),!1}}]})},clear:function(){u.remove()}};return d}},{key:"removeMarker",value:function(t){var e=this;this.socket.$emit("removeMyMarker",{id:t.id}).then(function(t){e.toast.show({type:"success",text:"Marker was removed"})}).catch(function(t){console.log("Error remove marker -> ",t)})}},{key:"saveMarker",value:function(t){var e=this,n=this.markerList.find(function(e){return e.scope===t});console.log("save ->",n),this.socket.$emit("saveMyMarker",{id:n.id,title:t.title,lngLat:n.marker.getLngLat()}).then(function(t){n.id=t.id,e.toast.show({type:"success",text:"Marker was added"})}).catch(function(t){console.log("Error save marker -> ",t)})}},{key:"createInputPopup",value:function(t,e,n){var r=this,i=document.createElement("my-input-popup-component"),o=this.componentFactoryResolver.resolveComponentFactory(u.MyInputPopupComponent).create(this.injector,[],i);return o.instance.title=e,o.instance.id=n,o.instance.onSave.subscribe(function(t){r.saveMarker(t)}),this.applicationRef.attachView(o.hostView),t.appendChild(i),o}}]),t}();n.MyMarkerService=g,g.\u0275fac=function(t){return new(t||g)(f.\u0275\u0275inject(d.Io),f.\u0275\u0275inject(p.MapService),f.\u0275\u0275inject(f.Injector),f.\u0275\u0275inject(f.ApplicationRef),f.\u0275\u0275inject(f.ComponentFactoryResolver),f.\u0275\u0275inject(v.ToastService),f.\u0275\u0275inject(m.PopupService))},g.\u0275prov=f.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac})},USbl:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.StravaComponent=void 0,n("tyNb");var a=n("C6GA"),s=(n("XVN5"),n("Zq4v"),n("mu9K"),n("9e0j")),u=(n("wlYr"),o(n("fXoL"))),c=o(n("tyNb")),l=o(n("XVN5")),h=o(n("mu9K")),f=o(n("Zq4v")),d=o(n("wlYr")),p=o(n("ofXK")),v=o(n("3Pt+"));function m(t,e){1&t&&(u.\u0275\u0275elementStart(0,"div",21),u.\u0275\u0275elementStart(1,"div",3),u.\u0275\u0275text(2,"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438.."),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(3,"div",3),u.\u0275\u0275element(4,"div",22),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd())}function g(t,e){if(1&t&&(u.\u0275\u0275elementStart(0,"div",21),u.\u0275\u0275elementStart(1,"table",23),u.\u0275\u0275elementStart(2,"tr"),u.\u0275\u0275elementStart(3,"td",24),u.\u0275\u0275element(4,"img",25),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(5,"td"),u.\u0275\u0275text(6,"FirstName"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(7,"td"),u.\u0275\u0275text(8),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(9,"tr"),u.\u0275\u0275elementStart(10,"td"),u.\u0275\u0275text(11,"LastName"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(12,"td"),u.\u0275\u0275text(13),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(14,"tr"),u.\u0275\u0275elementStart(15,"td"),u.\u0275\u0275text(16,"City"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(17,"td"),u.\u0275\u0275text(18),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()),2&t){var n=u.\u0275\u0275nextContext();u.\u0275\u0275advance(4),u.\u0275\u0275property("src",n.athlete.profile,u.\u0275\u0275sanitizeUrl),u.\u0275\u0275advance(4),u.\u0275\u0275textInterpolate(n.athlete.firstName),u.\u0275\u0275advance(5),u.\u0275\u0275textInterpolate(n.athlete.lastName),u.\u0275\u0275advance(5),u.\u0275\u0275textInterpolate(n.athlete.city)}}function b(t,e){if(1&t){var n=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"div",26),u.\u0275\u0275elementStart(1,"div",3),u.\u0275\u0275elementStart(2,"div",27),u.\u0275\u0275listener("click",function(){return u.\u0275\u0275restoreView(n),u.\u0275\u0275nextContext().onDeauthorize()}),u.\u0275\u0275text(3,"\u0412\u044b\u0439\u0442\u0438"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()}}function w(t,e){1&t&&(u.\u0275\u0275elementStart(0,"div",28),u.\u0275\u0275text(1,"\u041d\u0435\u0442 \u0444\u0430\u043b\u043e\u0432 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438"),u.\u0275\u0275elementEnd())}function x(t,e){1&t&&(u.\u0275\u0275elementStart(0,"div",3),u.\u0275\u0275text(1,"\u0414\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043a\u043b\u0438\u043a\u043d\u0438 \u0444\u0430\u0439\u043b"),u.\u0275\u0275elementEnd())}function k(t,e){if(1&t){var n=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"div",3),u.\u0275\u0275elementStart(1,"div",29),u.\u0275\u0275listener("click",function(){u.\u0275\u0275restoreView(n);var t=e.$implicit;return u.\u0275\u0275nextContext().sendTrackToStrava(t)}),u.\u0275\u0275text(2),u.\u0275\u0275pipe(3,"date"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit;u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind2(3,1,r.date,"dd/MM/yyyy"))}}var C=function(t){return{blue:t}};function S(t,e){if(1&t){var n=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"div",30),u.\u0275\u0275elementStart(1,"a",31),u.\u0275\u0275listener("click",function(t){u.\u0275\u0275restoreView(n);var e=u.\u0275\u0275nextContext();return t.preventDefault(),e.goToStrava()}),u.\u0275\u0275text(2,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()}if(2&t){var r=u.\u0275\u0275nextContext();u.\u0275\u0275advance(1),u.\u0275\u0275propertyInterpolate("href",r.stravaHref,u.\u0275\u0275sanitizeUrl),u.\u0275\u0275property("ngClass",u.\u0275\u0275pureFunction1(2,C,r.stravaClientId&&r.stravaClientSecret))}}function E(t,e){1&t&&(u.\u0275\u0275elementStart(0,"div",32),u.\u0275\u0275elementStart(1,"div",33),u.\u0275\u0275elementStart(2,"div",34),u.\u0275\u0275text(3,"\u041f\u0435\u0440\u0435\u0439\u0442\u0438"),u.\u0275\u0275elementStart(4,"a",35),u.\u0275\u0275text(5,"Strava API https://www.strava.com/settings/api"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(6,"div",33),u.\u0275\u0275elementStart(7,"div",34),u.\u0275\u0275element(8,"img",36),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(9,"div",33),u.\u0275\u0275elementStart(10,"div",34),u.\u0275\u0275element(11,"img",37),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd())}var P=function(){function t(e,n,r,i,o){var u=this;y(this,t),this.router=e,this.io=n,this.userService=r,this.stravaService=i,this.toast=o,this._stravaClientId=null,this._stravaClientSecret=null,this.stravaHref=null,this.token=a.hashGenerate(),this.athlete={firstName:null,lastName:null,city:null,profile:null},this.showHelp=!1,this.docsFor=i.docsFor;var c=new s.Aes(16),l=new s.Aes(16);console.log("Hello Crypt");var h=c.encodeTextToByte("Hello Crypt"),f=l.encodeByteToByte(h),d=c.decodeByteToByte(f),p=l.decodeByteToText(d);switch(console.log(p),this.href=null,this.socket=n.socket,this.getStrava().then(function(t){return u.isAuthorize()}).then(function(t){u.authInProgress=!1}).catch(function(t){u.authInProgress=!1}),this.authInProgress=!0,!0){case/maxislav/.test(window.location.hostname):this.myLocation="http://"+window.location.hostname+"/bike-atlas/";break;default:this.myLocation="http://"+window.location.hostname+"/"}}return _(t,[{key:"onShowHelp",value:function(){this.showHelp=!this.showHelp}},{key:"isAuthorize",value:function(){var t=this;return this.stravaService.isAuthorize().then(function(e){t.athlete.firstName=e.firstName,t.athlete.lastName=e.lastName,t.athlete.profile=e.profile,t.athlete.city=e.city,t.authorization=e.authorization})}},{key:"getStrava",value:function(){var t=this;return this.stravaService.getStrava().then(function(e){t.stravaClientId=e.stravaClientId,t.stravaClientSecret=e.stravaClientSecret})}},{key:"href",get:function(){return this._href},set:function(t){this._href=t}},{key:"ngDoCheck",value:function(){}},{key:"ngOnChanges",value:function(t){console.log(t)}},{key:"onClose",value:function(){this.router.navigate(["/auth/map"])}},{key:"stravaClientId",get:function(){return this._stravaClientId},set:function(t){this._stravaClientId=t,this.stravaHref="https://www.strava.com/oauth/authorize?client_id="+t+"&response_type=code&redirect_uri="+this.myLocation+"%23/auth/map/strava-invite/"+this.token+"&scope=write&state=strava&approval_prompt=force"}},{key:"stravaClientSecret",get:function(){return this._stravaClientSecret},set:function(t){this._stravaClientSecret=t}},{key:"goToStrava",value:function(){var t=this;this.stravaClientId&&this.stravaClientSecret&&this.socket.$encrypt("onStravaCrypt",{stravaClientSecret:this.stravaClientSecret,stravaClientId:this.stravaClientId,atlasToken:this.token}).then(function(e){"ok"==e.result&&(window.location.href=t.stravaHref.toString())})}},{key:"sendTrackToStrava",value:function(t){var e=this;this.stravaService.sendTrackToStrava(t,this.authorization).then(function(n){console.log(n),n&&"ok"==n.result&&n.data.id&&(e.toast.show({type:"success",text:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0432 Strava"}),e.stravaService.removeTrack(t))})}},{key:"onDeauthorize",value:function(){var t=this;this.stravaService.onDeauthorize().then(function(e){if(e&&"ok"==e.result)for(var n in t.athlete)t.athlete[n]=null})}}]),t}();e.StravaComponent=P,P.\u0275fac=function(t){return new(t||P)(u.\u0275\u0275directiveInject(c.Router),u.\u0275\u0275directiveInject(l.Io),u.\u0275\u0275directiveInject(h.UserService),u.\u0275\u0275directiveInject(f.StravaService),u.\u0275\u0275directiveInject(d.ToastService))},P.\u0275cmp=u.\u0275\u0275defineComponent({type:P,selectors:[["ng-component"]],features:[u.\u0275\u0275NgOnChangesFeature],decls:40,vars:10,consts:[[1,"content"],[1,"close",3,"click"],[1,"flex","center","row","space-between"],[1,"flex-cell"],[1,"ico-strava-text"],["class","flex row center",4,"ngIf"],["class","flex row flex-end",4,"ngIf"],[1,"scroll"],[1,"flex","row"],[1,"strava"],["type","number","name","stravaClientId",1,"input",3,"ngModel","ngModelChange"],["name","stravaClientSecret","type","password",1,"input",3,"ngModel","ngModelChange"],[1,"row","flex"],["class","flex-cell gray",4,"ngIf"],["class","flex-cell",4,"ngIf"],[1,"flex"],["class","flex-cell",4,"ngFor","ngForOf"],[1,"flex","flex-end"],["class","button primary",4,"ngIf"],["title","\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043f\u0440\u0430\u0432\u043a\u0443 \u043f\u043e \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0435",1,"bnt-help",3,"click"],["class","strava-help",4,"ngIf"],[1,"flex","row","center"],[1,"ico-z"],[1,"athlete"],["rowspan","3"],[1,"profile",3,"src"],[1,"flex","row","flex-end"],[1,"button","primary",3,"click"],[1,"flex-cell","gray"],["title","\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",1,"ico-routs",3,"click"],[1,"button","primary"],[3,"ngClass","href","click"],[1,"strava-help"],[1,"row"],[1,"row-cell"],["href","https://www.strava.com/settings/api","target","_blank"],["src","src/img/strava-help/01.png"],["src","src/img/strava-help/02.png"]],template:function(t,e){1&t&&(u.\u0275\u0275elementStart(0,"div",0),u.\u0275\u0275elementStart(1,"div"),u.\u0275\u0275elementStart(2,"div"),u.\u0275\u0275elementStart(3,"div",1),u.\u0275\u0275listener("click",function(){return e.onClose()}),u.\u0275\u0275text(4,"\xd7"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(5,"div",2),u.\u0275\u0275elementStart(6,"div",3),u.\u0275\u0275element(7,"div",4),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275template(8,m,5,0,"div",5),u.\u0275\u0275template(9,g,19,4,"div",5),u.\u0275\u0275template(10,b,4,0,"div",6),u.\u0275\u0275elementStart(11,"div",7),u.\u0275\u0275elementStart(12,"div"),u.\u0275\u0275elementStart(13,"div",8),u.\u0275\u0275elementStart(14,"table",9),u.\u0275\u0275elementStart(15,"tr"),u.\u0275\u0275elementStart(16,"td"),u.\u0275\u0275elementStart(17,"label"),u.\u0275\u0275text(18,"ID \u043a\u043b\u0438\u0435\u043d\u0442\u0430:"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(19,"td"),u.\u0275\u0275elementStart(20,"input",10),u.\u0275\u0275listener("ngModelChange",function(t){return e.stravaClientId=t}),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(21,"tr"),u.\u0275\u0275elementStart(22,"td"),u.\u0275\u0275elementStart(23,"label"),u.\u0275\u0275text(24,"Client Secret:"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(25,"td"),u.\u0275\u0275elementStart(26,"input",11),u.\u0275\u0275listener("ngModelChange",function(t){return e.stravaClientSecret=t}),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(27,"div",12),u.\u0275\u0275template(28,w,2,0,"div",13),u.\u0275\u0275template(29,x,2,0,"div",14),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(30,"div",15),u.\u0275\u0275template(31,k,4,4,"div",16),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(32,"div",17),u.\u0275\u0275elementStart(33,"div",3),u.\u0275\u0275template(34,S,3,4,"div",18),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(35,"div",17),u.\u0275\u0275elementStart(36,"div",3),u.\u0275\u0275elementStart(37,"div",19),u.\u0275\u0275listener("click",function(){return e.onShowHelp()}),u.\u0275\u0275text(38,"\u25bc ?"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275template(39,E,12,0,"div",20),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()),2&t&&(u.\u0275\u0275advance(8),u.\u0275\u0275property("ngIf",e.authInProgress),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",e.athlete.firstName),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",e.athlete.firstName),u.\u0275\u0275advance(10),u.\u0275\u0275property("ngModel",e.stravaClientId),u.\u0275\u0275advance(6),u.\u0275\u0275property("ngModel",e.stravaClientSecret),u.\u0275\u0275advance(2),u.\u0275\u0275property("ngIf",!e.docsFor.length),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",e.docsFor.length),u.\u0275\u0275advance(2),u.\u0275\u0275property("ngForOf",e.docsFor),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngIf",!e.authInProgress&&!e.athlete.firstName),u.\u0275\u0275advance(5),u.\u0275\u0275property("ngIf",e.showHelp))},directives:[p.NgIf,v.NumberValueAccessor,v.DefaultValueAccessor,v.NgControlStatus,v.NgModel,p.NgForOf,p.NgClass],pipes:[p.DatePipe],styles:["[_nghost-%COMP%]{position:absolute;left:0;top:0;z-index:5;width:100%}*[_ngcontent-%COMP%]{box-sizing:border-box}.gray[_ngcontent-%COMP%]{color:#a9a9a9}h4[_ngcontent-%COMP%]{padding:8px 0}.invite[_ngcontent-%COMP%]{font-size:12px;float:right;cursor:pointer;text-align:right;margin-left:20px}.invite.accept[_ngcontent-%COMP%]{color:#1e90ff;font-weight:700}.invite.reject[_ngcontent-%COMP%]{color:gray}.content[_ngcontent-%COMP%]{position:absolute;background:hsla(0,0%,100%,.9);min-width:600px;max-width:600px;margin-left:-300px;padding:0;left:50%;top:calc(100% + 20px);box-shadow:1px 1px 3px rgba(0,0,0,.4)}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:30px}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;cursor:pointer;padding:15px;font-size:20px;font:30px/15px bold}.ico-strava-text[_ngcontent-%COMP%]{width:80px;height:20px;background:url(http://178.62.44.54:8080/ico-strava-text.png) no-repeat 50%;background-size:100%}.ico-routs[_ngcontent-%COMP%]{background:url(http://178.62.44.54:8080/ico-routs.png) no-repeat;background-size:auto 80%;padding:5px 5px 5px 30px;color:#1e90ff;cursor:pointer}table.strava[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{white-space:nowrap}a[_ngcontent-%COMP%]{font-size:14px;cursor:pointer;color:#1e90ff;margin-left:5px}table.strava[_ngcontent-%COMP%]{width:100%}table.strava[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;padding:10px}table.strava[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:80%}table.athlete[_ngcontent-%COMP%]{width:100%}table.athlete[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;padding:10px}.profile[_ngcontent-%COMP%]{width:80px;height:80px}.input[_ngcontent-%COMP%]{width:100%}.bnt-help[_ngcontent-%COMP%]{cursor:pointer}.strava-help[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.scroll[_ngcontent-%COMP%]{max-height:560px;overflow-y:auto}.scroll[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px}@media screen and (max-height:600px){.scroll[_ngcontent-%COMP%]{max-height:100px}}@media screen and (max-width:600px){.content[_ngcontent-%COMP%]{position:relative;width:100%;min-width:inherit;left:0;margin-left:0}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:15px}}"]})},UXun:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("jtHE");function i(t,e,n){var i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,i=t.bufferSize,o=void 0===i?Number.POSITIVE_INFINITY:i,a=t.windowTime,s=void 0===a?Number.POSITIVE_INFINITY:a,u=t.refCount,c=t.scheduler,l=0,h=!1,f=!1;return function(t){var i;l++,!e||h?(h=!1,e=new r.a(o,s,c),i=e.subscribe(this),n=t.subscribe({next:function(t){e.next(t)},error:function(t){h=!0,e.error(t)},complete:function(){f=!0,n=void 0,e.complete()}})):i=e.subscribe(this),this.add(function(){l--,i.unsubscribe(),n&&!f&&u&&0===l&&(n.unsubscribe(),n=void 0,e=void 0)})}}(i))}}},Uwu7:function(t,e,n){var r=n("x7D4")("socket.io-parser"),i=n("2xqC"),o=n("Njrz"),a=n("luTP"),s=n("qGlh");function u(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=u,e.Decoder=h;var c=e.ERROR+'"encode error"';function l(t){var n=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var i=function(t){try{return JSON.stringify(t)}catch(e){return!1}}(t.data);if(!1===i)return c;n+=i}return r("encoded %j as %s",t,n),n}function h(){this.reconstructor=null}function f(t){this.reconPack=t,this.buffers=[]}function d(t){return{type:e.ERROR,data:"parser error: "+t}}u.prototype.encode=function(t,n){r("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type?function(t,e){o.removeBlobs(t,function(t){var n=o.deconstructPacket(t),r=l(n.packet),i=n.buffers;i.unshift(r),e(i)})}(t,n):n([l(t)])},i(h.prototype),h.prototype.add=function(t){var n;if("string"==typeof t)n=function(t){var n=0,i={type:Number(t.charAt(0))};if(null==e.types[i.type])return d("unknown packet type "+i.type);if(e.BINARY_EVENT===i.type||e.BINARY_ACK===i.type){for(var o=n+1;"-"!==t.charAt(++n)&&n!=t.length;);var s=t.substring(o,n);if(s!=Number(s)||"-"!==t.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(s)}if("/"===t.charAt(n+1)){for(o=n+1;++n&&","!==(c=t.charAt(n))&&n!==t.length;);i.nsp=t.substring(o,n)}else i.nsp="/";var u=t.charAt(n+1);if(""!==u&&Number(u)==u){for(o=n+1;++n;){var c;if(null==(c=t.charAt(n))||Number(c)!=c){--n;break}if(n===t.length)break}i.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){var l=function(t){try{return JSON.parse(t)}catch(e){return!1}}(t.substr(n));if(!1===l||i.type!==e.ERROR&&!a(l))return d("invalid payload");i.data=l}return r("decoded %s as %j",t,i),i}(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new f(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!s(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),a=n("yCtX");function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=Number.POSITIVE_INFINITY,u=null,c=e[e.length-1];return Object(i.a)(c)?(u=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(s=e.pop())):"number"==typeof c&&(s=e.pop()),null===u&&1===e.length&&e[0]instanceof r.a?e[0]:Object(o.a)(s)(Object(a.a)(e,u))}},VVPK:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MyInputPopupComponent=void 0;var a=n("fXoL"),s=o(n("fXoL")),u=o(n("3Pt+")),c=function(){function t(e,n){y(this,t),this.elRef=e,this.ref=n,this.onSave=new a.EventEmitter}return _(t,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){this.id||this.elRef.nativeElement.getElementsByTagName("input")[0].focus()}},{key:"onChange",value:function(){this.ref.tick()}},{key:"focusOut",value:function(){this.onSave.emit(this)}}]),t}();e.MyInputPopupComponent=c,c.\u0275fac=function(t){return new(t||c)(s.\u0275\u0275directiveInject(s.ElementRef),s.\u0275\u0275directiveInject(s.ApplicationRef))},c.\u0275cmp=s.\u0275\u0275defineComponent({type:c,selectors:[["my-input-popup-component"]],inputs:{title:"title",id:"id"},outputs:{onSave:"onSave"},decls:1,vars:1,consts:[["type","text",1,"input",3,"ngModel","ngModelChange","focusout"]],template:function(t,e){1&t&&(s.\u0275\u0275elementStart(0,"input",0),s.\u0275\u0275listener("ngModelChange",function(t){return e.title=t})("ngModelChange",function(){return e.onChange()})("focusout",function(){return e.focusOut()}),s.\u0275\u0275elementEnd()),2&t&&s.\u0275\u0275property("ngModel",e.title)},directives:[u.DefaultValueAccessor,u.NgControlStatus,u.NgModel],styles:[""]})},Vj3M:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.OneTrack=void 0,n("fXoL"),n("hBuv"),n("kQ+e"),n("+ZYu"),n("mu9K");var a=o(n("fXoL")),s=o(n("hBuv")),u=o(n("kQ+e")),c=o(n("+ZYu")),l=o(n("mu9K")),h=o(n("ofXK")),f=function(){function t(e,n,r,i,o){y(this,t),this.el=e,this.Leaflet=n,this.ls=r,this.trackService=i,this.userService=o,this.L=n.L}return _(t,[{key:"ngAfterViewInit",value:function(){var t=this.L,e=this.ls.mapCenter;this.mapEL=this.el.nativeElement.getElementsByClassName("map")[0];var n=t.map(this.mapEL).setView([e.lat||50.3,e.lng||30.3],e.zoom||8);if(t.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(n),this.track.points.length){var r=[];this.track.points.forEach(function(t){r.push([t.lat,t.lng])});var i=t.polyline(r,{color:"red"}).addTo(n);n.fitBounds(i.getBounds())}}},{key:"ngOnInit",value:function(){this.trackDate=new Date(this.track.points[0].date)}},{key:"showOnMap",value:function(){this.trackService.showTrack(this.track.points)}}]),t}();e.OneTrack=f,f.\u0275fac=function(t){return new(t||f)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(s.LeafletResolver),a.\u0275\u0275directiveInject(u.LocalStorage),a.\u0275\u0275directiveInject(c.TrackService),a.\u0275\u0275directiveInject(l.UserService))},f.\u0275cmp=a.\u0275\u0275defineComponent({type:f,selectors:[["one-track"]],inputs:{track:"track"},decls:13,vars:6,consts:[[1,"content"],[1,"info"],[1,"date"],[1,"user"],[1,"user-icon"],[3,"src"],[1,"name"],[1,"show-on-map",3,"click"],[1,"map"]],template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275text(3),a.\u0275\u0275pipe(4,"date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"div",3),a.\u0275\u0275elementStart(6,"div",4),a.\u0275\u0275element(7,"img",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"div",6),a.\u0275\u0275text(9),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(10,"div",7),a.\u0275\u0275listener("click",function(){return e.showOnMap()}),a.\u0275\u0275text(11,"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u0435"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(12,"div",8),a.\u0275\u0275elementEnd()),2&t&&(a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind2(4,3,e.trackDate,"dd/MM/yyyy")),a.\u0275\u0275advance(4),a.\u0275\u0275property("src",e.track.image||"img/no-avatar.gif",a.\u0275\u0275sanitizeUrl),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(e.track.name))},pipes:[h.DatePipe],styles:["[_nghost-%COMP%]{display:block;margin-bottom:15px}.content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:15px}.info[_ngcontent-%COMP%]{padding:0 15px}.date[_ngcontent-%COMP%]{color:#1e90ff}.date[_ngcontent-%COMP%], .user[_ngcontent-%COMP%]{display:flex}.user[_ngcontent-%COMP%]{align-items:center}.user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-left:10px}.show-on-map[_ngcontent-%COMP%]{cursor:pointer}.map[_ngcontent-%COMP%]{width:300px;height:150px;background:#dae0ea}"]})},VvA2:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.AllUserComponent=void 0,n("tpgc"),n("jHPu"),n("tyNb");var a=o(n("fXoL")),s=o(n("tpgc")),u=o(n("jHPu")),c=o(n("tyNb")),l=o(n("ofXK"));function h(t,e){if(1&t&&(a.\u0275\u0275elementStart(0,"div",8),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&t){var n=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(n.chatUnViewed.length)}}function f(t,e){if(1&t){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",11),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(n);var t=a.\u0275\u0275nextContext(2).$implicit;return a.\u0275\u0275nextContext().sendInvite(t)}),a.\u0275\u0275text(1,"\u041e\u0442\u043f\u0440\u0430\u0432\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441"),a.\u0275\u0275elementEnd()}}function d(t,e){if(1&t){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",11),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(n);var t=a.\u0275\u0275nextContext(2).$implicit;return a.\u0275\u0275nextContext().onCancelInvite(t)}),a.\u0275\u0275text(1,"\u0417\u0430\u043f\u0440\u043e\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d (\u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c)"),a.\u0275\u0275elementEnd()}}function p(t,e){if(1&t&&(a.\u0275\u0275elementStart(0,"div",9),a.\u0275\u0275template(1,f,2,0,"ng-template",10),a.\u0275\u0275template(2,d,2,0,"ng-template",10),a.\u0275\u0275elementEnd()),2&t){var n=a.\u0275\u0275nextContext().$implicit,r=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!r.isInviteActive(n)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",r.isInviteActive(n))}}var v=function(t){return{"chat-un-viewed":t}};function m(t,e){if(1&t){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tr"),a.\u0275\u0275elementStart(1,"td"),a.\u0275\u0275elementStart(2,"div",1),a.\u0275\u0275element(3,"img",2),a.\u0275\u0275elementStart(4,"div",3),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(n);var t=e.$implicit;return a.\u0275\u0275nextContext().startChat(t)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,h,2,1,"div",4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"td"),a.\u0275\u0275elementStart(7,"div",5),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(n);var t=e.$implicit;return a.\u0275\u0275nextContext().onUserClick(t)}),a.\u0275\u0275text(8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"div",6),a.\u0275\u0275text(10),a.\u0275\u0275pipe(11,"date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"td"),a.\u0275\u0275template(13,p,3,2,"div",7),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit,i=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275property("src",r.image||"img/no-avatar.gif",a.\u0275\u0275sanitizeUrl),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(9,v,r.chatUnViewed&&r.chatUnViewed.length)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",r.chatUnViewed&&r.chatUnViewed.length),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(r.name),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1("Last visit ",a.\u0275\u0275pipeBind2(11,6,r.lastVisit,"dd/MM/yyyy HH:mm:ss"),""),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",!i.isFriend(r))}}var g=function(){function t(e,n,r){var i=this;y(this,t),this.friendsService=e,this.chatService=n,this.router=r,this.allUsers=[],this.friends=[],this.invites=[],this.friends=e.friends,this.friendsService.requestAllUsers().then(function(t){i.allUsers=t})}return _(t,[{key:"sendInvite",value:function(t){this.friendsService.sendInvite(t)}},{key:"onCancelInvite",value:function(t){this.friendsService.onCancelInvite(t)}},{key:"onReject",value:function(t){}},{key:"isInviteActive",value:function(t){return this.friendsService.inviteMap.myInvite.has(t.id)}},{key:"isFriend",value:function(t){for(var e=0;e<this.friends.length;){if(this.friends[e].id==t.id)return!0;e++}return!1}},{key:"onUserClick",value:function(t){this.router.navigate(["/auth/map/friends/",t.id])}},{key:"startChat",value:function(t){this.chatService.onEnterRoom(t)}}]),t}();e.AllUserComponent=g,g.\u0275fac=function(t){return new(t||g)(a.\u0275\u0275directiveInject(s.FriendsService),a.\u0275\u0275directiveInject(u.ChatService),a.\u0275\u0275directiveInject(c.Router))},g.\u0275cmp=a.\u0275\u0275defineComponent({type:g,selectors:[["ng-component"]],decls:5,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"img-container"],[3,"src"],["title","\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043b\u0438\u0447\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",1,"ico-chat",3,"ngClass","click"],["class","ico-un-viewed",4,"ngIf"],[1,"name","pointer",3,"click"],[1,"last-visit"],["class","invite",4,"ngIf"],[1,"ico-un-viewed"],[1,"invite"],[3,"ngIf"],[3,"click"]],template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"h4"),a.\u0275\u0275text(1,"\u0412\u0441\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(2,"table"),a.\u0275\u0275elementStart(3,"tbody"),a.\u0275\u0275template(4,m,14,11,"tr",0),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&t&&(a.\u0275\u0275advance(4),a.\u0275\u0275property("ngForOf",e.allUsers))},directives:[l.NgForOf,l.NgClass,l.NgIf],pipes:[l.DatePipe],styles:[".invite[_ngcontent-%COMP%]{font-size:12px;float:right;cursor:pointer;text-align:right;margin-left:20px}.invite.accept[_ngcontent-%COMP%]{color:#1e90ff;font-weight:700}.invite.reject[_ngcontent-%COMP%]{color:gray}td[_ngcontent-%COMP%]{width:33.3%;border-bottom:1px solid #cfdcef;padding:5px 0}.users[_ngcontent-%COMP%]{overflow-y:auto}.name[_ngcontent-%COMP%]{font-weight:700}.last-visit[_ngcontent-%COMP%]{color:#1e90ff;font-size:12px}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{min-width:50px;width:10%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:30%;padding:0 5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){min-width:50px;width:30%}.img-container[_ngcontent-%COMP%]{position:relative;width:80px}img[_ngcontent-%COMP%]{width:60px;height:60px;display:block}.ico-chat[_ngcontent-%COMP%]{width:30px;position:absolute;bottom:0;right:0;height:30px;cursor:pointer;opacity:.7;background:url(http://178.62.44.54:8080/ico-chat-gray.png) no-repeat 50%;background-size:80%}.ico-chat.chat-un-viewed[_ngcontent-%COMP%]{background:url(http://178.62.44.54:8080/ico-chat.png) no-repeat 50%;background-size:80%}.ico-un-viewed[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;border-radius:50%;padding:5px;font:12px/6px sans-serif;font-size:10px;background:#ff8b15;box-shadow:0 0 4px #fff}"]})},VydE:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.RegistrationComponent=void 0,n("ofXK"),n("6uu6"),n("3Pt+"),n("O7X+"),n("1jsm");var a=n("IfXh"),s=(n("tyNb"),n("wlYr"),o(n("fXoL"))),u=o(n("ofXK")),c=o(n("1jsm")),l=o(n("3Pt+")),h=o(n("tyNb")),f=o(n("wlYr")),d=o(n("O7X+")),p=o(n("6uu6")),v=function(t){return{"has-error":t}},m=function(){function t(e,n,r,i,o,a,s){y(this,t),this.location=e,this.md5=n,this.fb=r,this.router=i,this.ts=o,this.registrationService=a,this.authService=s,this.registrationFormValue={name:null,pass:null,repeatPass:null}}return _(t,[{key:"ngOnInit",value:function(){this.registerForm=this.fb.group({name:[null,[this.passValidator.bind(this,"name")]],pass:[null,[this.passValidator.bind(this,"pass")]],repeatPass:[null,[this.passValidator.bind(this,"repeatPass")]]})}},{key:"passValidator",value:function(t,e){switch(this.registrationFormValue[t]=e.value,t){case"name":return!e.value||e.value.length<3?{invalidPassword:"Length should be more then 3 char length "}:null;case"pass":case"repeatPass":if(!e.value||e.value.length<3)return{invalidPassword:"Length should be more then 3 char length "};if(this.registrationFormValue.pass!==this.registrationFormValue.repeatPass)return{invalidPassword:"Old and New pass does not match"};this.registerForm.get("pass").setErrors(null),this.registerForm.get("repeatPass").setErrors(null);default:return null}}},{key:"hasError",value:function(t){return!!this.registerForm.get(t).getError("invalidPassword")||!!this.registerForm.get(t).getError("invalidUser")}},{key:"onCancel",value:function(t){t.preventDefault(),this.location.back()}},{key:"onOk",value:function(t){var e=this;if(t.preventDefault(),!this.registerForm.valid)return this.ts.show({type:"warning",text:"Form invalid"});var n=a.deepCopy(this.registerForm.value);delete n.repeatPass;var r=n;r.pass=this.md5.hash(r.pass),this.registrationService.onRegister(r).then(function(t){switch(t.result){case"success":e.ts.show({type:"success",text:"Registration success"}),e.authService.onEnter(n),e.router.navigate(["/auth/map"]);break;default:e.registerForm.get("name").setErrors({invalidUser:"User exist"}),e.ts.show({type:"error",text:t.message})}}).catch(function(t){console.log(t)})}}]),t}();e.RegistrationComponent=m,m.\u0275fac=function(t){return new(t||m)(s.\u0275\u0275directiveInject(u.Location),s.\u0275\u0275directiveInject(c.Md5),s.\u0275\u0275directiveInject(l.FormBuilder),s.\u0275\u0275directiveInject(h.Router),s.\u0275\u0275directiveInject(f.ToastService),s.\u0275\u0275directiveInject(d.RegistrationService),s.\u0275\u0275directiveInject(p.AuthService))},m.\u0275cmp=s.\u0275\u0275defineComponent({type:m,selectors:[["ng-component"]],decls:20,vars:10,consts:[[1,"content"],["name","registerForm","autocomplete","off",3,"formGroup"],[1,"modal-body"],[3,"ngClass"],["type","text","formControlName","name","name","_name"],["type","password","formControlName","pass","name","_pass"],["type","password","formControlName","repeatPass","name","_pass"],[1,"buttons-container"],[1,"reject",3,"click"],[1,"resolve",3,"click"]],template:function(t,e){1&t&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275elementStart(1,"form",1),s.\u0275\u0275elementStart(2,"div",2),s.\u0275\u0275elementStart(3,"div",3),s.\u0275\u0275elementStart(4,"label"),s.\u0275\u0275text(5,"\u0418\u043c\u044f"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(6,"input",4),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"div",3),s.\u0275\u0275elementStart(8,"label"),s.\u0275\u0275text(9,"\u041f\u0430\u0440\u043e\u043b\u044c"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(10,"input",5),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"div",3),s.\u0275\u0275elementStart(12,"label"),s.\u0275\u0275text(13,"\u041f\u0430\u0440\u043e\u043b\u044c"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(14,"input",6),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(15,"div",7),s.\u0275\u0275elementStart(16,"button",8),s.\u0275\u0275listener("click",function(t){return e.onCancel(t)}),s.\u0275\u0275text(17,"Cancel"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(18,"button",9),s.\u0275\u0275listener("click",function(t){return e.onOk(t)}),s.\u0275\u0275text(19,"Ok"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&t&&(s.\u0275\u0275advance(1),s.\u0275\u0275property("formGroup",e.registerForm),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngClass",s.\u0275\u0275pureFunction1(4,v,e.hasError("name"))),s.\u0275\u0275advance(4),s.\u0275\u0275property("ngClass",s.\u0275\u0275pureFunction1(6,v,e.hasError("pass"))),s.\u0275\u0275advance(4),s.\u0275\u0275property("ngClass",s.\u0275\u0275pureFunction1(8,v,e.hasError("repeatPass"))))},directives:[l.\u0275angular_packages_forms_forms_ba,l.NgControlStatusGroup,l.FormGroupDirective,u.NgClass,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlName],styles:["[_nghost-%COMP%]{position:absolute;left:0;top:0;z-index:5;width:100%}.buttons-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.buttons-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}.buttons-container[_ngcontent-%COMP%]   button.resolve[_ngcontent-%COMP%]:hover{background:rgba(127,255,0,.2)}.buttons-container[_ngcontent-%COMP%]   button.reject[_ngcontent-%COMP%]:hover{background:rgba(255,210,99,.2)}.content[_ngcontent-%COMP%]{background:hsla(0,0%,100%,.9);max-width:400px;margin:20px auto;box-shadow:1px 1px 3px rgba(0,0,0,.4)}.modal-body[_ngcontent-%COMP%]{padding:30px}input[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;padding:8px;outline:none;border-radius:2px;background:none;border:none;border-bottom:2px solid #a9a9a9}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{display:block}label[_ngcontent-%COMP%]{margin:8px 0}.button-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{float:right;margin-top:15px}"]})},W1q8:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.PositionSize=void 0;var a=o(n("fXoL")),s=_(function t(){y(this,t)});e.PositionSize=s,s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=a.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac})},WLGk:function(t,e,n){var r=n("luTP"),i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);t.exports=function t(e){if(!e||"object"!=typeof e)return!1;if(r(e)){for(var n=0,i=e.length;n<i;n++)if(t(e[n]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||o&&e instanceof Blob||a&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return!0;return!1}},WMd4:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("z6cu"),a=function(t){return t.NEXT="N",t.ERROR="E",t.COMPLETE="C",t}({}),s=function(){var t=function(){function t(e,n,r){y(this,t),this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}return _(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}();return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},WaRm:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.OneUserComponent=void 0,n("tyNb");var a=n("kU1M"),s=(n("tpgc"),o(n("fXoL"))),u=o(n("tyNb")),c=o(n("tpgc")),l=function(){function t(e,n){var r=this;y(this,t),this.activateRoute=e,this.friendsService=n,this.id=e.snapshot.params.id,e.params.pipe(a.map(function(t){return t.id})).subscribe(function(t){r.id=t,n.requestUserById(r.id).then(function(t){r.user=t.user}).catch(function(t){console.error(t)})})}return _(t,[{key:"ngOnInit",value:function(){}}]),t}();e.OneUserComponent=l,l.\u0275fac=function(t){return new(t||l)(s.\u0275\u0275directiveInject(u.ActivatedRoute),s.\u0275\u0275directiveInject(c.FriendsService))},l.\u0275cmp=s.\u0275\u0275defineComponent({type:l,selectors:[["app-one-user"]],decls:2,vars:1,template:function(t,e){1&t&&(s.\u0275\u0275elementStart(0,"p"),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&t&&(s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",null==e.user?null:e.user.name,"\n"))},styles:[""]})},XDbj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("sVev"),i=n("7o/Q");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return function(e){return e.lift(new a(t))}}var a=function(){function t(e){y(this,t),this.errorFactory=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new s(t,this.errorFactory))}}]),t}(),s=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).errorFactory=r,i.hasValue=!1,i}return _(n,[{key:"_next",value:function(t){this.hasValue=!0,this.destination.next(t)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}]),n}(i.a);function u(){return new r.a}},"XN/E":function(t,e){t.exports={import:function(){throw new Error("System.import cannot be used indirectly")}}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return h}),n.d(e,"a",function(){return d});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),a=n("9ppp"),s=n("Ylt2"),c=n("2QA8"),h=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).destination=t,r}return _(n)}(i.a),d=function(){var t=function(t,e){l(i,t);var n=f(i);function i(){var t;return y(this,i),(t=n.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return _(i,[{key:e,value:function(){return new h(this)}},{key:"lift",value:function(t){var e=new p(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new a.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new a.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new a.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new a.a;return u(m(i.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new a.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new s.a(this,t))}},{key:"asObservable",value:function(){var t=new r.a;return t.source=this,t}}]),i}(r.a,c.a);return t.create=function(t,e){return new p(t,e)},t}(),p=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this)).destination=t,i.source=r,i}return _(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):o.a.EMPTY}}]),n}(d)},XVN5:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Io=e.SSocket=void 0;var s=a(n("gFX4")),u=n("9e0j"),c=n("0GDk"),l=o(n("fXoL")),h=function(){function t(e,n){y(this,t),this.name=e,this.sSocket=n;var r=this.response.bind(this);n.on(e,r)}return _(t,[{key:"response",value:function(t){this.timeout&&clearTimeout(this.timeout),this.resolve(t)}}]),t}(),f=function(){var t=function(){function t(e,n){y(this,t),this.name=e,this.sSocket=n;var r=this.response.bind(this);this.hashMap={},n.on(e,r)}return _(t,[{key:"response",value:function(t){var e=t.data,n=t.hash,r=this.hashMap[n],i=r.deferred,o=r.timeout;clearTimeout(o),i.resolve(e),delete this.hashMap[n],this.delHash(n)}},{key:"emit",value:function(t){var e=this,n=this.getHash(),r=new c.Deferred,i=setTimeout(function(){delete e.hashMap[n],e.delHash(n),r.reject("Error by timeout name-> "+e.name)},3e4);return this.hashMap[n]={timeout:i,deferred:r},this.sSocket.emit(this.name,{hash:n,data:t}),r.promise}},{key:"getHash",value:function(){for(var e="",n=0;n<32;n++)e+=""+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[t.getRandom(0,61,!0)];return-1<t.hashKeys.indexOf(e)?this.getHash():e}},{key:"delHash",value:function(e){var n=t.hashKeys.indexOf(e);-1<n&&t.hashKeys.splice(n,1)}}],[{key:"getRandom",value:function(t,e,n){var r=t+Math.random()*(e-t);return n&&(r=Math.round(r)),r}}]),t}();return t.hashKeys=[],t}(),d=function(){function t(e,n){y(this,t),this.getListenerHashMap={},Object.setPrototypeOf(this.constructor.prototype,s.default(e)),this.listenerHashMap={}}return _(t,[{key:"$get",value:function(t,e){return this.getListenerHashMap[t]||(this.getListenerHashMap[t]=new f(t,this)),this.getListenerHashMap[t].emit(e)}},{key:"$emit",value:function(t,e){var n=this;return new Promise(function(r,i){n.listenerHashMap[t]=n.listenerHashMap[t]||new h(t,n),n.listenerHashMap[t].resolve=r,n.listenerHashMap[t].timeout=setTimeout(function(){i("Error by timeout name->"+t)},3e4),n.emit(t,e)})}},{key:"$encrypt",value:function(t,e){var n=this,r=new u.Aes(16),i=JSON.stringify(e);return this.$emit(t,{n:0,byteArr:Array.from(r.encodeTextToByte(i))}).then(function(e){var i=new Uint8Array(e.byteArr);return n.$emit(t,{n:1,byteArr:Array.from(r.decodeByteToByte(i))})})}}]),t}();e.SSocket=d;var p=function(){function t(){y(this,t),this.url=window.location.hostname.match(/github\.io/)?"http://178.62.44.54:8081":"http://"+window.location.hostname+":8081",this._socket=new d(this.url,{})}return _(t,[{key:"socket",get:function(){return this._socket}}]),t}();e.Io=p,p.\u0275fac=function(t){return new(t||p)},p.\u0275prov=l.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac})},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},"Y/cZ":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;y(this,t),this.SchedulerAction=e,this.now=n}return _(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}()},Y6u4:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}()},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this)).subject=t,i.subscriber=r,i.closed=!1,i}return _(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(n("quSY").a)},Yvos:function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},YzCF:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ToastComponent=void 0;var a=n("9lQw"),s=(n("wlYr"),o(n("fXoL"))),u=o(n("wlYr")),c=o(n("ofXK")),l=o(n("sYmb"));function h(t,e){if(1&t&&(s.\u0275\u0275elementStart(0,"div",1),s.\u0275\u0275listener("click",function(){return e.$implicit.remove()}),s.\u0275\u0275text(1),s.\u0275\u0275pipe(2,"translate"),s.\u0275\u0275elementEnd()),2&t){var n=e.$implicit;s.\u0275\u0275property("ngClass",n.className)("@forToastAnimation",void 0),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",n.translate?s.\u0275\u0275pipeBind1(2,3,n.translate):n.text,"\n")}}var f=_(function t(e){y(this,t),this.ts=e,this.messages=e.messages});e.ToastComponent=f,f.\u0275fac=function(t){return new(t||f)(s.\u0275\u0275directiveInject(u.ToastService))},f.\u0275cmp=s.\u0275\u0275defineComponent({type:f,selectors:[["toast-component"]],decls:1,vars:1,consts:[["class","my-animation",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"my-animation",3,"ngClass","click"]],template:function(t,e){1&t&&s.\u0275\u0275template(0,h,3,5,"div",0),2&t&&s.\u0275\u0275property("ngForOf",e.messages)},directives:[c.NgForOf,c.NgClass],pipes:[l.TranslatePipe],styles:["[_nghost-%COMP%]{position:absolute;width:300px;right:0;top:0;z-index:10;display:block;height:auto}div[_ngcontent-%COMP%]{margin:10px;padding:10px 15px;background:#fff;box-shadow:1px 1px 3px rgba(0,0,0,.4);text-shadow:0 0 2px #fff}div.danger[_ngcontent-%COMP%], div.error[_ngcontent-%COMP%]{background:rgba(255,0,0,.7);color:#fff;text-shadow:0 0 2px #000}div.warning[_ngcontent-%COMP%]{background:rgba(255,210,99,.7)}div.success[_ngcontent-%COMP%]{background:rgba(127,255,0,.7)}@-webkit-keyframes MyAnimation{0%{opacity:0}to{opacity:1}}@keyframes MyAnimation{0%{opacity:0}to{opacity:1}}.my-animation[_ngcontent-%COMP%]{-webkit-animation:MyAnimation .3s;animation:MyAnimation .3s}"],data:{animation:[a.forToastAnimation]}})},ZAI4:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.AppModule=e.JJ=void 0;var a=n("jhN1"),s=n("3Pt+"),u=n("R1ws"),c=n("Sy1n"),l=n("beVS"),h=n("zu+5"),f=n("kQ+e"),d=n("XVN5"),p=n("+ZYu"),v=n("1jsm"),m=n("6uu6"),g=n("0RL5"),b=n("5FMk"),w=n("iX35"),x=n("mr0/"),k=n("hBuv"),C=n("mu9K"),S=n("RVpw"),E=n("qVd3"),P=n("yvHX"),O=n("Vj3M"),T=n("1xHg"),A=n("jHPu"),I=n("Zq4v"),D=n("BD2p"),M=n("UFmM"),L=n("Dk7Y"),j=n("1ymD"),R=n("tk/3"),F=n("23l2"),N=n("MCUK"),B=n("tpgc"),z=n("O7X+"),V=n("sYmb"),U=o(n("fXoL")),q=o(n("ofXK")),H=_(function t(){y(this,t)});e.JJ=H,H.\u0275fac=function(t){return new(t||H)},H.\u0275cmp=U.\u0275\u0275defineComponent({type:H,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&U.\u0275\u0275element(0,"div")},encapsulation:2});var Z=_(function t(){y(this,t)});e.AppModule=Z,Z.\u0275fac=function(t){return new(t||Z)},Z.\u0275mod=U.\u0275\u0275defineNgModule({type:Z,bootstrap:[c.AppComponent]}),Z.\u0275inj=U.\u0275\u0275defineInjector({providers:[z.RegistrationService,R.HttpClient,N.ProfileService,I.StravaService,A.ChatService,T.JournalService,k.LeafletResolver,h.MenuComponent,f.LocalStorage,d.Io,p.TrackService,v.Md5,m.AuthService,g.DeviceService,b.LogService,x.MapService,w.MarkerService,B.FriendsService,C.UserService,S.TimerService,E.MapResolver,P.PrivateAreaService,c.NavigationHistory,D.MenuService,M.MyMarkerService,j.GtgbcService],imports:[[F.PopupModule,a.BrowserModule,s.FormsModule,R.HttpClientModule,s.ReactiveFormsModule,l.MyRouterModule,u.BrowserAnimationsModule,L.SharedModule,V.TranslateModule]]}),U.\u0275\u0275setComponentScope(k.JournalComponent,[q.NgForOf,q.NgClass,q.NgStyle,O.OneTrack],[q.DatePipe])},ZUHj:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this)).parent=t,o.outerValue=r,o.outerIndex=i,o.index=0,o}return _(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(n("7o/Q").a),i=n("SeVD"),o=n("HDdC");function a(t,e,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new r(t,n,a);if(!s.closed)return e instanceof o.a?e.subscribe(s):Object(i.a)(e)(s)}},ZhIg:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ChatRoomComponent=void 0,n("fXoL");var a=n("IfXh"),s=(n("jHPu"),n("tpgc"),o(n("fXoL"))),u=o(n("jHPu")),c=o(n("tpgc")),l=o(n("ofXK")),h=o(n("3Pt+")),f=function(t,e){return{my:t,opponent:e}};function d(t,e){if(1&t&&(s.\u0275\u0275elementStart(0,"div",8),s.\u0275\u0275elementStart(1,"div",9),s.\u0275\u0275text(2),s.\u0275\u0275pipe(3,"date"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"div",10),s.\u0275\u0275text(5),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&t){var n=e.$implicit;s.\u0275\u0275property("ngClass",s.\u0275\u0275pureFunction2(6,f,n.isMy,!n.isMy)),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind2(3,3,n.date,"dd/MM/yyyy HH:mm:ss")),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(n.text)}}var p=function(){function t(e,n,r){y(this,t),this.chatService=e,this.friendService=n,this.el=r,this.mesLength=0,this.myActiveMess={id:null,text:"",isMy:!0,viewed:!0},this._keyUp=this.keyUp.bind(this)}return _(t,[{key:"ngOnChanges",value:function(t){console.log("ChatRoomComponent ngOnChanges",t)}},{key:"ngOnInit",value:function(){this.name=this.room.name,this.messages=this.room.messages,this.id=this.room.id,this.chatService.chatHistory(this.id),this.chatService.resolveUnViewedIds(this.room.id)}},{key:"ngAfterViewInit",value:function(){this.scrollEl=this.el.nativeElement.getElementsByClassName("scroll")[0]}},{key:"ngDoCheck",value:function(){var t=this;this.mesLength!=this.messages.length&&(this.mesLength=this.messages.length,setTimeout(function(){t.scrollEl.scrollTop=t.scrollEl.scrollHeight},10))}},{key:"onSend",value:function(){var t=a.deepCopy(this.myActiveMess);this.myActiveMess.text="",this.chatService.onSend(this.id,t)}},{key:"keyUp",value:function(t){13!=t.keyCode||t.ctrlKey||this.onSend()}},{key:"onClose",value:function(){this.chatService.closeRoom(this.id)}},{key:"onFocus",value:function(){document.addEventListener("keyup",this._keyUp)}},{key:"onBlur",value:function(){document.removeEventListener("keyup",this._keyUp)}}]),t}();e.ChatRoomComponent=p,p.\u0275fac=function(t){return new(t||p)(s.\u0275\u0275directiveInject(u.ChatService),s.\u0275\u0275directiveInject(c.FriendsService),s.\u0275\u0275directiveInject(s.ElementRef))},p.\u0275cmp=s.\u0275\u0275defineComponent({type:p,selectors:[["chat-room"]],inputs:{room:"room"},features:[s.\u0275\u0275NgOnChangesFeature],decls:11,vars:3,consts:[[1,"close",3,"click"],[1,"title"],[1,"scroll"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],[1,"text-area-container"],[3,"ngModel","ngModelChange","blur","focus"],[1,"buttons-container"],[1,"send",3,"click"],[1,"message",3,"ngClass"],[1,"date"],[1,"text"]],template:function(t,e){1&t&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275listener("click",function(){return e.onClose()}),s.\u0275\u0275text(1,"\xd7"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(2,"div",1),s.\u0275\u0275text(3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"div",2),s.\u0275\u0275template(5,d,6,9,"div",3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(6,"div",4),s.\u0275\u0275elementStart(7,"textarea",5),s.\u0275\u0275listener("ngModelChange",function(t){return e.myActiveMess.text=t})("blur",function(){return e.onBlur()})("focus",function(){return e.onFocus()}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"div",6),s.\u0275\u0275elementStart(9,"div",7),s.\u0275\u0275listener("click",function(){return e.onSend()}),s.\u0275\u0275text(10,"Send"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&t&&(s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(e.name),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngForOf",e.messages),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngModel",e.myActiveMess.text))},directives:[l.NgForOf,h.DefaultValueAccessor,h.NgControlStatus,h.NgModel,l.NgClass],pipes:[l.DatePipe],styles:["[_nghost-%COMP%]{background:hsla(0,0%,100%,.8);display:block;width:100%;min-width:300px;max-width:300px;padding:15px;position:relative}.title[_ngcontent-%COMP%]{margin-bottom:5px}textarea[_ngcontent-%COMP%]{width:100%;height:80px}.buttons-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.buttons-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:pointer}.scroll[_ngcontent-%COMP%]{width:100%;max-height:200px;overflow-y:auto}.message[_ngcontent-%COMP%]{margin-bottom:5px}.message[_ngcontent-%COMP%] > .date[_ngcontent-%COMP%]{color:gray;font-size:10px}.message.my[_ngcontent-%COMP%]{margin-left:15px}.message.my[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{color:#1e90ff}.message.opponent[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{color:#3a9d31}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;cursor:pointer;padding:15px;font-size:20px;font:30px/15px bold}"]})},Zisu:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MyPopupDelMyMarker=void 0;var a=o(n("fXoL")),s=_(function t(e){y(this,t),this.name=e.name});e.MyPopupDelMyMarker=s,s.\u0275fac=function(t){return new(t||s)(a.\u0275\u0275directiveInject("popupInitialParams"))},s.\u0275cmp=a.\u0275\u0275defineComponent({type:s,selectors:[["my-popup-del-my-marker"]],decls:2,vars:1,template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&t&&(a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1("Delete marker: ",e.name,""))},encapsulation:2})},Zq4v:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.StravaService=void 0,n("XVN5");var a=n("AQ+O"),s=o(n("fXoL")),u=o(n("XVN5")),c=function(){function t(e){y(this,t),this.io=e,this.stravaClientId=null,this.stravaClientSecret=null,this.socket=e.socket,this.docsFor=[]}return _(t,[{key:"addToExport",value:function(t){this.docsFor.push(t)}},{key:"sendTrackToStrava",value:function(t,e){var n=this;return a.pointsToXmlDoc(t.points).then(function(t){var r=a.xml2string(t);return n.socket.$emit("sendTrackToStrava",{file:r,authorization:e})})}},{key:"stravaOauth",value:function(t){var e=this;return this.socket.$emit("stravaOauth",{stravaCode:t}).then(function(t){if("ok"==t.result){var n=t.data.athlete;e.athlete={firstName:n.firstname,lastName:n.lastname,profile:n.profile,city:n.city,authorization:t.data.token_type+" "+t.data.access_token}}return console.log("stravaOauth->",t),t})}},{key:"removeTrack",value:function(t){-1<this.docsFor.indexOf(t)&&this.docsFor.splice(this.docsFor.indexOf(t),1)}},{key:"getStrava",value:function(){var t=this;return this.stravaClientId&&this.stravaClientSecret?Promise.resolve({stravaClientId:this.stravaClientId,stravaClientSecret:this.stravaClientSecret}):this.socket.$emit("getStrava").then(function(e){return e&&"ok"==e.result&&e.data?(t.stravaClientId=e.data.stravaClientId,t.stravaClientSecret=e.data.stravaClientSecret,{stravaClientId:t.stravaClientId,stravaClientSecret:t.stravaClientSecret}):Promise.reject("no auth")})}},{key:"isAuthorize",value:function(){var t=this;return this.athlete?Promise.resolve(this.athlete):this.socket.$emit("isAuthorizeStrava").then(function(e){if(console.log(e),e.result&&"ok"==e.result){var n=e.data.athlete;return t.athlete={firstName:n.firstname,lastName:n.lastname,profile:n.profile,city:n.city,authorization:e.data.token_type+" "+e.data.access_token},t.athlete}return Promise.reject(!1)})}},{key:"onDeauthorize",value:function(){var t=this;return this.socket.$emit("onDeauthorizeStrava",this.athlete.authorization).then(function(e){return e&&"ok"==e.result&&(t.athlete=void 0),e})}}]),t}();e.StravaService=c,c.\u0275fac=function(t){return new(t||c)(s.\u0275\u0275inject(u.Io))},c.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac})},aVPm:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.NoFoundComponent=void 0;var a=o(n("fXoL")),s=_(function t(){y(this,t)});e.NoFoundComponent=s,s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=a.\u0275\u0275defineComponent({type:s,selectors:[["ng-component"]],decls:2,vars:0,consts:[[2,"color","#082846","padding","10px","text-align","center"]],template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"h4",0),a.\u0275\u0275text(1,"Page not found"),a.\u0275\u0275elementEnd())},encapsulation:2})},akSB:function(t,e,n){var r=n("AdPF"),i=n("0z79"),o=n("Cl5A"),a=n("CIKq");e.polling=function(t){var e=!1,n=!1,a=!1!==t.jsonp;if("undefined"!=typeof location){var s="https:"===location.protocol,u=location.port;u||(u=s?443:80),e=t.hostname!==location.hostname||u!==t.port,n=t.secure!==s}if(t.xdomain=e,t.xscheme=n,"open"in new r(t)&&!t.forceJSONP)return new i(t);if(!a)throw new Error("JSONP disabled");return new o(t)},e.websocket=a},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Object(r.b)(i.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("5+tZ");function i(t,e){return Object(r.b)(t,e,1)}},beVS:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MyRouterModule=void 0;var a=n("tyNb"),s=n("6LkE"),u=n("eWe8"),c=n("VydE"),l=n("JttP"),h=n("6uu6"),f=n("rID0"),d=n("hBuv"),p=n("dWTu"),v=n("I2Mf"),m=n("aVPm"),g=n("VvA2"),b=n("USbl"),w=n("7mgA"),x=n("TECC"),k=n("0Rmf"),C=n("WaRm"),S=o(n("fXoL")),E=(o(n("tyNb")),[{path:"",redirectTo:"auth/map",pathMatch:"full"},{path:"auth",component:s.AuthComponent,canActivate:[h.AuthService],children:[{path:"map",component:u.MapComponent,children:[{path:"registration",component:c.RegistrationComponent},{path:"device",component:l.DeviceComponent,children:[{path:":device",component:k.DeviceHelpComponent}]},{path:"profile",component:f.ProfileComponent},{path:"journal",component:d.JournalComponent,resolve:{L:d.LeafletResolver}},{path:"friends",component:p.FriendsComponent,children:[{path:"all",component:g.AllUserComponent},{path:":id",component:C.OneUserComponent}]},{path:"privatearea",component:v.PrivateArea},{path:"strava-invite",component:b.StravaComponent},{path:"strava-invite/:token",component:w.StravaAuthComponent},{path:"gtgbc",component:x.GtgbcComponent},{path:"gtgbc/:gtgbc",component:x.GtgbcComponent}]}]},{path:"404",component:m.NoFoundComponent},{path:"**",redirectTo:"404"}]),P=_(function t(){y(this,t)});e.MyRouterModule=P,P.\u0275fac=function(t){return new(t||P)},P.\u0275mod=S.\u0275\u0275defineNgModule({type:P}),P.\u0275inj=S.\u0275\u0275defineInjector({imports:[[a.RouterModule.forRoot(E,{useHash:!0,relativeLinkResolution:"legacy"})],a.RouterModule]})},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},cke4:function(t,e,n){!function(e){"use strict";function n(t){return parseInt(t)===t}function r(t){if(!n(t.length))return!1;for(var e=0;e<t.length;e++)if(!n(t[e])||t[e]<0||t[e]>255)return!1;return!0}function i(t,e){if(t.buffer&&"Uint8Array"===t.name)return e&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!r(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(n(t.length)&&r(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function o(t){return new Uint8Array(t)}function a(t,e,n,r,i){null==r&&null==i||(t=t.slice?t.slice(r,i):Array.prototype.slice.call(t,r,i)),e.set(t,n)}var s,u={toBytes:function(t){var e=[],n=0;for(t=encodeURI(t);n<t.length;){var r=t.charCodeAt(n++);37===r?(e.push(parseInt(t.substr(n,2),16)),n+=2):e.push(r)}return i(e)},fromBytes:function(t){for(var e=[],n=0;n<t.length;){var r=t[n];r<128?(e.push(String.fromCharCode(r)),n++):r>191&&r<224?(e.push(String.fromCharCode((31&r)<<6|63&t[n+1])),n+=2):(e.push(String.fromCharCode((15&r)<<12|(63&t[n+1])<<6|63&t[n+2])),n+=3)}return e.join("")}},c=(s="0123456789abcdef",{toBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},fromBytes:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(s[(240&r)>>4]+s[15&r])}return e.join("")}}),l={16:10,24:12,32:14},h=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],f=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],d=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],v=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],m=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],y=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],g=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],_=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],b=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],w=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],x=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],k=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],C=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],S=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function E(t){for(var e=[],n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}var P=function t(e){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(e,!0)}),this._prepare()};P.prototype._prepare=function(){var t=l[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,r=4*(t+1),i=this.key.length/4,o=E(this.key);for(e=0;e<i;e++)this._Ke[n=e>>2][e%4]=o[e],this._Kd[t-n][e%4]=o[e];for(var a,s=0,u=i;u<r;){if(o[0]^=f[(a=o[i-1])>>16&255]<<24^f[a>>8&255]<<16^f[255&a]<<8^f[a>>24&255]^h[s]<<24,s+=1,8!=i)for(e=1;e<i;e++)o[e]^=o[e-1];else{for(e=1;e<i/2;e++)o[e]^=o[e-1];for(o[i/2]^=f[255&(a=o[i/2-1])]^f[a>>8&255]<<8^f[a>>16&255]<<16^f[a>>24&255]<<24,e=i/2+1;e<i;e++)o[e]^=o[e-1]}for(e=0;e<i&&u<r;)this._Ke[c=u>>2][d=u%4]=o[e],this._Kd[t-c][d]=o[e++],u++}for(var c=1;c<t;c++)for(var d=0;d<4;d++)this._Kd[c][d]=x[(a=this._Kd[c][d])>>24&255]^k[a>>16&255]^C[a>>8&255]^S[255&a]},P.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,n=[0,0,0,0],r=E(t),i=0;i<4;i++)r[i]^=this._Ke[0][i];for(var a=1;a<e;a++){for(i=0;i<4;i++)n[i]=p[r[i]>>24&255]^v[r[(i+1)%4]>>16&255]^m[r[(i+2)%4]>>8&255]^y[255&r[(i+3)%4]]^this._Ke[a][i];r=n.slice()}var s,u=o(16);for(i=0;i<4;i++)u[4*i]=255&(f[r[i]>>24&255]^(s=this._Ke[e][i])>>24),u[4*i+1]=255&(f[r[(i+1)%4]>>16&255]^s>>16),u[4*i+2]=255&(f[r[(i+2)%4]>>8&255]^s>>8),u[4*i+3]=255&(f[255&r[(i+3)%4]]^s);return u},P.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,n=[0,0,0,0],r=E(t),i=0;i<4;i++)r[i]^=this._Kd[0][i];for(var a=1;a<e;a++){for(i=0;i<4;i++)n[i]=g[r[i]>>24&255]^_[r[(i+3)%4]>>16&255]^b[r[(i+2)%4]>>8&255]^w[255&r[(i+1)%4]]^this._Kd[a][i];r=n.slice()}var s,u=o(16);for(i=0;i<4;i++)u[4*i]=255&(d[r[i]>>24&255]^(s=this._Kd[e][i])>>24),u[4*i+1]=255&(d[r[(i+3)%4]>>16&255]^s>>16),u[4*i+2]=255&(d[r[(i+2)%4]>>8&255]^s>>8),u[4*i+3]=255&(d[255&r[(i+1)%4]]^s);return u};var O=function t(e){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new P(e)};O.prototype.encrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=o(t.length),n=o(16),r=0;r<t.length;r+=16)a(t,n,0,r,r+16),a(n=this._aes.encrypt(n),e,r);return e},O.prototype.decrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=o(t.length),n=o(16),r=0;r<t.length;r+=16)a(t,n,0,r,r+16),a(n=this._aes.decrypt(n),e,r);return e};var T=function t(e,n){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",n){if(16!=n.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else n=o(16);this._lastCipherblock=i(n,!0),this._aes=new P(e)};T.prototype.encrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=o(t.length),n=o(16),r=0;r<t.length;r+=16){a(t,n,0,r,r+16);for(var s=0;s<16;s++)n[s]^=this._lastCipherblock[s];this._lastCipherblock=this._aes.encrypt(n),a(this._lastCipherblock,e,r)}return e},T.prototype.decrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=o(t.length),n=o(16),r=0;r<t.length;r+=16){a(t,n,0,r,r+16),n=this._aes.decrypt(n);for(var s=0;s<16;s++)e[r+s]=n[s]^this._lastCipherblock[s];a(t,this._lastCipherblock,0,r,r+16)}return e};var A=function t(e,n,r){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",n){if(16!=n.length)throw new Error("invalid initialation vector size (must be 16 size)")}else n=o(16);r||(r=1),this.segmentSize=r,this._shiftRegister=i(n,!0),this._aes=new P(e)};A.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,n=i(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)n[r+o]^=e[o];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(n,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n},A.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,n=i(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)n[r+o]^=e[o];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(t,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n};var I=function t(e,n){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",n){if(16!=n.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else n=o(16);this._lastPrecipher=i(n,!0),this._lastPrecipherIndex=16,this._aes=new P(e)};I.prototype.encrypt=function(t){for(var e=i(t,!0),n=0;n<e.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},I.prototype.decrypt=I.prototype.encrypt;var D=function t(e){if(!(this instanceof t))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=o(16),this.setValue(e)):this.setBytes(e)};D.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");if(t>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var e=15;e>=0;--e)this._counter[e]=t%256,t=parseInt(t/256)},D.prototype.setBytes=function(t){if(16!=(t=i(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},D.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var M=function t(e,n){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",n instanceof D||(n=new D(n)),this._counter=n,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new P(e)};M.prototype.encrypt=function(t){for(var e=i(t,!0),n=0;n<e.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[n]^=this._remainingCounter[this._remainingCounterIndex++];return e},M.prototype.decrypt=M.prototype.encrypt,t.exports={AES:P,Counter:D,ModeOfOperation:{ecb:O,cbc:T,cfb:A,ofb:I,ctr:M},utils:{hex:c,utf8:u},padding:{pkcs7:{pad:function(t){var e=16-(t=i(t,!0)).length%16,n=o(t.length+e);a(t,n);for(var r=t.length;r<n.length;r++)n[r]=e;return n},strip:function(t){if((t=i(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var n=t.length-e,r=0;r<e;r++)if(t[n+r]!==e)throw new Error("PKCS#7 invalid padding byte");var s=o(n);return a(t,s,0,0,n),s}}},_arrayTest:{coerceArray:i,createArray:o,copyArray:a}}}()},coRy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.elapsedStatus=void 0,e.elapsedStatus=function(t){var e=new Date(t.date).getTime(),n=(new Date).getTime()-e;return n<6e5?t.speed<.1?"green":"arrow":n<432e5?"yellow":"white"}},cp0P:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("HDdC"),i=n("DH7j"),a=n("lJxs"),s=n("XoHu"),u=n("Cfvw");function c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){var r=e[0];if(Object(i.a)(r))return l(r,null);if(Object(s.a)(r)&&Object.getPrototypeOf(r)===Object.prototype){var u=Object.keys(r);return l(u.map(function(t){return r[t]}),u)}}if("function"==typeof e[e.length-1]){var c=e.pop();return l(e=1===e.length&&Object(i.a)(e[0])?e[0]:e,null).pipe(Object(a.a)(function(t){return c.apply(void 0,o(t))}))}return l(e,null)}function l(t,e){return new r.a(function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,a=0,s=function(s){var c=Object(u.a)(t[s]),l=!1;n.add(c.subscribe({next:function(t){l||(l=!0,a++),i[s]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&l||(a===r&&n.next(e?e.reduce(function(t,e,n){return t[e]=i[n],t},{}):i),n.complete())}}))},c=0;c<r;c++)s(c);else n.complete()})}},dOpE:function(t,e){!function(t){"use strict";e.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;n<i;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(e){var n,r,i,o,a,s=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var l=new ArrayBuffer(s),h=new Uint8Array(l);for(n=0;n<u;n+=4)r=t.indexOf(e[n]),i=t.indexOf(e[n+1]),o=t.indexOf(e[n+2]),a=t.indexOf(e[n+3]),h[c++]=r<<2|i>>4,h[c++]=(15&i)<<4|o>>2,h[c++]=(3&o)<<6|63&a;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},dWTu:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.FriendsComponent=e.UsersContainer=void 0,n("fXoL"),n("ofXK"),n("tpgc"),n("tyNb"),n("jHPu"),n("Sy1n"),n("mu9K"),n("wlYr");var a=o(n("fXoL")),s=o(n("ofXK")),u=o(n("Sy1n")),c=o(n("tyNb")),l=o(n("wlYr")),h=o(n("tpgc")),f=o(n("jHPu"));function d(t,e){if(1&t&&(a.\u0275\u0275elementStart(0,"div",14),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&t){var n=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1("",n.chatUnViewed.length," ")}}var p=function(t){return{"chat-un-viewed":t}};function v(t,e){if(1&t){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tr"),a.\u0275\u0275elementStart(1,"td"),a.\u0275\u0275elementStart(2,"div",7),a.\u0275\u0275element(3,"img",8),a.\u0275\u0275elementStart(4,"div",9),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(n);var t=e.$implicit;return a.\u0275\u0275nextContext().startChat(t)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,d,2,1,"div",10),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"td"),a.\u0275\u0275elementStart(7,"div",11),a.\u0275\u0275text(8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"div",12),a.\u0275\u0275text(10),a.\u0275\u0275pipe(11,"date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"td"),a.\u0275\u0275elementStart(13,"div",13),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(n);var t=e.$implicit;return a.\u0275\u0275nextContext().onDelFriend(t)}),a.\u0275\u0275text(14,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit;a.\u0275\u0275advance(3),a.\u0275\u0275property("src",r.image||"img/no-avatar.gif",a.\u0275\u0275sanitizeUrl),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(8,p,r.chatUnViewed&&r.chatUnViewed.length)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",r.chatUnViewed&&r.chatUnViewed.length),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(r.name),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1("Last visit ",a.\u0275\u0275pipeBind2(11,5,r.lastVisit,"dd/MM/yyyy HH:mm:ss")," ")}}var m=_(function t(e){y(this,t);var n=window,r=document,i=r.documentElement,o=r.getElementsByTagName("body")[0];e.nativeElement.style.maxHeight=(n.innerHeight||i.clientHeight||o.clientHeight)-160+"px"});e.UsersContainer=m,m.\u0275fac=function(t){return new(t||m)(a.\u0275\u0275directiveInject(a.ElementRef))},m.\u0275dir=a.\u0275\u0275defineDirective({type:m,selectors:[["users-container"]]});var g=function(){function t(e,n,r,i,o,a,s){y(this,t),this.location=e,this.lh=n,this.route=r,this.toast=i,this.router=o,this.friendsService=a,this.chatService=s,this.friends=a.friends}return _(t,[{key:"onAccept",value:function(t){}},{key:"onDelFriend",value:function(t){}},{key:"onClose",value:function(){this.lh.is?this.location.back():this.router.navigate(["/auth/map"])}},{key:"getAllUsers",value:function(){this.router.navigate(["/auth/map/friends/all"])}},{key:"onReject",value:function(t){}},{key:"onCancelInvite",value:function(t){}},{key:"startChat",value:function(t){this.chatService.onEnterRoom(t)}}]),t}();e.FriendsComponent=g,g.\u0275fac=function(t){return new(t||g)(a.\u0275\u0275directiveInject(s.Location),a.\u0275\u0275directiveInject(u.NavigationHistory),a.\u0275\u0275directiveInject(c.ActivatedRoute),a.\u0275\u0275directiveInject(l.ToastService),a.\u0275\u0275directiveInject(c.Router),a.\u0275\u0275directiveInject(h.FriendsService),a.\u0275\u0275directiveInject(f.ChatService))},g.\u0275cmp=a.\u0275\u0275defineComponent({type:g,selectors:[["ng-component"]],decls:19,vars:1,consts:[[1,"content"],[1,"close",3,"click"],[1,"row"],[1,"flex-cell"],[4,"ngFor","ngForOf"],[1,"border-hidden"],[2,"float","right",3,"click"],[1,"img-container"],[3,"src"],["title","\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043b\u0438\u0447\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",1,"ico-chat",3,"ngClass","click"],["class","ico-un-viewed",4,"ngIf"],[1,"name"],[1,"last-visit"],[1,"invite",3,"click"],[1,"ico-un-viewed"]],template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275elementStart(1,"div"),a.\u0275\u0275elementStart(2,"div",1),a.\u0275\u0275listener("click",function(){return e.onClose()}),a.\u0275\u0275text(3,"\xd7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"users-container"),a.\u0275\u0275elementStart(5,"div",2),a.\u0275\u0275elementStart(6,"div",3),a.\u0275\u0275elementStart(7,"h4"),a.\u0275\u0275text(8,"\u0414\u0440\u0443\u0437\u044c\u044f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"table"),a.\u0275\u0275elementStart(10,"tbody"),a.\u0275\u0275template(11,v,15,10,"tr",4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"div",2),a.\u0275\u0275elementStart(13,"div",5),a.\u0275\u0275elementStart(14,"div"),a.\u0275\u0275elementStart(15,"button",6),a.\u0275\u0275listener("click",function(){return e.getAllUsers()}),a.\u0275\u0275text(16,"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435\u0445 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(17,"div",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(18,"router-outlet"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&t&&(a.\u0275\u0275advance(11),a.\u0275\u0275property("ngForOf",e.friends))},directives:[m,s.NgForOf,c.RouterOutlet,s.NgClass,s.NgIf],pipes:[s.DatePipe],styles:["[_nghost-%COMP%]{position:absolute;left:0;top:0;z-index:5;width:100%}*[_ngcontent-%COMP%]{box-sizing:border-box}.gray[_ngcontent-%COMP%]{color:#a9a9a9}users-container[_ngcontent-%COMP%]{display:block;overflow-y:auto}users-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:33.3%;border-bottom:1px solid #cfdcef;padding:5px 0}h4[_ngcontent-%COMP%]{padding:8px 0}.invite[_ngcontent-%COMP%]{font-size:12px;float:right;cursor:pointer;text-align:right;margin-left:20px}.invite.accept[_ngcontent-%COMP%]{color:#1e90ff;font-weight:700}.invite.reject[_ngcontent-%COMP%]{color:gray}.content[_ngcontent-%COMP%]{position:absolute;background:hsla(0,0%,100%,.9);min-width:600px;margin-left:-300px;padding:0;left:50%;top:calc(100% + 20px);box-shadow:1px 1px 3px rgba(0,0,0,.4)}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:30px}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;cursor:pointer;padding:15px;font-size:20px;font:30px/15px bold}.users[_ngcontent-%COMP%]{overflow-y:auto}.name[_ngcontent-%COMP%]{font-weight:700}.last-visit[_ngcontent-%COMP%]{color:#1e90ff;font-size:12px}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{min-width:50px;width:10%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:30%;padding:0 5px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){min-width:50px;width:30%}.img-container[_ngcontent-%COMP%]{position:relative;width:80px}img[_ngcontent-%COMP%]{width:60px;height:60px;display:block;overflow:hidden;border-radius:50%}.ico-chat[_ngcontent-%COMP%]{width:30px;position:absolute;bottom:0;right:0;height:30px;cursor:pointer;opacity:.7;background:url(http://178.62.44.54:8080/ico-chat-gray.png) no-repeat 50%;background-size:80%}.ico-chat.chat-un-viewed[_ngcontent-%COMP%]{background:url(http://178.62.44.54:8080/ico-chat.png) no-repeat 50%;background-size:80%}.ico-un-viewed[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;border-radius:50%;padding:5px;font:12px/6px sans-serif;font-size:10px;background:#ff8b15;box-shadow:0 0 4px #fff}.row[_ngcontent-%COMP%]{margin:0}@media screen and (max-width:600px){.content[_ngcontent-%COMP%]{position:relative;width:100%;min-width:inherit;left:0;margin-left:0}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:15px}}"]})},eIep:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function a(t,e){return"function"==typeof e?function(n){return n.pipe(a(function(n,o){return Object(i.a)(t(n,o)).pipe(Object(r.a)(function(t,r){return e(n,t,o,r)}))}))}:function(e){return e.lift(new s(t))}}var s=function(){function t(e){y(this,t),this.project=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new c(t,this.project))}}]),t}(),c=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).project=r,i.index=0,i}return _(n,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=this.innerSubscription;e&&e.unsubscribe();var n=new o.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(o.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||u(m(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&u(m(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t){this.destination.next(t)}}]),n}(o.b)},eOtv:function(t,e,n){var r=n("lKxJ"),i=n("KFGy"),o=n("2xqC"),a=n("Uwu7"),s=n("2Dig"),u=n("QN7Q"),c=n("x7D4")("socket.io-client:manager"),l=n("7jRU"),h=n("C2QD"),f=Object.prototype.hasOwnProperty;function d(t,e){if(!(this instanceof d))return new d(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||a;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=d,d.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},d.prototype.updateSocketIds=function(){for(var t in this.nsps)f.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},d.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},o(d.prototype),d.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},d.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},d.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(t,e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=s(n,"open",function(){i.onopen(),t&&t()}),a=s(n,"error",function(e){if(c("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else i.maybeReconnectOnOpen()});if(!1!==this._timeout){var u=this._timeout;c("connect attempt will timeout after %d",u),0===u&&o.destroy();var l=setTimeout(function(){c("connect attempt timed out after %d",u),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",u)},u);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(o),this.subs.push(a),this},d.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(s(t,"data",u(this,"ondata"))),this.subs.push(s(t,"ping",u(this,"onping"))),this.subs.push(s(t,"pong",u(this,"onpong"))),this.subs.push(s(t,"error",u(this,"onerror"))),this.subs.push(s(t,"close",u(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",u(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(t){this.decoder.add(t)},d.prototype.ondecoded=function(t){this.emit("packet",t)},d.prototype.onerror=function(t){c("error",t),this.emitAll("error",t)},d.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new i(this,t,e),this.nsps[t]=n;var r=this;n.on("connecting",o),n.on("connect",function(){n.id=r.generateId(t)}),this.autoConnect&&o()}function o(){~l(r.connecting,n)||r.connecting.push(n)}return n},d.prototype.destroy=function(t){var e=l(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},d.prototype.packet=function(t){c("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},d.prototype.cleanup=function(){c("cleanup");for(var t=this.subs.length,e=0;e<t;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(t){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();c("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(c("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(c("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(c("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},eWe8:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MapComponent=void 0,n("tyNb");var a=n("9lQw"),s=n("GdlM"),u=n("kU1M"),c=o(n("fXoL")),h=o(n("tyNb")),d=o(n("GW7a")),p=o(n("qVd3")),v=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this)).route=t,t.queryParams.pipe(u.takeUntil(r.onDestroy$)).subscribe(function(t){console.log(t)}),r}return _(n)}(s.SelfUnsubscribable);e.MapComponent=v,v.\u0275fac=function(t){return new(t||v)(c.\u0275\u0275directiveInject(h.ActivatedRoute))},v.\u0275cmp=c.\u0275\u0275defineComponent({type:v,selectors:[["ng-component"]],hostVars:1,hostBindings:function(t,e){2&t&&c.\u0275\u0275syntheticHostProperty("@fadeInAnimation",void 0)},features:[c.\u0275\u0275ProvidersFeature([]),c.\u0275\u0275InheritDefinitionFeature],decls:4,vars:0,template:function(t,e){1&t&&(c.\u0275\u0275element(0,"info-position"),c.\u0275\u0275element(1,"router-outlet"),c.\u0275\u0275elementStart(2,"mapbox-gl"),c.\u0275\u0275text(3," map loading..."),c.\u0275\u0275elementEnd())},directives:[d.InfoPositionComponent,h.RouterOutlet,p.MapboxGlDirective],styles:["[_nghost-%COMP%]{display:block;position:relative;height:100%;width:100%;box-sizing:border-box}[_nghost-%COMP%]   mapbox-gl[_ngcontent-%COMP%]{display:block;width:100%;height:100%}[_nghost-%COMP%] .mapboxgl-popup-content{padding:5px;font:12px/12px Geneva,Arial,Helvetica,sans-serif;font-size:14px}[_nghost-%COMP%] .user-icon{border-radius:50%;background:#fff}[_nghost-%COMP%] .user-icon[status=yellow]{background:#ff0}[_nghost-%COMP%] .user-icon[status=green]{background:#2ff63a}[_nghost-%COMP%] .user-icon[status=arrow]{background:#3690f6}[_nghost-%COMP%] .user-icon img{display:block;width:40px;height:40px;padding:3px;border-radius:50%}[_nghost-%COMP%] .track-icon{width:20px;height:20px}[_nghost-%COMP%] .track-icon>div{width:100%;height:100%;background:url(http://178.62.44.54:8080/sprite.png) no-repeat 0 0;background-size:20px 80px}[_nghost-%COMP%] .info-point>div{margin:5px 0}[_nghost-%COMP%] .info-point>div.time{color:#1e90ff}[_nghost-%COMP%] .info-point button{background:none;color:gray;border:none;outline:none}[_nghost-%COMP%] .mapboxgl-popup-content{background:hsla(0,0%,100%,.8)}"],data:{animation:[a.fadeInAnimation]}})},f7CA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TElement=void 0,e.TElement=function(){function t(e){y(this,t),this.attr={},this.innerText="",this.children=[],this.elName=e}return _(t,[{key:"appendChild",value:function(t){return this.children.push(t),this}},{key:"toString",value:function(){var t=this,e="";this.children.length&&(e=this.children.reduce(function(t,e){return new String(t.toString()).concat(e.toString())},""));var n=Object.keys(this.attr).reduce(function(e,n){return String(e).concat(" ",n,"=",'"',t.attr[n],'"')},"");return"<".concat(this.elName,"  ").concat(n,">").concat(this.innerText).concat(e,"</").concat(this.elName,">")}},{key:"getElementsByTagName",value:function(t){return this._getElementsByTagName(t,this.children)}},{key:"setAttribute",value:function(t,e){return this.attr[t]=e,this}},{key:"_getElementsByTagName",value:function(t,e){var n=this,r=[];return e.length&&e.forEach(function(e){if(e.elName===t&&r.push(e),e.children.length){var i=n._getElementsByTagName(t,e.children);i.length&&r.push.apply(r,o(i))}}),r}}]),t}()},fXoL:function(t,a,s){"use strict";s.r(a),s.d(a,"ANALYZE_FOR_ENTRY_COMPONENTS",function(){return Hn}),s.d(a,"APP_BOOTSTRAP_LISTENER",function(){return Ky}),s.d(a,"APP_ID",function(){return qy}),s.d(a,"APP_INITIALIZER",function(){return Vy}),s.d(a,"ApplicationInitStatus",function(){return Uy}),s.d(a,"ApplicationModule",function(){return R_}),s.d(a,"ApplicationRef",function(){return Xg}),s.d(a,"Attribute",function(){return Un}),s.d(a,"COMPILER_OPTIONS",function(){return vg}),s.d(a,"CUSTOM_ELEMENTS_SCHEMA",function(){return Yi}),s.d(a,"ChangeDetectionStrategy",function(){return K}),s.d(a,"ChangeDetectorRef",function(){return Td}),s.d(a,"Compiler",function(){return pg}),s.d(a,"CompilerFactory",function(){return mg}),s.d(a,"Component",function(){return Ey}),s.d(a,"ComponentFactory",function(){return Uf}),s.d(a,"ComponentFactoryResolver",function(){return Gf}),s.d(a,"ComponentRef",function(){return Vf}),s.d(a,"ContentChild",function(){return Wn}),s.d(a,"ContentChildren",function(){return Gn}),s.d(a,"DEFAULT_CURRENCY_CODE",function(){return Qy}),s.d(a,"DebugElement",function(){return O_}),s.d(a,"DebugEventListener",function(){return s_}),s.d(a,"DebugNode",function(){return P_}),s.d(a,"DefaultIterableDiffer",function(){return fd}),s.d(a,"Directive",function(){return Sy}),s.d(a,"ElementRef",function(){return td}),s.d(a,"EmbeddedViewRef",function(){return a_}),s.d(a,"ErrorHandler",function(){return Ki}),s.d(a,"EventEmitter",function(){return Sm}),s.d(a,"Host",function(){return Ir}),s.d(a,"HostBinding",function(){return Ay}),s.d(a,"HostListener",function(){return Iy}),s.d(a,"INJECTOR",function(){return _s}),s.d(a,"Inject",function(){return Pr}),s.d(a,"InjectFlags",function(){return H}),s.d(a,"Injectable",function(){return $u}),s.d(a,"InjectionToken",function(){return qn}),s.d(a,"Injector",function(){return Rs}),s.d(a,"Input",function(){return Oy}),s.d(a,"IterableDiffers",function(){return wd}),s.d(a,"KeyValueDiffers",function(){return kd}),s.d(a,"LOCALE_ID",function(){return $y}),s.d(a,"MissingTranslationStrategy",function(){return ng}),s.d(a,"ModuleWithComponentFactories",function(){return og}),s.d(a,"NO_ERRORS_SCHEMA",function(){return Ji}),s.d(a,"NgModule",function(){return Ny}),s.d(a,"NgModuleFactory",function(){return Vd}),s.d(a,"NgModuleFactoryLoader",function(){return Yg}),s.d(a,"NgModuleRef",function(){return zd}),s.d(a,"NgProbeToken",function(){return zg}),s.d(a,"NgZone",function(){return _g}),s.d(a,"Optional",function(){return Or}),s.d(a,"Output",function(){return Ty}),s.d(a,"PACKAGE_ROOT_URL",function(){return Yy}),s.d(a,"PLATFORM_ID",function(){return Xy}),s.d(a,"PLATFORM_INITIALIZER",function(){return Wy}),s.d(a,"Pipe",function(){return Py}),s.d(a,"PlatformRef",function(){return Gg}),s.d(a,"Query",function(){return Zn}),s.d(a,"QueryList",function(){return Pm}),s.d(a,"ReflectiveInjector",function(){return bc}),s.d(a,"ReflectiveKey",function(){return oc}),s.d(a,"Renderer2",function(){return rd}),s.d(a,"RendererFactory2",function(){return nd}),s.d(a,"RendererStyleFlags2",function(){return go}),s.d(a,"ResolvedReflectiveFactory",function(){return hc}),s.d(a,"Sanitizer",function(){return sd}),s.d(a,"SecurityContext",function(){return ji}),s.d(a,"Self",function(){return Tr}),s.d(a,"SimpleChange",function(){return Rt}),s.d(a,"SkipSelf",function(){return Ar}),s.d(a,"SystemJsNgModuleLoader",function(){return r_}),s.d(a,"SystemJsNgModuleLoaderConfig",function(){return e_}),s.d(a,"TRANSLATIONS",function(){return tg}),s.d(a,"TRANSLATIONS_FORMAT",function(){return eg}),s.d(a,"TemplateRef",function(){return Rd}),s.d(a,"Testability",function(){return Eg}),s.d(a,"TestabilityRegistry",function(){return Pg}),s.d(a,"Type",function(){return $n}),s.d(a,"VERSION",function(){return cd}),s.d(a,"Version",function(){return ud}),s.d(a,"ViewChild",function(){return Kn}),s.d(a,"ViewChildren",function(){return Xn}),s.d(a,"ViewContainerRef",function(){return Hd}),s.d(a,"ViewEncapsulation",function(){return $}),s.d(a,"ViewRef",function(){return o_}),s.d(a,"WrappedValue",function(){return mu}),s.d(a,"asNativeElements",function(){return l_}),s.d(a,"assertPlatform",function(){return qg}),s.d(a,"createPlatform",function(){return Vg}),s.d(a,"createPlatformFactory",function(){return Ug}),s.d(a,"defineInjectable",function(){return L}),s.d(a,"destroyPlatform",function(){return Hg}),s.d(a,"enableProdMode",function(){return Lg}),s.d(a,"forwardRef",function(){return S}),s.d(a,"getDebugNode",function(){return k_}),s.d(a,"getModuleFactory",function(){return Qg}),s.d(a,"getPlatform",function(){return Zg}),s.d(a,"inject",function(){return kr}),s.d(a,"isDevMode",function(){return Mg}),s.d(a,"platformCore",function(){return T_}),s.d(a,"resolveForwardRef",function(){return E}),s.d(a,"setTestabilityGetter",function(){return Og}),s.d(a,"\u02750",function(){return Er}),s.d(a,"\u0275ALLOW_MULTIPLE_PLATFORMS",function(){return Bg}),s.d(a,"\u0275APP_ID_RANDOM_PROVIDER",function(){return Zy}),s.d(a,"\u0275CREATE_ATTRIBUTE_DECORATOR__POST_R3__",function(){return Vn}),s.d(a,"\u0275ChangeDetectorStatus",function(){return Y}),s.d(a,"\u0275CodegenComponentFactoryResolver",function(){return Wf}),s.d(a,"\u0275Compiler_compileModuleAndAllComponentsAsync__POST_R3__",function(){return fg}),s.d(a,"\u0275Compiler_compileModuleAndAllComponentsSync__POST_R3__",function(){return lg}),s.d(a,"\u0275Compiler_compileModuleAsync__POST_R3__",function(){return ug}),s.d(a,"\u0275Compiler_compileModuleSync__POST_R3__",function(){return ag}),s.d(a,"\u0275ComponentFactory",function(){return Uf}),s.d(a,"\u0275Console",function(){return Jy}),s.d(a,"\u0275DEFAULT_LOCALE_ID",function(){return Eh}),s.d(a,"\u0275EMPTY_ARRAY",function(){return Up}),s.d(a,"\u0275EMPTY_MAP",function(){return qp}),s.d(a,"\u0275INJECTOR_IMPL__POST_R3__",function(){return Ls}),s.d(a,"\u0275INJECTOR_SCOPE",function(){return ws}),s.d(a,"\u0275LifecycleHooksFeature",function(){return nu}),s.d(a,"\u0275LocaleDataIndex",function(){return Ch}),s.d(a,"\u0275NG_COMP_DEF",function(){return st}),s.d(a,"\u0275NG_DIR_DEF",function(){return ut}),s.d(a,"\u0275NG_ELEMENT_ID",function(){return dt}),s.d(a,"\u0275NG_INJ_DEF",function(){return V}),s.d(a,"\u0275NG_MOD_DEF",function(){return lt}),s.d(a,"\u0275NG_PIPE_DEF",function(){return ct}),s.d(a,"\u0275NG_PROV_DEF",function(){return z}),s.d(a,"\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR",function(){return Lv}),s.d(a,"\u0275NO_CHANGE",function(){return fa}),s.d(a,"\u0275NgModuleFactory",function(){return Qv}),s.d(a,"\u0275NoopNgZone",function(){return Sg}),s.d(a,"\u0275ReflectionCapabilities",function(){return fr}),s.d(a,"\u0275Render3ComponentFactory",function(){return Hv}),s.d(a,"\u0275Render3ComponentRef",function(){return Zv}),s.d(a,"\u0275Render3NgModuleRef",function(){return $v}),s.d(a,"\u0275RuntimeError",function(){return O}),s.d(a,"\u0275SWITCH_CHANGE_DETECTOR_REF_FACTORY__POST_R3__",function(){return Pd}),s.d(a,"\u0275SWITCH_COMPILE_COMPONENT__POST_R3__",function(){return Dy}),s.d(a,"\u0275SWITCH_COMPILE_DIRECTIVE__POST_R3__",function(){return My}),s.d(a,"\u0275SWITCH_COMPILE_INJECTABLE__POST_R3__",function(){return Qu}),s.d(a,"\u0275SWITCH_COMPILE_NGMODULE__POST_R3__",function(){return By}),s.d(a,"\u0275SWITCH_COMPILE_PIPE__POST_R3__",function(){return Ly}),s.d(a,"\u0275SWITCH_ELEMENT_REF_FACTORY__POST_R3__",function(){return $f}),s.d(a,"\u0275SWITCH_IVY_ENABLED__POST_R3__",function(){return rg}),s.d(a,"\u0275SWITCH_RENDERER2_FACTORY__POST_R3__",function(){return id}),s.d(a,"\u0275SWITCH_TEMPLATE_REF_FACTORY__POST_R3__",function(){return Ld}),s.d(a,"\u0275SWITCH_VIEW_CONTAINER_REF_FACTORY__POST_R3__",function(){return Ud}),s.d(a,"\u0275_sanitizeHtml",function(){return Mi}),s.d(a,"\u0275_sanitizeUrl",function(){return vi}),s.d(a,"\u0275allowSanitizationBypassAndThrow",function(){return ri}),s.d(a,"\u0275and",function(){return F_}),s.d(a,"\u0275angular_packages_core_core_a",function(){return P}),s.d(a,"\u0275angular_packages_core_core_b",function(){return br}),s.d(a,"\u0275angular_packages_core_core_ba",function(){return j_}),s.d(a,"\u0275angular_packages_core_core_bb",function(){return Ph}),s.d(a,"\u0275angular_packages_core_core_bc",function(){return Pv}),s.d(a,"\u0275angular_packages_core_core_bd",function(){return ap}),s.d(a,"\u0275angular_packages_core_core_be",function(){return Nt}),s.d(a,"\u0275angular_packages_core_core_bf",function(){return qv}),s.d(a,"\u0275angular_packages_core_core_bg",function(){return _n}),s.d(a,"\u0275angular_packages_core_core_bh",function(){return de}),s.d(a,"\u0275angular_packages_core_core_bi",function(){return Ce}),s.d(a,"\u0275angular_packages_core_core_bj",function(){return Ue}),s.d(a,"\u0275angular_packages_core_core_bl",function(){return hm}),s.d(a,"\u0275angular_packages_core_core_bm",function(){return fm}),s.d(a,"\u0275angular_packages_core_core_bn",function(){return dm}),s.d(a,"\u0275angular_packages_core_core_bo",function(){return pm}),s.d(a,"\u0275angular_packages_core_core_bp",function(){return vm}),s.d(a,"\u0275angular_packages_core_core_bq",function(){return qi}),s.d(a,"\u0275angular_packages_core_core_br",function(){return zn}),s.d(a,"\u0275angular_packages_core_core_bs",function(){return Bn}),s.d(a,"\u0275angular_packages_core_core_bv",function(){return b}),s.d(a,"\u0275angular_packages_core_core_bw",function(){return bs}),s.d(a,"\u0275angular_packages_core_core_bx",function(){return Z}),s.d(a,"\u0275angular_packages_core_core_bz",function(){return $t}),s.d(a,"\u0275angular_packages_core_core_c",function(){return Sr}),s.d(a,"\u0275angular_packages_core_core_cb",function(){return wo}),s.d(a,"\u0275angular_packages_core_core_cc",function(){return Sf}),s.d(a,"\u0275angular_packages_core_core_d",function(){return wc}),s.d(a,"\u0275angular_packages_core_core_e",function(){return uc}),s.d(a,"\u0275angular_packages_core_core_f",function(){return pc}),s.d(a,"\u0275angular_packages_core_core_g",function(){return Hy}),s.d(a,"\u0275angular_packages_core_core_h",function(){return ad}),s.d(a,"\u0275angular_packages_core_core_i",function(){return Yf}),s.d(a,"\u0275angular_packages_core_core_j",function(){return Jf}),s.d(a,"\u0275angular_packages_core_core_k",function(){return Jg}),s.d(a,"\u0275angular_packages_core_core_l",function(){return Nd}),s.d(a,"\u0275angular_packages_core_core_m",function(){return Bd}),s.d(a,"\u0275angular_packages_core_core_n",function(){return Zd}),s.d(a,"\u0275angular_packages_core_core_o",function(){return u_}),s.d(a,"\u0275angular_packages_core_core_p",function(){return c_}),s.d(a,"\u0275angular_packages_core_core_q",function(){return C_}),s.d(a,"\u0275angular_packages_core_core_r",function(){return Ad}),s.d(a,"\u0275angular_packages_core_core_s",function(){return ld}),s.d(a,"\u0275angular_packages_core_core_t",function(){return yd}),s.d(a,"\u0275angular_packages_core_core_u",function(){return bd}),s.d(a,"\u0275angular_packages_core_core_v",function(){return xd}),s.d(a,"\u0275angular_packages_core_core_w",function(){return A_}),s.d(a,"\u0275angular_packages_core_core_x",function(){return I_}),s.d(a,"\u0275angular_packages_core_core_y",function(){return D_}),s.d(a,"\u0275angular_packages_core_core_z",function(){return L_}),s.d(a,"\u0275bypassSanitizationTrustHtml",function(){return oi}),s.d(a,"\u0275bypassSanitizationTrustResourceUrl",function(){return ci}),s.d(a,"\u0275bypassSanitizationTrustScript",function(){return si}),s.d(a,"\u0275bypassSanitizationTrustStyle",function(){return ai}),s.d(a,"\u0275bypassSanitizationTrustUrl",function(){return ui}),s.d(a,"\u0275ccf",function(){return nv}),s.d(a,"\u0275clearOverrides",function(){return hw}),s.d(a,"\u0275clearResolutionOfComponentResourcesQueue",function(){return Ur}),s.d(a,"\u0275cmf",function(){return fw}),s.d(a,"\u0275compileComponent",function(){return cy}),s.d(a,"\u0275compileDirective",function(){return ly}),s.d(a,"\u0275compileNgModule",function(){return ty}),s.d(a,"\u0275compileNgModuleDefs",function(){return ey}),s.d(a,"\u0275compileNgModuleFactory__POST_R3__",function(){return Rg}),s.d(a,"\u0275compilePipe",function(){return ky}),s.d(a,"\u0275createInjector",function(){return Es}),s.d(a,"\u0275crt",function(){return fp}),s.d(a,"\u0275defaultIterableDiffers",function(){return Dd}),s.d(a,"\u0275defaultKeyValueDiffers",function(){return Md}),s.d(a,"\u0275detectChanges",function(){return ms}),s.d(a,"\u0275devModeEqual",function(){return vu}),s.d(a,"\u0275did",function(){return Cv}),s.d(a,"\u0275eld",function(){return N_}),s.d(a,"\u0275findLocaleData",function(){return _h}),s.d(a,"\u0275flushModuleScopingQueueAsMuchAsPossible",function(){return $m}),s.d(a,"\u0275getComponentViewDefinitionFactory",function(){return rv}),s.d(a,"\u0275getDebugNodeR2",function(){return S_}),s.d(a,"\u0275getDebugNode__POST_R3__",function(){return x_}),s.d(a,"\u0275getDirectives",function(){return Us}),s.d(a,"\u0275getHostElement",function(){return Hs}),s.d(a,"\u0275getInjectableDef",function(){return R}),s.d(a,"\u0275getLContext",function(){return ro}),s.d(a,"\u0275getLocaleCurrencyCode",function(){return bh}),s.d(a,"\u0275getLocalePluralCase",function(){return wh}),s.d(a,"\u0275getModuleFactory__POST_R3__",function(){return $g}),s.d(a,"\u0275getSanitizationBypassType",function(){return ii}),s.d(a,"\u0275global",function(){return rt}),s.d(a,"\u0275initServicesIfNeeded",function(){return Eb}),s.d(a,"\u0275inlineInterpolate",function(){return zp}),s.d(a,"\u0275interpolate",function(){return Bp}),s.d(a,"\u0275isBoundToModule__POST_R3__",function(){return Ng}),s.d(a,"\u0275isDefaultChangeDetectionStrategy",function(){return J}),s.d(a,"\u0275isListLikeIterable",function(){return yu}),s.d(a,"\u0275isObservable",function(){return jc}),s.d(a,"\u0275isPromise",function(){return Mc}),s.d(a,"\u0275isSubscribable",function(){return Lc}),s.d(a,"\u0275ivyEnabled",function(){return ig}),s.d(a,"\u0275makeDecorator",function(){return Fn}),s.d(a,"\u0275markDirty",function(){return ys}),s.d(a,"\u0275mod",function(){return Kp}),s.d(a,"\u0275mpd",function(){return Xp}),s.d(a,"\u0275ncd",function(){return X_}),s.d(a,"\u0275noSideEffects",function(){return X}),s.d(a,"\u0275nov",function(){return pv}),s.d(a,"\u0275overrideComponentView",function(){return lw}),s.d(a,"\u0275overrideProvider",function(){return cw}),s.d(a,"\u0275pad",function(){return J_}),s.d(a,"\u0275patchComponentDefWithScope",function(){return iy}),s.d(a,"\u0275pid",function(){return Sv}),s.d(a,"\u0275pod",function(){return $_}),s.d(a,"\u0275ppd",function(){return Y_}),s.d(a,"\u0275prd",function(){return Ev}),s.d(a,"\u0275publishDefaultGlobalUtils",function(){return Ys}),s.d(a,"\u0275publishGlobalUtil",function(){return Js}),s.d(a,"\u0275qud",function(){return q_}),s.d(a,"\u0275registerLocaleData",function(){return gh}),s.d(a,"\u0275registerModuleFactory",function(){return Xv}),s.d(a,"\u0275registerNgModuleType",function(){return Yv}),s.d(a,"\u0275renderComponent",function(){return $s}),s.d(a,"\u0275resetCompiledComponents",function(){return ny}),s.d(a,"\u0275resetJitOptions",function(){return Xm}),s.d(a,"\u0275resolveComponentResources",function(){return Rr}),s.d(a,"\u0275setClassMetadata",function(){return Gv}),s.d(a,"\u0275setCurrentInjector",function(){return _r}),s.d(a,"\u0275setDocument",function(){return Gt}),s.d(a,"\u0275setLocaleId",function(){return Dh}),s.d(a,"\u0275store",function(){return Zu}),s.d(a,"\u0275stringify",function(){return x}),s.d(a,"\u0275ted",function(){return tb}),s.d(a,"\u0275transitiveScopesFor",function(){return oy}),s.d(a,"\u0275unregisterLocaleData",function(){return kh}),s.d(a,"\u0275unv",function(){return hp}),s.d(a,"\u0275unwrapSafeValue",function(){return ni}),s.d(a,"\u0275vid",function(){return rb}),s.d(a,"\u0275whenRendered",function(){return ru}),s.d(a,"\u0275\u0275CopyDefinitionFeature",function(){return fu}),s.d(a,"\u0275\u0275InheritDefinitionFeature",function(){return ou}),s.d(a,"\u0275\u0275NgOnChangesFeature",function(){return Ft}),s.d(a,"\u0275\u0275ProvidersFeature",function(){return zf}),s.d(a,"\u0275\u0275advance",function(){return da}),s.d(a,"\u0275\u0275attribute",function(){return Su}),s.d(a,"\u0275\u0275attributeInterpolate1",function(){return ju}),s.d(a,"\u0275\u0275attributeInterpolate2",function(){return Ru}),s.d(a,"\u0275\u0275attributeInterpolate3",function(){return Fu}),s.d(a,"\u0275\u0275attributeInterpolate4",function(){return Nu}),s.d(a,"\u0275\u0275attributeInterpolate5",function(){return Bu}),s.d(a,"\u0275\u0275attributeInterpolate6",function(){return zu}),s.d(a,"\u0275\u0275attributeInterpolate7",function(){return Vu}),s.d(a,"\u0275\u0275attributeInterpolate8",function(){return Uu}),s.d(a,"\u0275\u0275attributeInterpolateV",function(){return qu}),s.d(a,"\u0275\u0275classMap",function(){return ml}),s.d(a,"\u0275\u0275classMapInterpolate1",function(){return zl}),s.d(a,"\u0275\u0275classMapInterpolate2",function(){return Vl}),s.d(a,"\u0275\u0275classMapInterpolate3",function(){return Ul}),s.d(a,"\u0275\u0275classMapInterpolate4",function(){return ql}),s.d(a,"\u0275\u0275classMapInterpolate5",function(){return Hl}),s.d(a,"\u0275\u0275classMapInterpolate6",function(){return Zl}),s.d(a,"\u0275\u0275classMapInterpolate7",function(){return Gl}),s.d(a,"\u0275\u0275classMapInterpolate8",function(){return Wl}),s.d(a,"\u0275\u0275classMapInterpolateV",function(){return Xl}),s.d(a,"\u0275\u0275classProp",function(){return dl}),s.d(a,"\u0275\u0275contentQuery",function(){return Bm}),s.d(a,"\u0275\u0275defineComponent",function(){return vt}),s.d(a,"\u0275\u0275defineDirective",function(){return kt}),s.d(a,"\u0275\u0275defineInjectable",function(){return M}),s.d(a,"\u0275\u0275defineInjector",function(){return j}),s.d(a,"\u0275\u0275defineNgModule",function(){return bt}),s.d(a,"\u0275\u0275definePipe",function(){return Ct}),s.d(a,"\u0275\u0275directiveInject",function(){return xc}),s.d(a,"\u0275\u0275disableBindings",function(){return fe}),s.d(a,"\u0275\u0275element",function(){return Oc}),s.d(a,"\u0275\u0275elementContainer",function(){return Ic}),s.d(a,"\u0275\u0275elementContainerEnd",function(){return Ac}),s.d(a,"\u0275\u0275elementContainerStart",function(){return Tc}),s.d(a,"\u0275\u0275elementEnd",function(){return Pc}),s.d(a,"\u0275\u0275elementStart",function(){return Ec}),s.d(a,"\u0275\u0275enableBindings",function(){return he}),s.d(a,"\u0275\u0275getCurrentView",function(){return Dc}),s.d(a,"\u0275\u0275getInheritedFactory",function(){return In}),s.d(a,"\u0275\u0275hostProperty",function(){return dh}),s.d(a,"\u0275\u0275i18n",function(){return Of}),s.d(a,"\u0275\u0275i18nApply",function(){return If}),s.d(a,"\u0275\u0275i18nAttributes",function(){return Tf}),s.d(a,"\u0275\u0275i18nEnd",function(){return Pf}),s.d(a,"\u0275\u0275i18nExp",function(){return Af}),s.d(a,"\u0275\u0275i18nPostprocess",function(){return Df}),s.d(a,"\u0275\u0275i18nStart",function(){return Ef}),s.d(a,"\u0275\u0275inject",function(){return wr}),s.d(a,"\u0275\u0275injectAttribute",function(){return Mn}),s.d(a,"\u0275\u0275injectPipeChangeDetectorRef",function(){return Zm}),s.d(a,"\u0275\u0275invalidFactory",function(){return kc}),s.d(a,"\u0275\u0275invalidFactoryDep",function(){return xr}),s.d(a,"\u0275\u0275listener",function(){return Rc}),s.d(a,"\u0275\u0275loadQuery",function(){return zm}),s.d(a,"\u0275\u0275namespaceHTML",function(){return Xe}),s.d(a,"\u0275\u0275namespaceMathML",function(){return We}),s.d(a,"\u0275\u0275namespaceSVG",function(){return Ge}),s.d(a,"\u0275\u0275nextContext",function(){return Vc}),s.d(a,"\u0275\u0275ngDeclareComponent",function(){return vw}),s.d(a,"\u0275\u0275ngDeclareDirective",function(){return pw}),s.d(a,"\u0275\u0275ngDeclarePipe",function(){return mw}),s.d(a,"\u0275\u0275pipe",function(){return mm}),s.d(a,"\u0275\u0275pipeBind1",function(){return ym}),s.d(a,"\u0275\u0275pipeBind2",function(){return gm}),s.d(a,"\u0275\u0275pipeBind3",function(){return _m}),s.d(a,"\u0275\u0275pipeBind4",function(){return bm}),s.d(a,"\u0275\u0275pipeBindV",function(){return wm}),s.d(a,"\u0275\u0275projection",function(){return Hc}),s.d(a,"\u0275\u0275projectionDef",function(){return qc}),s.d(a,"\u0275\u0275property",function(){return Cc}),s.d(a,"\u0275\u0275propertyInterpolate",function(){return Zc}),s.d(a,"\u0275\u0275propertyInterpolate1",function(){return Gc}),s.d(a,"\u0275\u0275propertyInterpolate2",function(){return Wc}),s.d(a,"\u0275\u0275propertyInterpolate3",function(){return Xc}),s.d(a,"\u0275\u0275propertyInterpolate4",function(){return Kc}),s.d(a,"\u0275\u0275propertyInterpolate5",function(){return Yc}),s.d(a,"\u0275\u0275propertyInterpolate6",function(){return Jc}),s.d(a,"\u0275\u0275propertyInterpolate7",function(){return $c}),s.d(a,"\u0275\u0275propertyInterpolate8",function(){return Qc}),s.d(a,"\u0275\u0275propertyInterpolateV",function(){return tl}),s.d(a,"\u0275\u0275pureFunction0",function(){return tm}),s.d(a,"\u0275\u0275pureFunction1",function(){return em}),s.d(a,"\u0275\u0275pureFunction2",function(){return nm}),s.d(a,"\u0275\u0275pureFunction3",function(){return rm}),s.d(a,"\u0275\u0275pureFunction4",function(){return im}),s.d(a,"\u0275\u0275pureFunction5",function(){return om}),s.d(a,"\u0275\u0275pureFunction6",function(){return am}),s.d(a,"\u0275\u0275pureFunction7",function(){return sm}),s.d(a,"\u0275\u0275pureFunction8",function(){return um}),s.d(a,"\u0275\u0275pureFunctionV",function(){return cm}),s.d(a,"\u0275\u0275queryRefresh",function(){return Fm}),s.d(a,"\u0275\u0275reference",function(){return Gu}),s.d(a,"\u0275\u0275resolveBody",function(){return vo}),s.d(a,"\u0275\u0275resolveDocument",function(){return po}),s.d(a,"\u0275\u0275resolveWindow",function(){return fo}),s.d(a,"\u0275\u0275restoreView",function(){return ve}),s.d(a,"\u0275\u0275sanitizeHtml",function(){return Ri}),s.d(a,"\u0275\u0275sanitizeResourceUrl",function(){return Bi}),s.d(a,"\u0275\u0275sanitizeScript",function(){return zi}),s.d(a,"\u0275\u0275sanitizeStyle",function(){return Fi}),s.d(a,"\u0275\u0275sanitizeUrl",function(){return Ni}),s.d(a,"\u0275\u0275sanitizeUrlOrResourceUrl",function(){return Hi}),s.d(a,"\u0275\u0275setComponentScope",function(){return mt}),s.d(a,"\u0275\u0275setNgModuleScope",function(){return wt}),s.d(a,"\u0275\u0275styleMap",function(){return pl}),s.d(a,"\u0275\u0275styleMapInterpolate1",function(){return Kl}),s.d(a,"\u0275\u0275styleMapInterpolate2",function(){return Yl}),s.d(a,"\u0275\u0275styleMapInterpolate3",function(){return Jl}),s.d(a,"\u0275\u0275styleMapInterpolate4",function(){return $l}),s.d(a,"\u0275\u0275styleMapInterpolate5",function(){return Ql}),s.d(a,"\u0275\u0275styleMapInterpolate6",function(){return th}),s.d(a,"\u0275\u0275styleMapInterpolate7",function(){return eh}),s.d(a,"\u0275\u0275styleMapInterpolate8",function(){return nh}),s.d(a,"\u0275\u0275styleMapInterpolateV",function(){return rh}),s.d(a,"\u0275\u0275styleProp",function(){return fl}),s.d(a,"\u0275\u0275stylePropInterpolate1",function(){return ih}),s.d(a,"\u0275\u0275stylePropInterpolate2",function(){return oh}),s.d(a,"\u0275\u0275stylePropInterpolate3",function(){return ah}),s.d(a,"\u0275\u0275stylePropInterpolate4",function(){return sh}),s.d(a,"\u0275\u0275stylePropInterpolate5",function(){return uh}),s.d(a,"\u0275\u0275stylePropInterpolate6",function(){return ch}),s.d(a,"\u0275\u0275stylePropInterpolate7",function(){return lh}),s.d(a,"\u0275\u0275stylePropInterpolate8",function(){return hh}),s.d(a,"\u0275\u0275stylePropInterpolateV",function(){return fh}),s.d(a,"\u0275\u0275syntheticHostListener",function(){return Fc}),s.d(a,"\u0275\u0275syntheticHostProperty",function(){return ph}),s.d(a,"\u0275\u0275template",function(){return Hu}),s.d(a,"\u0275\u0275templateRefExtractor",function(){return Hm}),s.d(a,"\u0275\u0275text",function(){return Tl}),s.d(a,"\u0275\u0275textInterpolate",function(){return Al}),s.d(a,"\u0275\u0275textInterpolate1",function(){return Il}),s.d(a,"\u0275\u0275textInterpolate2",function(){return Dl}),s.d(a,"\u0275\u0275textInterpolate3",function(){return Ml}),s.d(a,"\u0275\u0275textInterpolate4",function(){return Ll}),s.d(a,"\u0275\u0275textInterpolate5",function(){return jl}),s.d(a,"\u0275\u0275textInterpolate6",function(){return Rl}),s.d(a,"\u0275\u0275textInterpolate7",function(){return Fl}),s.d(a,"\u0275\u0275textInterpolate8",function(){return Nl}),s.d(a,"\u0275\u0275textInterpolateV",function(){return Bl}),s.d(a,"\u0275\u0275trustConstantHtml",function(){return Vi}),s.d(a,"\u0275\u0275trustConstantResourceUrl",function(){return Ui}),s.d(a,"\u0275\u0275viewQuery",function(){return Nm});var c=s("XNiG"),h=s("quSY"),d=s("HDdC"),v=s("VRyK"),g=s("w1tV");function b(t){for(var e in t)if(t[e]===b)return e;throw Error("Could not find renamed property on target object.")}function w(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function x(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(x).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return"".concat(t.overriddenName);if(t.name)return"".concat(t.name);var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function k(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}var C=b({__forward_ref__:b});function S(t){return t.__forward_ref__=S,t.toString=function(){return x(this())},t}function E(t){return P(t)?t():t}function P(t){return"function"==typeof t&&t.hasOwnProperty(C)&&t.__forward_ref__===S}var O=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,function(t,e){return"".concat(t?"NG0".concat(t,": "):"").concat(e)}(t,r))).code=t,i}return _(n)}(n(Error));function T(t){return"string"==typeof t?t:null==t?"":String(t)}function A(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():T(t)}function I(t,e){var n=e?" in ".concat(e):"";throw new O("201","No provider for ".concat(A(t)," found").concat(n))}function D(t,e,n,r){throw new Error("ASSERTION ERROR: ".concat(t)+(null==r?"":" [Expected=> ".concat(n," ").concat(r," ").concat(e," <=Actual]")))}function M(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}var L=M;function j(t){return{providers:t.providers||[],imports:t.imports||[]}}function R(t){return F(t,z)||F(t,U)}function F(t,e){return t.hasOwnProperty(e)?t[e]:null}function N(t){return t&&(t.hasOwnProperty(V)||t.hasOwnProperty(q))?t[V]:null}var B,z=b({"\u0275prov":b}),V=b({"\u0275inj":b}),U=b({ngInjectableDef:b}),q=b({ngInjectorDef:b}),H=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function Z(){return B}function G(t){var e=B;return B=t,e}function W(t,e,n){var r=R(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&H.Optional?null:void 0!==e?e:void I(x(t),"Injector")}function X(t){return{toString:t}.toString()}var K=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Y=function(t){return t[t.CheckOnce=0]="CheckOnce",t[t.Checked=1]="Checked",t[t.CheckAlways=2]="CheckAlways",t[t.Detached=3]="Detached",t[t.Errored=4]="Errored",t[t.Destroyed=5]="Destroyed",t}({});function J(t){return null==t||t===K.Default}var $=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),Q="undefined"!=typeof globalThis&&globalThis,tt="undefined"!=typeof window&&window,et="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,nt="undefined"!=typeof global&&global,rt=Q||nt||tt||et,it={},ot=[],at=[],st=b({"\u0275cmp":b}),ut=b({"\u0275dir":b}),ct=b({"\u0275pipe":b}),lt=b({"\u0275mod":b}),ht=b({"\u0275loc":b}),ft=b({"\u0275fac":b}),dt=b({__NG_ELEMENT_ID__:b}),pt=0;function vt(t){return X(function(){var e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===K.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||at,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||$.Emulated,id:"c",styles:t.styles||at,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=pt++,n.inputs=xt(t.inputs,e),n.outputs=xt(t.outputs),i&&i.forEach(function(t){return t(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(yt)}:null,n.pipeDefs=o?function(){return("function"==typeof o?o():o).map(gt)}:null,n})}function mt(t,e,n){var r=t.\u0275cmp;r.directiveDefs=function(){return e.map(yt)},r.pipeDefs=function(){return n.map(gt)}}function yt(t){return St(t)||Et(t)}function gt(t){return Pt(t)}var _t={};function bt(t){var e={type:t.type,bootstrap:t.bootstrap||at,declarations:t.declarations||at,imports:t.imports||at,exports:t.exports||at,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&X(function(){_t[t.id]=t.type}),e}function wt(t,e){return X(function(){var n=Ot(t,!0);n.declarations=e.declarations||at,n.imports=e.imports||at,n.exports=e.exports||at})}function xt(t,e){if(null==t)return it;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}var kt=vt;function Ct(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function St(t){return t[st]||null}function Et(t){return t[ut]||null}function Pt(t){return t[ct]||null}function Ot(t,e){var n=t[lt]||null;if(!n&&!0===e)throw new Error("Type ".concat(x(t)," does not have '\u0275mod' property."));return n}function Tt(t){return Array.isArray(t)&&"object"==typeof t[1]}function At(t){return Array.isArray(t)&&!0===t[1]}function It(t){return 0!=(8&t.flags)}function Dt(t){return 2==(2&t.flags)}function Mt(t){return 1==(1&t.flags)}function Lt(t){return null!==t.template}function jt(t,e){return t.hasOwnProperty(ft)?t[ft]:null}var Rt=function(){function t(e,n,r){y(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return _(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}();function Ft(){return Nt}function Nt(t){return t.type.prototype.ngOnChanges&&(t.setInput=zt),Bt}function Bt(){var t=Vt(this),e=null==t?void 0:t.current;if(e){var n=t.previous;if(n===it)t.previous=e;else for(var r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function zt(t,e,n,r){var i=Vt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:it,current:null}),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[n],u=a[s];o[s]=new Rt(u&&u.currentValue,e,a===it),t[r]=e}function Vt(t){return t.__ngSimpleChanges__||null}Ft.ngInherit=!0;var Ut,qt=null,Ht=function(t){qt=t},Zt=function(t,e,n){null!=qt&&qt(t,e,n)};function Gt(t){Ut=t}function Wt(){return void 0!==Ut?Ut:"undefined"!=typeof document?document:void 0}function Xt(t){return!!t.listen}var Kt={createRenderer:function(t,e){return Wt()}};function Yt(t){for(;Array.isArray(t);)t=t[0];return t}function Jt(t,e){return Yt(e[t])}function $t(t,e){return Yt(e[t.index])}function Qt(t,e){return t.data[e]}function te(t,e){return t[e]}function ee(t,e){var n=e[t];return Tt(n)?n:n[0]}function ne(t){return t.__ngContext__||null}function re(t){var e=ne(t);return e?Array.isArray(e)?e:e.lView:null}function ie(t){return 4==(4&t[2])}function oe(t){return 128==(128&t[2])}function ae(t,e){return null==e?null:t[e]}function se(t){t[18]=0}function ue(t,e){t[5]+=e;for(var n=t,r=t[3];null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}var ce={lFrame:Ne(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function le(){return ce.bindingsEnabled}function he(){ce.bindingsEnabled=!0}function fe(){ce.bindingsEnabled=!1}function de(){return ce.lFrame.lView}function pe(){return ce.lFrame.tView}function ve(t){ce.lFrame.contextLView=t}function me(){for(var t=ye();null!==t&&64===t.type;)t=t.parent;return t}function ye(){return ce.lFrame.currentTNode}function ge(){var t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function _e(t,e){var n=ce.lFrame;n.currentTNode=t,n.isParent=e}function be(){return ce.lFrame.isParent}function we(){ce.lFrame.isParent=!1}function xe(){return ce.isInCheckNoChangesMode}function ke(t){ce.isInCheckNoChangesMode=t}function Ce(){var t=ce.lFrame,e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Se(){return ce.lFrame.bindingIndex}function Ee(t){return ce.lFrame.bindingIndex=t}function Pe(){return ce.lFrame.bindingIndex++}function Oe(t){var e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Te(t){ce.lFrame.inI18n=t}function Ae(t){ce.lFrame.currentDirectiveIndex=t}function Ie(t){var e=ce.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function De(){return ce.lFrame.currentQueryIndex}function Me(t){ce.lFrame.currentQueryIndex=t}function Le(t){var e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function je(t,e,n){if(n&H.SkipSelf){for(var r=e,i=t;!(null!==(r=r.parent)||n&H.Host||(r=Le(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}var o=ce.lFrame=Fe();return o.currentTNode=e,o.lView=t,!0}function Re(t){var e=Fe(),n=t[1];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Fe(){var t=ce.lFrame,e=null===t?null:t.child;return null===e?Ne(t):e}function Ne(t){var e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Be(){var t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ze=Be;function Ve(){var t=Be();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ue(t){return(ce.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ce.lFrame.contextLView))[8]}function qe(){return ce.lFrame.selectedIndex}function He(t){ce.lFrame.selectedIndex=t}function Ze(){var t=ce.lFrame;return Qt(t.tView,t.selectedIndex)}function Ge(){ce.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function We(){ce.lFrame.currentNamespace="http://www.w3.org/1998/MathML/"}function Xe(){ce.lFrame.currentNamespace=null}function Ke(t,e){for(var n=e.directiveStart,r=e.directiveEnd;n<r;n++){var i=t.data[n].type.prototype,o=i.ngAfterContentInit,a=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,c=i.ngOnDestroy;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function Ye(t,e,n){Qe(t,e,3,n)}function Je(t,e,n,r){(3&t[2])===n&&Qe(t,e,n,r)}function $e(t,e){var n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Qe(t,e,n,r){for(var i=null!=r?r:-1,o=e.length-1,a=0,s=void 0!==r?65535&t[18]:0;s<o;s++)if("number"==typeof e[s+1]){if(a=e[s],null!=r&&a>=r)break}else e[s]<0&&(t[18]+=65536),(a<i||-1==i)&&(tn(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function tn(t,e,n,r){var i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048,Zt(4,a,o);try{o.call(a)}finally{Zt(5,a,o)}}}else{Zt(4,a,o);try{o.call(a)}finally{Zt(5,a,o)}}}var en=_(function t(e,n,r){y(this,t),this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r});function nn(t,e,n){for(var r=Xt(t),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var a=n[i++],s=n[i++],u=n[i++];r?t.setAttribute(e,s,u,a):e.setAttributeNS(a,s,u)}else{var c=o,l=n[++i];on(c)?r&&t.setProperty(e,c,l):r?t.setAttribute(e,c,l):e.setAttribute(c,l),i++}}return i}function rn(t){return 3===t||4===t||6===t}function on(t){return 64===t.charCodeAt(0)}function an(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else for(var n=-1,r=0;r<e.length;r++){var i=e[r];"number"==typeof i?n=i:0===n||sn(t,n,i,null,-1===n||2===n?e[++r]:null)}return t}function sn(t,e,n,r,i){var o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){var s=t[o++];if("number"==typeof s){if(s===e){a=-1;break}if(s>e){a=o-1;break}}}for(;o<t.length;){var u=t[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function un(t){return-1!==t}function cn(t){return 32767&t}function ln(t,e){for(var n=t>>16,r=e;n>0;)r=r[15],n--;return r}var hn=!0;function fn(t){var e=hn;return hn=t,e}var dn=0;function pn(t,e){var n=mn(t,e);if(-1!==n)return n;var r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,vn(r.data,t),vn(e,null),vn(r.blueprint,null));var i=yn(t,e),o=t.injectorIndex;if(un(i))for(var a=cn(i),s=ln(i,e),u=s[1].data,c=0;c<8;c++)e[o+c]=s[a+c]|u[a+c];return e[o+8]=i,o}function vn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function mn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function yn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;for(var n=0,r=null,i=e;null!==i;){var o=i[1],a=o.type;if(null===(r=2===a?o.declTNode:1===a?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function gn(t,e,n){!function(t,e,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(dt)&&(r=n[dt]),null==r&&(r=n[dt]=dn++);var i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function _n(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;var n=t.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(rn(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}return null}function bn(t,e,n){if(n&H.Optional)return t;I(e,"NodeInjector")}function wn(t,e,n,r){if(n&H.Optional&&void 0===r&&(r=null),0==(n&(H.Self|H.Host))){var i=t[9],o=G(void 0);try{return i?i.get(e,r,n&H.Optional):W(e,r,n&H.Optional)}finally{G(o)}}return bn(r,e,n)}function xn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==t){var o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;var e=t.hasOwnProperty(dt)?t[dt]:void 0;return"number"==typeof e?e>=0?255&e:Cn:e}(n);if("function"==typeof o){if(!je(e,t,r))return r&H.Host?bn(i,n,r):wn(e,n,r,i);try{var a=o();if(null!=a||r&H.Optional)return a;I(n)}finally{ze()}}else if("number"==typeof o){var s=null,u=mn(t,e),c=-1,l=r&H.Host?e[16][6]:null;for((-1===u||r&H.SkipSelf)&&(-1!==(c=-1===u?yn(t,e):e[u+8])&&Tn(r,!1)?(s=e[1],u=cn(c),e=ln(c,e)):u=-1);-1!==u;){var h=e[1];if(On(o,u,h.data)){var f=Sn(u,e,n,s,r,l);if(f!==kn)return f}-1!==(c=e[u+8])&&Tn(r,e[1].data[u+8]===l)&&On(o,u,e)?(s=h,u=cn(c),e=ln(c,e)):u=-1}}}return wn(e,n,r,i)}var kn={};function Cn(){return new An(me(),de())}function Sn(t,e,n,r,i,o){var a=e[1],s=a.data[t+8],u=En(s,a,n,null==r?Dt(s)&&hn:r!=a&&0!=(3&s.type),i&H.Host&&o===s);return null!==u?Pn(e,a,u,s):kn}function En(t,e,n,r,i){for(var o=t.providerIndexes,a=e.data,s=1048575&o,u=t.directiveStart,c=o>>20,l=i?s+c:t.directiveEnd,h=r?s:s+c;h<l;h++){var f=a[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=a[u];if(d&&Lt(d)&&d.type===n)return u}return null}function Pn(t,e,n,r){var i=t[n],o=e.data;if(i instanceof en){var a=i;a.resolving&&function(t,e){throw new O("200","Circular dependency in DI detected for ".concat(t))}(A(o[n]));var s=fn(a.canSeeViewProviders);a.resolving=!0;var u=a.injectImpl?G(a.injectImpl):null;je(t,r,H.Default);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){var r=e.type.prototype,i=r.ngOnChanges,o=r.ngOnInit,a=r.ngDoCheck;if(i){var s=Nt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,o),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a))}(n,o[n],e)}finally{null!==u&&G(u),fn(s),a.resolving=!1,ze()}}return i}function On(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Tn(t,e){return!(t&H.Self||t&H.Host&&e)}var An=function(){function t(e,n){y(this,t),this._tNode=e,this._lView=n}return _(t,[{key:"get",value:function(t,e){return xn(this._tNode,this._lView,t,void 0,e)}}]),t}();function In(t){return X(function(){for(var e=t.prototype.constructor,n=e[ft]||Dn(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;i&&i!==r;){var o=i[ft]||Dn(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return function(t){return new t}})}function Dn(t){return P(t)?function(){var e=Dn(E(t));return e&&e()}:jt(t)}function Mn(t){return _n(me(),t)}var Ln="__annotations__",jn="__parameters__",Rn="__prop__metadata__";function Fn(t,e,n,i,o){return X(function(){var a=Nn(e);function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof s)return a.call.apply(a,[this].concat(e)),this;var u=r(s,e);return function(t){return o&&o.apply(void 0,[t].concat(e)),(t.hasOwnProperty(Ln)?t[Ln]:Object.defineProperty(t,Ln,{value:[]})[Ln]).push(u),i&&i(t),t}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=t,s.annotationCls=s,s})}function Nn(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}function Bn(t,e,n){return X(function(){var i=Nn(e);function o(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof o)return i.apply(this,e),this;var a=r(o,e);return s.annotation=a,s;function s(t,e,n){for(var r=t.hasOwnProperty(jn)?t[jn]:Object.defineProperty(t,jn,{value:[]})[jn];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),t}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}function zn(t,e,n,i){return X(function(){var o=Nn(e);function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof a)return o.apply(this,e),this;var s=r(a,e);return function(t,n){var r=t.constructor,o=r.hasOwnProperty(Rn)?r[Rn]:Object.defineProperty(r,Rn,{value:{}})[Rn];o[n]=o.hasOwnProperty(n)&&o[n]||[],o[n].unshift(s),i&&i.apply(void 0,[t,n].concat(e))}}return n&&(a.prototype=Object.create(n.prototype)),a.prototype.ngMetadataName=t,a.annotationCls=a,a})}function Vn(){return Bn("Attribute",function(t){return{attributeName:t,__NG_ELEMENT_ID__:function(){return Mn(t)}}})}var Un=Vn(),qn=function(){function t(e,n){y(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=M({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _(t,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),t}(),Hn=new qn("AnalyzeForEntryComponents"),Zn=_(function t(){y(this,t)}),Gn=zn("ContentChildren",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:t,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!1},e)},Zn),Wn=zn("ContentChild",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:t,first:!0,isViewQuery:!1,descendants:!0},e)},Zn),Xn=zn("ViewChildren",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({selector:t,first:!1,isViewQuery:!0,descendants:!0,emitDistinctChangesOnly:!1},e)},Zn),Kn=zn("ViewChild",function(t,e){return Object.assign({selector:t,first:!0,isViewQuery:!0,descendants:!0},e)},Zn),Yn=function(t){return t[t.Token=0]="Token",t[t.Attribute=1]="Attribute",t[t.ChangeDetectorRef=2]="ChangeDetectorRef",t[t.Invalid=3]="Invalid",t}({});function Jn(){var t=rt.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}var $n=Function;function Qn(t){return"function"==typeof t}function tr(t,e){void 0===e&&(e=t);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),tr(r,e)):e!==t&&e.push(r)}return e}function er(t,e){t.forEach(function(t){return Array.isArray(t)?er(t,e):e(t)})}function nr(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rr(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ir(t,e){for(var n=[],r=0;r<t;r++)n.push(e);return n}function or(t,e,n){var r=sr(t,e);return r>=0?t[1|r]=n:function(t,e,n,r){var i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r=~r,e,n),r}function ar(t,e){var n=sr(t,e);if(n>=0)return t[1|n]}function sr(t,e){return function(t,e,n){for(var r=0,i=t.length>>1;i!==r;){var o=r+(i-r>>1),a=t[o<<1];if(e===a)return o<<1;a>e?i=o:r=o+1}return~(i<<1)}(t,e)}var ur=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|[^()]+\(arguments\))\)/,cr=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,lr=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,hr=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/,fr=function(){function t(e){y(this,t),this._reflect=e||rt.Reflect}return _(t,[{key:"isReflectionEnabled",value:function(){return!0}},{key:"factory",value:function(t){return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return r(t,n)}}},{key:"_zipTypesAndAnnotations",value:function(t,e){var n;n=ir(void 0===t?e.length:t.length);for(var r=0;r<n.length;r++)n[r]=void 0===t?[]:t[r]&&t[r]!=Object?[t[r]]:[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n}},{key:"_ownParameters",value:function(t,e){if(n=t.toString(),ur.test(n)||hr.test(n)||cr.test(n)&&!lr.test(n))return null;var n;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;var r=t.ctorParameters;if(r&&r!==e.ctorParameters){var i="function"==typeof r?r():r,o=i.map(function(t){return t&&t.type}),a=i.map(function(t){return t&&dr(t.decorators)});return this._zipTypesAndAnnotations(o,a)}var s=t.hasOwnProperty(jn)&&t[jn],u=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return u||s?this._zipTypesAndAnnotations(u,s):ir(t.length)}},{key:"parameters",value:function(t){if(!Qn(t))return[];var e=pr(t),n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]}},{key:"_ownAnnotations",value:function(t,e){if(t.annotations&&t.annotations!==e.annotations){var n=t.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return t.decorators&&t.decorators!==e.decorators?dr(t.decorators):t.hasOwnProperty(Ln)?t[Ln]:null}},{key:"annotations",value:function(t){if(!Qn(t))return[];var e=pr(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)}},{key:"_ownPropMetadata",value:function(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){var n=t.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(t.propDecorators&&t.propDecorators!==e.propDecorators){var r=t.propDecorators,i={};return Object.keys(r).forEach(function(t){i[t]=dr(r[t])}),i}return t.hasOwnProperty(Rn)?t[Rn]:null}},{key:"propMetadata",value:function(t){if(!Qn(t))return{};var e=pr(t),n={};if(e!==Object){var r=this.propMetadata(e);Object.keys(r).forEach(function(t){n[t]=r[t]})}var i=this._ownPropMetadata(t,e);return i&&Object.keys(i).forEach(function(t){var e=[];n.hasOwnProperty(t)&&e.push.apply(e,o(n[t])),e.push.apply(e,o(i[t])),n[t]=e}),n}},{key:"ownPropMetadata",value:function(t){return Qn(t)&&this._ownPropMetadata(t,pr(t))||{}}},{key:"hasLifecycleHook",value:function(t,e){return t instanceof $n&&e in t.prototype}},{key:"guards",value:function(t){return{}}},{key:"getter",value:function(t){return new Function("o","return o."+t+";")}},{key:"setter",value:function(t){return new Function("o","v","return o."+t+" = v;")}},{key:"method",value:function(t){return new Function("o","args","if (!o.".concat(t,") throw new Error('\"").concat(t,"\" is undefined');\n        return o.").concat(t,".apply(o, args);"))}},{key:"importUri",value:function(t){return"object"==typeof t&&t.filePath?t.filePath:"./".concat(x(t))}},{key:"resourceUri",value:function(t){return"./".concat(x(t))}},{key:"resolveIdentifier",value:function(t,e,n,r){return r}},{key:"resolveEnum",value:function(t,e){return t[e]}}]),t}();function dr(t){return t?t.map(function(t){return r(t.type.annotationCls,o(t.args?t.args:[]))}):[]}function pr(t){var e=t.prototype?Object.getPrototypeOf(t.prototype):null;return(e?e.constructor:null)||Object}var vr,mr={},yr=/\n/gm,gr=b({provide:String,useValue:b});function _r(t){var e=vr;return vr=t,e}function br(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default;if(void 0===vr)throw new Error("inject() must be called from an injection context");return null===vr?W(t,void 0,e):vr.get(t,e&H.Optional?null:void 0,e)}function wr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default;return(Z()||br)(E(t),e)}function xr(t){throw new Error("invalid")}var kr=wr;function Cr(t){for(var e=[],n=0;n<t.length;n++){var r=E(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=H.Default,a=0;a<r.length;a++){var s=r[a],u=s.__NG_DI_FLAG__;"number"==typeof u?-1===u?i=s.token:o|=u:i=s}e.push(wr(i,o))}else e.push(wr(r))}return e}function Sr(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}var Er=function(t){return{token:t}},Pr=Sr(Bn("Inject",Er),-1),Or=Sr(Bn("Optional"),8),Tr=Sr(Bn("Self"),2),Ar=Sr(Bn("SkipSelf"),4),Ir=Sr(Bn("Host"),1),Dr=null;function Mr(){return Dr=Dr||new fr}function Lr(t){return jr(Mr().parameters(t))}function jr(t){var e=Jn();return t.map(function(t){return function(t,e){var n={token:null,host:!1,optional:!1,resolved:t.R3ResolvedDependencyType.Token,self:!1,skipSelf:!1};function r(e){n.resolved=t.R3ResolvedDependencyType.Token,n.token=e}if(Array.isArray(e)&&e.length>0)for(var i=0;i<e.length;i++){var o=e[i];if(void 0!==o){var a=Object.getPrototypeOf(o);if(o instanceof Or||"Optional"===a.ngMetadataName)n.optional=!0;else if(o instanceof Ar||"SkipSelf"===a.ngMetadataName)n.skipSelf=!0;else if(o instanceof Tr||"Self"===a.ngMetadataName)n.self=!0;else if(o instanceof Ir||"Host"===a.ngMetadataName)n.host=!0;else if(o instanceof Pr)n.token=o.token;else if(o instanceof Un){if(void 0===o.attributeName)throw new Error("Attribute name must be defined.");n.token=o.attributeName,n.resolved=t.R3ResolvedDependencyType.Attribute}else!0===o.__ChangeDetectorRef__?(n.token=o,n.resolved=t.R3ResolvedDependencyType.ChangeDetectorRef):r(o)}}else void 0===e||Array.isArray(e)&&0===e.length?(n.token=void 0,n.resolved=Yn.Invalid):r(e);return n}(e,t)})}function Rr(t){var e=[],n=new Map;function r(e){var r=n.get(e);if(!r){var i=t(e);n.set(e,r=i.then(qr))}return r}return Br.forEach(function(t,n){var i=[];t.templateUrl&&i.push(r(t.templateUrl).then(function(e){t.template=e}));var o=t.styleUrls,a=t.styles||(t.styles=[]),s=t.styles.length;o&&o.forEach(function(e,n){a.push(""),i.push(r(e).then(function(r){a[s+n]=r,o.splice(o.indexOf(e),1),0==o.length&&(t.styleUrls=void 0)}))});var u=Promise.all(i).then(function(){return function(t){zr.delete(t)}(n)});e.push(u)}),Ur(),Promise.all(e).then(function(){})}var Fr,Nr,Br=new Map,zr=new Set;function Vr(t){return!!(t.templateUrl&&!t.hasOwnProperty("template")||t.styleUrls&&t.styleUrls.length)}function Ur(){var t=Br;return Br=new Map,t}function qr(t){return"string"==typeof t?t:t.text()}function Hr(){if(void 0===Fr&&(Fr=null,rt.trustedTypes))try{Fr=rt.trustedTypes.createPolicy("angular",{createHTML:function(t){return t},createScript:function(t){return t},createScriptURL:function(t){return t}})}catch(t){}return Fr}function Zr(t){var e;return(null===(e=Hr())||void 0===e?void 0:e.createHTML(t))||t}function Gr(){if(void 0===Nr&&(Nr=null,rt.trustedTypes))try{Nr=rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:function(t){return t},createScript:function(t){return t},createScriptURL:function(t){return t}})}catch(t){}return Nr}function Wr(t){var e;return(null===(e=Gr())||void 0===e?void 0:e.createHTML(t))||t}function Xr(t){var e;return(null===(e=Gr())||void 0===e?void 0:e.createScript(t))||t}function Kr(t){var e;return(null===(e=Gr())||void 0===e?void 0:e.createScriptURL(t))||t}var Yr=function(){function t(e){y(this,t),this.changingThisBreaksApplicationSecurity=e}return _(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity," (see https://g.co/ng/security#xss)")}}]),t}(),Jr=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Yr),$r=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Yr),Qr=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Yr),ti=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Yr),ei=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Yr);function ni(t){return t instanceof Yr?t.changingThisBreaksApplicationSecurity:t}function ri(t,e){var n=ii(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error("Required a safe ".concat(e,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===e}function ii(t){return t instanceof Yr&&t.getTypeName()||null}function oi(t){return new Jr(t)}function ai(t){return new $r(t)}function si(t){return new Qr(t)}function ui(t){return new ti(t)}function ci(t){return new ei(t)}function li(t){var e=new fi(t);return function(){try{return!!(new window.DOMParser).parseFromString(Zr(""),"text/html")}catch(t){return!1}}()?new hi(e):e}var hi=function(){function t(e){y(this,t),this.inertDocumentHelper=e}return _(t,[{key:"getInertBodyElement",value:function(t){t="<body><remove></remove>"+t;try{var e=(new window.DOMParser).parseFromString(Zr(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(n){return null}}}]),t}(),fi=function(){function t(e){if(y(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return _(t,[{key:"getInertBodyElement",value:function(t){var e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Zr(t),e;var n=this.inertDocument.createElement("body");return n.innerHTML=Zr(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),t}(),di=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,pi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function vi(t){return(t=String(t)).match(di)||t.match(pi)?t:"unsafe:"+t}function mi(t){return(t=String(t)).split(",").map(function(t){return vi(t.trim())}).join(", ")}function yi(t){var e,n={},r=i(t.split(","));try{for(r.s();!(e=r.n()).done;){n[e.value]=!0}}catch(o){r.e(o)}finally{r.f()}return n}function gi(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(t[s]=!0)}return t}var _i,bi=yi("area,br,col,hr,img,wbr"),wi=yi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xi=yi("rp,rt"),ki=gi(xi,wi),Ci=gi(bi,gi(wi,yi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gi(xi,yi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ki),Si=yi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ei=yi("srcset"),Pi=gi(Si,Ei,yi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Oi=yi("script,style,template"),Ti=function(){function t(){y(this,t),this.sanitizedSomething=!1,this.buf=[]}return _(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!Ci.hasOwnProperty(e))return this.sanitizedSomething=!0,!Oi.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n=t.attributes,r=0;r<n.length;r++){var i=n.item(r),o=i.name,a=o.toLowerCase();if(Pi.hasOwnProperty(a)){var s=i.value;Si[a]&&(s=vi(s)),Ei[a]&&(s=mi(s)),this.buf.push(" ",o,'="',Di(s),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();Ci.hasOwnProperty(e)&&!bi.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(Di(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(t.outerHTML));return e}}]),t}(),Ai=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ii=/([^\#-~ |!])/g;function Di(t){return t.replace(/&/g,"&amp;").replace(Ai,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Ii,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Mi(t,e){var n=null;try{_i=_i||li(t);var r=e?String(e):"";n=_i.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=_i.getInertBodyElement(r)}while(r!==o);return Zr((new Ti).sanitizeChildren(Li(n)||n))}finally{if(n)for(var a=Li(n)||n;a.firstChild;)a.removeChild(a.firstChild)}}function Li(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ji=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Ri(t){var e=Zi();return e?Wr(e.sanitize(ji.HTML,t)||""):ri(t,"HTML")?Wr(ni(t)):Mi(Wt(),T(t))}function Fi(t){var e=Zi();return e?e.sanitize(ji.STYLE,t)||"":ri(t,"Style")?ni(t):T(t)}function Ni(t){var e=Zi();return e?e.sanitize(ji.URL,t)||"":ri(t,"URL")?ni(t):vi(T(t))}function Bi(t){var e=Zi();if(e)return Kr(e.sanitize(ji.RESOURCE_URL,t)||"");if(ri(t,"ResourceURL"))return Kr(ni(t));throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)")}function zi(t){var e=Zi();if(e)return Xr(e.sanitize(ji.SCRIPT,t)||"");if(ri(t,"Script"))return Xr(ni(t));throw new Error("unsafe value used in a script context")}function Vi(t){return Zr(t[0])}function Ui(t){return function(t){var e;return(null===(e=Hr())||void 0===e?void 0:e.createScriptURL(t))||t}(t[0])}function qi(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?Bi:Ni}function Hi(t,e,n){return qi(e,n)(t)}function Zi(){var t=de();return t&&t[12]}function Gi(t){return t.ngDebugContext}function Wi(t){return t.ngOriginalError}function Xi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var Ki=function(){function t(){y(this,t),this._console=console}return _(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Xi}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?Gi(t)?Gi(t):this._findContext(Wi(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=Wi(t);e&&Wi(e);)e=Wi(e);return e}}]),t}(),Yi={name:"custom-elements"},Ji={name:"no-errors-schema"},$i=/^>|^->|<!--|-->|--!>|<!-$/g,Qi=/(<|>)/;function to(t){return t.replace($i,function(t){return t.replace(Qi,"\u200b$1\u200b")})}var eo=/([A-Z])/g;function no(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}function ro(t){var e,n=ne(t);if(n){if(Array.isArray(n)){var r,i,o,a=n;if((e=t)&&e.constructor&&e.constructor.\u0275cmp){if(-1==(r=co(a,t)))throw new Error("The provided component was not found in the application");i=t}else if(function(t){return t&&t.constructor&&t.constructor.\u0275dir}(t)){if(-1==(r=function(t,e){for(var n=t[1].firstChild;n;){for(var r=n.directiveEnd,i=n.directiveStart;i<r;i++)if(t[i]===e)return n.index;n=uo(n)}return-1}(a,t)))throw new Error("The provided directive was not found in the application");o=lo(r,a,!1)}else if(-1==(r=so(a,t)))return null;var s=Yt(a[r]),u=ne(s),c=u&&!Array.isArray(u)?u:io(a,r,s);if(i&&void 0===c.component&&(c.component=i,ao(c.component,c)),o&&void 0===c.directives){c.directives=o;for(var l=0;l<o.length;l++)ao(o[l],c)}ao(c.native,c),n=c}}else for(var h=t,f=h;f=f.parentNode;){var d=ne(f);if(d){var p;if(!(p=Array.isArray(d)?d:d.lView))return null;var v=so(p,h);if(v>=0){var m=Yt(p[v]),y=io(p,v,m);ao(m,y),n=y;break}}}return n||null}function io(t,e,n){return{lView:t,nodeIndex:e,native:n,component:void 0,directives:void 0,localRefs:void 0}}function oo(t){var e,n=ne(t);if(Array.isArray(n)){var r=co(n,t),i=io(n,r,(e=ee(r,n))[0]);i.component=t,ao(t,i),ao(i.native,i)}else e=ee(n.nodeIndex,n.lView);return e}function ao(t,e){t.__ngContext__=e}function so(t,e){for(var n=t[1],r=20;r<n.bindingStartIndex;r++)if(Yt(t[r])===e)return r;return-1}function uo(t){if(t.child)return t.child;if(t.next)return t.next;for(;t.parent&&!t.parent.next;)t=t.parent;return t.parent&&t.parent.next}function co(t,e){var n=t[1].components;if(n)for(var r=0;r<n.length;r++){var i=n[r];if(ee(i,t)[8]===e)return i}else if(ee(20,t)[8]===e)return 20;return-1}function lo(t,e,n){var r=e[1].data[t],i=r.directiveStart;return 0==i?at:(!n&&2&r.flags&&i++,e.slice(i,r.directiveEnd))}var ho=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(rt);function fo(t){return{name:"window",target:t.ownerDocument.defaultView}}function po(t){return{name:"document",target:t.ownerDocument}}function vo(t){return{name:"body",target:t.ownerDocument.body}}function mo(t){return t instanceof Function?t():t}var yo,go=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function _o(t,e){return yo(t,e)}function bo(t){var e=t[3];return At(e)?e[3]:e}function wo(t){return function(t){for(var e=Tt(t)?t:re(t);e&&!(512&e[2]);)e=bo(e);return e}(t)[8]}function xo(t){return Co(t[13])}function ko(t){return Co(t[4])}function Co(t){for(;null!==t&&!At(t);)t=t[4];return t}function So(t,e,n,r,i){if(null!=r){var o,a=!1;At(r)?o=r:Tt(r)&&(a=!0,r=r[0]);var s=Yt(r);0===t&&null!==n?null==i?Fo(e,n,s):Ro(e,n,s,i||null,!0):1===t&&null!==n?Ro(e,n,s,i||null,!0):2===t?Ko(e,s,a):3===t&&e.destroyNode(s),null!=o&&function(t,e,n,r,i){var o=n[7];o!==Yt(n)&&So(e,t,r,o,i);for(var a=10;a<n.length;a++){var s=n[a];Jo(s[1],s,t,e,r,o)}}(e,t,o,n,i)}}function Eo(t,e){return Xt(t)?t.createText(e):t.createTextNode(e)}function Po(t,e,n){Xt(t)?t.setValue(e,n):e.textContent=n}function Oo(t,e){return t.createComment(to(e))}function To(t,e,n){return Xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Ao(t,e){var n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ue(i,-1)),n.splice(r,1)}function Io(t,e){if(!(t.length<=10)){var n,r=10+e,i=t[r];if(i){var o=i[17];null!==o&&o!==t&&Ao(o,i),e>0&&(t[r-1][4]=i[4]);var a=rr(t,10+e);Jo(i[1],n=i,n[11],2,null,null),n[0]=null,n[6]=null;var s=a[19];null!==s&&s.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function Do(t,e){if(!(256&e[2])){var n=e[11];Xt(n)&&n.destroyNode&&Jo(t,e,n,3,null,null),function(t){var e=t[13];if(!e)return Mo(t[1],t);for(;e;){var n=null;if(Tt(e))n=e[13];else{var r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Tt(e)&&Mo(e[1],e),e=e[3];null===e&&(e=t),Tt(e)&&Mo(e[1],e),n=e&&e[4]}e=n}}(e)}}function Mo(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){var n;if(null!=t&&null!=(n=t.destroyHooks))for(var r=0;r<n.length;r+=2){var i=e[n[r]];if(!(i instanceof en)){var o=n[r+1];if(Array.isArray(o))for(var a=0;a<o.length;a+=2){var s=i[o[a]],u=o[a+1];Zt(4,s,u);try{u.call(s)}finally{Zt(5,s,u)}}else{Zt(4,i,o);try{o.call(i)}finally{Zt(5,i,o)}}}}}(t,e),function(t,e){var n=t.cleanup,r=e[7],i=-1;if(null!==n)for(var o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){var a=n[o+1],s="function"==typeof a?a(e):Yt(e[a]),u=r[i=n[o+2]],c=n[o+3];"boolean"==typeof c?s.removeEventListener(n[o],u,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{var l=r[i=n[o+1]];n[o].call(l)}if(null!==r){for(var h=i+1;h<r.length;h++)(0,r[h])();e[7]=null}}(t,e),1===e[1].type&&Xt(e[11])&&e[11].destroy();var n=e[17];if(null!==n&&At(e[3])){n!==e[3]&&Ao(n,e);var r=e[19];null!==r&&r.detachView(t)}}}function Lo(t,e,n){return jo(t,e.parent,n)}function jo(t,e,n){for(var r=e;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){var i=t.data[r.directiveStart].encapsulation;if(i===$.None||i===$.Emulated)return null}return $t(r,n)}function Ro(t,e,n,r,i){Xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Fo(t,e,n){Xt(t)?t.appendChild(e,n):e.appendChild(n)}function No(t,e,n,r,i){null!==r?Ro(t,e,n,r,i):Fo(t,e,n)}function Bo(t,e){return Xt(t)?t.parentNode(e):e.parentNode}function zo(t,e,n){return qo(t,e,n)}function Vo(t,e,n){return 40&t.type?$t(t,n):null}var Uo,qo=Vo;function Ho(t,e){qo=t,Uo=e}function Zo(t,e,n,r){var i=Lo(t,r,e),o=e[11],a=zo(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(var s=0;s<n.length;s++)No(o,i,n[s],a,!1);else No(o,i,n,a,!1);void 0!==Uo&&Uo(o,r,e,n,i)}function Go(t,e){if(null!==e){var n=e.type;if(3&n)return $t(e,t);if(4&n)return Xo(-1,t[e.index]);if(8&n){var r=e.child;if(null!==r)return Go(t,r);var i=t[e.index];return At(i)?Xo(-1,i):Yt(i)}if(32&n)return _o(e,t)()||Yt(t[e.index]);var o=Wo(t,e);return null!==o?Array.isArray(o)?o[0]:Go(bo(t[16]),o):Go(t,e.next)}return null}function Wo(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Xo(t,e){var n=10+t+1;if(n<e.length){var r=e[n],i=r[1].firstChild;if(null!==i)return Go(r,i)}return e[7]}function Ko(t,e,n){var r=Bo(t,e);r&&function(t,e,n,r){Xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function Yo(t,e,n,r,i,o,a){for(;null!=n;){var s=r[n.index],u=n.type;if(a&&0===e&&(s&&ao(Yt(s),r),n.flags|=4),64!=(64&n.flags))if(8&u)Yo(t,e,n.child,r,i,o,!1),So(e,t,i,s,o);else if(32&u){for(var c=_o(n,r),l=void 0;l=c();)So(e,t,i,l,o);So(e,t,i,s,o)}else 16&u?$o(t,e,r,n,i,o):So(e,t,i,s,o);n=a?n.projectionNext:n.next}}function Jo(t,e,n,r,i,o){Yo(n,r,t.firstChild,e,i,o,!1)}function $o(t,e,n,r,i,o){var a=n[16],s=a[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)So(e,t,i,s[u],o);else Yo(t,e,s,a[3],i,o,!0)}function Qo(t,e,n){Xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ta(t,e,n){Xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ea(t,e,n){for(var r=t.length;;){var i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){var o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function na(t,e,n){for(var r=0;r<t.length;){var i=t[r++];if(n&&"class"===i){if(-1!==ea((i=t[r]).toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ra(t){return 4===t.type&&"ng-template"!==t.value}function ia(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function oa(t,e,n){for(var r=4,i=t.attrs||[],o=function(t){for(var e=0;e<t.length;e++)if(rn(t[e]))return e;return t.length}(i),a=!1,s=0;s<e.length;s++){var u=e[s];if("number"!=typeof u){if(!a)if(4&r){if(r=2|1&r,""!==u&&!ia(t,u,n)||""===u&&1===e.length){if(aa(r))return!1;a=!0}}else{var c=8&r?u:e[++s];if(8&r&&null!==t.attrs){if(!na(t.attrs,c,n)){if(aa(r))return!1;a=!0}continue}var l=sa(8&r?"class":u,i,ra(t),n);if(-1===l){if(aa(r))return!1;a=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==ea(f,c,0)||2&r&&c!==h){if(aa(r))return!1;a=!0}}}}else{if(!a&&!aa(r)&&!aa(u))return!1;if(a&&aa(u))continue;a=!1,r=u|1&r}}return aa(r)||a}function aa(t){return 0==(1&t)}function sa(t,e,n,r){if(null===e)return-1;var i=0;if(r||!n){for(var o=!1;i<e.length;){var a=e[i];if(a===t)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var s=e[++i];"string"==typeof s;)s=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){var n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){var r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ua(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<e.length;r++)if(oa(t,e[r],n))return!0;return!1}function ca(t,e){t:for(var n=0;n<e.length;n++){var r=e[n];if(t.length===r.length){for(var i=0;i<t.length;i++)if(t[i]!==r[i])continue t;return!0}}return!1}function la(t,e){return t?":not("+e.trim()+")":e}function ha(t){for(var e=t[0],n=1,r=2,i="",o=!1;n<t.length;){var a=t[n];if("string"==typeof a)if(2&r){var s=t[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""===i||aa(a)||(e+=la(o,i),i=""),r=a,o=o||!aa(r);n++}return""!==i&&(e+=la(o,i)),e}var fa={};function da(t){pa(pe(),de(),qe()+t,xe())}function pa(t,e,n,r){if(!r)if(3==(3&e[2])){var i=t.preOrderCheckHooks;null!==i&&Ye(e,i,n)}else{var o=t.preOrderHooks;null!==o&&Je(e,o,0,n)}He(n)}function va(t,e){return t<<17|e<<2}function ma(t){return t>>17&32767}function ya(t){return 2|t}function ga(t){return(131068&t)>>2}function _a(t,e){return-131069&t|e<<2}function ba(t){return 1|t}var wa=Promise.resolve(null);function xa(t,e){var n=t.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var a=t.data[o];Me(i),a.contentQueries(2,e[o],o)}}}function ka(t,e,n,r,i,o,a,s,u,c){var l=e.blueprint.slice();return l[0]=i,l[2]=140|r,se(l),l[3]=l[15]=t,l[8]=n,l[10]=a||t&&t[10],l[11]=s||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Ca(t,e,n,r,i){var o=t.data[e];if(null===o)o=Sa(t,e,n,r,i),ce.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;var a=ge();o.injectorIndex=null===a?-1:a.injectorIndex}return _e(o,!0),o}function Sa(t,e,n,r,i){var o=ye(),a=be(),s=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=s),null!==o&&(a?null==o.child&&null!==s.parent&&(o.child=s):null===o.next&&(o.next=s)),s}function Ea(t,e,n,r){if(0===n)return-1;for(var i=e.length,o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Pa(t,e,n){Re(e);try{var r=t.viewQuery;null!==r&&ss(1,r,n);var i=t.template;null!==i&&Aa(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&xa(t,e),t.staticViewQueries&&ss(2,t.viewQuery,n);var o=t.components;null!==o&&function(t,e){for(var n=0;n<e.length;n++)es(t,e[n])}(e,o)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),a}finally{e[2]&=-5,Ve()}}function Oa(t,e,n,r){var i=e[2];if(256!=(256&i)){Re(e);var o=xe();try{se(e),Ee(t.bindingStartIndex),null!==n&&Aa(t,e,n,2,r);var a=3==(3&i);if(!o)if(a){var s=t.preOrderCheckHooks;null!==s&&Ye(e,s,null)}else{var u=t.preOrderHooks;null!==u&&Je(e,u,0,null),$e(e,0)}if(function(t){for(var e=xo(t);null!==e;e=ko(e))if(e[2])for(var n=e[9],r=0;r<n.length;r++){var i=n[r],o=i[3];0==(1024&i[2])&&ue(o,1),i[2]|=1024}}(e),function(t){for(var e=xo(t);null!==e;e=ko(e))for(var n=10;n<e.length;n++){var r=e[n],i=r[1];oe(r)&&Oa(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&xa(t,e),!o)if(a){var c=t.contentCheckHooks;null!==c&&Ye(e,c)}else{var l=t.contentHooks;null!==l&&Je(e,l,1),$e(e,1)}!function(t,e){var n,r,i,o=t.hostBindingOpCodes;if(null!==o)try{for(var a=0;a<o.length;a++){var s=o[a];if(s<0)He(~s);else{var u=s,c=o[++a],l=o[++a];n=c,r=u,i=void 0,(i=ce.lFrame).bindingIndex=i.bindingRootIndex=n,Ae(r),l(2,e[u])}}}finally{He(-1)}}(t,e);var h=t.components;null!==h&&function(t,e){for(var n=0;n<e.length;n++)Qa(t,e[n])}(e,h);var f=t.viewQuery;if(null!==f&&ss(2,f,r),!o)if(a){var d=t.viewCheckHooks;null!==d&&Ye(e,d)}else{var p=t.viewHooks;null!==p&&Je(e,p,2),$e(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ue(e[3],-1))}finally{Ve()}}}function Ta(t,e,n,r){var i=e[10],o=!xe(),a=ie(e);try{o&&!a&&i.begin&&i.begin(),a&&Pa(t,e,r),Oa(t,e,n,r)}finally{o&&!a&&i.end&&i.end()}}function Aa(t,e,n,r,i){var o=qe(),a=2&r;try{He(-1),a&&e.length>20&&pa(t,e,20,xe()),Zt(a?2:0,i),n(r,i)}finally{He(o),Zt(a?3:1,i)}}function Ia(t,e,n){if(It(e))for(var r=e.directiveEnd,i=e.directiveStart;i<r;i++){var o=t.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}function Da(t,e,n){le()&&(function(t,e,n,r){var i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||pn(n,e),ao(r,e);for(var a=n.initialInputs,s=i;s<o;s++){var u=t.data[s],c=Lt(u);c&&Wa(e,n,u);var l=Pn(e,t,s,n);ao(l,e),null!==a&&Ya(0,s-i,l,u,0,a),c&&(ee(n.index,e)[8]=l)}}(t,e,n,$t(n,e)),128==(128&n.flags)&&function(t,e,n){var r=n.directiveStart,i=n.directiveEnd,o=n.index,a=ce.lFrame.currentDirectiveIndex;try{He(o);for(var s=r;s<i;s++){var u=t.data[s],c=e[s];Ae(s),null===u.hostBindings&&0===u.hostVars&&null===u.hostAttrs||Ua(u,c)}}finally{He(-1),Ae(a)}}(t,e,n))}function Ma(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$t,r=e.localNames;if(null!==r)for(var i=e.index+1,o=0;o<r.length;o+=2){var a=r[o+1],s=-1===a?n(e,t):t[a];t[i++]=s}}function La(t){var e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ja(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ja(t,e,n,r,i,o,a,s,u,c){var l=20+r,h=l+i,f=function(t,e){for(var n=[],r=0;r<e;r++)n.push(r<t?null:fa);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:s,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ra(t,e,n){if(Xt(t))return t.selectRootElement(e,n===$.ShadowDom);var r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}function Fa(t,e,n,r){var i=cs(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&ls(t).push(r,i.length-1))}function Na(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ba(t,e,n,r,i,o,a,s){var u,c,l=$t(e,n),h=e.inputs;!s&&null!=h&&(u=h[r])?(ds(t,n,u,r,i),Dt(e)&&function(t,e){var n=ee(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=a?a(i,e.value||"",r):i,Xt(o)?o.setProperty(l,r,i):on(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function za(t,e,n,r){var i=!1;if(le()){var o=function(t,e,n){var r=t.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];ua(n,a.selectors,!1)&&(i||(i=[]),gn(pn(n,e),t,a.type),Lt(a)?(qa(t,n),i.unshift(a)):i.push(a))}return i}(t,e,n),a=null===r?null:{"":-1};if(null!==o){i=!0,Za(n,t.data.length,o.length);for(var s=0;s<o.length;s++){var u=o[s];u.providersResolver&&u.providersResolver(u)}for(var c=!1,l=!1,h=Ea(t,e,o.length,null),f=0;f<o.length;f++){var d=o[f];n.mergedAttrs=an(n.mergedAttrs,d.hostAttrs),Ga(t,n,e,h,d),Ha(h,d,a),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),c=!0),l||!p.ngOnChanges&&!p.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(t,e){for(var n=e.directiveEnd,r=t.data,i=e.attrs,o=[],a=null,s=null,u=e.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||ra(e)?null:Ja(l,i);o.push(h),a=Na(l,u,a),s=Na(c.outputs,u,s)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=s}(t,n)}a&&function(t,e,n){if(e)for(var r=t.localNames=[],i=0;i<e.length;i+=2){var o=n[e[i+1]];if(null==o)throw new O("301","Export of name '".concat(e[i+1],"' not found!"));r.push(e[i],o)}}(n,r,a)}return n.mergedAttrs=an(n.mergedAttrs,n.attrs),i}function Va(t,e,n,r,i,o){var a=o.hostBindings;if(a){var s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);var u=~e.index;(function(t){for(var e=t.length;e>0;){var n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=u&&s.push(u),s.push(r,i,a)}}function Ua(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function qa(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ha(t,e,n){if(n){if(e.exportAs)for(var r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Lt(e)&&(n[""]=t)}}function Za(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ga(t,e,n,r,i){t.data[r]=i;var o=i.factory||(i.factory=jt(i.type)),a=new en(o,Lt(i),null);t.blueprint[r]=a,n[r]=a,Va(t,e,0,r,Ea(t,n,i.hostVars,fa),i)}function Wa(t,e,n){var r=$t(e,t),i=La(n),o=t[10],a=ns(t,ka(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=a}function Xa(t,e,n,r,i,o){var a=$t(t,e);Ka(e[11],a,o,t.value,n,r,i)}function Ka(t,e,n,r,i,o,a){if(null==o)Xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{var s=null==a?T(o):a(o,r||"",i);Xt(t)?t.setAttribute(e,i,s,n):n?e.setAttributeNS(n,i,s):e.setAttribute(i,s)}}function Ya(t,e,n,r,i,o){var a=o[e];if(null!==a)for(var s=r.setInput,u=0;u<a.length;){var c=a[u++],l=a[u++],h=a[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function Ja(t,e){for(var n=null,r=0;r<e.length;){var i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function $a(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Qa(t,e){var n=ee(e,t);if(oe(n)){var r=n[1];80&n[2]?Oa(r,n,r.template,n[8]):n[5]>0&&ts(n)}}function ts(t){for(var e=xo(t);null!==e;e=ko(e))for(var n=10;n<e.length;n++){var r=e[n];if(1024&r[2]){var i=r[1];Oa(i,r,i.template,r[8])}else r[5]>0&&ts(r)}var o=t[1].components;if(null!==o)for(var a=0;a<o.length;a++){var s=ee(o[a],t);oe(s)&&s[5]>0&&ts(s)}}function es(t,e){var n=ee(e,t),r=n[1];!function(t,e){for(var n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Pa(r,n,n[8])}function ns(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function rs(t){for(;t;){t[2]|=64;var e=bo(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function is(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=re(n),i=r[1];Ta(i,r,i.template,n)}}function os(t,e,n){var r=e[10];r.begin&&r.begin();try{Oa(t,e,t.template,n)}catch(i){throw fs(e,i),i}finally{r.end&&r.end()}}function as(t){is(t[8])}function ss(t,e,n){Me(0),e(t,n)}var us=wa;function cs(t){return t[7]||(t[7]=[])}function ls(t){return t.cleanup||(t.cleanup=[])}function hs(t,e,n){return(null===t||Lt(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function fs(t,e){var n=t[9],r=n?n.get(Ki,null):null;r&&r.handleError(e)}function ds(t,e,n,r,i){for(var o=0;o<n.length;){var a=n[o++],s=n[o++],u=e[a],c=t.data[a];null!==c.setInput?c.setInput(u,i,r,s):u[s]=i}}function ps(t,e,n){var r=Jt(e,t);Po(t[11],r,n)}function vs(t,e,n){var r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(var a=0;a<e.length;a++){var s=e[a];"number"==typeof s?o=s:1==o?i=k(i,s):2==o&&(r=k(r,s+": "+e[++a]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ms(t){var e=oo(t);os(e[1],e,t)}function ys(t){var e,n;0===(e=rs(oo(t))[8]).flags&&e.clean==wa&&(e.flags|=1,e.clean=new Promise(function(t){return n=t}),e.scheduler(function(){if(1&e.flags&&(e.flags&=-2,is(e)),2&e.flags){e.flags&=-3;var t=e.playerHandler;t&&t.flushPlayers()}e.clean=wa,n(null)}))}var gs,_s=new qn("INJECTOR",-1),bs=function(){function t(){y(this,t)}return _(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mr;if(e===mr){var n=new Error("NullInjectorError: No provider for ".concat(x(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}(),ws=new qn("Set Injector scope."),xs={},ks={},Cs=[];function Ss(){return void 0===gs&&(gs=new bs),gs}function Es(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=Ps(t,e,n,r);return i._resolveInjectorDefTypes(),i}function Ps(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Os(t,n,e||Ss(),r)}var Os=function(){function t(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;y(this,t),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var a=[];n&&er(n,function(t){return i.processProvider(t,e,n)}),er([e],function(t){return i.processInjectorType(t,[],a)}),this.records.set(_s,Is(void 0,this));var s=this.records.get(ws);this.scope=null!=s?s.value:null,this.source=o||("object"==typeof e?null:x(e))}return _(t,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mr,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.Default;this.assertNotDestroyed();var r,i=_r(this);try{if(!(n&H.SkipSelf)){var o=this.records.get(t);if(void 0===o){var a=("function"==typeof(r=t)||"object"==typeof r&&r instanceof qn)&&R(t);o=a&&this.injectableDefInScope(a)?Is(Ts(t),xs):null,this.records.set(t,o)}if(null!=o)return this.hydrate(t,o)}return(n&H.Self?Ss():this.parent).get(t,e=n&H.Optional&&e===mr?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(x(t)),i)throw s;return function(t,e,n,r){var i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=x(e);if(Array.isArray(e))i=e.map(x).join(" -> ");else if("object"==typeof e){var o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):x(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(yr,"\n  "))}("\n"+t.message,i,"R3InjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,0,this.source)}throw s}finally{_r(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach(function(e){return t.get(e)})}},{key:"toString",value:function(){var t=[];return this.records.forEach(function(e,n){return t.push(x(n))}),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,e,n){var r=this;if(!(t=E(t)))return!1;var i=N(t),o=null==i&&t.ngModule||void 0,a=void 0===o?t:o,s=-1!==n.indexOf(a);if(void 0!==o&&(i=N(o)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(a);try{er(i.imports,function(t){r.processInjectorType(t,e,n)&&(void 0===u&&(u=[]),u.push(t))})}finally{}if(void 0!==u)for(var c=function(t){var e=u[t],n=e.ngModule,i=e.providers;er(i,function(t){return r.processProvider(t,n,i||Cs)})},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(a);var h=jt(a)||function(){return new a};this.records.set(a,Is(h,xs));var f=i.providers;if(null!=f&&!s){var d=t;er(f,function(t){return r.processProvider(t,d,f)})}return void 0!==o&&void 0!==t.providers}},{key:"processProvider",value:function(t,e,n){var r=Ms(t=E(t))?t:E(t&&t.provide),i=function(t,e,n){return Ds(t)?Is(void 0,t.useValue):Is(As(t),xs)}(t);if(Ms(t)||!0!==t.multi)this.records.get(r);else{var o=this.records.get(r);o||((o=Is(void 0,xs,!0)).factory=function(){return Cr(o.multi)},this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,i)}},{key:"hydrate",value:function(t,e){var n;return e.value===xs&&(e.value=ks,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}},{key:"injectableDefInScope",value:function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}]),t}();function Ts(t){var e=R(t),n=null!==e?e.factory:jt(t);if(null!==n)return n;if(t instanceof qn)throw new Error("Token ".concat(x(t)," is missing a \u0275prov definition."));if(t instanceof Function)return function(t){var e=t.length;if(e>0){var n=ir(e,"?");throw new Error("Can't resolve all parameters for ".concat(x(t),": (").concat(n.join(", "),")."))}var r=function(t){var e=t&&(t[z]||t[U]);if(e){var n=function(t){if(t.hasOwnProperty("name"))return t.name;var e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),e}return null}(t);return null!==r?function(){return r.factory(t)}:function(){return new t}}(t);throw new Error("unreachable")}function As(t,e,n){var i,a;if(Ms(t)){var s=E(t);return jt(s)||Ts(s)}if(Ds(t))i=function(){return E(t.useValue)};else if((a=t)&&a.useFactory)i=function(){return t.useFactory.apply(t,o(Cr(t.deps||[])))};else if(function(t){return!(!t||!t.useExisting)}(t))i=function(){return wr(E(t.useExisting))};else{var u=E(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return jt(u)||Ts(u);i=function(){return r(u,o(Cr(t.deps)))}}return i}function Is(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:t,value:e,multi:n?[]:void 0}}function Ds(t){return null!==t&&"object"==typeof t&&gr in t}function Ms(t){return"function"==typeof t}function Ls(t,e,n){return Es({name:n},e,t,n)}var js=Ls,Rs=function(){var t=function(){function t(){y(this,t)}return _(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?js(t,e,""):js(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=mr,t.NULL=new bs,t.\u0275prov=M({token:t,providedIn:"any",factory:function(){return wr(_s)}}),t.__NG_ELEMENT_ID__=-1,t}();function Fs(t){Ws(t);var e,n,r,i=qs(t,!1);return null===i?null:(void 0===i.component&&(i.component=(e=i.nodeIndex,n=i.lView,2&(r=n[1].data[e]).flags?n[r.directiveStart]:null)),i.component)}function Ns(t){Ws(t);var e=qs(t,!1);return null===e?null:e.lView[8]}function Bs(t){var e=qs(t,!1);if(null===e)return null;for(var n,r=e.lView;2===r[1].type&&(n=bo(r));)r=n;return 512&r[2]?null:r[8]}function zs(t){return o(wo(t).components)}function Vs(t){var e=qs(t,!1);return null===e?Rs.NULL:new An(e.lView[1].data[e.nodeIndex],e.lView)}function Us(t){var e=qs(t);return void 0===e.directives&&(e.directives=lo(e.nodeIndex,e.lView,!1)),null===e.directives?[]:o(e.directives)}function qs(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=ro(t);if(!n&&e)throw new Error("Invalid ng target");return n}function Hs(t){return ro(t).native}function Zs(t){Ws(t);var e=qs(t,!1);if(null===e)return[];var n=e.lView,r=n[7],i=n[1].cleanup,o=[];if(i&&r)for(var a=0;a<i.length;){var s=i[a++],u=i[a++];if("string"==typeof s){var c=s,l=Yt(n[u]),h=r[i[a++]],f=i[a++],d="boolean"==typeof f||f>=0?"dom":"output",p="boolean"==typeof f&&f;t==l&&o.push({element:t,name:c,callback:h,useCapture:p,type:d})}}return o.sort(Gs),o}function Gs(t,e){return t.name==e.name?0:t.name<e.name?-1:1}function Ws(t){if("undefined"!=typeof Element&&!(t instanceof Element))throw new Error("Expecting instance of DOM Element")}function Xs(t){ys(t),zs(t).forEach(function(t){return ms(t)})}var Ks=!1;function Ys(){Ks||(Ks=!0,Js("\u0275setProfiler",Ht),Js("getComponent",Fs),Js("getContext",Ns),Js("getListeners",Zs),Js("getOwningComponent",Bs),Js("getHostElement",Hs),Js("getInjector",Vs),Js("getRootComponents",zs),Js("getDirectives",Us),Js("applyChanges",Xs))}function Js(t,e){if("undefined"==typeof COMPILED||!COMPILED){var n=rt;if(n){var r=n.ng;r||(r=n.ng={}),r[t]=e}}}function $s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.rendererFactory||Kt,r=e.sanitizer||null,i=St(t);i.type!=t&&(i.type=t);var o,a=i.selectors[0][0],s=Ra(n.createRenderer(null,null),e.host||a,i.encapsulation),u=i.onPush?576:528,c=eu(e.scheduler,e.playerHandler),l=n.createRenderer(s,i),h=ja(0,null,null,1,0,null,null,null,null,null),f=ka(null,h,c,u,null,null,n,l,null,e.injector||null);Re(f);try{n.begin&&n.begin(),o=tu(Qs(s,i,f,n,l,r),i,f,c,e.hostFeatures||null),Pa(h,f,null),Oa(h,f,null,null)}finally{Ve(),n.end&&n.end()}return o}function Qs(t,e,n,r,i,o){var a=n[1];n[20]=t;var s=Ca(a,20,2,"#host",null),u=s.mergedAttrs=e.hostAttrs;null!==u&&(vs(s,u,!0),null!==t&&(nn(i,t,u),null!==s.classes&&ta(i,t,s.classes),null!==s.styles&&Qo(i,t,s.styles)));var c=r.createRenderer(t,e),l=ka(n,La(e),null,e.onPush?64:16,n[20],s,r,c,o||null,null);return a.firstCreatePass&&(gn(pn(s,n),a,e.type),qa(a,s),Za(s,n.length,1)),ns(n,l),n[20]=l}function tu(t,e,n,r,i){var o=n[1],a=function(t,e,n){var r=me();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ga(t,r,e,Ea(t,e,1,null),n));var i=Pn(e,t,r.directiveStart,r);ao(i,e);var o=$t(r,e);return o&&ao(o,e),i}(o,n,e);if(r.components.push(a),t[8]=a,i&&i.forEach(function(t){return t(a,e)}),e.contentQueries){var s=me();e.contentQueries(1,a,s.directiveStart)}var u=me();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(He(u.index),Va(n[1],u,0,u.directiveStart,u.directiveEnd,e),Ua(e,a)),a}function eu(t,e){return{components:[],scheduler:t||ho,clean:us,playerHandler:e||null,flags:0}}function nu(t,e){Ke(re(t)[1],me())}function ru(t){return wo(t).clean}function iu(t){return Object.getPrototypeOf(t.prototype).constructor}function ou(t){for(var e=iu(t.type),n=!0,r=[t];e;){var i=void 0;if(Lt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);var o=t;o.inputs=au(t.inputs),o.declaredInputs=au(t.declaredInputs),o.outputs=au(t.outputs);var a=i.hostBindings;a&&cu(t,a);var s=i.viewQuery,u=i.contentQueries;if(s&&su(t,s),u&&uu(t,u),w(t.inputs,i.inputs),w(t.declaredInputs,i.declaredInputs),w(t.outputs,i.outputs),Lt(i)&&i.data.animation){var c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(t),f===ou&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){for(var e=0,n=null,r=t.length-1;r>=0;r--){var i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=an(i.hostAttrs,n=an(n,i.hostAttrs))}}(r)}function au(t){return t===it?{}:t===at?[]:t}function su(t,e){var n=t.viewQuery;t.viewQuery=n?function(t,r){e(t,r),n(t,r)}:e}function uu(t,e){var n=t.contentQueries;t.contentQueries=n?function(t,r,i){e(t,r,i),n(t,r,i)}:e}function cu(t,e){var n=t.hostBindings;t.hostBindings=n?function(t,r){e(t,r),n(t,r)}:e}var lu=["providersResolver"],hu=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function fu(t){var e,n=iu(t.type);e=Lt(t)?n.\u0275cmp:n.\u0275dir;var r,o=t,a=i(lu);try{for(a.s();!(r=a.n()).done;){var s=r.value;o[s]=e[s]}}catch(h){a.e(h)}finally{a.f()}if(Lt(e)){var u,c=i(hu);try{for(c.s();!(u=c.n()).done;){var l=u.value;o[l]=e[l]}}catch(h){c.e(h)}finally{c.f()}}}var du=null;function pu(){if(!du){var t=rt.Symbol;if(t&&t.iterator)du=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(du=r)}}return du}function vu(t,e){var n=yu(t),r=yu(e);return n&&r?function(t,e,n){for(var r=t[pu()](),i=e[pu()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(t,e,vu):!(n||!(t&&("object"==typeof t||"function"==typeof t))||r||!(e&&("object"==typeof e||"function"==typeof e)))||Object.is(t,e)}var mu=function(){function t(e){y(this,t),this.wrapped=e}return _(t,null,[{key:"wrap",value:function(e){return new t(e)}},{key:"unwrap",value:function(e){return t.isWrapped(e)?e.wrapped:e}},{key:"isWrapped",value:function(e){return e instanceof t}}]),t}();function yu(t){return!!gu(t)&&(Array.isArray(t)||!(t instanceof Map)&&pu()in t)}function gu(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function _u(t,e,n){return t[e]=n}function bu(t,e){return t[e]}function wu(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function xu(t,e,n,r){var i=wu(t,e,n);return wu(t,e+1,r)||i}function ku(t,e,n,r,i){var o=xu(t,e,n,r);return wu(t,e+2,i)||o}function Cu(t,e,n,r,i,o){var a=xu(t,e,n,r);return xu(t,e+2,i,o)||a}function Su(t,e,n,r){var i=de();return wu(i,Pe(),e)&&(pe(),Xa(Ze(),i,t,e,n,r)),Su}function Eu(t,e){for(var n=!1,r=Se(),i=1;i<e.length;i+=2)n=wu(t,r++,e[i])||n;if(Ee(r),!n)return fa;for(var o=e[0],a=1;a<e.length;a+=2)o+=T(e[a])+e[a+1];return o}function Pu(t,e,n,r){return wu(t,Pe(),n)?e+T(n)+r:fa}function Ou(t,e,n,r,i,o){var a=xu(t,Se(),n,i);return Oe(2),a?e+T(n)+r+T(i)+o:fa}function Tu(t,e,n,r,i,o,a,s){var u=ku(t,Se(),n,i,a);return Oe(3),u?e+T(n)+r+T(i)+o+T(a)+s:fa}function Au(t,e,n,r,i,o,a,s,u,c){var l=Cu(t,Se(),n,i,a,u);return Oe(4),l?e+T(n)+r+T(i)+o+T(a)+s+T(u)+c:fa}function Iu(t,e,n,r,i,o,a,s,u,c,l,h){var f=Se(),d=Cu(t,f,n,i,a,u);return d=wu(t,f+4,l)||d,Oe(5),d?e+T(n)+r+T(i)+o+T(a)+s+T(u)+c+T(l)+h:fa}function Du(t,e,n,r,i,o,a,s,u,c,l,h,f,d){var p=Se(),v=Cu(t,p,n,i,a,u);return v=xu(t,p+4,l,f)||v,Oe(6),v?e+T(n)+r+T(i)+o+T(a)+s+T(u)+c+T(l)+h+T(f)+d:fa}function Mu(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v){var m=Se(),y=Cu(t,m,n,i,a,u);return y=ku(t,m+4,l,f,p)||y,Oe(7),y?e+T(n)+r+T(i)+o+T(a)+s+T(u)+c+T(l)+h+T(f)+d+T(p)+v:fa}function Lu(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,y){var g=Se(),_=Cu(t,g,n,i,a,u);return _=Cu(t,g+4,l,f,p,m)||_,Oe(8),_?e+T(n)+r+T(i)+o+T(a)+s+T(u)+c+T(l)+h+T(f)+d+T(p)+v+T(m)+y:fa}function ju(t,e,n,r,i,o){var a=de(),s=Pu(a,e,n,r);return s!==fa&&Xa(Ze(),a,t,s,i,o),ju}function Ru(t,e,n,r,i,o,a,s){var u=de(),c=Ou(u,e,n,r,i,o);return c!==fa&&Xa(Ze(),u,t,c,a,s),Ru}function Fu(t,e,n,r,i,o,a,s,u,c){var l=de(),h=Tu(l,e,n,r,i,o,a,s);return h!==fa&&Xa(Ze(),l,t,h,u,c),Fu}function Nu(t,e,n,r,i,o,a,s,u,c,l,h){var f=de(),d=Au(f,e,n,r,i,o,a,s,u,c);return d!==fa&&Xa(Ze(),f,t,d,l,h),Nu}function Bu(t,e,n,r,i,o,a,s,u,c,l,h,f,d){var p=de(),v=Iu(p,e,n,r,i,o,a,s,u,c,l,h);return v!==fa&&Xa(Ze(),p,t,v,f,d),Bu}function zu(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v){var m=de(),y=Du(m,e,n,r,i,o,a,s,u,c,l,h,f,d);return y!==fa&&Xa(Ze(),m,t,y,p,v),zu}function Vu(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,y){var g=de(),_=Mu(g,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v);return _!==fa&&Xa(Ze(),g,t,_,m,y),Vu}function Uu(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,y,g,_){var b=de(),w=Lu(b,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,y);return w!==fa&&Xa(Ze(),b,t,w,g,_),Uu}function qu(t,e,n,r){var i=de(),o=Eu(i,e);return o!==fa&&Xa(Ze(),i,t,o,n,r),qu}function Hu(t,e,n,r,i,o,a,s){var u=de(),c=pe(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,a,s,u){var c=e.consts,l=Ca(e,t,4,a||null,ae(c,s));za(e,n,l,ae(c,u)),Ke(e,l);var h=l.tViews=ja(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,a):c.data[l];_e(h,!1);var f=u[11].createComment("");Zo(c,u,f,h),ao(f,u),ns(u,u[l]=$a(f,u,f,h)),Mt(h)&&Da(c,u,h),null!=a&&Ma(u,h,s)}function Zu(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Gu(t){return te(ce.lFrame.contextLView,20+t)}var Wu={"\u0275\u0275defineInjectable":M,"\u0275\u0275defineInjector":j,"\u0275\u0275inject":wr,"\u0275\u0275invalidFactoryDep":xr},Xu=b({provide:String,useValue:b});function Ku(t){return void 0!==t.useClass}function Yu(t){return void 0!==t.useFactory}function Ju(t,e){var n=e||{providedIn:null},r={name:t.name,type:t,typeArgumentCount:0,providedIn:n.providedIn,userDeps:void 0};return(Ku(n)||Yu(n))&&void 0!==n.deps&&(r.userDeps=jr(n.deps)),Ku(n)?r.useClass=E(n.useClass):function(t){return Xu in t}(n)?r.useValue=E(n.useValue):Yu(n)?r.useFactory=n.useFactory:function(t){return void 0!==t.useExisting}(n)&&(r.useExisting=E(n.useExisting)),r}var $u=Fn("Injectable",void 0,void 0,void 0,function(t,e){return tc(t,e)}),Qu=function(t,e){var n=null,r=null;t.hasOwnProperty(z)||Object.defineProperty(t,z,{get:function(){return null===n&&(n=Jn().compileInjectable(Wu,"ng:///".concat(t.name,"/\u0275prov.js"),Ju(t,e))),n}}),t.hasOwnProperty(ft)||Object.defineProperty(t,ft,{get:function(){if(null===r){var n=Ju(t,e),i=Jn();r=i.compileFactory(Wu,"ng:///".concat(t.name,"/\u0275fac.js"),{name:n.name,type:n.type,typeArgumentCount:n.typeArgumentCount,deps:Lr(t),injectFn:"inject",target:i.R3FactoryTarget.Injectable})}return r},configurable:!0})},tc=Qu;function ec(t){return t.length>1?" ("+function(t){for(var e=[],n=0;n<t.length;++n){if(e.indexOf(t[n])>-1)return e.push(t[n]),e;e.push(t[n])}return e}(t.slice().reverse()).map(function(t){return x(t.token)}).join(" -> ")+")":""}function nc(t,e,n,r){var i=[e],o=n(i),a=r?function(t,e){var n="".concat(t," caused by: ").concat(e instanceof Error?e.message:e),r=Error(n);return r.ngOriginalError=e,r}(o,r):Error(o);return a.addKey=rc,a.keys=i,a.injectors=[t],a.constructResolvingMessage=n,a.ngOriginalError=r,a}function rc(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)}function ic(t,e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];n.push(o&&0!=o.length?o.map(x).join(" "):"?")}return Error("Cannot resolve all parameters for '"+x(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+x(t)+"' is decorated with Injectable.")}var oc=function(){function t(e,n){if(y(this,t),this.token=e,this.id=n,!e)throw new Error("Token must be defined!");this.displayName=x(this.token)}return _(t,null,[{key:"get",value:function(t){return ac.get(E(t))}},{key:"numberOfKeys",get:function(){return ac.numberOfKeys}}]),t}(),ac=new(function(){function t(){y(this,t),this._allKeys=new Map}return _(t,[{key:"get",value:function(t){if(t instanceof oc)return t;if(this._allKeys.has(t))return this._allKeys.get(t);var e=new oc(t,oc.numberOfKeys);return this._allKeys.set(t,e),e}},{key:"numberOfKeys",get:function(){return this._allKeys.size}}]),t}()),sc=new(function(){function t(e){y(this,t),this.reflectionCapabilities=e}return _(t,[{key:"updateCapabilities",value:function(t){this.reflectionCapabilities=t}},{key:"factory",value:function(t){return this.reflectionCapabilities.factory(t)}},{key:"parameters",value:function(t){return this.reflectionCapabilities.parameters(t)}},{key:"annotations",value:function(t){return this.reflectionCapabilities.annotations(t)}},{key:"propMetadata",value:function(t){return this.reflectionCapabilities.propMetadata(t)}},{key:"hasLifecycleHook",value:function(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)}},{key:"getter",value:function(t){return this.reflectionCapabilities.getter(t)}},{key:"setter",value:function(t){return this.reflectionCapabilities.setter(t)}},{key:"method",value:function(t){return this.reflectionCapabilities.method(t)}},{key:"importUri",value:function(t){return this.reflectionCapabilities.importUri(t)}},{key:"resourceUri",value:function(t){return this.reflectionCapabilities.resourceUri(t)}},{key:"resolveIdentifier",value:function(t,e,n,r){return this.reflectionCapabilities.resolveIdentifier(t,e,n,r)}},{key:"resolveEnum",value:function(t,e){return this.reflectionCapabilities.resolveEnum(t,e)}}]),t}())(new fr),uc=function(){function t(e,n,r){y(this,t),this.key=e,this.optional=n,this.visibility=r}return _(t,null,[{key:"fromKey",value:function(e){return new t(e,!1,null)}}]),t}(),cc=[],lc=_(function t(e,n,r){y(this,t),this.key=e,this.resolvedFactories=n,this.multiProvider=r,this.resolvedFactory=this.resolvedFactories[0]}),hc=_(function t(e,n){y(this,t),this.factory=e,this.dependencies=n});function fc(t){var e,n;if(t.useClass){var r=E(t.useClass);e=sc.factory(r),n=mc(r)}else t.useExisting?(e=function(t){return t},n=[uc.fromKey(oc.get(t.useExisting))]):t.useFactory?(e=t.useFactory,n=function(t,e){if(e){var n=e.map(function(t){return[t]});return e.map(function(e){return yc(t,e,n)})}return mc(t)}(t.useFactory,t.deps)):(e=function(){return t.useValue},n=cc);return new hc(e,n)}function dc(t){return new lc(oc.get(t.provide),[fc(t)],t.multi||!1)}function pc(t){var e=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw Error("Cannot mix multi providers and regular providers, got: ".concat(i," ").concat(r));if(r.multiProvider)for(var o=0;o<r.resolvedFactories.length;o++)i.resolvedFactories.push(r.resolvedFactories[o]);else e.set(r.key.id,r)}else{var a;a=r.multiProvider?new lc(r.key,r.resolvedFactories.slice(),r.multiProvider):r,e.set(r.key.id,a)}}return e}(vc(t,[]).map(dc),new Map);return Array.from(e.values())}function vc(t,e){return t.forEach(function(t){if(t instanceof $n)e.push({provide:t,useClass:t});else if(t&&"object"==typeof t&&void 0!==t.provide)e.push(t);else{if(!Array.isArray(t))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: ".concat(t));vc(t,e)}}),e}function mc(t){var e=sc.parameters(t);if(!e)return[];if(e.some(function(t){return null==t}))throw ic(t,e);return e.map(function(n){return yc(t,n,e)})}function yc(t,e,n){var r=null,i=!1;if(!Array.isArray(e))return gc(e instanceof Pr?e.token:e,i,null);for(var o=null,a=0;a<e.length;++a){var s=e[a];s instanceof $n?r=s:s instanceof Pr?r=s.token:s instanceof Or?i=!0:s instanceof Tr||s instanceof Ar?o=s:s instanceof qn&&(r=s)}if(null!=(r=E(r)))return gc(r,i,o);throw ic(t,n)}function gc(t,e,n){return new uc(oc.get(t),e,n)}var _c={},bc=function(){function t(){y(this,t)}return _(t,null,[{key:"resolve",value:function(t){return pc(t)}},{key:"resolveAndCreate",value:function(e,n){var r=t.resolve(e);return t.fromResolvedProviders(r,n)}},{key:"fromResolvedProviders",value:function(t,e){return new wc(t,e)}}]),t}(),wc=function(){var t=function(){function t(e,n){y(this,t),this._constructionCounter=0,this._providers=e,this.parent=n||null;var r=e.length;this.keyIds=[],this.objs=[];for(var i=0;i<r;i++)this.keyIds[i]=e[i].key.id,this.objs[i]=_c}return _(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mr;return this._getByKey(oc.get(t),null,e)}},{key:"resolveAndCreateChild",value:function(t){var e=bc.resolve(t);return this.createChildFromResolved(e)}},{key:"createChildFromResolved",value:function(e){var n=new t(e);return n.parent=this,n}},{key:"resolveAndInstantiate",value:function(t){return this.instantiateResolved(bc.resolve([t])[0])}},{key:"instantiateResolved",value:function(t){return this._instantiateProvider(t)}},{key:"getProviderAtIndex",value:function(t){if(t<0||t>=this._providers.length)throw function(t){return Error("Index ".concat(t," is out-of-bounds."))}(t);return this._providers[t]}},{key:"_new",value:function(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw nc(this,t.key,function(t){return"Cannot instantiate cyclic dependency!".concat(ec(t))});return this._instantiateProvider(t)}},{key:"_getMaxNumberOfObjects",value:function(){return this.objs.length}},{key:"_instantiateProvider",value:function(t){if(t.multiProvider){for(var e=[],n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])}},{key:"_instantiate",value:function(t,e){var n,r,i,a=this,s=e.factory;try{n=e.dependencies.map(function(t){return a._getByReflectiveDependency(t)})}catch(u){throw u.addKey&&u.addKey(this,t.key),u}try{r=s.apply(void 0,o(n))}catch(u){throw nc(this,t.key,function(t){var e=x(t[0].token);return"".concat(i.message,": Error during instantiation of ").concat(e,"!").concat(ec(t),".")},i=u)}return r}},{key:"_getByReflectiveDependency",value:function(t){return this._getByKey(t.key,t.visibility,t.optional?null:mr)}},{key:"_getByKey",value:function(e,n,r){return e===t.INJECTOR_KEY?this:n instanceof Tr?this._getByKeySelf(e,r):this._getByKeyDefault(e,r,n)}},{key:"_getObjByKeyId",value:function(t){for(var e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===_c&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return _c}},{key:"_throwOrNull",value:function(t,e){if(e!==mr)return e;throw function(t,e){return nc(t,e,function(t){return"No provider for ".concat(x(t[0].token),"!").concat(ec(t))})}(this,t)}},{key:"_getByKeySelf",value:function(t,e){var n=this._getObjByKeyId(t.id);return n!==_c?n:this._throwOrNull(t,e)}},{key:"_getByKeyDefault",value:function(e,n,r){var i;for(i=r instanceof Ar?this.parent:this;i instanceof t;){var o=i,a=o._getObjByKeyId(e.id);if(a!==_c)return a;i=o.parent}return null!==i?i.get(e.token,n):this._throwOrNull(e,n)}},{key:"displayName",get:function(){return"ReflectiveInjector(providers: [".concat(function(t,e){for(var n=[],r=0;r<t._providers.length;++r)n[r]=' "'+t.getProviderAtIndex(r).key.displayName+'" ';return n}(this).join(", "),"])")}},{key:"toString",value:function(){return this.displayName}}]),t}();return t.INJECTOR_KEY=oc.get(Rs),t}();function xc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default,n=de();return null===n?wr(t,e):xn(me(),n,E(t),e)}function kc(){throw new Error("invalid")}function Cc(t,e,n){var r=de();return wu(r,Pe(),e)&&Ba(pe(),Ze(),r,t,e,r[11],n,!1),Cc}function Sc(t,e,n,r,i){var o=i?"class":"style";ds(t,n,e.inputs[o],o,r)}function Ec(t,e,n,r){var i=de(),o=pe(),a=20+t,s=i[11],u=i[a]=To(s,e,ce.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,a){var s=e.consts,u=Ca(e,t,2,i,ae(s,o));return za(e,n,u,ae(s,a)),null!==u.attrs&&vs(u,u.attrs,!1),null!==u.mergedAttrs&&vs(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(a,o,i,0,e,n,r):o.data[a];_e(c,!0);var l=c.mergedAttrs;null!==l&&nn(s,u,l);var h=c.classes;null!==h&&ta(s,u,h);var f=c.styles;null!==f&&Qo(s,u,f),64!=(64&c.flags)&&Zo(o,i,u,c),0===ce.lFrame.elementDepthCount&&ao(u,i),ce.lFrame.elementDepthCount++,Mt(c)&&(Da(o,i,c),Ia(o,c,i)),null!==r&&Ma(i,c)}function Pc(){var t=me();be()?we():_e(t=t.parent,!1);var e=t;ce.lFrame.elementDepthCount--;var n=pe();n.firstCreatePass&&(Ke(n,t),It(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Sc(n,e,de(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Sc(n,e,de(),e.stylesWithoutHost,!1)}function Oc(t,e,n,r){Ec(t,e,n,r),Pc()}function Tc(t,e,n){var r=de(),i=pe(),o=t+20,a=i.firstCreatePass?function(t,e,n,r,i){var o=e.consts,a=ae(o,r),s=Ca(e,t,8,"ng-container",a);return null!==a&&vs(s,a,!0),za(e,n,s,ae(o,i)),null!==e.queries&&e.queries.elementStart(e,s),s}(o,i,r,e,n):i.data[o];_e(a,!0);var s=r[o]=r[11].createComment("");Zo(i,r,s,a),ao(s,r),Mt(a)&&(Da(i,r,a),Ia(i,a,r)),null!=n&&Ma(r,a)}function Ac(){var t=me(),e=pe();be()?we():_e(t=t.parent,!1),e.firstCreatePass&&(Ke(e,t),It(t)&&e.queries.elementEnd(t))}function Ic(t,e,n){Tc(t,e,n),Ac()}function Dc(){return de()}function Mc(t){return!!t&&"function"==typeof t.then}function Lc(t){return!!t&&"function"==typeof t.subscribe}var jc=Lc;function Rc(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=de(),o=pe(),a=me();return Nc(o,i,i[11],a,t,e,n,r),Rc}function Fc(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=me(),o=de(),a=pe();return Nc(a,o,hs(Ie(a.data),i,o),i,t,e,n,r),Fc}function Nc(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=Mt(r),c=t.firstCreatePass&&ls(t),l=e[8],h=cs(e),f=!0;if(3&r.type){var d=$t(r,e),p=s?s(d):it,v=p.target||d,m=h.length,y=s?function(t){return s(Yt(t[r.index])).target}:r.index;if(Xt(n)){var g=null;if(!s&&u&&(g=function(t,e,n,r){var i=t.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var a=i[o];if(a===n&&i[o+1]===r){var s=e[7],u=i[o+2];return s.length>u?s[u]:null}"string"==typeof a&&(o+=2)}return null}(t,e,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,f=!1;else{o=zc(r,e,l,o,!1);var _=n.listen(p.name||v,i,o);h.push(o,_),c&&c.push(i,y,m,m+1)}}else o=zc(r,e,l,o,!0),v.addEventListener(i,o,a),h.push(o),c&&c.push(i,y,m,a)}else o=zc(r,e,l,o,!1);var b,w=r.outputs;if(f&&null!==w&&(b=w[i])){var x=b.length;if(x)for(var k=0;k<x;k+=2){var C=e[b[k]][b[k+1]].subscribe(o),S=h.length;h.push(o,C),c&&c.push(i,r.index,S,-(S+1))}}}function Bc(t,e,n,r){try{return Zt(6,e,n),!1!==n(r)}catch(i){return fs(t,i),!1}finally{Zt(7,e,n)}}function zc(t,e,n,r,i){return function o(a){if(a===Function)return r;var s=2&t.flags?ee(t.index,e):e;0==(32&e[2])&&rs(s);for(var u=Bc(e,n,r,a),c=o.__ngNextListenerFn__;c;)u=Bc(e,n,c,a)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&(a.preventDefault(),a.returnValue=!1),u}}function Vc(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Ue(t)}function Uc(t,e){for(var n=null,r=function(t){var e=t.attrs;if(null!=e){var n=e.indexOf(5);if(0==(1&n))return e[n+1]}return null}(t),i=0;i<e.length;i++){var o=e[i];if("*"!==o){if(null===r?ua(t,o,!0):ca(r,o))return i}else n=i}return n}function qc(t){var e=de()[16][6];if(!e.projection)for(var n=e.projection=ir(t?t.length:1,null),r=n.slice(),i=e.child;null!==i;){var o=t?Uc(i,t):0;null!==o&&(r[o]?r[o].projectionNext=i:n[o]=i,r[o]=i),i=i.next}}function Hc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=de(),i=pe(),o=Ca(i,20+t,16,null,n||null);null===o.projection&&(o.projection=e),we(),64!=(64&o.flags)&&function(t,e,n){$o(e[11],0,e,n,Lo(t,n,e),zo(n.parent||e[6],n,e))}(i,r,o)}function Zc(t,e,n){return Gc(t,"",e,"",n),Zc}function Gc(t,e,n,r,i){var o=de(),a=Pu(o,e,n,r);return a!==fa&&Ba(pe(),Ze(),o,t,a,o[11],i,!1),Gc}function Wc(t,e,n,r,i,o,a){var s=de(),u=Ou(s,e,n,r,i,o);return u!==fa&&Ba(pe(),Ze(),s,t,u,s[11],a,!1),Wc}function Xc(t,e,n,r,i,o,a,s,u){var c=de(),l=Tu(c,e,n,r,i,o,a,s);return l!==fa&&Ba(pe(),Ze(),c,t,l,c[11],u,!1),Xc}function Kc(t,e,n,r,i,o,a,s,u,c,l){var h=de(),f=Au(h,e,n,r,i,o,a,s,u,c);return f!==fa&&Ba(pe(),Ze(),h,t,f,h[11],l,!1),Kc}function Yc(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=de(),p=Iu(d,e,n,r,i,o,a,s,u,c,l,h);return p!==fa&&Ba(pe(),Ze(),d,t,p,d[11],f,!1),Yc}function Jc(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p){var v=de(),m=Du(v,e,n,r,i,o,a,s,u,c,l,h,f,d);return m!==fa&&Ba(pe(),Ze(),v,t,m,v[11],p,!1),Jc}function $c(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m){var y=de(),g=Mu(y,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v);return g!==fa&&Ba(pe(),Ze(),y,t,g,y[11],m,!1),$c}function Qc(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,y,g){var _=de(),b=Lu(_,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,y);return b!==fa&&Ba(pe(),Ze(),_,t,b,_[11],g,!1),Qc}function tl(t,e,n){var r=de(),i=Eu(r,e);return i!==fa&&Ba(pe(),Ze(),r,t,i,r[11],n,!1),tl}function el(t,e,n,r,i){for(var o=t[n+1],a=null===e,s=r?ma(o):ga(o),u=!1;0!==s&&(!1===u||a);){var c=t[s+1];nl(t[s],e)&&(u=!0,t[s+1]=r?ba(c):ya(c)),s=r?ma(c):ga(c)}u&&(t[n+1]=r?ya(o):ba(o))}function nl(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&sr(t,e)>=0}var rl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function il(t){return t.substring(rl.key,rl.keyEnd)}function ol(t){return t.substring(rl.value,rl.valueEnd)}function al(t,e){var n=rl.textEnd;return n===e?-1:(e=rl.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,rl.key=e,n),cl(t,e,n))}function sl(t,e){var n=rl.textEnd,r=rl.key=cl(t,e,n);return n===r?-1:(r=rl.keyEnd=function(t,e,n){for(var r;e<n&&(45===(r=t.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(t,r,n),r=ll(t,r,n),r=rl.value=cl(t,r,n),r=rl.valueEnd=function(t,e,n){for(var r=-1,i=-1,o=-1,a=e,s=a;a<n;){var u=t.charCodeAt(a++);if(59===u)return s;34===u||39===u?s=a=hl(t,u,a,n):e===a-4&&85===o&&82===i&&76===r&&40===u?s=a=hl(t,41,a,n):u>32&&(s=a),o=i,i=r,r=-33&u}return s}(t,r,n),ll(t,r,n))}function ul(t){rl.key=0,rl.keyEnd=0,rl.value=0,rl.valueEnd=0,rl.textEnd=t.length}function cl(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ll(t,e,n,r){return(e=cl(t,e,n))<n&&e++,e}function hl(t,e,n,r){for(var i=-1,o=n;o<r;){var a=t.charCodeAt(o++);if(a==e&&92!==i)return o;i=92==a&&92===i?0:a}throw new Error}function fl(t,e,n){return gl(t,e,n,!1),fl}function dl(t,e){return gl(t,e,null,!0),dl}function pl(t){_l(Cl,vl,t,!1)}function vl(t,e){for(var n=function(t){return ul(t),sl(t,cl(t,0,rl.textEnd))}(e);n>=0;n=sl(e,n))Cl(t,il(e),ol(e))}function ml(t){_l(or,yl,t,!0)}function yl(t,e){for(var n=function(t){return ul(t),al(t,cl(t,0,rl.textEnd))}(e);n>=0;n=al(e,n))or(t,il(e),!0)}function gl(t,e,n,r){var i=de(),o=pe(),a=Oe(2);o.firstUpdatePass&&wl(o,t,a,r),e!==fa&&wu(i,a,e)&&Sl(o,o.data[qe()],i,i[11],t,i[a+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=x(ni(t)))),t}(e,n),r,a)}function _l(t,e,n,r){var i=pe(),o=Oe(2);i.firstUpdatePass&&wl(i,null,o,r);var a=de();if(n!==fa&&wu(a,o,n)){var s=i.data[qe()];if(Ol(s,r)&&!bl(i,o)){var u=r?s.classesWithoutHost:s.stylesWithoutHost;null!==u&&(n=k(u,n||"")),Sc(i,s,a,n,r)}else!function(t,e,n,r,i,o,a,s){i===fa&&(i=ot);for(var u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;null!==l||null!==h;){var f=u<i.length?i[u+1]:void 0,d=c<o.length?o[c+1]:void 0,p=void 0,v=null;l===h?(u+=2,c+=2,f!==d&&(v=h,p=d)):null===h||null!==l&&l<h?(u+=2,v=l):(c+=2,v=h,p=d),null!==v&&Sl(t,e,n,r,v,p,a,s),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,s,a,a[11],a[o+1],a[o+1]=function(t,e,n){if(null==n||""===n)return ot;var r=[],i=ni(n);if(Array.isArray(i))for(var o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(var a in i)i.hasOwnProperty(a)&&t(r,a,i[a]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function bl(t,e){return e>=t.expandoStartIndex}function wl(t,e,n,r){var i=t.data;if(null===i[n+1]){var o=i[qe()],a=bl(t,n);Ol(o,r)&&null===e&&!a&&(e=!1),e=function(t,e,n,r){var i=Ie(t),o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=kl(n=xl(null,t,e,n,r),e.attrs,r),o=null);else{var a=e.directiveStylingLast;if(-1===a||t[a]!==i)if(n=xl(i,t,e,n,r),null===o){var s=function(t,e,n){var r=n?e.classBindings:e.styleBindings;if(0!==ga(r))return t[ma(r)]}(t,e,r);void 0!==s&&Array.isArray(s)&&function(t,e,n,r){t[ma(n?e.classBindings:e.styleBindings)]=r}(t,e,r,s=kl(s=xl(null,t,e,s[1],r),e.attrs,r))}else o=function(t,e,n){for(var r,i=e.directiveEnd,o=1+e.directiveStylingLast;o<i;o++)r=kl(r,t[o].hostAttrs,n);return kl(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){var a=o?e.classBindings:e.styleBindings,s=ma(a),u=ga(a);t[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||sr(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var f=ma(t[s+1]);t[r+1]=va(f,s),0!==f&&(t[f+1]=_a(t[f+1],r)),t[s+1]=131071&t[s+1]|r<<17}else t[r+1]=va(s,0),0!==s&&(t[s+1]=_a(t[s+1],r)),s=r;else t[r+1]=va(u,0),0===s?s=r:t[u+1]=_a(t[u+1],r),u=r;l&&(t[r+1]=ya(t[r+1])),el(t,c,r,!0),el(t,c,r,!1),function(t,e,n,r,i){var o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&sr(o,e)>=0&&(n[r+1]=ba(n[r+1]))}(e,c,t,r,o),a=va(s,u),o?e.classBindings=a:e.styleBindings=a}(i,o,e,n,a,r)}}function xl(t,e,n,r,i){var o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<a&&(r=kl(r,(o=e[s]).hostAttrs,i),o!==t);)s++;return null!==t&&(n.directiveStylingLast=s),r}function kl(t,e,n){var r=n?1:2,i=-1;if(null!==e)for(var o=0;o<e.length;o++){var a=e[o];"number"==typeof a?i=a:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),or(t,a,!!n||e[++o]))}return void 0===t?null:t}function Cl(t,e,n){or(t,e,ni(n))}function Sl(t,e,n,r,i,o,a,s){if(3&e.type){var u=t.data,c=u[s+1];Pl(1==(1&c)?El(u,e,n,i,ga(c),a):void 0)||(Pl(o)||2==(2&c)&&(o=El(u,null,n,i,s,a)),function(t,e,n,r,i){var o=Xt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{var a=-1===r.indexOf("-")?void 0:go.DashCase;if(null==i)o?t.removeStyle(n,r,a):n.style.removeProperty(r);else{var s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),a|=go.Important),o?t.setStyle(n,r,i,a):n.style.setProperty(r,i,s?"important":"")}}}(r,a,Jt(qe(),n),i,o))}}function El(t,e,n,r,i,o){for(var a,s=null===e;i>0;){var u=t[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[i+1];f===fa&&(f=h?ot:void 0);var d=h?ar(f,r):l===r?f:void 0;if(c&&!Pl(d)&&(d=ar(u,r)),Pl(d)&&(a=d,s))return a;var p=t[i+1];i=s?ma(p):ga(p)}if(null!==e){var v=o?e.residualClasses:e.residualStyles;null!=v&&(a=ar(v,r))}return a}function Pl(t){return void 0!==t}function Ol(t,e){return 0!=(t.flags&(e?16:32))}function Tl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=de(),r=pe(),i=t+20,o=r.firstCreatePass?Ca(r,i,1,e,null):r.data[i],a=n[i]=Eo(n[11],e);Zo(r,n,a,o),_e(o,!1)}function Al(t){return Il("",t,""),Al}function Il(t,e,n){var r=de(),i=Pu(r,t,e,n);return i!==fa&&ps(r,qe(),i),Il}function Dl(t,e,n,r,i){var o=de(),a=Ou(o,t,e,n,r,i);return a!==fa&&ps(o,qe(),a),Dl}function Ml(t,e,n,r,i,o,a){var s=de(),u=Tu(s,t,e,n,r,i,o,a);return u!==fa&&ps(s,qe(),u),Ml}function Ll(t,e,n,r,i,o,a,s,u){var c=de(),l=Au(c,t,e,n,r,i,o,a,s,u);return l!==fa&&ps(c,qe(),l),Ll}function jl(t,e,n,r,i,o,a,s,u,c,l){var h=de(),f=Iu(h,t,e,n,r,i,o,a,s,u,c,l);return f!==fa&&ps(h,qe(),f),jl}function Rl(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=de(),p=Du(d,t,e,n,r,i,o,a,s,u,c,l,h,f);return p!==fa&&ps(d,qe(),p),Rl}function Fl(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p){var v=de(),m=Mu(v,t,e,n,r,i,o,a,s,u,c,l,h,f,d,p);return m!==fa&&ps(v,qe(),m),Fl}function Nl(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m){var y=de(),g=Lu(y,t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m);return g!==fa&&ps(y,qe(),g),Nl}function Bl(t){var e=de(),n=Eu(e,t);return n!==fa&&ps(e,qe(),n),Bl}function zl(t,e,n){_l(or,yl,Pu(de(),t,e,n),!0)}function Vl(t,e,n,r,i){_l(or,yl,Ou(de(),t,e,n,r,i),!0)}function Ul(t,e,n,r,i,o,a){_l(or,yl,Tu(de(),t,e,n,r,i,o,a),!0)}function ql(t,e,n,r,i,o,a,s,u){_l(or,yl,Au(de(),t,e,n,r,i,o,a,s,u),!0)}function Hl(t,e,n,r,i,o,a,s,u,c,l){_l(or,yl,Iu(de(),t,e,n,r,i,o,a,s,u,c,l),!0)}function Zl(t,e,n,r,i,o,a,s,u,c,l,h,f){_l(or,yl,Du(de(),t,e,n,r,i,o,a,s,u,c,l,h,f),!0)}function Gl(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p){_l(or,yl,Mu(de(),t,e,n,r,i,o,a,s,u,c,l,h,f,d,p),!0)}function Wl(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m){_l(or,yl,Lu(de(),t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m),!0)}function Xl(t){_l(or,yl,Eu(de(),t),!0)}function Kl(t,e,n){pl(Pu(de(),t,e,n))}function Yl(t,e,n,r,i){pl(Ou(de(),t,e,n,r,i))}function Jl(t,e,n,r,i,o,a){pl(Tu(de(),t,e,n,r,i,o,a))}function $l(t,e,n,r,i,o,a,s,u){pl(Au(de(),t,e,n,r,i,o,a,s,u))}function Ql(t,e,n,r,i,o,a,s,u,c,l){pl(Iu(de(),t,e,n,r,i,o,a,s,u,c,l))}function th(t,e,n,r,i,o,a,s,u,c,l,h,f){pl(Du(de(),t,e,n,r,i,o,a,s,u,c,l,h,f))}function eh(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p){pl(Mu(de(),t,e,n,r,i,o,a,s,u,c,l,h,f,d,p))}function nh(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m){pl(Lu(de(),t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m))}function rh(t){pl(Eu(de(),t))}function ih(t,e,n,r,i){return gl(t,Pu(de(),e,n,r),i,!1),ih}function oh(t,e,n,r,i,o,a){return gl(t,Ou(de(),e,n,r,i,o),a,!1),oh}function ah(t,e,n,r,i,o,a,s,u){return gl(t,Tu(de(),e,n,r,i,o,a,s),u,!1),ah}function sh(t,e,n,r,i,o,a,s,u,c,l){return gl(t,Au(de(),e,n,r,i,o,a,s,u,c),l,!1),sh}function uh(t,e,n,r,i,o,a,s,u,c,l,h,f){return gl(t,Iu(de(),e,n,r,i,o,a,s,u,c,l,h),f,!1),uh}function ch(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p){return gl(t,Du(de(),e,n,r,i,o,a,s,u,c,l,h,f,d),p,!1),ch}function lh(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m){return gl(t,Mu(de(),e,n,r,i,o,a,s,u,c,l,h,f,d,p,v),m,!1),lh}function hh(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,y,g){return gl(t,Lu(de(),e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,y),g,!1),hh}function fh(t,e,n){return gl(t,Eu(de(),e),n,!1),fh}function dh(t,e,n){var r=de();return wu(r,Pe(),e)&&Ba(pe(),Ze(),r,t,e,r[11],n,!0),dh}function ph(t,e,n){var r=de();if(wu(r,Pe(),e)){var i=pe(),o=Ze();Ba(i,o,r,t,e,hs(Ie(i.data),o,r),n,!0)}return ph}var vh=void 0,mh=["en",[["a","p"],["AM","PM"],vh],[["AM","PM"],vh,vh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vh,"{1} 'at' {0}",vh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],yh={};function gh(t,e,n){"string"!=typeof e&&(n=e,e=t[Ch.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),yh[e]=t,n&&(yh[e][Ch.ExtraData]=n)}function _h(t){var e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t),n=xh(e);if(n)return n;var r=e.split("-")[0];if(n=xh(r))return n;if("en"===r)return mh;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}function bh(t){return _h(t)[Ch.CurrencyCode]||null}function wh(t){return _h(t)[Ch.PluralCase]}function xh(t){return t in yh||(yh[t]=rt.ng&&rt.ng.common&&rt.ng.common.locales&&rt.ng.common.locales[t]),yh[t]}function kh(){yh={}}var Ch=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({}),Sh=["zero","one","two","few","many"],Eh="en-US",Ph="USD",Oh={marker:"element"},Th={marker:"ICU"},Ah=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}({}),Ih=Eh;function Dh(t){var e;null==(e=t)&&D("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(Ih=t.toLowerCase().replace(/_/g,"-"))}function Mh(t,e,n){var r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Vo(t,0,n):Yt(n[i])}function Lh(t,e,n,r,i){var o=e.insertBeforeIndex;if(Array.isArray(o)){var a=r,s=null;if(3&e.type||(s=a,a=i),null!==a&&0==(2&e.flags))for(var u=1;u<o.length;u++)Ro(t,a,n[o[u]],s,!1)}}function jh(t,e){if(t.push(e),t.length>1)for(var n=t.length-2;n>=0;n--){var r=t[n];Rh(r)||Fh(r,e)&&null===(i=void 0,i=r.insertBeforeIndex,Array.isArray(i)?i[0]:i)&&Nh(r,e.index)}var i}function Rh(t){return!(64&t.type)}function Fh(t,e){return Rh(e)||t.index>e.index}function Nh(t,e){var n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(Ho(Mh,Lh),t.insertBeforeIndex=e)}function Bh(t,e){var n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function zh(t,e,n){var r=Sa(t,n,64,null,null);return jh(e,r),r}function Vh(t,e){var n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}var Uh=0,qh=0;function Hh(t,e,n,r){for(var i,o=n[11],a=null,s=0;s<e.length;s++){var u=e[s];if("string"==typeof u){var c=e[++s];null===n[c]&&(n[c]=Eo(o,u))}else if("number"==typeof u)switch(1&u){case 0:var l=u>>>17,h=void 0,f=void 0;if(null===a&&(a=l,i=Bo(o,r)),l===a?(h=r,f=i):(h=null,f=Yt(n[l])),null!==f){var d=(131070&u)>>>1;Ro(o,f,n[d],h,!1);var p=Bh(t,d);if(null!==p&&"object"==typeof p){var v=Vh(p,n);null!==v&&Hh(t,p.create[v],n,n[p.anchorIdx])}}break;case 1:var m=e[++s],y=e[++s];Ka(o,Jt(u>>>1,n),null,null,m,y,null);break;default:throw new Error('Unable to determine the type of mutate operation for "'.concat(u,'"'))}else switch(u){case Th:var g=e[++s],_=e[++s];null===n[_]&&ao(n[_]=Oo(o,g),n);break;case Oh:var b=e[++s],w=e[++s];null===n[w]&&ao(n[w]=To(o,b,null),n)}}}function Zh(t,e,n,r,i){for(var o=0;o<n.length;o++){var a=n[o],s=n[++o];if(a&i)for(var u="",c=o+1;c<=o+s;c++){var l=n[c];if("string"==typeof l)u+=l;else if("number"==typeof l)if(l<0)u+=T(e[r-l]);else{var h=l>>>2;switch(3&l){case 1:var f=n[++c],d=n[++c],p=t.data[h];"string"==typeof p?Ka(e[11],e[h],null,p,f,u,d):Ba(t,p,e,f,u,e[11],d,!1);break;case 0:var v=e[h];null!==v&&Po(e[11],v,u);break;case 2:Wh(t,Bh(t,h),e,u);break;case 3:Gh(t,Bh(t,h),r,e)}}}else{var m=n[o+1];if(m>0&&3==(3&m)){var y=Bh(t,m>>>2);e[y.currentCaseLViewIndex]<0&&Gh(t,y,r,e)}}o+=s}}function Gh(t,e,n,r){var i=r[e.currentCaseLViewIndex];if(null!==i){var o=Uh;i<0&&(i=r[e.currentCaseLViewIndex]=~i,o=-1),Zh(t,r,e.update[i],n,o)}}function Wh(t,e,n,r){var i=function(t,e){var n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:var r=function(t,e){var n=wh(e)(parseInt(t,10)),r=Sh[n];return void 0!==r?r:"other"}(e,Ih);-1===(n=t.cases.indexOf(r))&&"other"!==r&&(n=t.cases.indexOf("other"));break;case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(Vh(e,n)!==i&&(Xh(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){var o=n[e.anchorIdx];o&&Hh(t,e.create[i],n,o)}}function Xh(t,e,n){var r=Vh(e,n);if(null!==r)for(var i=e.remove[r],o=0;o<i.length;o++){var a=i[o];if(a>0){var s=Jt(a,n);null!==s&&Ko(n[11],s)}else Xh(t,Bh(t,~a),n)}}var Kh=/\ufffd(\d+):?\d*\ufffd/gi,Yh=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,Jh=/\ufffd(\d+)\ufffd/,$h=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Qh=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,tf=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,ef=/\uE500/g;function nf(t,e,n,r,i,o,a){var s=Ea(t,r,1,null),u=s<<Ah.SHIFT,c=ge();e===c&&(c=null),null===c&&(u|=Ah.APPEND_EAGERLY),a&&(u|=Ah.COMMENT,void 0===yo&&(yo=function(){var t,e,n=[],r=-1;function i(t,n){r=0;var i=Vh(t,n);e=null!==i?t.remove[i]:at}function o(){if(r<e.length){var a=e[r++];return a>0?t[a]:(n.push(r,e),i(t[1].data[~a],t),o())}return 0===n.length?null:(e=n.pop(),r=n.pop(),o())}return function(e,r){for(t=r;n.length;)n.pop();return i(e.value,r),o}}())),i.push(u,null===o?"":o);var l=Sa(t,s,a?32:1,null===o?"":o,null);jh(n,l);var h=l.index;return _e(l,!1),null!==c&&e!==c&&function(t,e){var n,r=t.insertBeforeIndex;null===r?(Ho(Mh,Lh),r=t.insertBeforeIndex=[null,e]):(1!=(n=Array.isArray(r))&&D("Expecting array here",n,!0,"=="),r.push(e))}(c,h),l}function rf(t,e,n,r,i,o,a){var s=a.match(Kh),u=nf(t,e,n,o,r,s?null:a,!1);s&&of(i,a,u.index,null,0,null)}function of(t,e,n,r,i,o){var a=t.length,s=a+1;t.push(null,null);for(var u=a+2,c=e.split(Kh),l=0,h=0;h<c.length;h++){var f=c[h];if(1&h){var d=i+parseInt(f,10);t.push(-1-d),l|=sf(d)}else""!==f&&t.push(f)}return t.push(n<<2|(r?1:0)),r&&t.push(r,o),t[a]=l,t[s]=t.length-u,l}function af(t){for(var e=0,n=0;n<t.length;n++){var r=t[n];"number"==typeof r&&r<0&&e++}return e}function sf(t){return 1<<Math.min(t,31)}function uf(t){for(var e,n,r="",i=0,o=!1;null!==(e=Qh.exec(t));)o?e[0]==="\ufffd/*".concat(n,"\ufffd")&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i)}function cf(t,e,n,r,i,o){var a=0,s={type:i.type,currentCaseLViewIndex:Ea(t,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(sf(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,o),function(t,e,n){var r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,o,s);for(var u=i.values,c=0;c<u.length;c++){for(var l=u[c],h=[],f=0;f<l.length;f++){var d=l[f];if("string"!=typeof d){var p=h.push(d)-1;l[f]="\x3c!--\ufffd".concat(p,"\ufffd--\x3e")}}a=ff(t,s,e,n,r,i.cases[c],l.join(""),h)|a}a&&function(t,e,n){t.push(e,1,n<<2|3)}(n,a,o)}function lf(t){for(var e=[],n=[],r=1,i=0,o=hf(t=t.replace($h,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""})),a=0;a<o.length;){var s=o[a++].trim();1===r&&(s=s.replace(/\s*(?:=)?(\w+)\s*/,"$1")),s.length&&e.push(s);var u=hf(o[a++]);e.length>n.length&&n.push(u)}return{type:r,mainBinding:i,cases:e,values:n}}function hf(t){if(!t)return[];var e,n=0,r=[],i=[],o=/[{}]/g;for(o.lastIndex=0;e=o.exec(t);){var a=e.index;if("}"==e[0]){if(r.pop(),0==r.length){var s=t.substring(n,a);$h.test(s)?i.push(lf(s)):i.push(s),n=a+1}}else{if(0==r.length){var u=t.substring(n,a);i.push(u),n=a+1}r.push("{")}}var c=t.substring(n);return i.push(c),i}function ff(t,e,n,r,i,o,a,s){var u=[],c=[],l=[];e.cases.push(o),e.create.push(u),e.remove.push(c),e.update.push(l);var h=li(Wt()).getInertBodyElement(a),f=Li(h)||h;return f?df(t,e,n,r,u,c,l,f,i,s,0):0}function df(t,e,n,r,i,o,a,s,u,c,l){for(var h=0,f=s.firstChild;f;){var d=Ea(t,n,1,null);switch(f.nodeType){case Node.ELEMENT_NODE:var p=f,v=p.tagName.toLowerCase();if(Ci.hasOwnProperty(v)){mf(i,Oh,v,u,d),t.data[d]=v;for(var m=p.attributes,y=0;y<m.length;y++){var g=m.item(y),_=g.name.toLowerCase();g.value.match(Kh)?Pi.hasOwnProperty(_)&&of(a,g.value,d,g.name,0,Si[_]?vi:Ei[_]?mi:null):yf(i,d,g)}h=df(t,e,n,r,i,o,a,f,d,c,l+1)|h,pf(o,d,l)}break;case Node.TEXT_NODE:var b=f.textContent||"",w=b.match(Kh);mf(i,null,w?"":b,u,d),pf(o,d,l),w&&(h=of(a,b,d,null,0,null)|h);break;case Node.COMMENT_NODE:var x=Jh.exec(f.textContent||"");if(x){var k=c[parseInt(x[1],10)];mf(i,Th,"",u,d),cf(t,n,r,u,k,d),vf(o,d,l)}}f=f.nextSibling}return h}function pf(t,e,n){0===n&&t.push(e)}function vf(t,e,n){0===n&&(t.push(~e),t.push(e))}function mf(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function yf(t,e,n){t.push(e<<1|1,n.name,n.value)}var gf=/\[(\ufffd.+?\ufffd?)\]/,_f=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,bf=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,wf=/{([A-Z0-9_]+)}/g,xf=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,kf=/\/\*/,Cf=/\d+\:(\d+)/;function Sf(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t;if(gf.test(t)){var i={},o=[0];r=r.replace(_f,function(t,n,r){var a=n||r,s=i[a]||[];if(s.length||(a.split("|").forEach(function(t){var e=t.match(Cf),n=e?parseInt(e[1],10):0,r=kf.test(t);s.push([n,r,t])}),i[a]=s),!s.length)throw new Error("i18n postprocess: unmatched placeholder - ".concat(a));for(var u=o[o.length-1],c=0,l=0;l<s.length;l++)if(s[l][0]===u){c=l;break}var h=e(s[c],3),f=h[0],d=h[1],p=h[2];return d?o.pop():u!==f&&o.push(f),s.splice(c,1),p})}return Object.keys(n).length?r=(r=(r=r.replace(bf,function(t,e,r,i,o,a){return n.hasOwnProperty(r)?"".concat(e).concat(n[r]).concat(a):t})).replace(wf,function(t,e){return n.hasOwnProperty(e)?n[e]:t})).replace(xf,function(t,e){if(n.hasOwnProperty(e)){var r=n[e];if(!r.length)throw new Error("i18n postprocess: unmatched ICU - ".concat(t," with key: ").concat(e));return r.shift()}return t}):r}function Ef(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=pe(),i=de(),o=20+t,a=ae(r.consts,e),s=ge();r.firstCreatePass&&function(t,e,n,r,i,o){for(var a,s=ge(),u=[],c=[],l=[[]],h=(a=i=function(t,e){if(function(t){return-1===t}(e))return uf(t);var n=t.indexOf(":".concat(e,"\ufffd"))+2+e.toString().length,r=t.search(new RegExp("\ufffd\\/\\*\\d+:".concat(e,"\ufffd")));return uf(t.substring(n,r))}(i,o),a.replace(ef," ")).split(tf),f=0;f<h.length;f++){var d=h[f];if(0==(1&f))for(var p=hf(d),v=0;v<p.length;v++){var m=p[v];if(0==(1&v)){var y=m;""!==y&&rf(t,s,l[0],u,c,n,y)}else{var g=m;if("object"!=typeof g)throw new Error('Unable to parse ICU expression in "'.concat(i,'" message.'));cf(t,n,c,e,g,nf(t,s,l[0],n,u,"",!0).index)}}else{var _=47===d.charCodeAt(0),b=(d.charCodeAt(_?1:0),20+Number.parseInt(d.substring(_?2:1)));if(_)l.shift(),_e(ge(),!1);else{var w=zh(t,l[0],b);l.unshift([]),_e(w,!0)}}}t.data[r]={create:u,update:c}}(r,null===s?0:s.index,i,o,a,n);var u=r.data[o],c=jo(r,s===i[6]?null:s,i);!function(t,e,n,r){for(var i=t[11],o=0;o<e.length;o++){var a=e[o++],s=e[o],u=(a&Ah.COMMENT)===Ah.COMMENT,c=(a&Ah.APPEND_EAGERLY)===Ah.APPEND_EAGERLY,l=a>>>Ah.SHIFT,h=t[l];null===h&&(h=t[l]=u?i.createComment(s):Eo(i,s)),c&&null!==n&&Ro(i,n,h,r,!1)}}(i,u.create,c,s&&8&s.type?i[s.index]:null),Te(!0)}function Pf(){Te(!1)}function Of(t,e,n){Ef(t,e,n),Pf()}function Tf(t,e){var n=pe();!function(t,e,n){var r=me().index,i=[];if(t.firstCreatePass&&null===t.data[e]){for(var o=0;o<n.length;o+=2){var a=n[o],s=n[o+1];if(""!==s){if(Yh.test(s))throw new Error('ICU expressions are not supported in attributes. Message: "'.concat(s,'".'));of(i,s,r,a,af(i),null)}}t.data[e]=i}}(n,t+20,ae(n.consts,e))}function Af(t){return wu(de(),Pe(),t)&&(Uh|=1<<Math.min(qh,31)),qh++,Af}function If(t){!function(t,e,n){if(qh>0){var r=t.data[n];Zh(t,e,Array.isArray(r)?r:r.update,Se()-qh-1,Uh)}Uh=0,qh=0}(pe(),de(),t+20)}function Df(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Sf(t,e)}function Mf(t,e,n,r,i){if(t=E(t),Array.isArray(t))for(var o=0;o<t.length;o++)Mf(t[o],e,n,r,i);else{var a=pe(),s=de(),u=Ms(t)?t:E(t.provide),c=As(t),l=me(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(Ms(t)||!t.multi){var p=new en(c,i,xc),v=Rf(u,e,i?h:h+d,f);-1===v?(gn(pn(l,s),a,u),Lf(a,t,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(p),s.push(p)):(n[v]=p,s[v]=p)}else{var m=Rf(u,e,h+d,f),y=Rf(u,e,h,h+d),g=m>=0&&n[m],_=y>=0&&n[y];if(i&&!_||!i&&!g){gn(pn(l,s),a,u);var b=function(t,e,n,r,i){var o=new en(t,n,xc);return o.multi=[],o.index=e,o.componentProviders=0,jf(o,i,r&&!n),o}(i?Nf:Ff,n.length,i,r,c);!i&&_&&(n[y].providerFactory=b),Lf(a,t,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(b),s.push(b)}else Lf(a,t,m>-1?m:y,jf(n[i?y:m],c,!i&&r));!i&&r&&_&&n[y].componentProviders++}}}function Lf(t,e,n,r){var i=Ms(e);if(i||e.useClass){var o=(e.useClass||e).prototype.ngOnDestroy;if(o){var a=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){var s=a.indexOf(n);-1===s?a.push(n,[r,o]):a[s+1].push(r,o)}else a.push(n,o)}}}function jf(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Rf(t,e,n,r){for(var i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ff(t,e,n,r){return Bf(this.multi,[])}function Nf(t,e,n,r){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,s=Pn(n,n[1],this.providerFactory.index,r);Bf(o,i=s.slice(0,a));for(var u=a;u<s.length;u++)i.push(s[u])}else Bf(o,i=[]);return i}function Bf(t,e){for(var n=0;n<t.length;n++)e.push((0,t[n])());return e}function zf(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(t,e,n){var r=pe();if(r.firstCreatePass){var i=Lt(t);Mf(n,r.data,r.blueprint,i,!0),Mf(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}}var Vf=_(function t(){y(this,t)}),Uf=_(function t(){y(this,t)});function qf(t){var e=Error("No component factory found for ".concat(x(t),". Did you add it to @NgModule.entryComponents?"));return e[Hf]=t,e}var Hf="ngComponent",Zf=function(){function t(){y(this,t)}return _(t,[{key:"resolveComponentFactory",value:function(t){throw qf(t)}}]),t}(),Gf=function(){var t=_(function t(){y(this,t)});return t.NULL=new Zf,t}(),Wf=function(){function t(e,n,r){y(this,t),this._parent=n,this._ngModule=r,this._factories=new Map;for(var i=0;i<e.length;i++){var o=e[i];this._factories.set(o.componentType,o)}}return _(t,[{key:"resolveComponentFactory",value:function(t){var e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw qf(t);return new Xf(e,this._ngModule)}}]),t}(),Xf=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this)).factory=t,i.ngModule=r,i.selector=t.selector,i.componentType=t.componentType,i.ngContentSelectors=t.ngContentSelectors,i.inputs=t.inputs,i.outputs=t.outputs,i}return _(n,[{key:"create",value:function(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}]),n}(Uf);function Kf(){}function Yf(){return Jf(me(),de())}function Jf(t,e){return new td($t(t,e))}var $f=Yf,Qf=$f,td=function(){var t=_(function t(e){y(this,t),this.nativeElement=e});return t.__NG_ELEMENT_ID__=Qf,t}();function ed(t){return t instanceof td?t.nativeElement:t}var nd=_(function t(){y(this,t)}),rd=function(){var t=_(function t(){y(this,t)});return t.__NG_ELEMENT_ID__=function(){return od()},t}(),id=ad,od=id;function ad(){var t=de(),e=ee(me().index,t);return function(t){return t[11]}(Tt(e)?e:t)}var sd=function(){var t=_(function t(){y(this,t)});return t.\u0275prov=M({token:t,providedIn:"root",factory:function(){return null}}),t}(),ud=_(function t(e){y(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}),cd=new ud("11.2.14"),ld=function(){function t(){y(this,t)}return _(t,[{key:"supports",value:function(t){return yu(t)}},{key:"create",value:function(t){return new fd(t)}}]),t}(),hd=function(t,e){return e},fd=function(){function t(e){y(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||hd}return _(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<md(n,r,i)?e:n,a=md(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&t(o,a,s)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!yu(t))throw new Error("Error trying to diff '".concat(x(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)r=t[s],i=this._trackByFn(s,r),null!==o&&Object.is(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[pu()]();!(r=i.next()).done;)e(r.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&Object.is(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Object.is(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new dd(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new vd),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vd),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}]),t}(),dd=_(function t(e,n){y(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}),pd=function(){function t(){y(this,t),this._head=null,this._tail=null}return _(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),vd=function(){function t(){y(this,t),this.map=new Map}return _(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new pd,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),t}();function md(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var yd=function(){function t(){y(this,t)}return _(t,[{key:"supports",value:function(t){return t instanceof Map||gu(t)}},{key:"create",value:function(){return new gd}}]),t}(),gd=function(){function t(){y(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _(t,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||gu(t)))throw new Error("Error trying to diff '".concat(x(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new _d(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})}}]),t}(),_d=_(function t(e){y(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null});function bd(){return new wd([new ld])}var wd=function(){var t=function(){function t(e){y(this,t),this.factories=e}return _(t,[{key:"find",value:function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){return t.create(e,n||bd())},deps:[[t,new Ar,new Or]]}}}]),t}();return t.\u0275prov=M({token:t,providedIn:"root",factory:bd}),t}();function xd(){return new kd([new yd])}var kd=function(){var t=function(){function t(e){y(this,t),this.factories=e}return _(t,[{key:"find",value:function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){return t.create(e,n||xd())},deps:[[t,new Ar,new Or]]}}}]),t}();return t.\u0275prov=M({token:t,providedIn:"root",factory:xd}),t}();function Cd(t,e,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var a=e[n.index];if(null!==a&&r.push(Yt(a)),At(a))for(var s=10;s<a.length;s++){var u=a[s],c=u[1].firstChild;null!==c&&Cd(u[1],u,c,r)}var l=n.type;if(8&l)Cd(t,e,n.child,r);else if(32&l)for(var h=_o(n,e),f=void 0;f=h();)r.push(f);else if(16&l){var d=Wo(e,n);if(Array.isArray(d))r.push.apply(r,o(d));else{var p=bo(e[16]);Cd(p[1],p,d,r,!0)}}n=i?n.projectionNext:n.next}return r}var Sd=function(){function t(e,n){y(this,t),this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return _(t,[{key:"rootNodes",get:function(){var t=this._lView,e=t[1];return Cd(e,t,e.firstChild,[])}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var t=this._lView[3];if(At(t)){var e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Io(t,n),rr(e,n))}this._attachedToViewContainer=!1}Do(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){Fa(this._lView[1],this._lView,null,t)}},{key:"markForCheck",value:function(){rs(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){os(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(t,e,n){ke(!0);try{os(t,e,n)}finally{ke(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var t;this._appRef=null,Jo(this._lView[1],t=this._lView,t[11],2,null,null)}},{key:"attachToAppRef",value:function(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}]),t}(),Ed=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this,t))._view=t,r}return _(n,[{key:"detectChanges",value:function(){as(this._view)}},{key:"checkNoChanges",value:function(){!function(t){ke(!0);try{as(t)}finally{ke(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Sd),Pd=Ad,Od=Pd,Td=function(){var t=_(function t(){y(this,t)});return t.__NG_ELEMENT_ID__=Od,t.__ChangeDetectorRef__=!0,t}();function Ad(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,e,n){if(!n&&Dt(t)){var r=ee(t.index,e);return new Sd(r,r)}return 47&t.type?new Sd(e[16],e):null}(me(),de(),t)}var Id=[new yd],Dd=new wd([new ld]),Md=new kd(Id),Ld=Nd,jd=Ld,Rd=function(){var t=_(function t(){y(this,t)});return t.__NG_ELEMENT_ID__=jd,t}(),Fd=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this))._declarationLView=t,o._declarationTContainer=r,o.elementRef=i,o}return _(n,[{key:"createEmbeddedView",value:function(t){var e=this._declarationTContainer.tViews,n=ka(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Pa(e,n,t),new Sd(n)}}]),n}(Rd);function Nd(){return Bd(me(),de())}function Bd(t,e){return 4&t.type?new Fd(e,t,Jf(t,e)):null}var zd=_(function t(){y(this,t)}),Vd=_(function t(){y(this,t)}),Ud=Zd,qd=Ud,Hd=function(){var t=_(function t(){y(this,t)});return t.__NG_ELEMENT_ID__=qd,t}();function Zd(){return Kd(me(),de())}var Gd=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this))._lContainer=t,o._hostTNode=r,o._hostLView=i,o}return _(n,[{key:"element",get:function(){return Jf(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new An(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var t=yn(this._hostTNode,this._hostLView);if(un(t)){var e=ln(t,this._hostLView),n=cn(t);return new An(e[1].data[n+8],e)}return new An(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(t){var e=Wd(this._lContainer);return null!==e&&e[t]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){var a=o.get(zd,null);a&&(i=a)}var s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}},{key:"insert",value:function(t,e){var r=t._lView,i=r[1];if(At(r[3])){var o=this.indexOf(t);if(-1!==o)this.detach(o);else{var a=r[3],s=new n(a,a[6],a[3]);s.detach(s.indexOf(t))}}var u=this._adjustIndex(e),c=this._lContainer;!function(t,e,n,r){var i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],nr(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;var a=e[17];null!==a&&n!==a&&function(t,e){var n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(a,e);var s=e[19];null!==s&&s.insertView(t),e[2]|=128}(i,r,c,u);var l=Xo(u,c),h=r[11],f=Bo(h,c[7]);return null!==f&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Jo(t,r,n,1,i,o)}(i,c[6],h,r,f,l),t.attachToViewContainerRef(),nr(Xd(c),u,t),t}},{key:"move",value:function(t,e){return this.insert(t,e)}},{key:"indexOf",value:function(t){var e=Wd(this._lContainer);return null!==e?e.indexOf(t):-1}},{key:"remove",value:function(t){var e=this._adjustIndex(t,-1),n=Io(this._lContainer,e);n&&(rr(Xd(this._lContainer),e),Do(n[1],n))}},{key:"detach",value:function(t){var e=this._adjustIndex(t,-1),n=Io(this._lContainer,e);return n&&null!=rr(Xd(this._lContainer),e)?new Sd(n):null}},{key:"_adjustIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==t?this.length+e:t}}]),n}(Hd);function Wd(t){return t[8]}function Xd(t){return t[8]||(t[8]=[])}function Kd(t,e){var n,r=e[t.index];if(At(r))n=r;else{var i;if(8&t.type)i=Yt(r);else{var o=e[11];i=o.createComment("");var a=$t(t,e);Ro(o,Bo(o,a),i,function(t,e){return Xt(t)?t.nextSibling(e):e.nextSibling}(o,a),!1)}e[t.index]=n=$a(r,e,i,t),ns(e,n)}return new Gd(n,t,e)}function Yd(t,e,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '".concat(e,"'. Current value: '").concat(n,"'.");return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){var n=new Error(t);return Jd(n,e),n}(i,t)}function Jd(t,e){t.ngDebugContext=e,t.ngErrorLogger=e.logError.bind(e)}function $d(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: ".concat(t))}function Qd(t,e,n){var r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function tp(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function ep(t,e){return t.nodes[e]}function np(t,e){return t.nodes[e]}function rp(t,e){return t.nodes[e]}function ip(t,e){return t.nodes[e]}function op(t,e){return t.nodes[e]}var ap=_(function t(){y(this,t)}),sp={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},up=function(){},cp=new Map;function lp(t){var e=cp.get(t);return e||(e=x(t)+"_"+cp.size,cp.set(t,e)),e}function hp(t,e,n,r){if(mu.isWrapped(r)){r=mu.unwrap(r);var i=t.def.nodes[e].bindingIndex+n,o=mu.unwrap(t.oldValues[i]);t.oldValues[i]=new mu(o)}return r}function fp(t){return{id:"$$undefined",styles:t.styles,encapsulation:t.encapsulation,data:t.data}}var dp=0;function pp(t,e,n,r){return!(!(2&t.state)&&Object.is(t.oldValues[e.bindingIndex+n],r))}function vp(t,e,n,r){return!!pp(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function mp(t,e,n,r){var i=t.oldValues[e.bindingIndex+n];if(1&t.state||!vu(i,r)){var o=e.bindings[n].name;throw Yd(sp.createDebugContext(t,e.nodeIndex),"".concat(o,": ").concat(i),"".concat(o,": ").concat(r),0!=(1&t.state))}}function yp(t){for(var e=t;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function gp(t,e){for(var n=t;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function _p(t,e,n,r){try{return yp(33554432&t.def.nodes[e].flags?np(t,e).componentView:t),sp.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function bp(t){return t.parent?np(t.parent,t.parentNodeDef.nodeIndex):null}function wp(t){return t.parent?t.parentNodeDef.parent:null}function xp(t,e){switch(201347067&e.flags){case 1:return np(t,e.nodeIndex).renderElement;case 2:return ep(t,e.nodeIndex).renderText}}function kp(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function Cp(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function Sp(t){return 1<<t%32}function Ep(t){var n={},r=0,i={};return t&&t.forEach(function(t){var o=e(t,2),a=o[0],s=o[1];"number"==typeof a?(n[a]=s,r|=Sp(a)):i[a]=s}),{matchedQueries:n,references:i,matchedQueryIds:r}}function Pp(t,n){return t.map(function(t){var r,i,o;return Array.isArray(t)?(o=(r=e(t,2))[0],i=r[1]):(o=0,i=t),i&&("function"==typeof i||"object"==typeof i)&&n&&Object.defineProperty(i,"__source",{value:n,configurable:!0}),{flags:o,token:i,tokenKey:lp(i)}})}function Op(t,e,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&(r.element.componentRendererType.encapsulation===$.ShadowDom||1===r.element.componentRendererType.encapsulation)?np(t,n.renderParent.nodeIndex).renderElement:void 0:e}var Tp=new WeakMap;function Ap(t){var e=Tp.get(t);return e||((e=t(function(){return up})).factory=t,Tp.set(t,e)),e}function Ip(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(xp(t,t.def.lastRenderRootNode))),Dp(t,e,0,t.def.nodes.length-1,n,r,i)}function Dp(t,e,n,r,i,o,a){for(var s=n;s<=r;s++){var u=t.def.nodes[s];11&u.flags&&Lp(t,u,e,i,o,a),s+=u.childCount}}function Mp(t,e,n,r,i,o){for(var a=t;a&&!kp(a);)a=a.parent;for(var s=a.parent,u=wp(a),c=u.nodeIndex+u.childCount,l=u.nodeIndex+1;l<=c;l++){var h=s.def.nodes[l];h.ngContentIndex===e&&Lp(s,h,n,r,i,o),l+=h.childCount}if(!s.parent){var f=t.root.projectableNodes[e];if(f)for(var d=0;d<f.length;d++)jp(t,f[d],n,r,i,o)}}function Lp(t,e,n,r,i,o){if(8&e.flags)Mp(t,e.ngContent.index,n,r,i,o);else{var a=xp(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&jp(t,a,n,r,i,o),32&e.bindingFlags&&jp(np(t,e.nodeIndex).componentView,a,n,r,i,o)):jp(t,a,n,r,i,o),16777216&e.flags)for(var s=np(t,e.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)Ip(s[u],n,r,i,o);1&e.flags&&!e.element.name&&Dp(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function jp(t,e,n,r,i,o){var a=t.renderer;switch(n){case 1:a.appendChild(r,e);break;case 2:a.insertBefore(r,e,i);break;case 3:a.removeChild(r,e);break;case 0:o.push(e)}}var Rp=/^:([^:]+):(.+)$/;function Fp(t){if(":"===t[0]){var e=t.match(Rp);return[e[1],e[2]]}return["",t]}function Np(t){for(var e=0,n=0;n<t.length;n++)e|=t[n].flags;return e}function Bp(t,e){for(var n="",r=0;r<2*t;r+=2)n=n+e[r]+Vp(e[r+1]);return n+e[2*t]}function zp(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,m,y,g,_){switch(t){case 1:return e+Vp(n)+r;case 2:return e+Vp(n)+r+Vp(i)+o;case 3:return e+Vp(n)+r+Vp(i)+o+Vp(a)+s;case 4:return e+Vp(n)+r+Vp(i)+o+Vp(a)+s+Vp(u)+c;case 5:return e+Vp(n)+r+Vp(i)+o+Vp(a)+s+Vp(u)+c+Vp(l)+h;case 6:return e+Vp(n)+r+Vp(i)+o+Vp(a)+s+Vp(u)+c+Vp(l)+h+Vp(f)+d;case 7:return e+Vp(n)+r+Vp(i)+o+Vp(a)+s+Vp(u)+c+Vp(l)+h+Vp(f)+d+Vp(p)+v;case 8:return e+Vp(n)+r+Vp(i)+o+Vp(a)+s+Vp(u)+c+Vp(l)+h+Vp(f)+d+Vp(p)+v+Vp(m)+y;case 9:return e+Vp(n)+r+Vp(i)+o+Vp(a)+s+Vp(u)+c+Vp(l)+h+Vp(f)+d+Vp(p)+v+Vp(m)+y+Vp(g)+_;default:throw new Error("Does not support more than 9 expressions")}}function Vp(t){return null!=t?t.toString():""}var Up=[],qp={},Hp={},Zp=lp(Rs),Gp=lp(_s),Wp=lp(zd);function Xp(t,e,n,r){return n=E(n),{index:-1,deps:Pp(r,x(e)),flags:t,token:e,value:n}}function Kp(t){for(var e={},n=[],r=null,i=0;i<t.length;i++){var o=t[i];o.token===ws&&(r=o.value),1073741824&o.flags&&n.push(o.token),o.index=i,e[lp(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,scope:r}}function Yp(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rs.THROW_IF_NOT_FOUND,o=_r(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(i=null),1&e.flags)return t._parent.get(e.token,i);var a=e.tokenKey;switch(a){case Zp:case Gp:case Wp:return t}var s,u=t._def.providersByKey[a];if(u){var c=t._providers[u.index];return void 0===c&&(c=t._providers[u.index]=Jp(t,u)),c===Hp?void 0:c}if((s=R(e.token))&&(n=t,null!=(r=s.providedIn)&&("any"===r||r===n._def.scope||function(t,e){return t._def.modules.indexOf(e)>-1}(n,r)))){var l=t._providers.length;return t._def.providers[l]=t._def.providersByKey[e.tokenKey]={flags:5120,value:s.factory,deps:[],index:l,token:e.token},t._providers[l]=Hp,t._providers[l]=Jp(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?i:t._parent.get(e.token,i)}finally{_r(o)}}function Jp(t,e){var n;switch(201347067&e.flags){case 512:n=function(t,e,n){var i=n.length;switch(i){case 0:return new e;case 1:return new e(Yp(t,n[0]));case 2:return new e(Yp(t,n[0]),Yp(t,n[1]));case 3:return new e(Yp(t,n[0]),Yp(t,n[1]),Yp(t,n[2]));default:for(var o=[],a=0;a<i;a++)o[a]=Yp(t,n[a]);return r(e,o)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){var r=n.length;switch(r){case 0:return e();case 1:return e(Yp(t,n[0]));case 2:return e(Yp(t,n[0]),Yp(t,n[1]));case 3:return e(Yp(t,n[0]),Yp(t,n[1]),Yp(t,n[2]));default:for(var i=[],o=0;o<r;o++)i[o]=Yp(t,n[o]);return e.apply(void 0,i)}}(t,e.value,e.deps);break;case 2048:n=Yp(t,e.deps[0]);break;case 256:n=e.value}return n===Hp||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Hp:n}function $p(t,e){var n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;var r=n[e];return r.viewContainerParent=null,rr(n,e),sp.dirtyParentQueries(r),tv(r),r}function Qp(t,e,n){var r=e?xp(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);Ip(n,2,i,o,void 0)}function tv(t){Ip(t,3,null,null,void 0)}var ev={};function nv(t,e,n,r,i,o){return new iv(t,e,n,r,i,o)}function rv(t){return t.viewDefFactory}var iv=function(t){l(n,t);var e=f(n);function n(t,r,i,o,a,s){var u;return y(this,n),(u=e.call(this)).selector=t,u.componentType=r,u._inputs=o,u._outputs=a,u.ngContentSelectors=s,u.viewDefFactory=i,u}return _(n,[{key:"inputs",get:function(){var t=[],e=this._inputs;for(var n in e)t.push({propName:n,templateName:e[n]});return t}},{key:"outputs",get:function(){var t=[];for(var e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}},{key:"create",value:function(t,e,n,r){if(!r)throw new Error("ngModule should be provided");var i=Ap(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=sp.createRootView(t,e||[],n,i,r,ev),s=rp(a,o).instance;return n&&a.renderer.setAttribute(np(a,0).renderElement,"ng-version",cd.full),new ov(a,new cv(a),s)}}]),n}(Uf),ov=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this))._view=t,o._viewRef=r,o._component=i,o._elDef=o._view.def.nodes[0],o.hostView=r,o.changeDetectorRef=r,o.instance=i,o}return _(n,[{key:"location",get:function(){return new td(np(this._view,this._elDef.nodeIndex).renderElement)}},{key:"injector",get:function(){return new dv(this._view,this._elDef)}},{key:"componentType",get:function(){return this._component.constructor}},{key:"destroy",value:function(){this._viewRef.destroy()}},{key:"onDestroy",value:function(t){this._viewRef.onDestroy(t)}}]),n}(Vf);function av(t,e,n){return new sv(t,e,n)}var sv=function(){function t(e,n,r){y(this,t),this._view=e,this._elDef=n,this._data=r,this._embeddedViews=[]}return _(t,[{key:"element",get:function(){return new td(this._data.renderElement)}},{key:"injector",get:function(){return new dv(this._view,this._elDef)}},{key:"parentInjector",get:function(){for(var t=this._view,e=this._elDef.parent;!e&&t;)e=wp(t),t=t.parent;return t?new dv(t,e):new dv(this._view,null)}},{key:"clear",value:function(){for(var t=this._embeddedViews.length-1;t>=0;t--){var e=$p(this._data,t);sp.destroyView(e)}}},{key:"get",value:function(t){var e=this._embeddedViews[t];if(e){var n=new cv(e);return n.attachToViewContainerRef(this),n}return null}},{key:"length",get:function(){return this._embeddedViews.length}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;i||t instanceof Xf||(i=o.get(zd));var a=t.create(o,r,void 0,i);return this.insert(a.hostView,e),a}},{key:"insert",value:function(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a,s=t;return n=this._view,r=this._data,i=e,o=s._view,a=r.viewContainer._embeddedViews,null==i&&(i=a.length),o.viewContainerParent=n,nr(a,i,o),function(t,e){var n=bp(e);if(n&&n!==t&&!(16&e.state)){e.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,e){if(!(4&e.flags)){t.nodeFlags|=4,e.flags|=4;for(var n=e.parent;n;)n.childFlags|=4,n=n.parent}}(e.parent.def,e.parentNodeDef)}}(r,o),sp.dirtyParentQueries(o),Qp(r,i>0?a[i-1]:null,o),s.attachToViewContainerRef(this),t}},{key:"move",value:function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(t._view);return n=this._data,r=s,i=e,o=n.viewContainer._embeddedViews,a=o[r],rr(o,r),null==i&&(i=o.length),nr(o,i,a),sp.dirtyParentQueries(a),tv(a),Qp(n,i>0?o[i-1]:null,a),t}},{key:"indexOf",value:function(t){return this._embeddedViews.indexOf(t._view)}},{key:"remove",value:function(t){var e=$p(this._data,t);e&&sp.destroyView(e)}},{key:"detach",value:function(t){var e=$p(this._data,t);return e?new cv(e):null}}]),t}();function uv(t){return new cv(t)}var cv=function(){function t(e){y(this,t),this._view=e,this._viewContainerRef=null,this._appRef=null}return _(t,[{key:"rootNodes",get:function(){return Ip(this._view,0,void 0,void 0,t=[]),t;var t}},{key:"context",get:function(){return this._view.context}},{key:"destroyed",get:function(){return 0!=(128&this._view.state)}},{key:"markForCheck",value:function(){yp(this._view)}},{key:"detach",value:function(){this._view.state&=-5}},{key:"detectChanges",value:function(){var t=this._view.root.rendererFactory;t.begin&&t.begin();try{sp.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}},{key:"checkNoChanges",value:function(){sp.checkNoChangesView(this._view)}},{key:"reattach",value:function(){this._view.state|=4}},{key:"onDestroy",value:function(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}},{key:"destroy",value:function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),sp.destroyView(this._view)}},{key:"detachFromAppRef",value:function(){this._appRef=null,tv(this._view),sp.dirtyParentQueries(this._view)}},{key:"attachToAppRef",value:function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}},{key:"attachToViewContainerRef",value:function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}]),t}();function lv(t,e){return new hv(t,e)}var hv=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this))._parentView=t,i._def=r,i}return _(n,[{key:"createEmbeddedView",value:function(t){return new cv(sp.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}},{key:"elementRef",get:function(){return new td(np(this._parentView,this._def.nodeIndex).renderElement)}}]),n}(Rd);function fv(t,e){return new dv(t,e)}var dv=function(){function t(e,n){y(this,t),this.view=e,this.elDef=n}return _(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rs.THROW_IF_NOT_FOUND;return sp.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:lp(t)},e)}}]),t}();function pv(t,e){var n=t.def.nodes[e];if(1&n.flags){var r=np(t,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return ep(t,n.nodeIndex).renderText;if(20240&n.flags)return rp(t,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index ".concat(e))}function vv(t,e,n,r){return new mv(t,e,n,r)}var mv=function(){function t(e,n,r,i){y(this,t),this._moduleType=e,this._parent=n,this._bootstrapComponents=r,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){for(var e=t._def,n=t._providers=ir(e.providers.length),r=0;r<e.providers.length;r++){var i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Jp(t,i))}}(this)}return _(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rs.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.Default,r=0;return n&H.SkipSelf?r|=1:n&H.Self&&(r|=4),Yp(this,{token:t,tokenKey:lp(t),flags:r},e)}},{key:"instance",get:function(){return this.get(this._moduleType)}},{key:"componentFactoryResolver",get:function(){return this.get(Gf)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The ng module ".concat(x(this.instance.constructor)," has already been destroyed."));this._destroyed=!0,function(t,e){for(var n=t._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=t._providers[i];if(o&&o!==Hp){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach(function(t){return t()})}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}}]),t}(),yv=lp(rd),gv=lp(td),_v=lp(Hd),bv=lp(Rd),wv=lp(Td),xv=lp(Rs),kv=lp(_s);function Cv(t,n,r,i,o,a,s,u){var c=[];if(s)for(var l in s){var h=e(s[l],2),f=h[0],d=h[1];c[f]={flags:8,name:l,nonMinifiedName:d,ns:null,securityContext:null,suffix:null}}var p=[];if(u)for(var v in u)p.push({type:1,propName:v,target:null,eventName:u[v]});return Pv(t,n|=16384,r,i,o,o,a,c,p)}function Sv(t,e,n){return Pv(-1,t|=16,null,0,e,e,n)}function Ev(t,e,n,r,i){return Pv(-1,t,e,0,n,r,i)}function Pv(t,e,n,r,i,o,a,s,u){var c=Ep(n),l=c.matchedQueries,h=c.references,f=c.matchedQueryIds;u||(u=[]),s||(s=[]),o=E(o);var d=Pp(a,x(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:l,matchedQueryIds:f,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:Np(s),outputs:u,element:null,provider:{token:i,value:o,deps:d},text:null,query:null,ngContent:null}}function Ov(t,e){return Dv(t,e)}function Tv(t,e){for(var n=t;n.parent&&!kp(n);)n=n.parent;return Mv(n.parent,wp(n),!0,e.provider.value,e.provider.deps)}function Av(t,e){var n=Mv(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(var r=0;r<e.outputs.length;r++){var i=e.outputs[r],o=n[i.propName];if(!jc(o))throw new Error("@Output ".concat(i.propName," not initialized in '").concat(n.constructor.name,"'."));var a=o.subscribe(Iv(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=a.unsubscribe.bind(a)}return n}function Iv(t,e,n){return function(r){return _p(t,e,n,r)}}function Dv(t,e){var n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return Mv(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){var o=i.length;switch(o){case 0:return r();case 1:return r(jv(t,e,n,i[0]));case 2:return r(jv(t,e,n,i[0]),jv(t,e,n,i[1]));case 3:return r(jv(t,e,n,i[0]),jv(t,e,n,i[1]),jv(t,e,n,i[2]));default:for(var a=[],s=0;s<o;s++)a.push(jv(t,e,n,i[s]));return r.apply(void 0,a)}}(t,e.parent,n,r.value,r.deps);case 2048:return jv(t,e.parent,n,r.deps[0]);case 256:return r.value}}function Mv(t,e,n,i,o){var a=o.length;switch(a){case 0:return new i;case 1:return new i(jv(t,e,n,o[0]));case 2:return new i(jv(t,e,n,o[0]),jv(t,e,n,o[1]));case 3:return new i(jv(t,e,n,o[0]),jv(t,e,n,o[1]),jv(t,e,n,o[2]));default:for(var s=[],u=0;u<a;u++)s.push(jv(t,e,n,o[u]));return r(i,s)}}var Lv={};function jv(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rs.THROW_IF_NOT_FOUND;if(8&r.flags)return r.token;var o=t;2&r.flags&&(i=null);var a=r.tokenKey;a===wv&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);for(var s=t;s;){if(e)switch(a){case yv:return Rv(s,e,n).renderer;case gv:return new td(np(s,e.nodeIndex).renderElement);case _v:return np(s,e.nodeIndex).viewContainer;case bv:if(e.element.template)return np(s,e.nodeIndex).template;break;case wv:return uv(Rv(s,e,n));case xv:case kv:return fv(s,e);default:var u=(n?e.element.allProviders:e.element.publicProviders)[a];if(u){var c=rp(s,u.nodeIndex);return c||(c={instance:Dv(s,u)},s.nodes[u.nodeIndex]=c),c.instance}}n=kp(s),e=wp(s),s=s.parent,4&r.flags&&(s=null)}var l=o.root.injector.get(r.token,Lv);return l!==Lv||i===Lv?l:o.root.ngModule.injector.get(r.token,i)}function Rv(t,e,n){var r;if(n)r=np(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!kp(r);)r=r.parent;return r}function Fv(t,e,n,r,i,o){if(32768&n.flags){var a=np(t,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=mu.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Rt(s,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function Nv(t,e){if(t.def.nodeFlags&e)for(var n=t.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&e&&zv(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&e&&(r=Bv(t,a,e,r)),a=a.parent}}function Bv(t,e,n,r){for(var i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){var o=t.def.nodes[i];o.flags&n&&zv(t,i,o.flags&n,r++),i+=o.childCount}return r}function zv(t,e,n,r){var i=rp(t,e);if(i){var o=i.instance;o&&(sp.setCurrentNode(t,e),1048576&n&&tp(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&tp(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}var Vv=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this)).ngModule=t,r}return _(n,[{key:"resolveComponentFactory",value:function(t){var e=St(t);return new Hv(e,this.ngModule)}}]),n}(Gf);function Uv(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var qv=new qn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return ho}}),Hv=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this)).componentDef=t,i.ngModule=r,i.componentType=t.type,i.selector=t.selectors.map(ha).join(","),i.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],i.isBoundToModule=!!r,i}return _(n,[{key:"inputs",get:function(){return Uv(this.componentDef.inputs)}},{key:"outputs",get:function(){return Uv(this.componentDef.outputs)}},{key:"create",value:function(t,e,n,r){var i,o,a=(r=r||this.ngModule)?function(t,e){return{get:function(n,r,i){var o=t.get(n,Lv,i);return o!==Lv||r===Lv?o:e.get(n,r,i)}}}(t,r.injector):t,s=a.get(nd,Kt),u=a.get(sd,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?Ra(c,n,this.componentDef.encapsulation):To(s.createRenderer(null,this.componentDef),l,function(t){var e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d=eu(),p=ja(0,null,null,1,0,null,null,null,null,null),v=ka(null,p,d,f,null,null,s,c,u,a);Re(v);try{var m=Qs(h,this.componentDef,v,s,c);if(h)if(n)nn(c,h,["ng-version",cd.full]);else{var y=function(t){for(var e=[],n=[],r=1,i=2;r<t.length;){var o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!aa(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]),g=y.attrs,_=y.classes;g&&nn(c,h,g),_&&_.length>0&&ta(c,h,_.join(" "))}if(o=Qt(p,20),void 0!==e)for(var b=o.projection=[],w=0;w<this.ngContentSelectors.length;w++){var x=e[w];b.push(null!=x?Array.from(x):null)}i=tu(m,this.componentDef,v,d,[nu]),Pa(p,v,null)}finally{Ve()}return new Zv(this.componentType,i,Jf(o,v),v,o)}}]),n}(Uf),Zv=function(t){l(n,t);var e=f(n);function n(t,r,i,o,a){var s;return y(this,n),(s=e.call(this)).location=i,s._rootLView=o,s._tNode=a,s.instance=r,s.hostView=s.changeDetectorRef=new Ed(o),s.componentType=t,s}return _(n,[{key:"injector",get:function(){return new An(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(t){this.hostView.onDestroy(t)}}]),n}(Vf);function Gv(t,e,n,r){return X(function(){var i,a=t;null!==e&&(a.hasOwnProperty("decorators")&&void 0!==a.decorators?(i=a.decorators).push.apply(i,o(e)):a.decorators=e),null!==n&&(a.ctorParameters=n),null!==r&&(a.propDecorators=a.hasOwnProperty("propDecorators")&&void 0!==a.propDecorators?Object.assign(Object.assign({},a.propDecorators),r):r)})}var Wv=new Map;function Xv(t,e){var n=Wv.get(t);Kv(t,n&&n.moduleType,e.moduleType),Wv.set(t,e)}function Kv(t,e,n){if(e&&e!==n)throw new Error("Duplicate module registered for ".concat(t," - ").concat(x(e)," vs ").concat(x(e.name)))}function Yv(t){var e=new Set;!function t(n){var r=Ot(n,!0),o=r.id;null!==o&&(Kv(o,Wv.get(o),n),Wv.set(o,n));var a,s=i(mo(r.imports));try{for(s.s();!(a=s.n()).done;){var u=a.value;e.has(u)||(e.add(u),t(u))}}catch(c){s.e(c)}finally{s.f()}}(t)}function Jv(t){return Wv.get(t)||_t[t]}var $v=function(t){l(n,t);var e=f(n);function n(t,r){var i;y(this,n),(i=e.call(this))._parent=r,i._bootstrapComponents=[],i.injector=p(i),i.destroyCbs=[],i.componentFactoryResolver=new Vv(p(i));var o=Ot(t),a=t[ht]||null;return a&&Dh(a),i._bootstrapComponents=mo(o.bootstrap),i._r3Injector=Ps(t,r,[{provide:zd,useValue:p(i)},{provide:Gf,useValue:i.componentFactoryResolver}],x(t)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(t),i}return _(n,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rs.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.Default;return t===Rs||t===zd||t===_s?this:this._r3Injector.get(t,e,n)}},{key:"destroy",value:function(){var t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null}},{key:"onDestroy",value:function(t){this.destroyCbs.push(t)}}]),n}(zd),Qv=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this)).moduleType=t,null!==Ot(t)&&Yv(t),r}return _(n,[{key:"create",value:function(t){return new $v(this.moduleType,t)}}]),n}(Vd);function tm(t,e,n){var r=Ce()+t,i=de();return i[r]===fa?_u(i,r,n?e.call(n):e()):bu(i,r)}function em(t,e,n,r){return hm(de(),Ce(),t,e,n,r)}function nm(t,e,n,r,i){return fm(de(),Ce(),t,e,n,r,i)}function rm(t,e,n,r,i,o){return dm(de(),Ce(),t,e,n,r,i,o)}function im(t,e,n,r,i,o,a){return pm(de(),Ce(),t,e,n,r,i,o,a)}function om(t,e,n,r,i,o,a,s){var u=Ce()+t,c=de(),l=Cu(c,u,n,r,i,o);return wu(c,u+4,a)||l?_u(c,u+5,s?e.call(s,n,r,i,o,a):e(n,r,i,o,a)):bu(c,u+5)}function am(t,e,n,r,i,o,a,s,u){var c=Ce()+t,l=de(),h=Cu(l,c,n,r,i,o);return xu(l,c+4,a,s)||h?_u(l,c+6,u?e.call(u,n,r,i,o,a,s):e(n,r,i,o,a,s)):bu(l,c+6)}function sm(t,e,n,r,i,o,a,s,u,c){var l=Ce()+t,h=de(),f=Cu(h,l,n,r,i,o);return ku(h,l+4,a,s,u)||f?_u(h,l+7,c?e.call(c,n,r,i,o,a,s,u):e(n,r,i,o,a,s,u)):bu(h,l+7)}function um(t,e,n,r,i,o,a,s,u,c,l){var h=Ce()+t,f=de(),d=Cu(f,h,n,r,i,o);return Cu(f,h+4,a,s,u,c)||d?_u(f,h+8,l?e.call(l,n,r,i,o,a,s,u,c):e(n,r,i,o,a,s,u,c)):bu(f,h+8)}function cm(t,e,n,r){return vm(de(),Ce(),t,e,n,r)}function lm(t,e){var n=t[e];return n===fa?void 0:n}function hm(t,e,n,r,i,o){var a=e+n;return wu(t,a,i)?_u(t,a+1,o?r.call(o,i):r(i)):lm(t,a+1)}function fm(t,e,n,r,i,o,a){var s=e+n;return xu(t,s,i,o)?_u(t,s+2,a?r.call(a,i,o):r(i,o)):lm(t,s+2)}function dm(t,e,n,r,i,o,a,s){var u=e+n;return ku(t,u,i,o,a)?_u(t,u+3,s?r.call(s,i,o,a):r(i,o,a)):lm(t,u+3)}function pm(t,e,n,r,i,o,a,s,u){var c=e+n;return Cu(t,c,i,o,a,s)?_u(t,c+4,u?r.call(u,i,o,a,s):r(i,o,a,s)):lm(t,c+4)}function vm(t,e,n,r,i,o){for(var a=e+n,s=!1,u=0;u<i.length;u++)wu(t,a++,i[u])&&(s=!0);return s?_u(t,a,r.apply(o,i)):lm(t,a)}function mm(t,e){var n,r=pe(),i=t+20;r.firstCreatePass?(n=function(t,e){if(e)for(var n=e.length-1;n>=0;n--){var r=e[n];if(t===r.name)return r}throw new O("302","The pipe '".concat(t,"' could not be found!"))}(e,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var o=n.factory||(n.factory=jt(n.type)),a=G(xc);try{var s=fn(!1),u=o();return fn(s),Zu(r,de(),i,u),u}finally{G(a)}}function ym(t,e,n){var r=t+20,i=de(),o=te(i,r);return km(i,xm(i,r)?hm(i,Ce(),e,o.transform,n,o):o.transform(n))}function gm(t,e,n,r){var i=t+20,o=de(),a=te(o,i);return km(o,xm(o,i)?fm(o,Ce(),e,a.transform,n,r,a):a.transform(n,r))}function _m(t,e,n,r,i){var o=t+20,a=de(),s=te(a,o);return km(a,xm(a,o)?dm(a,Ce(),e,s.transform,n,r,i,s):s.transform(n,r,i))}function bm(t,e,n,r,i,o){var a=t+20,s=de(),u=te(s,a);return km(s,xm(s,a)?pm(s,Ce(),e,u.transform,n,r,i,o,u):u.transform(n,r,i,o))}function wm(t,e,n){var r=t+20,i=de(),o=te(i,r);return km(i,xm(i,r)?vm(i,Ce(),e,o.transform,n,o):o.transform.apply(o,n))}function xm(t,e){return t[1].data[e].pure}function km(t,e){return mu.isWrapped(e)&&(e=mu.unwrap(e),t[Se()]=fa),e}function Cm(t){return function(e){setTimeout(t,void 0,e)}}var Sm=function(t){l(n,t);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return y(this,n),(t=e.call(this)).__isAsync=r,t}return _(n,[{key:"emit",value:function(t){u(m(n.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,e,r){var i,o,a,s=t,c=e||function(){return null},l=r;if(t&&"object"==typeof t){var f=t;s=null===(i=f.next)||void 0===i?void 0:i.bind(f),c=null===(o=f.error)||void 0===o?void 0:o.bind(f),l=null===(a=f.complete)||void 0===a?void 0:a.bind(f)}this.__isAsync&&(c=Cm(c),s&&(s=Cm(s)),l&&(l=Cm(l)));var d=u(m(n.prototype),"subscribe",this).call(this,{next:s,error:c,complete:l});return t instanceof h.a&&t.add(d),d}}]),n}(c.a);function Em(){return this._results[pu()]()}var Pm=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];y(this,t),this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=pu(),r=t.prototype;r[n]||(r[n]=Em)}return _(t,[{key:"changes",get:function(){return this._changes||(this._changes=new Sm)}},{key:"get",value:function(t){return this._results[t]}},{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t,e){this.dirty=!1;var n=tr(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}},{key:"notifyOnChanges",value:function(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),Om=function(){function t(e){y(this,t),this.queryList=e,this.matches=null}return _(t,[{key:"clone",value:function(){return new t(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),t}(),Tm=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,t),this.queries=e}return _(t,[{key:"createEmbeddedView",value:function(e){var n=e.queries;if(null!==n){for(var r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var a=n.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new t(i)}return null}},{key:"insertView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"detachView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"dirtyQueriesWithMatches",value:function(t){for(var e=0;e<this.queries.length;e++)null!==qm(t,e).matches&&this.queries[e].setDirty()}}]),t}(),Am=_(function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;y(this,t),this.predicate=e,this.flags=n,this.read=r}),Im=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,t),this.queries=e}return _(t,[{key:"elementStart",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}},{key:"elementEnd",value:function(t){for(var e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}},{key:"embeddedTView",value:function(e){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new t(n):null}},{key:"template",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}},{key:"getByIndex",value:function(t){return this.queries[t]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(t){this.queries.push(t)}}]),t}(),Dm=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;y(this,t),this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return _(t,[{key:"elementStart",value:function(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}},{key:"elementEnd",value:function(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(t,e){this.elementStart(t,e)}},{key:"embeddedTView",value:function(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}},{key:"isApplyingToNode",value:function(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var e=this._declarationNodeIndex,n=t.parent;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(t,e){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(t,e,Mm(e,i)),this.matchTNodeWithReadOption(t,e,En(e,t,i,!1,!1))}else n===Rd?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,En(e,t,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(t,e,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===td||r===Hd||r===Rd&&4&e.type)this.addMatch(e.index,-2);else{var i=En(e,t,r,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,n)}}},{key:"addMatch",value:function(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}]),t}();function Mm(t,e){var n=t.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Lm(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Jf(t,e):4&t.type?Bd(t,e):null}(e,t):-2===n?function(t,e,n){return n===td?Jf(e,t):n===Rd?Bd(e,t):n===Hd?Kd(e,t):void 0}(t,e,r):Pn(t,t[1],n,e)}function jm(t,e,n,r){var i=e[19].queries[r];if(null===i.matches){for(var o=t.data,a=n.matches,s=[],u=0;u<a.length;u+=2){var c=a[u];s.push(c<0?null:Lm(e,o[c],a[u+1],n.metadata.read))}i.matches=s}return i.matches}function Rm(t,e,n,r){var i=t.queries.getByIndex(n),o=i.matches;if(null!==o)for(var a=jm(t,e,i,n),s=0;s<o.length;s+=2){var u=o[s];if(u>0)r.push(a[s/2]);else{for(var c=o[s+1],l=e[-u],h=10;h<l.length;h++){var f=l[h];f[17]===f[3]&&Rm(f[1],f,c,r)}if(null!==l[9])for(var d=l[9],p=0;p<d.length;p++){var v=d[p];Rm(v[1],v,c,r)}}}return r}function Fm(t){var e=de(),n=pe(),r=De();Me(r+1);var i=qm(n,r);if(t.dirty&&ie(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{var o=i.crossesNgTemplate?Rm(n,e,r,[]):jm(n,e,i,r);t.reset(o,ed),t.notifyOnChanges()}return!0}return!1}function Nm(t,e,n){var r=pe();r.firstCreatePass&&(Um(r,new Am(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Vm(r,de(),e)}function Bm(t,e,n,r){var i=pe();if(i.firstCreatePass){var o=me();Um(i,new Am(e,n,r),o.index),function(t,e){var n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Vm(i,de(),n)}function zm(){return t=de(),e=De(),t[19].queries[e].queryList;var t,e}function Vm(t,e,n){var r=new Pm(4==(4&n));Fa(t,e,r,r.destroy),null===e[19]&&(e[19]=new Tm),e[19].queries.push(new Om(r))}function Um(t,e,n){null===t.queries&&(t.queries=new Im),t.queries.track(new Dm(e,n))}function qm(t,e){return t.queries.getByIndex(e)}function Hm(t,e){return Bd(t,e)}function Zm(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H.Default,e=Ad(!0);if(null!=e||t&H.Optional)return e;I("ChangeDetectorRef")}var Gm={"\u0275\u0275attribute":Su,"\u0275\u0275attributeInterpolate1":ju,"\u0275\u0275attributeInterpolate2":Ru,"\u0275\u0275attributeInterpolate3":Fu,"\u0275\u0275attributeInterpolate4":Nu,"\u0275\u0275attributeInterpolate5":Bu,"\u0275\u0275attributeInterpolate6":zu,"\u0275\u0275attributeInterpolate7":Vu,"\u0275\u0275attributeInterpolate8":Uu,"\u0275\u0275attributeInterpolateV":qu,"\u0275\u0275defineComponent":vt,"\u0275\u0275defineDirective":kt,"\u0275\u0275defineInjectable":M,"\u0275\u0275defineInjector":j,"\u0275\u0275defineNgModule":bt,"\u0275\u0275definePipe":Ct,"\u0275\u0275directiveInject":xc,"\u0275\u0275getInheritedFactory":In,"\u0275\u0275inject":wr,"\u0275\u0275injectAttribute":Mn,"\u0275\u0275invalidFactory":kc,"\u0275\u0275invalidFactoryDep":xr,"\u0275\u0275injectPipeChangeDetectorRef":Zm,"\u0275\u0275templateRefExtractor":Hm,"\u0275\u0275NgOnChangesFeature":Ft,"\u0275\u0275ProvidersFeature":zf,"\u0275\u0275CopyDefinitionFeature":fu,"\u0275\u0275InheritDefinitionFeature":ou,"\u0275\u0275nextContext":Vc,"\u0275\u0275namespaceHTML":Xe,"\u0275\u0275namespaceMathML":We,"\u0275\u0275namespaceSVG":Ge,"\u0275\u0275enableBindings":he,"\u0275\u0275disableBindings":fe,"\u0275\u0275elementStart":Ec,"\u0275\u0275elementEnd":Pc,"\u0275\u0275element":Oc,"\u0275\u0275elementContainerStart":Tc,"\u0275\u0275elementContainerEnd":Ac,"\u0275\u0275elementContainer":Ic,"\u0275\u0275pureFunction0":tm,"\u0275\u0275pureFunction1":em,"\u0275\u0275pureFunction2":nm,"\u0275\u0275pureFunction3":rm,"\u0275\u0275pureFunction4":im,"\u0275\u0275pureFunction5":om,"\u0275\u0275pureFunction6":am,"\u0275\u0275pureFunction7":sm,"\u0275\u0275pureFunction8":um,"\u0275\u0275pureFunctionV":cm,"\u0275\u0275getCurrentView":Dc,"\u0275\u0275restoreView":ve,"\u0275\u0275listener":Rc,"\u0275\u0275projection":Hc,"\u0275\u0275syntheticHostProperty":ph,"\u0275\u0275syntheticHostListener":Fc,"\u0275\u0275pipeBind1":ym,"\u0275\u0275pipeBind2":gm,"\u0275\u0275pipeBind3":_m,"\u0275\u0275pipeBind4":bm,"\u0275\u0275pipeBindV":wm,"\u0275\u0275projectionDef":qc,"\u0275\u0275hostProperty":dh,"\u0275\u0275property":Cc,"\u0275\u0275propertyInterpolate":Zc,"\u0275\u0275propertyInterpolate1":Gc,"\u0275\u0275propertyInterpolate2":Wc,"\u0275\u0275propertyInterpolate3":Xc,"\u0275\u0275propertyInterpolate4":Kc,"\u0275\u0275propertyInterpolate5":Yc,"\u0275\u0275propertyInterpolate6":Jc,"\u0275\u0275propertyInterpolate7":$c,"\u0275\u0275propertyInterpolate8":Qc,"\u0275\u0275propertyInterpolateV":tl,"\u0275\u0275pipe":mm,"\u0275\u0275queryRefresh":Fm,"\u0275\u0275viewQuery":Nm,"\u0275\u0275loadQuery":zm,"\u0275\u0275contentQuery":Bm,"\u0275\u0275reference":Gu,"\u0275\u0275classMap":ml,"\u0275\u0275classMapInterpolate1":zl,"\u0275\u0275classMapInterpolate2":Vl,"\u0275\u0275classMapInterpolate3":Ul,"\u0275\u0275classMapInterpolate4":ql,"\u0275\u0275classMapInterpolate5":Hl,"\u0275\u0275classMapInterpolate6":Zl,"\u0275\u0275classMapInterpolate7":Gl,"\u0275\u0275classMapInterpolate8":Wl,"\u0275\u0275classMapInterpolateV":Xl,"\u0275\u0275styleMap":pl,"\u0275\u0275styleMapInterpolate1":Kl,"\u0275\u0275styleMapInterpolate2":Yl,"\u0275\u0275styleMapInterpolate3":Jl,"\u0275\u0275styleMapInterpolate4":$l,"\u0275\u0275styleMapInterpolate5":Ql,"\u0275\u0275styleMapInterpolate6":th,"\u0275\u0275styleMapInterpolate7":eh,"\u0275\u0275styleMapInterpolate8":nh,"\u0275\u0275styleMapInterpolateV":rh,"\u0275\u0275styleProp":fl,"\u0275\u0275stylePropInterpolate1":ih,"\u0275\u0275stylePropInterpolate2":oh,"\u0275\u0275stylePropInterpolate3":ah,"\u0275\u0275stylePropInterpolate4":sh,"\u0275\u0275stylePropInterpolate5":uh,"\u0275\u0275stylePropInterpolate6":ch,"\u0275\u0275stylePropInterpolate7":lh,"\u0275\u0275stylePropInterpolate8":hh,"\u0275\u0275stylePropInterpolateV":fh,"\u0275\u0275classProp":dl,"\u0275\u0275advance":da,"\u0275\u0275template":Hu,"\u0275\u0275text":Tl,"\u0275\u0275textInterpolate":Al,"\u0275\u0275textInterpolate1":Il,"\u0275\u0275textInterpolate2":Dl,"\u0275\u0275textInterpolate3":Ml,"\u0275\u0275textInterpolate4":Ll,"\u0275\u0275textInterpolate5":jl,"\u0275\u0275textInterpolate6":Rl,"\u0275\u0275textInterpolate7":Fl,"\u0275\u0275textInterpolate8":Nl,"\u0275\u0275textInterpolateV":Bl,"\u0275\u0275i18n":Of,"\u0275\u0275i18nAttributes":Tf,"\u0275\u0275i18nExp":Af,"\u0275\u0275i18nStart":Ef,"\u0275\u0275i18nEnd":Pf,"\u0275\u0275i18nApply":If,"\u0275\u0275i18nPostprocess":Df,"\u0275\u0275resolveWindow":fo,"\u0275\u0275resolveDocument":po,"\u0275\u0275resolveBody":vo,"\u0275\u0275setComponentScope":mt,"\u0275\u0275setNgModuleScope":wt,"\u0275\u0275sanitizeHtml":Ri,"\u0275\u0275sanitizeStyle":Fi,"\u0275\u0275sanitizeResourceUrl":Bi,"\u0275\u0275sanitizeScript":zi,"\u0275\u0275sanitizeUrl":Ni,"\u0275\u0275sanitizeUrlOrResourceUrl":Hi,"\u0275\u0275trustConstantHtml":Vi,"\u0275\u0275trustConstantResourceUrl":Ui,forwardRef:S,resolveForwardRef:E},Wm=null;function Xm(){Wm=null}var Km=[],Ym=[],Jm=!1;function $m(){if(!Jm){Jm=!0;try{for(var t=Ym.length-1;t>=0;t--){var e=Ym[t],n=e.moduleType,r=e.ngModule;r.declarations&&r.declarations.every(Qm)&&(Ym.splice(t,1),ry(n,r))}}finally{Jm=!1}}}function Qm(t){return Array.isArray(t)?t.every(Qm):!!E(t)}function ty(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ey(t,e),function(t,e){Ym.push({moduleType:t,ngModule:e})}(t,e)}function ey(t,e){var n=tr(e.declarations||Km),r=null;Object.defineProperty(t,lt,{configurable:!0,get:function(){return null===r&&((r=Jn().compileNgModule(Gm,"ng:///".concat(t.name,"/\u0275mod.js"),{type:t,bootstrap:tr(e.bootstrap||Km).map(E),declarations:n.map(E),imports:tr(e.imports||Km).map(E).map(ay),exports:tr(e.exports||Km).map(E).map(ay),schemas:e.schemas?tr(e.schemas):null,id:e.id||null})).schemas||(r.schemas=[])),r}});var i=null;Object.defineProperty(t,ft,{get:function(){if(null===i){var e=Jn();i=e.compileFactory(Gm,"ng:///".concat(t.name,"/\u0275fac.js"),{name:t.name,type:t,deps:Lr(t),injectFn:"inject",target:e.R3FactoryTarget.NgModule,typeArgumentCount:0})}return i},configurable:!1});var o=null;Object.defineProperty(t,V,{get:function(){if(null===o){var n={name:t.name,type:t,providers:e.providers||Km,imports:[(e.imports||Km).map(E),(e.exports||Km).map(E)]};o=Jn().compileInjector(Gm,"ng:///".concat(t.name,"/\u0275inj.js"),n)}return o},configurable:!1})}new WeakMap,new WeakMap;function ny(){new WeakMap,new WeakMap,Ym.length=0}function ry(t,e){var n=tr(e.declarations||Km),r=oy(t);n.forEach(function(e){e.hasOwnProperty(st)?iy(St(e),r):e.hasOwnProperty(ut)||e.hasOwnProperty(ct)||(e.ngSelectorScope=t)})}function iy(t,e){t.directiveDefs=function(){return Array.from(e.compilation.directives).map(function(t){return t.hasOwnProperty(st)?St(t):Et(t)}).filter(function(t){return!!t})},t.pipeDefs=function(){return Array.from(e.compilation.pipes).map(function(t){return Pt(t)})},t.schemas=e.schemas,t.tView=null}function oy(t){if(!sy(t))throw new Error("".concat(t.name," does not have a module def (\u0275mod property)"));var e=Ot(t);if(null!==e.transitiveCompileScopes)return e.transitiveCompileScopes;var n={schemas:e.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return mo(e.imports).forEach(function(t){var e=t;if(!sy(e))throw new Error("Importing ".concat(e.name," which does not have a \u0275mod property"));var r=oy(e);r.exported.directives.forEach(function(t){return n.compilation.directives.add(t)}),r.exported.pipes.forEach(function(t){return n.compilation.pipes.add(t)})}),mo(e.declarations).forEach(function(t){Pt(t)?n.compilation.pipes.add(t):n.compilation.directives.add(t)}),mo(e.exports).forEach(function(t){var e=t;if(sy(e)){var r=oy(e);r.exported.directives.forEach(function(t){n.compilation.directives.add(t),n.exported.directives.add(t)}),r.exported.pipes.forEach(function(t){n.compilation.pipes.add(t),n.exported.pipes.add(t)})}else Pt(e)?n.exported.pipes.add(e):n.exported.directives.add(e)}),e.transitiveCompileScopes=n,n}function ay(t){return function(t){return void 0!==t.ngModule}(t)?t.ngModule:t}function sy(t){return!!Ot(t)}var uy=0;function cy(t,e){var n=null;!function(t,e){Vr(e)&&(Br.set(t,e),zr.add(t))}(t,e),fy(t,e),Object.defineProperty(t,st,{get:function(){if(null===n){var r=Jn();if(Vr(e)){var i=["Component '".concat(t.name,"' is not resolved:")];throw e.templateUrl&&i.push(" - templateUrl: ".concat(e.templateUrl)),e.styleUrls&&e.styleUrls.length&&i.push(" - styleUrls: ".concat(JSON.stringify(e.styleUrls))),i.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(i.join("\n"))}var o=Wm,a=e.preserveWhitespaces;void 0===a&&(a=null!==o&&void 0!==o.preserveWhitespaces&&o.preserveWhitespaces);var s=e.encapsulation;void 0===s&&(s=null!==o&&void 0!==o.defaultEncapsulation?o.defaultEncapsulation:$.Emulated);var u=e.templateUrl||"ng:///".concat(t.name,"/template.html"),c=Object.assign(Object.assign({},py(t,e)),{typeSourceSpan:r.createParseSourceSpan("Component",t.name,u),template:e.template||"",preserveWhitespaces:a,styles:e.styles||at,animations:e.animations,directives:[],changeDetection:e.changeDetection,pipes:new Map,encapsulation:s,interpolation:e.interpolation,viewProviders:e.viewProviders||null});uy++;try{c.usesInheritance&&vy(t),n=r.compileComponent(Gm,u,c)}finally{uy--}if(0===uy&&$m(),void 0!==t.ngSelectorScope){var l=oy(t.ngSelectorScope);iy(n,l)}}return n},configurable:!1})}function ly(t,e){var n=null;fy(t,e||{}),Object.defineProperty(t,ut,{get:function(){if(null===n){var r=hy(t,e||{});n=Jn().compileDirective(Gm,r.sourceMapUrl,r.metadata)}return n},configurable:!1})}function hy(t,e){var n=t&&t.name,r="ng:///".concat(n,"/\u0275dir.js"),i=Jn(),o=py(t,e);return o.typeSourceSpan=i.createParseSourceSpan("Directive",n,r),o.usesInheritance&&vy(t),{metadata:o,sourceMapUrl:r}}function fy(t,e){var n=null;Object.defineProperty(t,ft,{get:function(){if(null===n){var r=hy(t,e),i=Jn();n=i.compileFactory(Gm,"ng:///".concat(t.name,"/\u0275fac.js"),Object.assign(Object.assign({},r.metadata),{injectFn:"directiveInject",target:i.R3FactoryTarget.Directive}))}return n},configurable:!1})}function dy(t){return Object.getPrototypeOf(t.prototype)===Object.prototype}function py(t,e){var n,r=Mr(),i=r.ownPropMetadata(t);return{name:t.name,type:t,typeArgumentCount:0,selector:void 0!==e.selector?e.selector:null,deps:Lr(t),host:e.host||it,propMetadata:i,inputs:e.inputs||at,outputs:e.outputs||at,queries:my(t,i,yy),lifecycle:{usesOnChanges:r.hasLifecycleHook(t,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!dy(t),exportAs:(n=e.exportAs,void 0===n?null:by(n)),providers:e.providers||null,viewQueries:my(t,i,gy)}}function vy(t){for(var e=Object.prototype,n=Object.getPrototypeOf(t.prototype).constructor;n&&n!==e;)Et(n)||St(n)||!xy(n)||ly(n,null),n=Object.getPrototypeOf(n)}function my(t,e,n){var r=[],i=function(i){if(e.hasOwnProperty(i)){var o=e[i];o.forEach(function(e){if(n(e)){if(!e.selector)throw new Error("Can't construct a query for the property \"".concat(i,'" of "').concat(A(t),"\" since the query selector wasn't defined."));if(o.some(_y))throw new Error("Cannot combine @Input decorators with query decorators");r.push(function(t,e){return{propertyName:t,predicate:(n=e.selector,"string"==typeof n?by(n):E(n)),descendants:e.descendants,first:e.first,read:e.read?e.read:null,static:!!e.static,emitDistinctChangesOnly:!!e.emitDistinctChangesOnly};var n}(i,e))}})}};for(var o in e)i(o);return r}function yy(t){var e=t.ngMetadataName;return"ContentChild"===e||"ContentChildren"===e}function gy(t){var e=t.ngMetadataName;return"ViewChild"===e||"ViewChildren"===e}function _y(t){return"Input"===t.ngMetadataName}function by(t){return t.split(",").map(function(t){return t.trim()})}var wy=["ngOnChanges","ngOnInit","ngOnDestroy","ngDoCheck","ngAfterViewInit","ngAfterViewChecked","ngAfterContentInit","ngAfterContentChecked"];function xy(t){var e=Mr();if(wy.some(function(n){return e.hasLifecycleHook(t,n)}))return!0;var n=e.propMetadata(t);for(var r in n)for(var i=n[r],o=0;o<i.length;o++){var a=i[o],s=a.ngMetadataName;if(_y(a)||yy(a)||gy(a)||"Output"===s||"HostBinding"===s||"HostListener"===s)return!0}return!1}function ky(t,e){var n=null,r=null;Object.defineProperty(t,ft,{get:function(){if(null===r){var n=Cy(t,e),i=Jn();r=i.compileFactory(Gm,"ng:///".concat(n.name,"/\u0275fac.js"),Object.assign(Object.assign({},n),{injectFn:"directiveInject",target:i.R3FactoryTarget.Pipe}))}return r},configurable:!1}),Object.defineProperty(t,ct,{get:function(){if(null===n){var r=Cy(t,e);n=Jn().compilePipe(Gm,"ng:///".concat(r.name,"/\u0275pipe.js"),r)}return n},configurable:!1})}function Cy(t,e){return{type:t,typeArgumentCount:0,name:t.name,deps:Lr(t),pipeName:e.name,pure:void 0===e.pure||e.pure}}var Sy=Fn("Directive",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t},void 0,void 0,function(t,e){return Ry(t,e)}),Ey=Fn("Component",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({changeDetection:K.Default},t)},Sy,void 0,function(t,e){return jy(t,e)}),Py=Fn("Pipe",function(t){return Object.assign({pure:!0},t)},void 0,void 0,function(t,e){return Fy(t,e)}),Oy=zn("Input",function(t){return{bindingPropertyName:t}}),Ty=zn("Output",function(t){return{bindingPropertyName:t}}),Ay=zn("HostBinding",function(t){return{hostPropertyName:t}}),Iy=zn("HostListener",function(t,e){return{eventName:t,args:e}}),Dy=cy,My=ly,Ly=ky,jy=Dy,Ry=My,Fy=Ly,Ny=Fn("NgModule",function(t){return t},void 0,void 0,function(t,e){return zy(t,e)}),By=ty,zy=By,Vy=new qn("Application Initializer"),Uy=function(){var t=function(){function t(e){var n=this;y(this,t),this.appInits=e,this.resolve=Kf,this.reject=Kf,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,e){n.resolve=t,n.reject=e})}return _(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Mc(i)&&e.push(i)}Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(wr(Vy,8))},t.\u0275prov=M({token:t,factory:t.\u0275fac}),t}(),qy=new qn("AppId");function Hy(){return"".concat(Gy()).concat(Gy()).concat(Gy())}var Zy={provide:qy,useFactory:Hy,deps:[]};function Gy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Wy=new qn("Platform Initializer"),Xy=new qn("Platform ID"),Ky=new qn("appBootstrapListener"),Yy=new qn("Application Packages Root URL"),Jy=function(){var t=function(){function t(){y(this,t)}return _(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac}),t}(),$y=new qn("LocaleId"),Qy=new qn("DefaultCurrencyCode"),tg=new qn("Translations"),eg=new qn("TranslationsFormat"),ng=function(t){return t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Ignore=2]="Ignore",t}({}),rg=!0,ig=rg,og=_(function t(e,n){y(this,t),this.ngModuleFactory=e,this.componentFactories=n}),ag=function(t){return new Qv(t)},sg=ag,ug=function(t){return Promise.resolve(ag(t))},cg=ug,lg=function(t){var e=ag(t),n=mo(Ot(t).declarations).reduce(function(t,e){var n=St(e);return n&&t.push(new Hv(n)),t},[]);return new og(e,n)},hg=lg,fg=function(t){return Promise.resolve(lg(t))},dg=fg,pg=function(){var t=function(){function t(){y(this,t),this.compileModuleSync=sg,this.compileModuleAsync=cg,this.compileModuleAndAllComponentsSync=hg,this.compileModuleAndAllComponentsAsync=dg}return _(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac}),t}(),vg=new qn("compilerOptions"),mg=_(function t(){y(this,t)}),yg=Promise.resolve(0);function gg(t){"undefined"==typeof Zone?yg.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var _g=function(){function t(e){var n,r,i=e.enableLongStackTrace,o=void 0!==i&&i,a=e.shouldCoalesceEventChangeDetection,s=void 0!==a&&a,u=e.shouldCoalesceRunChangeDetection,c=void 0!==u&&u;if(y(this,t),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sm(!1),this.onMicrotaskEmpty=new Sm(!1),this.onStable=new Sm(!1),this.onError=new Sm(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!c&&s,this.shouldCoalesceRunChangeDetection=c,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var t=rt.requestAnimationFrame,e=rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);var r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,r=function(){!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(rt,function(){t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){t.lastRequestAnimationFrameId=-1,xg(t),wg(t)},void 0,function(){},function(){})),t.fakeTopEventTask.invoke()}),xg(t))}(n)},(n=this)._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,e,i,o,a,s){try{return kg(n),t.invokeTask(i,o,a,s)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&r(),Cg(n)}},onInvoke:function(t,e,i,o,a,s,u){try{return kg(n),t.invoke(i,o,a,s,u)}finally{n.shouldCoalesceRunChangeDetection&&r(),Cg(n)}},onHasTask:function(t,e,r,i){t.hasTask(r,i),e===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,xg(n),wg(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,e,r,i){return t.handleError(r,i),n.runOutsideAngular(function(){return n.onError.emit(i)}),!1}})}return _(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,bg,Kf,Kf);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}(),bg={};function wg(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function xg(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function kg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Cg(t){t._nesting--,wg(t)}var Sg=function(){function t(){y(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sm,this.onMicrotaskEmpty=new Sm,this.onStable=new Sm,this.onError=new Sm}return _(t,[{key:"run",value:function(t,e,n){return t.apply(e,n)}},{key:"runGuarded",value:function(t,e,n){return t.apply(e,n)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,e,n,r){return t.apply(e,n)}}]),t}(),Eg=function(){var t=function(){function t(e){var n=this;y(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return _(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){_g.assertNotInAngularZone(),gg(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())gg(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}}):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(wr(_g))},t.\u0275prov=M({token:t,factory:t.\u0275fac}),t}(),Pg=function(){var t=function(){function t(){y(this,t),this._applications=new Map,Ag.addToWindow(this)}return _(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ag.findTestabilityInTree(this,t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=M({token:t,factory:t.\u0275fac}),t}();function Og(t){Ag=t}var Tg,Ag=new(function(){function t(){y(this,t)}return _(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),Ig=!0,Dg=!1;function Mg(){return Dg=!0,Ig}function Lg(){if(Dg)throw new Error("Cannot enable prod mode after platform setup.");Ig=!1}var jg=Rg;function Rg(t,e,n){var r=new Qv(n);return Promise.resolve(r)}var Fg=Ng;function Ng(t){return t.isBoundToModule}var Bg=new qn("AllowMultipleToken"),zg=_(function t(e,n){y(this,t),this.name=e,this.token=n});function Vg(t){if(Tg&&!Tg.destroyed&&!Tg.injector.get(Bg,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Tg=t.get(Gg);var e=t.get(Wy,null);return e&&e.forEach(function(t){return t()}),Tg}function Ug(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(e),i=new qn(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Zg();if(!o||o.injector.get(Bg,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0},{provide:ws,useValue:"platform"});Vg(Rs.create({providers:a,name:r}))}return qg(i)}}function qg(t){var e=Zg();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}function Hg(){Tg&&!Tg.destroyed&&Tg.destroy()}function Zg(){return Tg&&!Tg.destroyed?Tg:null}var Gg=function(){var t=function(){function t(e){y(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r,i=this,o=(n=e?e.ngZone:void 0,r={ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1},"noop"===n?new Sg:("zone.js"===n?void 0:n)||new _g({enableLongStackTrace:Mg(),shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)})),a=[{provide:_g,useValue:o}];return o.run(function(){var e=Rs.create({providers:a,parent:i.injector,name:t.moduleType.name}),n=t.create(e),r=n.injector.get(Ki,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o.runOutsideAngular(function(){var t=o.onError.subscribe({next:function(t){r.handleError(t)}});n.onDestroy(function(){Kg(i._modules,n),t.unsubscribe()})}),function(t,e,r){try{var o=((a=n.injector.get(Uy)).runInitializers(),a.donePromise.then(function(){return ig&&Dh(n.injector.get($y,Eh)||Eh),i._moduleDoBootstrap(n),n}));return Mc(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(s){throw e.runOutsideAngular(function(){return t.handleError(s)}),s}var a}(r,o)})}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Wg({},n);return jg(this.injector,r,t).then(function(t){return e.bootstrapModuleFactory(t,r)})}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(Xg);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(x(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();return t.\u0275fac=function(e){return new(e||t)(wr(Rs))},t.\u0275prov=M({token:t,factory:t.\u0275fac}),t}();function Wg(t,e){return Array.isArray(e)?e.reduce(Wg,t):Object.assign(Object.assign({},t),e)}var Xg=function(){var t=function(){function t(e,n,r,i,o){var a=this;y(this,t),this._zone=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var s=new d.a(function(t){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){t.next(a._stable),t.complete()})}),u=new d.a(function(t){var e;a._zone.runOutsideAngular(function(){e=a._zone.onStable.subscribe(function(){_g.assertNotInAngularZone(),gg(function(){a._stable||a._zone.hasPendingMacrotasks||a._zone.hasPendingMicrotasks||(a._stable=!0,t.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){_g.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(v.a)(s,u.pipe(Object(g.a)()))}return _(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Uf?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=Fg(n)?void 0:this._injector.get(zd),o=n.create(Rs.NULL,[],e||n.selector,i),a=o.location.nativeElement,s=o.injector.get(Eg,null),u=s&&o.injector.get(Pg);return s&&u&&u.registerApplication(a,s),o.onDestroy(function(){r.detachView(o.hostView),Kg(r.components,o),u&&u.unregisterApplication(a)}),this._loadComponent(o),o}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var e,n=i(this._views);try{for(n.s();!(e=n.n()).done;){e.value.detectChanges()}}catch(r){n.e(r)}finally{n.f()}}catch(o){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(o)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;Kg(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ky,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(t){return t.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),t}();return t.\u0275fac=function(e){return new(e||t)(wr(_g),wr(Rs),wr(Ki),wr(Gf),wr(Uy))},t.\u0275prov=M({token:t,factory:t.\u0275fac}),t}();function Kg(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Yg=_(function t(){y(this,t)});function Jg(t){var e=Jv(t);if(!e)throw t_(t);return e}function $g(t){var e=Jv(t);if(!e)throw t_(t);return new Qv(e)}var Qg=$g;function t_(t){return new Error("No module with ID ".concat(t," loaded"))}var e_=_(function t(){y(this,t)}),n_={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},r_=function(){var t=function(){function t(e,n){y(this,t),this._compiler=e,this._config=n||n_}return _(t,[{key:"load",value:function(t){return!ig&&this._compiler instanceof pg?this.loadFactory(t):this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(t){var n=this,r=e(t.split("#"),2),i=r[0],o=r[1];return void 0===o&&(o="default"),s("zn8P")(i).then(function(t){return t[o]}).then(function(t){return i_(t,i,o)}).then(function(t){return n._compiler.compileModuleAsync(t)})}},{key:"loadFactory",value:function(t){var n=e(t.split("#"),2),r=n[0],i=n[1],o="NgFactory";return void 0===i&&(i="default",o=""),s("zn8P")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(function(t){return t[i+o]}).then(function(t){return i_(t,r,i)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(wr(pg),wr(e_,8))},t.\u0275prov=M({token:t,factory:t.\u0275fac}),t}();function i_(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var o_=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(Td),a_=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(o_),s_=_(function t(e,n){y(this,t),this.name=e,this.callback=n}),u_=function(){function t(e,n,r){y(this,t),this.listeners=[],this.parent=null,this._debugContext=r,this.nativeNode=e,n&&n instanceof c_&&n.addChild(this)}return _(t,[{key:"injector",get:function(){return this._debugContext.injector}},{key:"componentInstance",get:function(){return this._debugContext.component}},{key:"context",get:function(){return this._debugContext.context}},{key:"references",get:function(){return this._debugContext.references}},{key:"providerTokens",get:function(){return this._debugContext.providerTokens}}]),t}(),c_=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t,r,i)).properties={},o.attributes={},o.classes={},o.styles={},o.childNodes=[],o.nativeElement=t,o}return _(n,[{key:"addChild",value:function(t){t&&(this.childNodes.push(t),t.parent=this)}},{key:"removeChild",value:function(t){var e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}},{key:"insertChildrenAfter",value:function(t,e){var n,r=this,i=this.childNodes.indexOf(t);-1!==i&&((n=this.childNodes).splice.apply(n,[i+1,0].concat(o(e))),e.forEach(function(e){e.parent&&e.parent.removeChild(e),t.parent=r}))}},{key:"insertBefore",value:function(t,e){var n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}},{key:"query",value:function(t){return this.queryAll(t)[0]||null}},{key:"queryAll",value:function(t){var e=[];return h_(this,t,e),e}},{key:"queryAllNodes",value:function(t){var e=[];return f_(this,t,e),e}},{key:"children",get:function(){return this.childNodes.filter(function(t){return t instanceof n})}},{key:"triggerEventHandler",value:function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})}}]),n}(u_);function l_(t){return t.map(function(t){return t.nativeElement})}function h_(t,e,n){t.childNodes.forEach(function(t){t instanceof c_&&(e(t)&&n.push(t),h_(t,e,n))})}function f_(t,e,n){t instanceof c_&&t.childNodes.forEach(function(t){e(t)&&n.push(t),t instanceof c_&&f_(t,e,n)})}var d_=function(){function t(e){y(this,t),this.nativeNode=e}return _(t,[{key:"parent",get:function(){var t=this.nativeNode.parentNode;return t?new p_(t):null}},{key:"injector",get:function(){return Vs(this.nativeNode)}},{key:"componentInstance",get:function(){var t=this.nativeNode;return t&&(Fs(t)||Bs(t))}},{key:"context",get:function(){return Fs(this.nativeNode)||Ns(this.nativeNode)}},{key:"listeners",get:function(){return Zs(this.nativeNode).filter(function(t){return"dom"===t.type})}},{key:"references",get:function(){return t=this.nativeNode,null===(e=qs(t,!1))?{}:(void 0===e.localRefs&&(e.localRefs=function(t,e){var n=t[1].data[e];if(n&&n.localNames){for(var r={},i=n.index+1,o=0;o<n.localNames.length;o+=2)r[n.localNames[o]]=t[i],i++;return r}return null}(e.lView,e.nodeIndex)),e.localRefs||{});var t,e}},{key:"providerTokens",get:function(){return function(t){var e=qs(t,!1);if(null===e)return[];for(var n,r=e.lView[1],i=r.data[e.nodeIndex],o=[],a=i.directiveEnd,s=1048575&i.providerIndexes;s<a;s++){var u=r.data[s];void 0!==(n=u).type&&void 0!==n.template&&void 0!==n.declaredInputs&&(u=u.type),o.push(u)}return o}(this.nativeNode)}}]),t}(),p_=function(t){l(n,t);var e=f(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:"nativeElement",get:function(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null}},{key:"name",get:function(){try{var t=qs(this.nativeNode);return t.lView[1].data[t.nodeIndex].value}catch(e){return this.nativeNode.nodeName}}},{key:"properties",get:function(){var t=qs(this.nativeNode,!1);if(null==t)return{};var e=t.lView,n=e[1].data,r=n[t.nodeIndex],i={};return function(t,e){if(t)for(var n=Object.getPrototypeOf(t),r=Node.prototype;null!==n&&n!==r;){var i=Object.getOwnPropertyDescriptors(n);for(var o in i)if(!o.startsWith("__")&&!o.startsWith("on")){var a=t[o];v_(a)&&(e[o]=a)}n=Object.getPrototypeOf(n)}}(this.nativeElement,i),function(t,e,n,r){var i=e.propertyBindings;if(null!==i)for(var o=0;o<i.length;o++){var a=i[o],s=r[a].split("\ufffd"),u=s[0];if(s.length>1){for(var c=s[1],l=1;l<s.length-1;l++)c+=T(n[a+l-1])+s[l+1];t[u]=c}else t[u]=n[a]}}(i,r,e,n),i}},{key:"attributes",get:function(){var t={},e=this.nativeElement;if(!e)return t;var n=qs(e,!1);if(null==n)return{};var r=n.lView[1].data[n.nodeIndex].attrs,i=[];if(r)for(var o=0;o<r.length;){var a=r[o];if("string"!=typeof a)break;t[a]=r[o+1],i.push(a.toLowerCase()),o+=2}for(var s=e.attributes,u=0;u<s.length;u++){var c=s[u],l=c.name.toLowerCase();-1===i.indexOf(l)&&(t[l]=c.value)}return t}},{key:"styles",get:function(){return this.nativeElement&&this.nativeElement.style?this.nativeElement.style:{}}},{key:"classes",get:function(){var t={},e=this.nativeElement.className;return(e&&"string"!=typeof e?e.baseVal.split(" "):e.split(" ")).forEach(function(e){return t[e]=!0}),t}},{key:"childNodes",get:function(){for(var t=this.nativeNode.childNodes,e=[],n=0;n<t.length;n++)e.push(x_(t[n]));return e}},{key:"children",get:function(){var t=this.nativeElement;if(!t)return[];for(var e=t.children,n=[],r=0;r<e.length;r++)n.push(x_(e[r]));return n}},{key:"query",value:function(t){return this.queryAll(t)[0]||null}},{key:"queryAll",value:function(t){var e=[];return m_(this,t,e,!0),e}},{key:"queryAllNodes",value:function(t){var e=[];return m_(this,t,e,!1),e}},{key:"triggerEventHandler",value:function(t,e){var n=this.nativeNode,r=[];this.listeners.forEach(function(i){if(i.name===t){var o=i.callback;o.call(n,e),r.push(o)}}),"function"==typeof n.eventListeners&&n.eventListeners(t).forEach(function(t){if(-1!==t.toString().indexOf("__ngUnwrap__")){var i=t("__ngUnwrap__");return-1===r.indexOf(i)&&i.call(n,e)}})}}]),n}(d_);function v_(t){return"string"==typeof t||"boolean"==typeof t||"number"==typeof t||null===t}function m_(t,e,n,r){var i=qs(t.nativeNode,!1);null!==i?y_(i.lView[1].data[i.nodeIndex],i.lView,e,n,r,t.nativeNode):b_(t.nativeNode,e,n,r)}function y_(t,e,n,r,o,a){var s=function(t,e){var n=null===t?-1:t.index;return-1!==n?Yt(e[n]):null}(t,e);if(11&t.type){if(__(s,n,r,o,a),Dt(t)){var u=ee(t.index,e);u&&u[1].firstChild&&y_(u[1].firstChild,u,n,r,o,a)}else t.child&&y_(t.child,e,n,r,o,a),s&&b_(s,n,r,o);var c=e[t.index];At(c)&&g_(c,n,r,o,a)}else if(4&t.type){var l=e[t.index];__(l[7],n,r,o,a),g_(l,n,r,o,a)}else if(16&t.type){var h=e[16],f=h[6].projection[t.projection];if(Array.isArray(f)){var d,p=i(f);try{for(p.s();!(d=p.n()).done;){__(d.value,n,r,o,a)}}catch(y){p.e(y)}finally{p.f()}}else if(f){var v=h[3];y_(v[1].data[f.index],v,n,r,o,a)}}else t.child&&y_(t.child,e,n,r,o,a);if(a!==s){var m=4&t.flags?t.projectionNext:t.next;m&&y_(m,e,n,r,o,a)}}function g_(t,e,n,r,i){for(var o=10;o<t.length;o++){var a=t[o],s=a[1].firstChild;s&&y_(s,a,e,n,r,i)}}function __(t,e,n,r,i){if(i!==t){var o=k_(t);if(!o)return;(r&&o instanceof p_&&e(o)&&-1===n.indexOf(o)||!r&&e(o)&&-1===n.indexOf(o))&&n.push(o)}}function b_(t,e,n,r){for(var i=t.childNodes,o=i.length,a=0;a<o;a++){var s=i[a],u=k_(s);u&&((r&&u instanceof p_&&e(u)&&-1===n.indexOf(u)||!r&&e(u)&&-1===n.indexOf(u))&&n.push(u),b_(s,e,n,r))}}var w_=new Map;function x_(t){return t instanceof Node?(t.hasOwnProperty("__ng_debug__")||(t.__ng_debug__=t.nodeType==Node.ELEMENT_NODE?new p_(t):new d_(t)),t.__ng_debug__):null}var k_=x_;function C_(t){return function(t){return w_.get(t)||null}(t)}var S_=function(t){return null};function E_(t){w_.set(t.nativeNode,t)}var P_=d_,O_=p_,T_=Ug(null,"core",[{provide:Xy,useValue:"unknown"},{provide:Gg,deps:[Rs]},{provide:Pg,deps:[]},{provide:Jy,deps:[]}]);function A_(){return Dd}function I_(){return Md}function D_(t){return t=t||ig&&"undefined"!=typeof $localize&&$localize.locale||Eh,ig&&Dh(t),t}var M_=Ph,L_=[{provide:Xg,useClass:Xg,deps:[_g,Rs,Ki,Gf,Uy]},{provide:qv,deps:[_g],useFactory:j_},{provide:Uy,useClass:Uy,deps:[[new Or,Vy]]},{provide:pg,useClass:pg,deps:[]},Zy,{provide:wd,useFactory:A_,deps:[]},{provide:kd,useFactory:I_,deps:[]},{provide:$y,useFactory:D_,deps:[[new Pr($y),new Or,new Ar]]},{provide:Qy,useValue:M_}];function j_(t){var e=[];return t.onStable.subscribe(function(){for(;e.length;)e.pop()()}),function(t){e.push(t)}}var R_=function(){var t=_(function t(e){y(this,t)});return t.\u0275fac=function(e){return new(e||t)(wr(Xg))},t.\u0275mod=bt({type:t}),t.\u0275inj=j({providers:L_}),t}();function F_(t,e,n,r,i,o){t|=1;var a=Ep(e),s=a.matchedQueries,u=a.references;return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:a.matchedQueryIds,references:u,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?Ap(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||up},provider:null,text:null,query:null,ngContent:null}}function N_(t,n,r,i,o,a){var s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],c=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0,h=arguments.length>9?arguments[9]:void 0,f=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0;h||(h=up);var p=Ep(r),v=p.matchedQueries,m=p.references,y=p.matchedQueryIds,g=null,_=null;a&&(g=(s=e(Fp(a),2))[0],_=s[1]),c=c||[];for(var b=[],w=0;w<c.length;w++){var x=e(c[w],3),k=x[0],C=x[1],S=x[2],E=Fp(C),P=e(E,2),O=P[0],T=P[1],A=void 0,I=void 0;switch(15&k){case 4:I=S;break;case 1:case 8:A=S}b[w]={flags:k,ns:O,name:T,nonMinifiedName:T,securityContext:A,suffix:I}}l=l||[];for(var D=[],M=0;M<l.length;M++){var L=e(l[M],2),j=L[0],R=L[1];D[M]={type:0,target:j,eventName:R,propName:null}}var F=(u=u||[]).map(function(t){var n=e(t,2),r=n[0],i=n[1],o=e(Fp(r),2);return[o[0],o[1],i]});return d=function(t){if(t&&"$$undefined"===t.id){var e=null!=t.encapsulation&&t.encapsulation!==$.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+dp++:"$$empty"}return t&&"$$empty"===t.id&&(t=null),t||null}(d),f&&(n|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:n|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:v,matchedQueryIds:y,references:m,ngContentIndex:i,childCount:o,bindings:b,bindingFlags:Np(b),outputs:D,element:{ns:g,name:_,attrs:F,template:null,componentProvider:null,componentView:f||null,componentRendererType:d,publicProviders:null,allProviders:null,handleEvent:h||up},provider:null,text:null,query:null,ngContent:null}}function B_(t,n,r){var i,o=r.element,a=t.root.selectorOrNode,s=t.renderer;if(t.parent||!a){i=o.name?s.createElement(o.name,o.ns):s.createComment("");var u=Op(t,n,r);u&&s.appendChild(u,i)}else i=s.selectRootElement(a,!!o.componentRendererType&&o.componentRendererType.encapsulation===$.ShadowDom);if(o.attrs)for(var c=0;c<o.attrs.length;c++){var l=e(o.attrs[c],3),h=l[0],f=l[1],d=l[2];s.setAttribute(i,f,d,h)}return i}function z_(t,e,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=V_(t,n.nodeIndex,(h=o.eventName,(l=o.target)?"".concat(l,":").concat(h):h)),s=o.target,u=t;"component"===o.target&&(s=null,u=e);var c=u.renderer.listen(s||r,o.eventName,a);t.disposables[n.outputIndex+i]=c}var l,h}function V_(t,e,n){return function(r){return _p(t,e,n,r)}}function U_(t,e,n,r){if(!vp(t,e,n,r))return!1;var i=e.bindings[n],o=np(t,e.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){var a=e.securityContext,s=a?t.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=t.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(t,i,a,i.ns,s,r);break;case 2:!function(t,e,n,r){var i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,a,s,r);break;case 4:!function(t,e,n,r,i){var o=t.root.sanitizer.sanitize(ji.STYLE,i);if(null!=o){o=o.toString();var a=e.suffix;null!=a&&(o+=a)}else o=null;var s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,a,s,r);break;case 8:!function(t,e,n,r,i){var o=e.securityContext,a=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,a)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,a,s,r)}return!0}function q_(t,e,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:Sp(e),bindings:r},ngContent:null}}function H_(t){for(var e=t.def.nodeMatchedQueries;t.parent&&Cp(t);){var n=t.parentNodeDef;t=t.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++){var o=t.def.nodes[i];67108864&o.flags&&536870912&o.flags&&(o.query.filterId&e)===o.query.filterId&&op(t,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}}if(134217728&t.def.nodeFlags)for(var a=0;a<t.def.nodes.length;a++){var s=t.def.nodes[a];134217728&s.flags&&536870912&s.flags&&op(t,a).setDirty(),a+=s.childCount}}function Z_(t,e){var n=op(t,e.nodeIndex);if(n.dirty){var r,i;if(67108864&e.flags){var o=e.parent.parent;i=G_(t,o.nodeIndex,o.nodeIndex+o.childCount,e.query,[]),r=rp(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=G_(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i,ed);for(var a=e.query.bindings,s=!1,u=0;u<a.length;u++){var c=a[u],l=void 0;switch(c.bindingType){case 0:l=n.first;break;case 1:l=n,s=!0}r[c.propName]=l}s&&n.notifyOnChanges()}}function G_(t,e,n,r,i){for(var o=e;o<=n;o++){var a=t.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(W_(t,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=np(t,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(G_(t,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var c=u.viewContainer._embeddedViews,l=0;l<c.length;l++){var h=c[l],f=bp(h);f&&f===u&&G_(h,0,h.def.nodes.length-1,r,i)}var d=u.template._projectedViews;if(d)for(var p=0;p<d.length;p++){var v=d[p];G_(v,0,v.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function W_(t,e,n){if(null!=n)switch(n){case 1:return np(t,e.nodeIndex).renderElement;case 0:return new td(np(t,e.nodeIndex).renderElement);case 2:return np(t,e.nodeIndex).template;case 3:return np(t,e.nodeIndex).viewContainer;case 4:return rp(t,e.nodeIndex).instance}}function X_(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function K_(t,e,n){var r=Op(t,e,n);r&&Mp(t,n.ngContent.index,1,r,null,void 0)}function Y_(t,e){return Q_(128,t,ir(e+1))}function J_(t,e){return Q_(32,t,ir(e))}function $_(t,e){for(var n=Object.keys(e),r=n.length,i=[],o=0;o<r;o++)i.push(n[o]);return Q_(64,t,i)}function Q_(t,e,n){for(var r=[],i=0;i<n.length;i++){var o=n[i];r.push({flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null})}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Np(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function tb(t,e,n){for(var r=[],i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function eb(t,e,n){var r,i=t.renderer;r=i.createText(n.text.prefix);var o=Op(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function nb(t,e){return(null!=t?t.toString():"")+e.suffix}function rb(t,e,n,r){for(var i=0,o=0,a=0,s=0,u=0,c=null,l=null,h=!1,f=!1,d=null,p=0;p<e.length;p++){var v=e[p];if(v.nodeIndex=p,v.parent=c,v.bindingIndex=i,v.outputIndex=o,v.renderParent=l,a|=v.flags,u|=v.matchedQueryIds,v.element){var m=v.element;m.publicProviders=c?c.element.publicProviders:Object.create(null),m.allProviders=m.publicProviders,h=!1,f=!1,v.element.template&&(u|=v.element.template.nodeMatchedQueries)}if(ob(c,v,e.length),i+=v.bindings.length,o+=v.outputs.length,!l&&3&v.flags&&(d=v),20224&v.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);var y=0!=(32768&v.flags);0==(8192&v.flags)||y?c.element.publicProviders[lp(v.provider.token)]=v:(f||(f=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[lp(v.provider.token)]=v),y&&(c.element.componentProvider=v)}if(c?(c.childFlags|=v.flags,c.directChildFlags|=v.flags,c.childMatchedQueries|=v.matchedQueryIds,v.element&&v.element.template&&(c.childMatchedQueries|=v.element.template.nodeMatchedQueries)):s|=v.flags,v.childCount>0)c=v,ib(v)||(l=v);else for(;c&&p===c.nodeIndex+c.childCount;){var g=c.parent;g&&(g.childFlags|=c.childFlags,g.childMatchedQueries|=c.childMatchedQueries),l=(c=g)&&ib(c)?c.renderParent:c}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||up,updateRenderer:r||up,handleEvent:function(t,n,r,i){return e[n].element.handleEvent(t,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:d}}function ib(t){return 0!=(1&t.flags)&&null===t.element.name}function ob(t,e,n){var r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index ".concat(e.nodeIndex,"!"))}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ".concat(e.nodeIndex,"!"));if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index ".concat(e.nodeIndex,"!"));if(134217728&e.flags&&t)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index ".concat(e.nodeIndex,"!"))}if(e.childCount){var i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index ".concat(e.nodeIndex,"!"))}}function ab(t,e,n,r){var i=cb(t.root,t.renderer,t,e,n);return lb(i,t.component,r),hb(i),i}function sb(t,e,n){var r=cb(t,t.renderer,null,null,e);return lb(r,n,n),hb(r),r}function ub(t,e,n,r){var i,o=e.element.componentRendererType;return i=o?t.root.rendererFactory.createRenderer(r,o):t.root.renderer,cb(t.root,i,t,e.element.componentProvider,n)}function cb(t,e,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function lb(t,e,n){t.component=e,t.context=n}function hb(t){var e;kp(t)&&(e=np(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);for(var n=t.def,r=t.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i],a=void 0;switch(sp.setCurrentNode(t,i),201347067&o.flags){case 1:var s=B_(t,e,o),u=void 0;if(33554432&o.flags){var c=Ap(o.element.componentView);u=sp.createComponentView(t,o,c,s)}z_(t,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?lv(t,o):void 0},16777216&o.flags&&(a.viewContainer=av(t,o,a));break;case 2:a=eb(t,e,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:Ov(t,o)});break;case 16:a={instance:Tv(t,o)};break;case 16384:(a=r[i])||(a={instance:Av(t,o)}),32768&o.flags&&lb(np(t,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new Pm(-2147483648==(-2147483648&o.flags));break;case 8:K_(t,e,o),a=void 0}r[i]=a}bb(t,_b.CreateViewNodes),Cb(t,201326592,268435456,0)}function fb(t){vb(t),sp.updateDirectives(t,1),wb(t,_b.CheckNoChanges),sp.updateRenderer(t,1),bb(t,_b.CheckNoChanges),t.state&=-97}function db(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Qd(t,0,256),vb(t),sp.updateDirectives(t,0),wb(t,_b.CheckAndUpdate),Cb(t,67108864,536870912,0);var e=Qd(t,256,512);Nv(t,2097152|(e?1048576:0)),sp.updateRenderer(t,0),bb(t,_b.CheckAndUpdate),Cb(t,134217728,536870912,0),Nv(t,8388608|((e=Qd(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Qd(t,768,1024)}function pb(t,e,n,r,i,a,s,u,c,l,h,f,d){return 0===n?function(t,e,n,r,i,o,a,s,u,c,l,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length,d=!1;return f>0&&U_(t,e,0,n)&&(d=!0),f>1&&U_(t,e,1,r)&&(d=!0),f>2&&U_(t,e,2,i)&&(d=!0),f>3&&U_(t,e,3,o)&&(d=!0),f>4&&U_(t,e,4,a)&&(d=!0),f>5&&U_(t,e,5,s)&&(d=!0),f>6&&U_(t,e,6,u)&&(d=!0),f>7&&U_(t,e,7,c)&&(d=!0),f>8&&U_(t,e,8,l)&&(d=!0),f>9&&U_(t,e,9,h)&&(d=!0),d}(t,e,n,r,i,o,a,s,u,c,l,h);case 2:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=!1,d=e.bindings,p=d.length;if(p>0&&vp(t,e,0,n)&&(f=!0),p>1&&vp(t,e,1,r)&&(f=!0),p>2&&vp(t,e,2,i)&&(f=!0),p>3&&vp(t,e,3,o)&&(f=!0),p>4&&vp(t,e,4,a)&&(f=!0),p>5&&vp(t,e,5,s)&&(f=!0),p>6&&vp(t,e,6,u)&&(f=!0),p>7&&vp(t,e,7,c)&&(f=!0),p>8&&vp(t,e,8,l)&&(f=!0),p>9&&vp(t,e,9,h)&&(f=!0),f){var v=e.text.prefix;p>0&&(v+=nb(n,d[0])),p>1&&(v+=nb(r,d[1])),p>2&&(v+=nb(i,d[2])),p>3&&(v+=nb(o,d[3])),p>4&&(v+=nb(a,d[4])),p>5&&(v+=nb(s,d[5])),p>6&&(v+=nb(u,d[6])),p>7&&(v+=nb(c,d[7])),p>8&&(v+=nb(l,d[8])),p>9&&(v+=nb(h,d[9]));var m=ep(t,e.nodeIndex).renderText;t.renderer.setValue(m,v)}return f}(t,e,n,r,i,o,a,s,u,c,l,h);case 16384:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f,d=rp(t,e.nodeIndex),p=d.instance,v=!1,m=e.bindings.length;return m>0&&pp(t,e,0,n)&&(v=!0,f=Fv(t,d,e,0,n,f)),m>1&&pp(t,e,1,r)&&(v=!0,f=Fv(t,d,e,1,r,f)),m>2&&pp(t,e,2,i)&&(v=!0,f=Fv(t,d,e,2,i,f)),m>3&&pp(t,e,3,o)&&(v=!0,f=Fv(t,d,e,3,o,f)),m>4&&pp(t,e,4,a)&&(v=!0,f=Fv(t,d,e,4,a,f)),m>5&&pp(t,e,5,s)&&(v=!0,f=Fv(t,d,e,5,s,f)),m>6&&pp(t,e,6,u)&&(v=!0,f=Fv(t,d,e,6,u,f)),m>7&&pp(t,e,7,c)&&(v=!0,f=Fv(t,d,e,7,c,f)),m>8&&pp(t,e,8,l)&&(v=!0,f=Fv(t,d,e,8,l,f)),m>9&&pp(t,e,9,h)&&(v=!0,f=Fv(t,d,e,9,h,f)),f&&p.ngOnChanges(f),65536&e.flags&&tp(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),v}(t,e,n,r,i,o,a,s,u,c,l,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings,d=!1,p=f.length;if(p>0&&vp(t,e,0,n)&&(d=!0),p>1&&vp(t,e,1,r)&&(d=!0),p>2&&vp(t,e,2,i)&&(d=!0),p>3&&vp(t,e,3,o)&&(d=!0),p>4&&vp(t,e,4,a)&&(d=!0),p>5&&vp(t,e,5,s)&&(d=!0),p>6&&vp(t,e,6,u)&&(d=!0),p>7&&vp(t,e,7,c)&&(d=!0),p>8&&vp(t,e,8,l)&&(d=!0),p>9&&vp(t,e,9,h)&&(d=!0),d){var v,m=ip(t,e.nodeIndex);switch(201347067&e.flags){case 32:v=[],p>0&&v.push(n),p>1&&v.push(r),p>2&&v.push(i),p>3&&v.push(o),p>4&&v.push(a),p>5&&v.push(s),p>6&&v.push(u),p>7&&v.push(c),p>8&&v.push(l),p>9&&v.push(h);break;case 64:v={},p>0&&(v[f[0].name]=n),p>1&&(v[f[1].name]=r),p>2&&(v[f[2].name]=i),p>3&&(v[f[3].name]=o),p>4&&(v[f[4].name]=a),p>5&&(v[f[5].name]=s),p>6&&(v[f[6].name]=u),p>7&&(v[f[7].name]=c),p>8&&(v[f[8].name]=l),p>9&&(v[f[9].name]=h);break;case 128:var y=n;switch(p){case 1:v=y.transform(n);break;case 2:v=y.transform(r);break;case 3:v=y.transform(r,i);break;case 4:v=y.transform(r,i,o);break;case 5:v=y.transform(r,i,o,a);break;case 6:v=y.transform(r,i,o,a,s);break;case 7:v=y.transform(r,i,o,a,s,u);break;case 8:v=y.transform(r,i,o,a,s,u,c);break;case 9:v=y.transform(r,i,o,a,s,u,c,l);break;case 10:v=y.transform(r,i,o,a,s,u,c,l,h)}}m.value=v}return d}(t,e,n,r,i,o,a,s,u,c,l,h);default:throw"unreachable"}}(t,e,r,i,a,s,u,c,l,h,f,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){for(var r=!1,i=0;i<n.length;i++)U_(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){for(var r=e.bindings,i=!1,o=0;o<n.length;o++)vp(t,e,o,n[o])&&(i=!0);if(i){for(var a="",s=0;s<n.length;s++)a+=nb(n[s],r[s]);a=e.text.prefix+a;var u=ep(t,e.nodeIndex).renderText;t.renderer.setValue(u,a)}return i}(t,e,n);case 16384:return function(t,e,n){for(var r,i=rp(t,e.nodeIndex),o=i.instance,a=!1,s=0;s<n.length;s++)pp(t,e,s,n[s])&&(a=!0,r=Fv(t,i,e,s,n[s],r));return r&&o.ngOnChanges(r),65536&e.flags&&tp(t,256,e.nodeIndex)&&o.ngOnInit(),262144&e.flags&&o.ngDoCheck(),a}(t,e,n);case 32:case 64:case 128:return function(t,e,n){for(var r=e.bindings,i=!1,a=0;a<n.length;a++)vp(t,e,a,n[a])&&(i=!0);if(i){var s,u=ip(t,e.nodeIndex);switch(201347067&e.flags){case 32:s=n;break;case 64:s={};for(var c=0;c<n.length;c++)s[r[c].name]=n[c];break;case 128:var l=n[0],h=n.slice(1);s=l.transform.apply(l,o(h))}u.value=s}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function vb(t){var e=t.def;if(4&e.nodeFlags)for(var n=0;n<e.nodes.length;n++){var r=e.nodes[n];if(4&r.flags){var i=np(t,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,gp(a,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function mb(t,e,n,r,i,o,a,s,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,a,s,u,c,l,h){var f=e.bindings.length;f>0&&mp(t,e,0,n),f>1&&mp(t,e,1,r),f>2&&mp(t,e,2,i),f>3&&mp(t,e,3,o),f>4&&mp(t,e,4,a),f>5&&mp(t,e,5,s),f>6&&mp(t,e,6,u),f>7&&mp(t,e,7,c),f>8&&mp(t,e,8,l),f>9&&mp(t,e,9,h)}(t,e,r,i,o,a,s,u,c,l,h,f):function(t,e,n){for(var r=0;r<n.length;r++)mp(t,e,r,n[r])}(t,e,r),!1}function yb(t,e){if(op(t,e.nodeIndex).dirty)throw Yd(sp.createDebugContext(t,e.nodeIndex),"Query ".concat(e.query.id," not dirty"),"Query ".concat(e.query.id," dirty"),0!=(1&t.state))}function gb(t){if(!(128&t.state)){if(wb(t,_b.Destroy),bb(t,_b.Destroy),Nv(t,131072),t.disposables)for(var e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(16&t.state){var e=bp(t);if(e){var n=e.template._projectedViews;n&&(rr(n,n.indexOf(t)),sp.dirtyParentQueries(t))}}}(t),t.renderer.destroyNode&&function(t){for(var e=t.def.nodes.length,n=0;n<e;n++){var r=t.def.nodes[n];1&r.flags?t.renderer.destroyNode(np(t,n).renderElement):2&r.flags?t.renderer.destroyNode(ep(t,n).renderText):(67108864&r.flags||134217728&r.flags)&&op(t,n).destroy()}}(t),kp(t)&&t.renderer.destroy(),t.state|=128}}var _b=function(t){return t[t.CreateViewNodes=0]="CreateViewNodes",t[t.CheckNoChanges=1]="CheckNoChanges",t[t.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate=3]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",t[t.Destroy=5]="Destroy",t}({});function bb(t,e){var n=t.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?xb(np(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function wb(t,e){var n=t.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=np(t,r).viewContainer._embeddedViews,a=0;a<o.length;a++)xb(o[a],e);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function xb(t,e){var n=t.state;switch(e){case _b.CheckNoChanges:0==(128&n)&&(12==(12&n)?fb(t):64&n&&kb(t,_b.CheckNoChangesProjectedViews));break;case _b.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?fb(t):64&n&&kb(t,e));break;case _b.CheckAndUpdate:0==(128&n)&&(12==(12&n)?db(t):64&n&&kb(t,_b.CheckAndUpdateProjectedViews));break;case _b.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?db(t):64&n&&kb(t,e));break;case _b.Destroy:gb(t);break;case _b.CreateViewNodes:hb(t)}}function kb(t,e){wb(t,e),bb(t,e)}function Cb(t,e,n,r){if(t.def.nodeFlags&e&&t.def.nodeFlags&n)for(var i=t.def.nodes.length,o=0;o<i;o++){var a=t.def.nodes[o];if(a.flags&e&&a.flags&n)switch(sp.setCurrentNode(t,a.nodeIndex),r){case 0:Z_(t,a);break;case 1:yb(t,a)}a.childFlags&e&&a.childFlags&n||(o+=a.childCount)}}var Sb=!1;function Eb(){if(!Sb){Sb=!0;var t=Mg()?{setCurrentNode:Kb,createRootView:Ob,createEmbeddedView:Ab,createComponentView:Ib,createNgModuleRef:Db,overrideProvider:Rb,overrideComponentView:Fb,clearOverrides:Nb,checkAndUpdateView:Ub,checkNoChangesView:qb,destroyView:Hb,createDebugContext:function(t,e){return new rw(t,e)},handleEvent:Yb,updateDirectives:Jb,updateRenderer:$b}:{setCurrentNode:function(){},createRootView:Pb,createEmbeddedView:ab,createComponentView:ub,createNgModuleRef:vv,overrideProvider:up,overrideComponentView:up,clearOverrides:up,checkAndUpdateView:db,checkNoChangesView:fb,destroyView:gb,createDebugContext:function(t,e){return new rw(t,e)},handleEvent:function(t,e,n,r){return t.def.handleEvent(t,e,n,r)},updateDirectives:function(t,e){return t.def.updateDirectives(0===e?zb:Vb,t)},updateRenderer:function(t,e){return t.def.updateRenderer(0===e?zb:Vb,t)}};sp.setCurrentNode=t.setCurrentNode,sp.createRootView=t.createRootView,sp.createEmbeddedView=t.createEmbeddedView,sp.createComponentView=t.createComponentView,sp.createNgModuleRef=t.createNgModuleRef,sp.overrideProvider=t.overrideProvider,sp.overrideComponentView=t.overrideComponentView,sp.clearOverrides=t.clearOverrides,sp.checkAndUpdateView=t.checkAndUpdateView,sp.checkNoChangesView=t.checkNoChangesView,sp.destroyView=t.destroyView,sp.resolveDep=jv,sp.createDebugContext=t.createDebugContext,sp.handleEvent=t.handleEvent,sp.updateDirectives=t.updateDirectives,sp.updateRenderer=t.updateRenderer,sp.dirtyParentQueries=H_}}function Pb(t,e,n,r,i,o){var a=i.injector.get(nd);return sb(Tb(t,i,a,e,n),r,o)}function Ob(t,e,n,r,i,o){var a=i.injector.get(nd),s=Tb(t,i,new sw(a),e,n),u=Bb(r);return ow(Xb.create,sb,null,[s,u,o])}function Tb(t,e,n,r,i){var o=e.injector.get(sd),a=e.injector.get(Ki),s=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function Ab(t,e,n,r){var i=Bb(n);return ow(Xb.create,ab,null,[t,e,i,r])}function Ib(t,e,n,r){return n=jb.get(e.element.componentProvider.provider.token)||Bb(n),ow(Xb.create,ub,null,[t,e,n,r])}function Db(t,e,n,r){return vv(t,e,n,function(t){var e=function(t){var e=!1,n=!1;return 0===Mb.size||(t.providers.forEach(function(t){var r=Mb.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(function(t){Lb.forEach(function(r,i){R(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})})),{hasOverrides:e,hasDeprecatedOverrides:n}}(t),n=e.hasOverrides,r=e.hasDeprecatedOverrides;return n?(function(t){for(var e=0;e<t.providers.length;e++){var n=t.providers[e];r&&(n.flags|=4096);var i=Mb.get(n.token);i&&(n.flags=-3841&n.flags|i.flags,n.deps=Pp(i.deps),n.value=i.value)}if(Lb.size>0){var o=new Set(t.modules);Lb.forEach(function(e,n){if(o.has(R(n).providedIn)){var i={token:n,flags:e.flags|(r?4096:0),deps:Pp(e.deps),value:e.value,index:t.providers.length};t.providers.push(i),t.providersByKey[lp(n)]=i}})}}(t=t.factory(function(){return up})),t):t}(r))}var Mb=new Map,Lb=new Map,jb=new Map;function Rb(t){var e;Mb.set(t.token,t),"function"==typeof t.token&&(e=R(t.token))&&"function"==typeof e.providedIn&&Lb.set(t.token,t)}function Fb(t,e){var n=Ap(rv(e)),r=Ap(n.nodes[0].element.componentView);jb.set(t,r)}function Nb(){Mb.clear(),Lb.clear(),jb.clear()}function Bb(t){if(0===Mb.size)return t;var e=function(t){for(var e=[],n=null,r=0;r<t.nodes.length;r++){var i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Mb.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(function(){return up});for(var n=0;n<e.length;n++)r(t,e[n]);return t;function r(t,e){for(var n=e+1;n<t.nodes.length;n++){var r=t.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=Mb.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=Pp(o.deps),i.value=o.value)}}}}function zb(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=t.def.nodes[e];return pb(t,d,n,r,i,o,a,s,u,c,l,h,f),224&d.flags?ip(t,e).value:void 0}function Vb(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=t.def.nodes[e];return mb(t,d,n,r,i,o,a,s,u,c,l,h,f),224&d.flags?ip(t,e).value:void 0}function Ub(t){return ow(Xb.detectChanges,db,null,[t])}function qb(t){return ow(Xb.checkNoChanges,fb,null,[t])}function Hb(t){return ow(Xb.destroy,gb,null,[t])}var Zb,Gb,Wb,Xb=function(t){return t[t.create=0]="create",t[t.detectChanges=1]="detectChanges",t[t.checkNoChanges=2]="checkNoChanges",t[t.destroy=3]="destroy",t[t.handleEvent=4]="handleEvent",t}({});function Kb(t,e){Gb=t,Wb=e}function Yb(t,e,n,r){return Kb(t,e),ow(Xb.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function Jb(t,e){if(128&t.state)throw $d(Xb[Zb]);return Kb(t,ew(t,0)),t.def.updateDirectives(function(t,n,r){for(var i=t.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===e?Qb(t,i,r,a):tw(t,i,r,a),16384&i.flags&&Kb(t,ew(t,n)),224&i.flags?ip(t,i.nodeIndex).value:void 0},t)}function $b(t,e){if(128&t.state)throw $d(Xb[Zb]);return Kb(t,nw(t,0)),t.def.updateRenderer(function(t,n,r){for(var i=t.def.nodes[n],o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return 0===e?Qb(t,i,r,a):tw(t,i,r,a),3&i.flags&&Kb(t,nw(t,n)),224&i.flags?ip(t,i.nodeIndex).value:void 0},t)}function Qb(t,e,n,r){if(pb.apply(void 0,[t,e,n].concat(o(r)))){var i=1===n?r[0]:r;if(16384&e.flags){for(var a={},s=0;s<e.bindings.length;s++){var u=e.bindings[s],c=i[s];8&u.flags&&(a[(p=u.nonMinifiedName,v=void 0,v=p.replace(/[$@]/g,"_"),"ng-reflect-".concat(p=v.replace(eo,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"-"+e[1].toLowerCase()})))]=no(c))}var l=e.parent,h=np(t,l.nodeIndex).renderElement;if(l.element.name)for(var f in a){var d=a[f];null!=d?t.renderer.setAttribute(h,f,d):t.renderer.removeAttribute(h,f)}else t.renderer.setValue(h,to("bindings=".concat(JSON.stringify(a,null,2))))}}var p,v}function tw(t,e,n,r){mb.apply(void 0,[t,e,n].concat(o(r)))}function ew(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function nw(t,e){for(var n=e;n<t.def.nodes.length;n++){var r=t.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var rw=function(){function t(e,n){y(this,t),this.view=e,this.nodeIndex=n,null==n&&(this.nodeIndex=n=0),this.nodeDef=e.def.nodes[n];for(var r=this.nodeDef,i=e;r&&0==(1&r.flags);)r=r.parent;if(!r)for(;!r&&i;)r=wp(i),i=i.parent;this.elDef=r,this.elView=i}return _(t,[{key:"elOrCompView",get:function(){return np(this.elView,this.elDef.nodeIndex).componentView||this.view}},{key:"injector",get:function(){return fv(this.elView,this.elDef)}},{key:"component",get:function(){return this.elOrCompView.component}},{key:"context",get:function(){return this.elOrCompView.context}},{key:"providerTokens",get:function(){var t=[];if(this.elDef)for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}},{key:"references",get:function(){var t={};if(this.elDef){iw(this.elView,this.elDef,t);for(var e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){var n=this.elView.def.nodes[e];20224&n.flags&&iw(this.elView,n,t),e+=n.childCount}}return t}},{key:"componentRenderElement",get:function(){var t=function(t){for(;t&&!kp(t);)t=t.parent;return t.parent?np(t.parent,wp(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}},{key:"renderNode",get:function(){return 2&this.nodeDef.flags?xp(this.view,this.nodeDef):xp(this.elView,this.elDef)}},{key:"logError",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,o;2&this.nodeDef.flags?(i=this.view.def,o=this.nodeDef.nodeIndex):(i=this.elView.def,o=this.elDef.nodeIndex);var a=function(t,e){for(var n=-1,r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(i,o),s=-1;i.factory(function(){var e;return++s===a?(e=t.error).bind.apply(e,[t].concat(n)):up}),s<a&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error.apply(t,n))}}]),t}();function iw(t,e,n){for(var r in e.references)n[r]=W_(t,e,e.references[r])}function ow(t,e,n,r){var i,o,a=Zb,s=Gb,u=Wb;try{Zb=t;var c=e.apply(n,r);return Gb=s,Wb=u,Zb=a,c}catch(l){if(Gi(l)||!Gb)throw l;throw i=l,o=aw(),i instanceof Error||(i=new Error(i.toString())),Jd(i,o),i}}function aw(){return Gb?new rw(Gb,Wb):null}var sw=function(){function t(e){y(this,t),this.delegate=e}return _(t,[{key:"createRenderer",value:function(t,e){return new uw(this.delegate.createRenderer(t,e))}},{key:"begin",value:function(){this.delegate.begin&&this.delegate.begin()}},{key:"end",value:function(){this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}]),t}(),uw=function(){function t(e){y(this,t),this.delegate=e,this.debugContextFactory=aw,this.data=this.delegate.data}return _(t,[{key:"createDebugContext",value:function(t){return this.debugContextFactory(t)}},{key:"destroyNode",value:function(t){var e=k_(t);e&&(function(t){w_.delete(t.nativeNode)}(e),e instanceof u_&&(e.listeners.length=0)),this.delegate.destroyNode&&this.delegate.destroyNode(t)}},{key:"destroy",value:function(){this.delegate.destroy()}},{key:"createElement",value:function(t,e){var n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){var i=new c_(n,null,r);i.name=t,E_(i)}return n}},{key:"createComment",value:function(t){var e=this.delegate.createComment(to(t)),n=this.createDebugContext(e);return n&&E_(new u_(e,null,n)),e}},{key:"createText",value:function(t){var e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&E_(new u_(e,null,n)),e}},{key:"appendChild",value:function(t,e){var n=k_(t),r=k_(e);n&&r&&n instanceof c_&&n.addChild(r),this.delegate.appendChild(t,e)}},{key:"insertBefore",value:function(t,e,n,r){var i=k_(t),o=k_(e),a=k_(n);i&&o&&i instanceof c_&&i.insertBefore(a,o),this.delegate.insertBefore(t,e,n,r)}},{key:"removeChild",value:function(t,e){var n=k_(t),r=k_(e);n&&r&&n instanceof c_&&n.removeChild(r),this.delegate.removeChild(t,e)}},{key:"selectRootElement",value:function(t,e){var n=this.delegate.selectRootElement(t,e),r=aw();return r&&E_(new c_(n,null,r)),n}},{key:"setAttribute",value:function(t,e,n,r){var i=k_(t);i&&i instanceof c_&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}},{key:"removeAttribute",value:function(t,e,n){var r=k_(t);r&&r instanceof c_&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}},{key:"addClass",value:function(t,e){var n=k_(t);n&&n instanceof c_&&(n.classes[e]=!0),this.delegate.addClass(t,e)}},{key:"removeClass",value:function(t,e){var n=k_(t);n&&n instanceof c_&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}},{key:"setStyle",value:function(t,e,n,r){var i=k_(t);i&&i instanceof c_&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)}},{key:"removeStyle",value:function(t,e,n){var r=k_(t);r&&r instanceof c_&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}},{key:"setProperty",value:function(t,e,n){var r=k_(t);r&&r instanceof c_&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}},{key:"listen",value:function(t,e,n){if("string"!=typeof t){var r=k_(t);r&&r.listeners.push(new s_(e,n))}return this.delegate.listen(t,e,n)}},{key:"parentNode",value:function(t){return this.delegate.parentNode(t)}},{key:"nextSibling",value:function(t){return this.delegate.nextSibling(t)}},{key:"setValue",value:function(t,e){return this.delegate.setValue(t,e)}}]),t}();function cw(t){return Eb(),sp.overrideProvider(t)}function lw(t,e){return Eb(),sp.overrideComponentView(t,e)}function hw(){return Eb(),sp.clearOverrides()}function fw(t,e,n){return new dw(t,e,n)}var dw=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this)).moduleType=t,o._bootstrapComponents=r,o._ngModuleDefFactory=i,o}return _(n,[{key:"create",value:function(t){Eb();var e=function(t){var e=Array.from(t.providers),n=Array.from(t.modules),r={};for(var i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,scope:t.scope,providers:e,modules:n,providersByKey:r}}(Ap(this._ngModuleDefFactory));return sp.createNgModuleRef(this.moduleType,t||Rs.NULL,this._bootstrapComponents,e)}}]),n}(Vd);function pw(t){return Jn().compileDirectiveDeclaration(Gm,"ng:///".concat(t.type.name,"/\u0275fac.js"),t)}function vw(t){return Jn().compileComponentDeclaration(Gm,"ng:///".concat(t.type.name,"/\u0275cmp.js"),t)}function mw(t){return Jn().compilePipeDeclaration(Gm,"ng:///".concat(t.type.name,"/\u0275pipe.js"),t)}},gFX4:function(t,e,n){var r=n("zJ60"),i=n("Uwu7"),o=n("eOtv"),a=n("x7D4")("socket.io-client");t.exports=e=u;var s=e.managers={};function u(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i=r(t),u=i.source,c=i.id;return e.forceNew||e["force new connection"]||!1===e.multiplex||s[c]&&i.path in s[c].nsps?(a("ignoring socket cache for %s",u),n=o(u,e)):(s[c]||(a("new io instance for %s",u),s[c]=o(u,e)),n=s[c]),i.query&&!e.query&&(e.query=i.query),n.socket(i.path,e)}e.protocol=i.protocol,e.connect=u,e.Manager=n("eOtv"),e.Socket=n("KFGy")},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a"),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},gZ7C:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceDelPopupComponent=void 0;var a=o(n("fXoL")),s=function(){function t(e){y(this,t),this.name=e.name}return _(t,[{key:"ngOnInit",value:function(){}}]),t}();e.DeviceDelPopupComponent=s,s.\u0275fac=function(t){return new(t||s)(a.\u0275\u0275directiveInject("popupInitialParams"))},s.\u0275cmp=a.\u0275\u0275defineComponent({type:s,selectors:[["device-del-popup-component"]],decls:2,vars:1,template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&t&&(a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1("Delete device: ",e.name,""))},styles:["[_nghost-%COMP%]{display:block;padding:15px}"]})},hBuv:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.JournalComponent=e.LeafletResolver=void 0,n("fXoL"),n("ofXK"),n("1xHg");var s=a(n("FjQK")),u=n("AytR"),c=(n("0RL5"),o(n("fXoL"))),l=o(n("ofXK")),h=o(n("1xHg")),f=o(n("0RL5")),d=function(t){return{selected:t}},p=function(t){return{background:t}};function v(t,e){if(1&t){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",11),c.\u0275\u0275listener("click",function(){c.\u0275\u0275restoreView(n);var t=e.$implicit;return c.\u0275\u0275nextContext().onSelectDevice(t)}),c.\u0275\u0275element(1,"img",12),c.\u0275\u0275elementStart(2,"p"),c.\u0275\u0275text(3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit,i=c.\u0275\u0275nextContext();c.\u0275\u0275property("ngClass",c.\u0275\u0275pureFunction1(4,d,r===i.deviceSelected)),c.\u0275\u0275advance(1),c.\u0275\u0275property("src",r.image||i.hostPrefix+"img/speedway_4_logo.jpg",c.\u0275\u0275sanitizeUrl)("ngStyle",c.\u0275\u0275pureFunction1(6,p,r.background)),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate(r.name)}}function m(t,e){if(1&t&&(c.\u0275\u0275elementStart(0,"div",2),c.\u0275\u0275elementStart(1,"div"),c.\u0275\u0275element(2,"one-track",13),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&t){var n=e.index,r=c.\u0275\u0275nextContext();c.\u0275\u0275advance(2),c.\u0275\u0275property("track",r.list[n])}}var g=function(){function t(){y(this,t)}return _(t,[{key:"resolve",value:function(){var t=this;return new Promise(function(e,n){t.L=s.default,e(s.default)})}}]),t}();e.LeafletResolver=g,g.\u0275fac=function(t){return new(t||g)},g.\u0275prov=c.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac});var b=function(){function t(e,n,r,i){y(this,t),this.location=e,this.journalService=n,this.el=r,this.deviceService=i,this.offset=0,this.deviceSelected=null,this.hostPrefix=u.environment.hostPrefix,this.deviceList=i.getDeviceList(),console.log("deviceList -> ",this.deviceList),this.list=n.list,this.selectDate=null}return _(t,[{key:"ngOnInit",value:function(){this.el.nativeElement.getElementsByClassName("scroll")[0].style.maxHeight=window.innerHeight-200+"px"}},{key:"onSelectDevice",value:function(t){var e=this;this.deviceSelected=t,this.journalService.getLastDeviceDate(t.device_key).then(function(n){if(n.error)throw new Error(n.error);e.selectDate=e.dateRoundDay(new Date(n.date)),e.getTrack(t)})}},{key:"stepGo",value:function(t){0<t&&(this.selectDate=this.stepForwardDate(this.selectDate)),t<0&&(this.selectDate=this.stepBackDate(this.selectDate)),this.getTrack(this.deviceSelected)}},{key:"getTrack",value:function(t){var e=this.selectDate,n=this.stepForwardDate(this.selectDate);this.journalService.getTrack(t,e,n).then(function(t){console.log(t)})}},{key:"onClose",value:function(){this.location.back()}},{key:"ngOnDestroy",value:function(){this.journalService.cleadData()}},{key:"stepBackDate",value:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()-1)}},{key:"stepForwardDate",value:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+1)}},{key:"dateRoundDay",value:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())}}]),t}();e.JournalComponent=b,b.\u0275fac=function(t){return new(t||b)(c.\u0275\u0275directiveInject(l.Location),c.\u0275\u0275directiveInject(h.JournalService),c.\u0275\u0275directiveInject(c.ElementRef),c.\u0275\u0275directiveInject(f.DeviceService))},b.\u0275cmp=c.\u0275\u0275defineComponent({type:b,selectors:[["ng-component"]],decls:22,vars:6,consts:[[1,"content"],[1,"close",3,"click"],[1,"row"],["class","flex vertical-center pointer devices",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"title-row"],[1,"steps"],[1,"back","btn",3,"click"],[1,"date"],[1,"forward","btn",3,"click"],[1,"scroll"],["class","row",4,"ngFor","ngForOf"],[1,"flex","vertical-center","pointer","devices",3,"ngClass","click"],[1,"logo",3,"src","ngStyle"],[3,"track"]],template:function(t,e){1&t&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275elementStart(1,"div"),c.\u0275\u0275elementStart(2,"div",1),c.\u0275\u0275listener("click",function(){return e.onClose()}),c.\u0275\u0275text(3,"\xd7"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"div",2),c.\u0275\u0275elementStart(5,"p"),c.\u0275\u0275text(6,"Devices"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(7,"div",2),c.\u0275\u0275template(8,v,4,8,"div",3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(9,"div",2),c.\u0275\u0275elementStart(10,"div",4),c.\u0275\u0275element(11,"p"),c.\u0275\u0275elementStart(12,"div",5),c.\u0275\u0275elementStart(13,"div",6),c.\u0275\u0275listener("click",function(){return e.stepGo(-1)}),c.\u0275\u0275text(14,"\u25c4"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(15,"div",7),c.\u0275\u0275text(16),c.\u0275\u0275pipe(17,"date"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(18,"div",8),c.\u0275\u0275listener("click",function(){return e.stepGo(1)}),c.\u0275\u0275text(19,"\u25ba"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(20,"div",9),c.\u0275\u0275template(21,m,3,1,"div",10),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&t&&(c.\u0275\u0275advance(8),c.\u0275\u0275property("ngForOf",e.deviceList),c.\u0275\u0275advance(8),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind2(17,3,e.selectDate,"dd/MM/yyyy")),c.\u0275\u0275advance(5),c.\u0275\u0275property("ngForOf",e.list))},styles:['[_nghost-%COMP%]{position:absolute;left:0;top:0;z-index:5;width:100%}.devices[_ngcontent-%COMP%]{margin:0 15px 5px}.devices[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:15px}.devices.selected[_ngcontent-%COMP%]{font-weight:700}.devices.selected[_ngcontent-%COMP%]:before{content:"\\25BA";margin-left:-15px}.devices[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 15px}.content[_ngcontent-%COMP%]{position:absolute;background:hsla(0,0%,100%,.9);min-width:600px;margin-left:-300px;padding:0;left:50%;top:calc(100% + 20px);box-shadow:1px 1px 3px rgba(0,0,0,.4)}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:30px}.logo[_ngcontent-%COMP%]{box-shadow:1px 1px 5px rgba(0,0,0,.2);border-radius:50%;width:40px;height:40px;padding:3px}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;cursor:pointer;padding:15px;font-size:20px;font:30px/15px bold}.title-row[_ngcontent-%COMP%]{margin:15px;display:flex;justify-content:space-between;align-items:center}.steps[_ngcontent-%COMP%], .title-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:50%}.steps[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.steps[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{cursor:pointer}.scroll[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden}.row[_ngcontent-%COMP%]{margin:0 -15px 15px}@media screen and (max-width:600px){.content[_ngcontent-%COMP%]{position:relative;width:100%;min-width:inherit;left:0;margin-left:0}}']})},hR9q:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TailClass=void 0,e.TailClass=function(){function t(e,n){var r=this;y(this,t),this.markerId=e,this.map=n,this.layerId="tail-"+e,this.sourceId="source-"+e,this.data={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[]]}},this.map.onLoad.then(function(){n.addSource(r.sourceId,{type:"geojson",data:r.data}),r.map.addLayer({id:r.layerId,type:"line",source:r.sourceId,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"rgba(255, 0,0 ,0.3)","line-width":8,"line-opacity":.8}})})}return _(t,[{key:"update",value:function(t){var e=this;return this.data.geometry.coordinates?(this.map.onLoad.then(function(){for(e.data.geometry.coordinates[0][0]?e.data.geometry.coordinates.push(t):e.data.geometry.coordinates[0]=t;10<e.data.geometry.coordinates.length;)e.data.geometry.coordinates.splice(0,1);e.map.getSource(e.sourceId).setData(e.data)}),this):this}},{key:"remove",value:function(){}}]),t}()},hVDi:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.PopupService=e.PopupInitialState=void 0,n("fXoL");var a=n("28QR"),s=o(n("fXoL")),u=_(function t(){y(this,t)});e.PopupInitialState=u,u.\u0275fac=function(t){return new(t||u)},u.\u0275prov=s.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac});var c=function(){function t(e,n,r){y(this,t),this.injector=e,this.applicationRef=n,this.componentFactoryResolver=r,this.popupList=[],this.popupListPrepare=[]}return _(t,[{key:"init",value:function(){}},{key:"containerCreate",value:function(){var t=this.componentFactoryResolver.resolveComponentFactory(a.PopupContainerComponent);this.popupContainerEl=document.createElement("popup-container"),this.popupContainerRef=t.create(this.injector,[],this.popupContainerEl),document.body.appendChild(this.popupContainerEl),this.applicationRef.attachView(this.popupContainerRef.hostView)}},{key:"show",value:function(t){this.popupListPrepare.push(t),0==this.popupList.length?(this.containerCreate(),this.popupContainerRef.instance.isShowMask=!0,this.popupContainerRef.instance.popupService=this):this.animationShowEnd()}},{key:"animationShowEnd",value:function(){for(;this.popupListPrepare.length;){var t=this.popupListPrepare.splice(0,1)[0];this.popupList.push(t)}}},{key:"remove",value:function(t){var e=this.popupList.indexOf(t);this.popupList.splice(e,1)}},{key:"hideMask",value:function(){this.popupList.length<1&&(this.popupContainerRef.instance.isShowMask=!1)}},{key:"removeMask",value:function(){this.applicationRef.detachView(this.popupContainerRef.hostView),document.body.removeChild(this.popupContainerEl)}}]),t}();e.PopupService=c,c.\u0275fac=function(t){return new(t||c)(s.\u0275\u0275inject(s.Injector),s.\u0275\u0275inject(s.ApplicationRef),s.\u0275\u0275inject(s.ComponentFactoryResolver))},c.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac})},htV3:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__decorate||function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.MenuAthleteComponent=void 0;var u,c=n("fXoL"),l=(n("0RL5"),n("mr0/"),n("mu9K"),n("y2tO")),h=a(n("fXoL")),f=a(n("mu9K")),d=a(n("mr0/")),p=a(n("0RL5")),v=a(n("ofXK")),m=a(n("JHfl"));function g(t,e){if(1&t){var n=h.\u0275\u0275getCurrentView();h.\u0275\u0275elementStart(0,"li",0),h.\u0275\u0275listener("click",function(){h.\u0275\u0275restoreView(n);var t=e.$implicit;return h.\u0275\u0275nextContext().selectDevice(t)}),h.\u0275\u0275element(1,"menu-athlete-item",2),h.\u0275\u0275element(2,"div",3),h.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit;h.\u0275\u0275advance(1),h.\u0275\u0275property("device",r)}}function b(t,e){if(1&t){var n=h.\u0275\u0275getCurrentView();h.\u0275\u0275elementStart(0,"li",0),h.\u0275\u0275listener("click",function(){h.\u0275\u0275restoreView(n);var t=e.$implicit;return h.\u0275\u0275nextContext().selectDevice(t)}),h.\u0275\u0275element(1,"menu-athlete-item",2),h.\u0275\u0275element(2,"div",3),h.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit;h.\u0275\u0275advance(1),h.\u0275\u0275property("device",r)}}function w(t,e){if(1&t){var n=h.\u0275\u0275getCurrentView();h.\u0275\u0275elementStart(0,"li",0),h.\u0275\u0275listener("click",function(){h.\u0275\u0275restoreView(n);var t=e.$implicit;return h.\u0275\u0275nextContext().selectDevice(t)}),h.\u0275\u0275element(1,"menu-athlete-item",2),h.\u0275\u0275element(2,"div",3),h.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit;h.\u0275\u0275advance(1),h.\u0275\u0275property("device",r)}}e.MenuAthleteComponent=((u=function(){function t(e,n,r){y(this,t),this.user=e,this.mapService=n,this.deviceService=r,this.onCloseMenuAthlete=new c.EventEmitter,this.userDevices=r.getDeviceList(),this.otherDevices=[]}return _(t,[{key:"onCloseMenu",value:function(){this.onCloseMenuAthlete.emit(!1)}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){document.addEventListener("click",t.onCloseMenu)},10)}},{key:"selectDevice",value:function(t){t.marker&&this.mapService.map.flyTo({center:[t.marker.lng,t.marker.lat]})}},{key:"friendDevices",get:function(){return[]}},{key:"ngOnDestroy",value:function(){document.removeEventListener("click",this.onCloseMenu)}}]),t}()).\u0275fac=function(t){return new(t||u)(h.\u0275\u0275directiveInject(f.UserService),h.\u0275\u0275directiveInject(d.MapService),h.\u0275\u0275directiveInject(p.DeviceService))},u.\u0275cmp=h.\u0275\u0275defineComponent({type:u,selectors:[["menu-athlete"]],outputs:{onCloseMenuAthlete:"onCloseMenuAthlete"},decls:4,vars:3,consts:[[3,"click"],[3,"click",4,"ngFor","ngForOf"],[3,"device"],[1,"border-hidden"]],template:function(t,e){1&t&&(h.\u0275\u0275elementStart(0,"ul",0),h.\u0275\u0275listener("click",function(t){return t.stopPropagation()}),h.\u0275\u0275template(1,g,3,1,"li",1),h.\u0275\u0275template(2,b,3,1,"li",1),h.\u0275\u0275template(3,w,3,1,"li",1),h.\u0275\u0275elementEnd()),2&t&&(h.\u0275\u0275advance(1),h.\u0275\u0275property("ngForOf",e.userDevices),h.\u0275\u0275advance(1),h.\u0275\u0275property("ngForOf",e.friendDevices),h.\u0275\u0275advance(1),h.\u0275\u0275property("ngForOf",e.otherDevices))},directives:[v.NgForOf,m.MenuAthleteItemComponent],styles:["[_nghost-%COMP%]{position:absolute;left:0;top:100%;z-index:2}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;background-color:hsla(0,0%,100%,.8);min-width:80px;padding:0;min-width:180px;border-top:1px solid #d0e2ee}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#fff}.passed[_ngcontent-%COMP%]{font-size:10px;text-align:right}.status[_ngcontent-%COMP%]{float:left;width:60px;height:60px;margin-top:-2px;border-radius:50%;box-shadow:1px 1px 3px rgba(0,0,0,.5);padding:5px}.status.yellow[_ngcontent-%COMP%]{background:#ff0}.status.green[_ngcontent-%COMP%]{background:#2ff63a}.status.arrow[_ngcontent-%COMP%]{background:#3690f6}img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;border-radius:50%}.name[_ngcontent-%COMP%]{text-align:right;margin-left:70px;margin-bottom:8px}"]}),o([l.autobind(),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],u.prototype,"onCloseMenu",null),u)},iBJV:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MyTranslateModule=e.HttpLoaderFactory=void 0;var a=n("sYmb"),s=n("tk/3"),u=n("AytR"),c=n("mqiu"),l=o(n("fXoL")),h=o(n("sYmb"));function f(t){return new c.TranslateHttpLoader(t,"".concat(u.environment.hostPrefix,"/langs/"),".json")}e.HttpLoaderFactory=f;var d=_(function t(e){switch(y(this,t),this.translate=e,(navigator.language||navigator.userLanguage).match(/^\D{2}/)[0]){case"ru":e.setDefaultLang("ru");break;case"en":default:e.setDefaultLang("en")}});e.MyTranslateModule=d,d.\u0275fac=function(t){return new(t||d)(l.\u0275\u0275inject(h.TranslateService))},d.\u0275mod=l.\u0275\u0275defineNgModule({type:d}),d.\u0275inj=l.\u0275\u0275defineInjector({imports:[[a.TranslateModule.forRoot({loader:{provide:a.TranslateLoader,useFactory:f,deps:[s.HttpClient]}})]]})},iX35:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MarkerService=e.Marker=void 0,n("mr0/");var s=n("RVpw"),u=n("coRy"),c=n("8R26"),l=n("hR9q"),h=n("JLh1"),f=a(n("+ZnK")),d=(n("otBb"),n("q7Eg")),p=n("AytR"),v=(n("mu9K"),n("qCKp")),m=o(n("fXoL")),g=o(n("mr0/")),b=o(n("RVpw")),w=o(n("mu9K")),x=function(){function t(e,n,r,i){var o=this;y(this,t),this.user=n,this.map=r,this.timerService=i,this.accuracy=0,this.status="white",this.intervalUpdateMarker=0,console.log(e.type),e.bs=e.bs?e.bs.filter(function(t){return t.lat&&t.lng}):[],Object.keys(e).forEach(function(t){o[t]=e[t]}),this.speedBehaviorSubject=new v.BehaviorSubject(0),this.speedSubject=this.speedBehaviorSubject.asObservable(),this.timer=new s.Timer(e.date),this.layerId=t.getNewLayer(),this.elapsed="...",this.tail=new l.TailClass(this.layerId,this.map),this.intervalUpdateMarker=setInterval(function(){o.updateMarker()},1e3),"BS"===e.type&&this.map.onLoad.then(function(t){o.createStations(e.bs)})}return _(t,[{key:"setIcoImage",value:function(t){var e=document.createElement("div");e.classList.add("user-icon");var n=this.img=new Image;return this.image=n.src=t||this.user.image||"".concat(p.environment.hostPrefix,"img/speedway_4_logo.jpg"),e.appendChild(n),this.icoContainer=e,this.iconMarker=new f.default.Marker(e,{offset:[0,0]}).setLngLat([this.lng,this.lat]).addTo(this.map),this}},{key:"setIcoName",value:function(t){return this.popup=new f.default.Popup({closeOnClick:!1,offset:{bottom:[0,-20]},closeButton:!1}).setLngLat([this.lng,this.lat]).setHTML("<div>"+t+"</div>").addTo(this.map),this}},{key:"update",value:function(t){t.bs=t.bs?t.bs.filter(function(t){return t.lat&&t.lng}):[];var e=new c.Point(this.lng,this.lat),n=this.timer.tick(t.date);for(var r in t)this[r]=t[r];var i=new c.Point(this.lng,this.lat);return this.speed=36e5*h.distance(e,i)/n,this.speedBehaviorSubject.next(this.speed),this.popup.setLngLat([this.lng,this.lat]),this.status=u.elapsedStatus(this),this.iconMarker.setLngLat([this.lng,this.lat]),this.icoContainer.setAttribute("status",this.status),this.tail.update(new c.Point(t.lng,t.lat)),this.areaList&&this.areaList.remove(),this.baseStationPoints&&this.baseStationPoints.remove(),"BS"===t.type&&this.createStations(t.bs),this}},{key:"updateMarker",value:function(){return this.status=u.elapsedStatus(this),this.icoContainer.setAttribute("status",this.status),this.elapsed=this.timerService.elapse(this.date),this}},{key:"remove",value:function(){this.popup.remove(),this.iconMarker.remove(),this.areaList&&this.areaList.remove(),this.baseStationPoints&&this.baseStationPoints.remove(),this.intervalUpdateMarker&&clearInterval(this.intervalUpdateMarker)}},{key:"updateSetImage",value:function(t){this.img.src=t,this.image=t}},{key:"createLinkedLine",value:function(t,e){return{type:"Feature",geometry:{type:"LineString",coordinates:[[t.lng,t.lat],[e.lng,e.lat]]}}}},{key:"createStations",value:function(t){var e=this.getBouds(t).max;this.areaList=this.createAreaList(t,e),this.baseStationPoints=this.drawPoints(t)}},{key:"createAreaList",value:function(e){var n=this,r=t.getNewLayer("area-"),i=this.map;this.map.addSource(r,{type:"geojson",data:{type:"FeatureCollection",features:[]}});var o=[],a=this.createGeoJSONCircle((new d.LngLat).setValue(this),this.accuracy/1e3);return o.push(a),e.forEach(function(t){var e=n.createLinkedLine(new d.LngLat(n.lng,n.lat),(new d.LngLat).setValue(t));o.push(e)}),i.getSource(r).setData({type:"FeatureCollection",features:o}),i.addLayer({id:r,type:"line",source:r,layout:{},paint:{"line-color":t.color,"line-width":2}}),{layerId:r,remove:function(){return i.removeLayer(r),i.removeSource(r),t.removeLayer(r),this},update:function(t){return i.getSource(r).setData(t),this}}}},{key:"createGeoJSONCircle",value:function(t,e){for(var n,r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,a=t[1],s=t[0],u=e,c=[],l=u/(111.32*Math.cos(a*Math.PI/180)),h=u/110.574,f=0;f<o;f++)n=f/o*(2*Math.PI),r=l*Math.cos(n),i=h*Math.sin(n),c.push([s+r,a+i]);return c.push(c[0]),{type:"Feature",geometry:{type:"Polygon",coordinates:[c]}}}},{key:"drawPoints",value:function(e){var n=this.getData(e),r=this.map,i=t.getNewLayer();return r.addSource(i,{type:"geojson",data:n}),r.addLayer({id:i,type:"circle",paint:{"circle-color":{property:"color",stops:[["superColor",t.color]],type:"categorical"},"circle-radius":8},layout:{},source:i}),{layerId:i,points:e,remove:function(){r.removeLayer(i),r.removeSource(i),t.removeLayer(i)}}}},{key:"getData",value:function(t){return{type:"FeatureCollection",features:(e=[],t.forEach(function(t,n){e.push({properties:{color:"superColor",point:t,id:t.id},type:"Feature",geometry:{type:"Point",coordinates:[t.lng,t.lat]}})}),e)};var e}},{key:"getBouds",value:function(t){var e=[];if(t&&1<t.length){for(var n=1,r=0;r<t.length-1;r++){for(var i=n;i<t.length;i++)e.push([r,i]);n++}var o=[],a=0,s={lng:0,lat:0},u={lng:0,lat:0};return e.forEach(function(e){var n=t[e[0]],r=t[e[1]],i=h.distance([n.lng,n.lat],[r.lng,r.lat]);o.push({p1:n,p2:r,dist:i});var c=n.lng<r.lng?n.lng:r.lng;s.lng=s.lng||c,c<s.lng&&(s.lng=c);var l=n.lat<r.lat?n.lat:r.lat;s.lat=s.lat||l,l<s.lat&&(s.lat=l);var f=n.lng<r.lng?r.lng:n.lng;u.lng=u.lng||f,u.lng<f&&(u.lng=f);var d=n.lat<r.lat?r.lat:n.lat;u.lat=u.lat||d,u.lat<d&&(u.lat=d),a<i&&(a=i)}),{max:a,bounds:[{lng:s.lng,lat:s.lat},{lng:u.lng,lat:u.lat}]}}return{max:null,bounds:null}}}],[{key:"removeLayer",value:function(e){t.layerIds.has(e)&&t.layerIds.delete(e)}},{key:"getNewLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"marker-",n=0+5e6*Math.random(),r="";return r=String(e).concat(Math.round(n).toString()),t.layerIds.has(r)?t.getNewLayer():(t.layerIds.add(r),r)}}]),t}();e.Marker=x,x.color="rgba(129, 150, 253, 0.7)",x.layerIds=new Set;var k=function(){function t(e,n,r){y(this,t),this.mapService=e,this.timer=n,this.userService=r}return _(t,[{key:"marker",value:function(t){var e=this.userService.getUser();return new x(t,e,this.mapService.map,this.timer)}}]),t}();e.MarkerService=k,k.\u0275fac=function(t){return new(t||k)(m.\u0275\u0275inject(g.MapService),m.\u0275\u0275inject(b.TimerService),m.\u0275\u0275inject(w.UserService))},k.\u0275prov=m.\u0275\u0275defineInjectable({token:k,factory:k.\u0275fac})},itXk:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return h});var r=n("z+Ro"),i=n("DH7j"),o=n("l7GE"),a=n("ZUHj"),s=n("yCtX"),u={};function c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o,a;return Object(r.a)(e[e.length-1])&&(a=e.pop()),"function"==typeof e[e.length-1]&&(o=e.pop()),1===e.length&&Object(i.a)(e[0])&&(e=e[0]),Object(s.a)(e,a).lift(new h(o))}var h=function(){function t(e){y(this,t),this.resultSelector=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new d(t,this.resultSelector))}}]),t}(),d=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return _(n,[{key:"_next",value:function(t){this.values.push(u),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(a.a)(this,r,void 0,n))}}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n){var r=this.values,i=this.toRespond?r[n]===u?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(o.a)},jHPu:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ChatService=void 0,n("XVN5");var a=n("0GDk"),s=o(n("fXoL")),u=o(n("XVN5")),c=function(){function t(e){y(this,t),this.io=e,this.rooms=[],this.messages={},this.roomsObj={},this._unViewedIds=[],this.socket=e.socket,this.socket.on("onChat",this.onChat.bind(this)),this.unViewedDefer=new a.Deferred}return _(t,[{key:"onChat",value:function(t){console.log(t),this.putMessage(t.userId,{id:t.id,text:t.text,date:new Date(t.date),isMy:!1,viewed:t.viewed})}},{key:"unViewedIds",get:function(){return this._unViewedIds},set:function(t){var e=this;this._unViewedIds.length=0,t.forEach(function(t){e._unViewedIds.push(t)})}},{key:"resolveUnViewedIds",value:function(t){var e=this.unViewedIds.indexOf(t);-1<e&&this.unViewedIds.splice(e,1)}},{key:"getUnViewed",value:function(t){var e=this;return(0==this.unViewedDefer.status||t)&&(t&&(this.unViewedDefer=new a.Deferred),this.socket.$emit("chatUnViewed").then(function(t){var n=[];for(var r in t)n.push(parseFloat(r));e.unViewedIds=n,e.unViewedDefer.resolve(t)})),this.unViewedDefer.promise}},{key:"getMessages",value:function(t){return this.messages[t]||(this.messages[t]=[]),this.messages[t]}},{key:"putMessage",value:function(t,e){this.messages[t]||(this.messages[t]=[]),this.roomsObj[t]?this.emitChatViewed([e.id]):(this.unViewedIds.indexOf(t)<0&&this.unViewedIds.push(t),this.addChatUnViewed&&this.addChatUnViewed(t,e.id)),this.messages[t].push(e)}},{key:"emitChatViewed",value:function(t){return this.socket.$emit("chatResolveUnViewed",t)}},{key:"clearRoomMessage",value:function(t){this.messages[t].length=0}},{key:"onEnterRoom",value:function(t){if(this.rooms.forEach(function(t){t.isActive=!1}),this.roomsObj[t.id])this.roomsObj[t.id].isActive=!0;else{var e={id:t.id,name:t.name,isActive:!0,messages:this.getMessages(t.id)};this.roomsObj[t.id]=e,this.rooms.push(e)}}},{key:"onSend",value:function(t,e){var n=this;return this.socket.$emit("onChatSend",{id:t,text:e.text}).then(function(t){console.log(t),n.putMessage(t.toUserId,{id:t.id,text:t.text,isMy:!0,date:new Date(t.date),viewed:!0})})}},{key:"closeRoom",value:function(t){var e=this.rooms.indexOf(this.roomsObj[t]);-1<e&&(this.rooms.splice(e,1),delete this.roomsObj[t],this.clearRoomMessage(t))}},{key:"chatHistory",value:function(t){var e=this;this.socket.$emit("chatHistory",t).then(function(n){n.forEach(function(n){e.putMessage(t,{date:new Date(n.date),text:n.text,isMy:n.isMy,id:n.id,viewed:n.viewed})}),console.log(n)})}}]),t}();e.ChatService=c,c.\u0275fac=function(t){return new(t||c)(s.\u0275\u0275inject(u.Io))},c.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac})},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(function(n){var r=new i.a,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},jfAM:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.BattLevelComponent=void 0;var a=n("pGC+"),s=o(n("fXoL")),u=o(n("pGC+")),c=o(n("ofXK")),l=function(t,e){return{width:t,"background-color":e}};function h(t,e){if(1&t&&(s.\u0275\u0275elementStart(0,"div",1),s.\u0275\u0275elementStart(1,"div"),s.\u0275\u0275elementStart(2,"div",2),s.\u0275\u0275element(3,"div",3),s.\u0275\u0275element(4,"div",4),s.\u0275\u0275pipe(5,"async"),s.\u0275\u0275pipe(6,"async"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"div",5),s.\u0275\u0275text(8),s.\u0275\u0275pipe(9,"async"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&t){var n=s.\u0275\u0275nextContext();s.\u0275\u0275advance(4),s.\u0275\u0275property("ngStyle",s.\u0275\u0275pureFunction2(8,l,s.\u0275\u0275pipeBind1(5,2,n.styleWidth$),s.\u0275\u0275pipeBind1(6,4,n.styleColor$))),s.\u0275\u0275advance(4),s.\u0275\u0275textInterpolate1(" ",s.\u0275\u0275pipeBind1(9,6,n.text$)," ")}}var f=function(){function t(e){y(this,t),this.battLevelStore=e,this.cssClass=!0,this.visible$=this.battLevelStore.select(function(t){return t.visible}),this.text$=this.battLevelStore.select(function(t){return"".concat(t.level,"%")}),this.styleWidth$=this.battLevelStore.select(function(t){return"".concat(t.level,"%")}),this.styleColor$=this.battLevelStore.select(function(t){return t.color})}return _(t,[{key:"level",set:function(t){this.battLevelStore.setLevel(t)}},{key:"ngOnInit",value:function(){}}]),t}();e.BattLevelComponent=f,f.\u0275fac=function(t){return new(t||f)(s.\u0275\u0275directiveInject(u.BattLevelStore))},f.\u0275cmp=s.\u0275\u0275defineComponent({type:f,selectors:[["ats-batt-level"]],hostVars:2,hostBindings:function(t,e){2&t&&s.\u0275\u0275classProp("ats-batt-level",e.cssClass)},inputs:{level:"level"},features:[s.\u0275\u0275ProvidersFeature([a.BattLevelStore])],decls:2,vars:3,consts:[["class","level-container",4,"ngIf"],[1,"level-container"],[1,"image-square"],[1,"contact"],[1,"level",3,"ngStyle"],[1,"text"]],template:function(t,e){1&t&&(s.\u0275\u0275template(0,h,10,11,"div",0),s.\u0275\u0275pipe(1,"async")),2&t&&s.\u0275\u0275property("ngIf",s.\u0275\u0275pipeBind1(1,1,e.visible$))},directives:[c.NgIf,c.NgStyle],pipes:[c.AsyncPipe],styles:["[_nghost-%COMP%]{font-size:12px;text-align:right}.image-square[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:20px;height:12px;border:1px solid gray}.image-square[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]{margin-left:-4px;width:3px;height:6px;border:1px solid gray}.image-square[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{height:100%;width:20%;background:red}.level-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;margin:0 -5px}.level-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:2px 5px}"]})},jhN1:function(t,e,n){"use strict";n.r(e),n.d(e,"BrowserModule",function(){return pt}),n.d(e,"BrowserTransferStateModule",function(){return Tt}),n.d(e,"By",function(){return At}),n.d(e,"DomSanitizer",function(){return rt}),n.d(e,"EVENT_MANAGER_PLUGINS",function(){return E}),n.d(e,"EventManager",function(){return P}),n.d(e,"HAMMER_GESTURE_CONFIG",function(){return H}),n.d(e,"HAMMER_LOADER",function(){return Z}),n.d(e,"HammerGestureConfig",function(){return G}),n.d(e,"HammerModule",function(){return J}),n.d(e,"Meta",function(){return mt}),n.d(e,"Title",function(){return _t}),n.d(e,"TransferState",function(){return Pt}),n.d(e,"VERSION",function(){return It}),n.d(e,"disableDebugTools",function(){return Ct}),n.d(e,"enableDebugTools",function(){return kt}),n.d(e,"makeStateKey",function(){return Et}),n.d(e,"platformBrowser",function(){return ft}),n.d(e,"\u0275BROWSER_SANITIZATION_PROVIDERS",function(){return ht}),n.d(e,"\u0275BROWSER_SANITIZATION_PROVIDERS__POST_R3__",function(){return lt}),n.d(e,"\u0275BrowserDomAdapter",function(){return s}),n.d(e,"\u0275BrowserGetTestability",function(){return v}),n.d(e,"\u0275DomEventsPlugin",function(){return U}),n.d(e,"\u0275DomRendererFactory2",function(){return N}),n.d(e,"\u0275DomSanitizerImpl",function(){return ot}),n.d(e,"\u0275DomSharedStylesHost",function(){return A}),n.d(e,"\u0275ELEMENT_PROBE_PROVIDERS",function(){return S}),n.d(e,"\u0275ELEMENT_PROBE_PROVIDERS__POST_R3__",function(){return k}),n.d(e,"\u0275HAMMER_PROVIDERS__POST_R3__",function(){return X}),n.d(e,"\u0275HammerGesturesPlugin",function(){return W}),n.d(e,"\u0275INTERNAL_BROWSER_PLATFORM_PROVIDERS",function(){return ct}),n.d(e,"\u0275KeyEventsPlugin",function(){return nt}),n.d(e,"\u0275NAMESPACE_URIS",function(){return D}),n.d(e,"\u0275SharedStylesHost",function(){return T}),n.d(e,"\u0275TRANSITION_ID",function(){return h}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_a",function(){return st}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_b",function(){return ut}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_c",function(){return dt}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_d",function(){return vt}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_e",function(){return gt}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_f",function(){return Ot}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_g",function(){return O}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_h",function(){return K}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_i",function(){return Y}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_j",function(){return it}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_k",function(){return d}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_l",function(){return p}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_m",function(){return x}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_n",function(){return C}),n.d(e,"\u0275angular_packages_platform_browser_platform_browser_o",function(){return a}),n.d(e,"\u0275escapeHtml",function(){return St}),n.d(e,"\u0275flattenStyles",function(){return R}),n.d(e,"\u0275initDomAdapter",function(){return at}),n.d(e,"\u0275shimContentAttribute",function(){return L}),n.d(e,"\u0275shimHostAttribute",function(){return j});var r=n("ofXK"),i=n("fXoL");n.d(e,"\u0275getDOM",function(){return r["\u0275getDOM"]});var o,a=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.call(this)}return _(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(r["\u0275DomAdapter"]),s=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"getProperty",value:function(t,e){return t[e]}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"getValue",value:function(t){return t.value}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=c||(c=document.querySelector("base"))?c.getAttribute("href"):null;return null==n?null:(e=n,o||(o=document.createElement("a")),o.setAttribute("href",e),"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname)}},{key:"resetBaseElement",value:function(){c=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return Object(r["\u0275parseCookieValue"])(document.cookie,t)}}],[{key:"makeCurrent",value:function(){Object(r["\u0275setRootDomAdapter"])(new n)}}]),n}(a),c=null,h=new i.InjectionToken("TRANSITION_ID");function d(t,e,n){return function(){n.get(i.ApplicationInitStatus).donePromise.then(function(){var n=Object(r["\u0275getDOM"])();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(function(e){return e.getAttribute("ng-transition")===t}).forEach(function(t){return n.remove(t)})})}}var p=[{provide:i.APP_INITIALIZER,useFactory:d,deps:[h,r.DOCUMENT,i.Injector],multi:!0}],v=function(){function t(){y(this,t)}return _(t,[{key:"addToWindow",value:function(t){i["\u0275global"].getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},i["\u0275global"].getAllAngularTestabilities=function(){return t.getAllTestabilities()},i["\u0275global"].getAllAngularRootElements=function(){return t.getAllRootElements()},i["\u0275global"].frameworkStabilizers||(i["\u0275global"].frameworkStabilizers=[]),i["\u0275global"].frameworkStabilizers.push(function(t){var e=i["\u0275global"].getAllAngularTestabilities(),n=e.length,r=!1,o=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(o)})})}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var i=t.getTestability(e);return null!=i?i:n?Object(r["\u0275getDOM"])().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}],[{key:"init",value:function(){Object(i.setTestabilityGetter)(new t)}}]),t}();function g(t,e){"undefined"!=typeof COMPILED&&COMPILED||((i["\u0275global"].ng=i["\u0275global"].ng||{})[t]=e)}var b={ApplicationRef:i.ApplicationRef,NgZone:i.NgZone};function w(t){return Object(i["\u0275getDebugNodeR2"])(t)}function x(t){return g("probe",w),g("coreTokens",Object.assign(Object.assign({},b),(t||[]).reduce(function(t,e){return t[e.name]=e.token,t},{}))),function(){return w}}var k=[],C=[{provide:i.APP_INITIALIZER,useFactory:x,deps:[[i.NgProbeToken,new i.Optional]],multi:!0}],S=k,E=new i.InjectionToken("EventManagerPlugins"),P=function(){var t=function(){function t(e,n){var r=this;y(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach(function(t){return t.manager=r}),this._plugins=e.slice().reverse()}return _(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event ".concat(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](E),i["\u0275\u0275inject"](i.NgZone))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),O=function(){function t(e){y(this,t),this._doc=e}return _(t,[{key:"addGlobalEventListener",value:function(t,e,n){var i=Object(r["\u0275getDOM"])().getGlobalEventTarget(this._doc,t);if(!i)throw new Error("Unsupported event target ".concat(i," for event ").concat(e));return this.addEventListener(i,e,n)}}]),t}(),T=function(){var t=function(){function t(){y(this,t),this._stylesSet=new Set}return _(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),A=function(){var t=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this))._doc=t,r._hostNodes=new Map,r._hostNodes.set(t.head,[]),r}return _(n,[{key:"_addStylesToHost",value:function(t,e,n){var r=this;t.forEach(function(t){var i=r._doc.createElement("style");i.textContent=t,n.push(e.appendChild(i))})}},{key:"addHost",value:function(t){var e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}},{key:"removeHost",value:function(t){var e=this._hostNodes.get(t);e&&e.forEach(I),this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach(function(n,r){e._addStylesToHost(t,r,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(t){return t.forEach(I)})}}]),n}(T);return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.DOCUMENT))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();function I(t){Object(r["\u0275getDOM"])().remove(t)}var D={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},M=/%COMP%/g;function L(t){return"_ngcontent-%COMP%".replace(M,t)}function j(t){return"_nghost-%COMP%".replace(M,t)}function R(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?R(t,i,n):(i=i.replace(M,t),n.push(i))}return n}function F(t){return function(e){if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var N=function(){var t=function(){function t(e,n,r){y(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new B(e)}return _(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new z(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case 1:case i.ViewEncapsulation.ShadowDom:return new V(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=R(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](P),i["\u0275\u0275inject"](A),i["\u0275\u0275inject"](i.APP_ID))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),B=function(){function t(e){y(this,t),this.eventManager=e,this.data=Object.create(null)}return _(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(D[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=D[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=D[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,r){r&(i.RendererStyleFlags2.DashCase|i.RendererStyleFlags2.Important)?t.style.setProperty(e,n,r&i.RendererStyleFlags2.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&i.RendererStyleFlags2.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,F(n)):this.eventManager.addEventListener(t,e,F(n))}}]),t}(),z=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;y(this,n),(a=e.call(this,t)).component=i;var s=R(o+"-"+i.id,i.styles,[]);return r.addStyles(s),a.contentAttr=L(o+"-"+i.id),a.hostAttr=j(o+"-"+i.id),a}return _(n,[{key:"applyToHost",value:function(t){u(m(n.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,e){var r=u(m(n.prototype),"createElement",this).call(this,t,e);return u(m(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(B),V=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;y(this,n),(a=e.call(this,t)).sharedStylesHost=r,a.hostEl=i,a.shadowRoot=i.attachShadow({mode:"open"}),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=R(o.id,o.styles,[]),u=0;u<s.length;u++){var c=document.createElement("style");c.textContent=s[u],a.shadowRoot.appendChild(c)}return a}return _(n,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,e){return u(m(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"insertBefore",value:function(t,e,r){return u(m(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),e,r)}},{key:"removeChild",value:function(t,e){return u(m(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(u(m(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),n}(B),U=function(){var t=function(t){l(n,t);var e=f(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var r=this;return t.addEventListener(e,n,!1),function(){return r.removeEventListener(t,e,n)}}},{key:"removeEventListener",value:function(t,e,n){return t.removeEventListener(e,n)}}]),n}(O);return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.DOCUMENT))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),q={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},H=new i.InjectionToken("HammerGestureConfig"),Z=new i.InjectionToken("HammerLoader"),G=function(){var t=function(){function t(){y(this,t),this.events=[],this.overrides={}}return _(t,[{key:"buildHammer",value:function(t){var e=new Hammer(t,this.options);for(var n in e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0}),this.overrides)e.get(n).set(this.overrides[n]);return e}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),W=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,t))._config=r,a.console=i,a.loader=o,a._loaderPromise=null,a}return _(n,[{key:"supports",value:function(t){return!(!q.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader)}},{key:"addEventListener",value:function(t,e,n){var r=this,i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||this.loader();var o=!1,a=function(){o=!0};return this._loaderPromise.then(function(){window.Hammer?o||(a=r.addEventListener(t,e,n)):a=function(){}}).catch(function(){a=function(){}}),function(){a()}}return i.runOutsideAngular(function(){var o=r._config.buildHammer(t),a=function(t){i.runGuarded(function(){n(t)})};return o.on(e,a),function(){o.off(e,a),"function"==typeof o.destroy&&o.destroy()}})}},{key:"isCustomEvent",value:function(t){return this._config.events.indexOf(t)>-1}}]),n}(O);return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.DOCUMENT),i["\u0275\u0275inject"](H),i["\u0275\u0275inject"](i["\u0275Console"]),i["\u0275\u0275inject"](Z,8))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),X=[],K=[{provide:E,useClass:W,multi:!0,deps:[r.DOCUMENT,H,i["\u0275Console"],[new i.Optional,Z]]},{provide:H,useClass:G,deps:[]}],Y=X,J=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({providers:K}),t}(),$=["alt","control","meta","shift"],Q={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},et={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},nt=function(){var t=function(t){l(n,t);var e=f(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,i){var o=n.parseEventName(e),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Object(r["\u0275getDOM"])().onAndCancel(t,o.domEventName,a)})}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if($.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")}),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(t){var e="",n=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&tt.hasOwnProperty(e)&&(e=tt[e]))}return Q[e]||e}(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),$.forEach(function(r){r!=n&&(0,et[r])(t)&&(e+=r+".")}),e+=n}},{key:"eventCallback",value:function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded(function(){return e(i)})}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(O);return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.DOCUMENT))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),rt=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return Object(i["\u0275\u0275inject"])(ot)},token:t,providedIn:"root"}),t}();function it(t){return new ot(t.get(r.DOCUMENT))}var ot=function(){var t=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this))._doc=t,r}return _(n,[{key:"sanitize",value:function(t,e){if(null==e)return null;switch(t){case i.SecurityContext.NONE:return e;case i.SecurityContext.HTML:return Object(i["\u0275allowSanitizationBypassAndThrow"])(e,"HTML")?Object(i["\u0275unwrapSafeValue"])(e):Object(i["\u0275_sanitizeHtml"])(this._doc,String(e)).toString();case i.SecurityContext.STYLE:return Object(i["\u0275allowSanitizationBypassAndThrow"])(e,"Style")?Object(i["\u0275unwrapSafeValue"])(e):e;case i.SecurityContext.SCRIPT:if(Object(i["\u0275allowSanitizationBypassAndThrow"])(e,"Script"))return Object(i["\u0275unwrapSafeValue"])(e);throw new Error("unsafe value used in a script context");case i.SecurityContext.URL:return Object(i["\u0275getSanitizationBypassType"])(e),Object(i["\u0275allowSanitizationBypassAndThrow"])(e,"URL")?Object(i["\u0275unwrapSafeValue"])(e):Object(i["\u0275_sanitizeUrl"])(String(e));case i.SecurityContext.RESOURCE_URL:if(Object(i["\u0275allowSanitizationBypassAndThrow"])(e,"ResourceURL"))return Object(i["\u0275unwrapSafeValue"])(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(t," (see https://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(t){return Object(i["\u0275bypassSanitizationTrustHtml"])(t)}},{key:"bypassSecurityTrustStyle",value:function(t){return Object(i["\u0275bypassSanitizationTrustStyle"])(t)}},{key:"bypassSecurityTrustScript",value:function(t){return Object(i["\u0275bypassSanitizationTrustScript"])(t)}},{key:"bypassSecurityTrustUrl",value:function(t){return Object(i["\u0275bypassSanitizationTrustUrl"])(t)}},{key:"bypassSecurityTrustResourceUrl",value:function(t){return Object(i["\u0275bypassSanitizationTrustResourceUrl"])(t)}}]),n}(rt);return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.DOCUMENT))},t.\u0275prov=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return it(Object(i["\u0275\u0275inject"])(i.INJECTOR))},token:t,providedIn:"root"}),t}();function at(){s.makeCurrent(),v.init()}function st(){return new i.ErrorHandler}function ut(){return Object(i["\u0275setDocument"])(document),document}var ct=[{provide:i.PLATFORM_ID,useValue:r["\u0275PLATFORM_BROWSER_ID"]},{provide:i.PLATFORM_INITIALIZER,useValue:at,multi:!0},{provide:r.DOCUMENT,useFactory:ut,deps:[]}],lt=[],ht=lt,ft=Object(i.createPlatformFactory)(i.platformCore,"browser",ct),dt=[ht,{provide:i["\u0275INJECTOR_SCOPE"],useValue:"root"},{provide:i.ErrorHandler,useFactory:st,deps:[]},{provide:E,useClass:U,multi:!0,deps:[r.DOCUMENT,i.NgZone,i.PLATFORM_ID]},{provide:E,useClass:nt,multi:!0,deps:[r.DOCUMENT]},Y,{provide:N,useClass:N,deps:[P,A,i.APP_ID]},{provide:i.RendererFactory2,useExisting:N},{provide:T,useExisting:A},{provide:A,useClass:A,deps:[r.DOCUMENT]},{provide:i.Testability,useClass:i.Testability,deps:[i.NgZone]},{provide:P,useClass:P,deps:[E,i.NgZone]},S],pt=function(){var t=function(){function t(e){if(y(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:i.APP_ID,useValue:e.appId},{provide:h,useExisting:i.APP_ID},p]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](t,12))},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({providers:dt,imports:[r.CommonModule,i.ApplicationModule]}),t}();function vt(){return new mt(Object(i["\u0275\u0275inject"])(r.DOCUMENT))}var mt=function(){var t=function(){function t(e){y(this,t),this._doc=e,this._dom=Object(r["\u0275getDOM"])()}return _(t,[{key:"addTag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this._getOrCreateElement(t,e):null}},{key:"addTags",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?t.reduce(function(t,r){return r&&t.push(e._getOrCreateElement(r,n)),t},[]):[]}},{key:"getTag",value:function(t){return t&&this._doc.querySelector("meta[".concat(t,"]"))||null}},{key:"getTags",value:function(t){if(!t)return[];var e=this._doc.querySelectorAll("meta[".concat(t,"]"));return e?[].slice.call(e):[]}},{key:"updateTag",value:function(t,e){if(!t)return null;e=e||this._parseSelector(t);var n=this.getTag(e);return n?this._setMetaElementAttributes(t,n):this._getOrCreateElement(t,!0)}},{key:"removeTag",value:function(t){this.removeTagElement(this.getTag(t))}},{key:"removeTagElement",value:function(t){t&&this._dom.remove(t)}},{key:"_getOrCreateElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e){var n=this._parseSelector(t),r=this.getTag(n);if(r&&this._containsAttributes(t,r))return r}var i=this._dom.createElement("meta");return this._setMetaElementAttributes(t,i),this._doc.getElementsByTagName("head")[0].appendChild(i),i}},{key:"_setMetaElementAttributes",value:function(t,e){var n=this;return Object.keys(t).forEach(function(r){return e.setAttribute(n._getMetaKeyMap(r),t[r])}),e}},{key:"_parseSelector",value:function(t){var e=t.name?"name":"property";return"".concat(e,'="').concat(t[e],'"')}},{key:"_containsAttributes",value:function(t,e){var n=this;return Object.keys(t).every(function(r){return e.getAttribute(n._getMetaKeyMap(r))===t[r]})}},{key:"_getMetaKeyMap",value:function(t){return yt[t]||t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.DOCUMENT))},t.\u0275prov=Object(i["\u0275\u0275defineInjectable"])({factory:vt,token:t,providedIn:"root"}),t}(),yt={httpEquiv:"http-equiv"};function gt(){return new _t(Object(i["\u0275\u0275inject"])(r.DOCUMENT))}var _t=function(){var t=function(){function t(e){y(this,t),this._doc=e}return _(t,[{key:"getTitle",value:function(){return this._doc.title}},{key:"setTitle",value:function(t){this._doc.title=t||""}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.DOCUMENT))},t.\u0275prov=Object(i["\u0275\u0275defineInjectable"])({factory:gt,token:t,providedIn:"root"}),t}(),bt="undefined"!=typeof window&&window||{},wt=_(function t(e,n){y(this,t),this.msPerTick=e,this.numTicks=n}),xt=function(){function t(e){y(this,t),this.appRef=e.injector.get(i.ApplicationRef)}return _(t,[{key:"timeChangeDetection",value:function(t){var e=t&&t.record,n=null!=bt.console.profile;e&&n&&bt.console.profile("Change Detection");for(var i=Object(r["\u0275getDOM"])().performanceNow(),o=0;o<5||Object(r["\u0275getDOM"])().performanceNow()-i<500;)this.appRef.tick(),o++;var a=Object(r["\u0275getDOM"])().performanceNow();e&&n&&bt.console.profileEnd("Change Detection");var s=(a-i)/o;return bt.console.log("ran ".concat(o," change detection cycles")),bt.console.log("".concat(s.toFixed(2)," ms per check")),new wt(s,o)}}]),t}();function kt(t){return g("profiler",new xt(t)),t}function Ct(){g("profiler",null)}function St(t){var e={"&":"&a;",'"':"&q;","'":"&s;","<":"&l;",">":"&g;"};return t.replace(/[&"'<>]/g,function(t){return e[t]})}function Et(t){return t}var Pt=function(){var t=function(){function t(){y(this,t),this.store={},this.onSerializeCallbacks={}}return _(t,[{key:"get",value:function(t,e){return void 0!==this.store[t]?this.store[t]:e}},{key:"set",value:function(t,e){this.store[t]=e}},{key:"remove",value:function(t){delete this.store[t]}},{key:"hasKey",value:function(t){return this.store.hasOwnProperty(t)}},{key:"onSerialize",value:function(t,e){this.onSerializeCallbacks[t]=e}},{key:"toJson",value:function(){for(var t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(e){console.warn("Exception in onSerialize callback: ",e)}return JSON.stringify(this.store)}}],[{key:"init",value:function(e){var n=new t;return n.store=e,n}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();function Ot(t,e){var n,r,i=t.getElementById(e+"-state"),o={};if(i&&i.textContent)try{o=JSON.parse((n=i.textContent,r={"&a;":"&","&q;":'"',"&s;":"'","&l;":"<","&g;":">"},n.replace(/&[^;]+;/g,function(t){return r[t]})))}catch(a){console.warn("Exception while restoring TransferState for app "+e,a)}return Pt.init(o)}var Tt=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[{provide:Pt,useFactory:Ot,deps:[r.DOCUMENT,i.APP_ID]}]}),t}(),At=function(){function t(){y(this,t)}return _(t,null,[{key:"all",value:function(){return function(){return!0}}},{key:"css",value:function(t){return function(e){return null!=e.nativeElement&&function(t,e){return!!Object(r["\u0275getDOM"])().isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}(e.nativeElement,t)}}},{key:"directive",value:function(t){return function(e){return-1!==e.providerTokens.indexOf(t)}}}]),t}(),It=new i.Version("11.2.14")},jtHE:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("XNiG"),i=n("qgXg"),o=n("quSY"),a=n("pxpQ"),s=n("9ppp"),c=n("Ylt2"),h=function(t){l(n,t);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return y(this,n),(t=e.call(this)).scheduler=o,t._events=[],t._infiniteTimeWindow=!1,t._bufferSize=r<1?1:r,t._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(t._infiniteTimeWindow=!0,t.next=t.nextInfiniteTimeWindow):t.next=t.nextTimeWindow,t}return _(n,[{key:"nextInfiniteTimeWindow",value:function(t){if(!this.isStopped){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}u(m(n.prototype),"next",this).call(this,t)}},{key:"nextTimeWindow",value:function(t){this.isStopped||(this._events.push(new d(this._getNow(),t)),this._trimBufferThenGetEvents()),u(m(n.prototype),"next",this).call(this,t)}},{key:"_subscribe",value:function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,u=r.length;if(this.closed)throw new s.a;if(this.isStopped||this.hasError?e=o.a.EMPTY:(this.observers.push(t),e=new c.a(this,t)),i&&t.add(t=new a.a(t,i)),n)for(var l=0;l<u&&!t.closed;l++)t.next(r[l]);else for(var h=0;h<u&&!t.closed;h++)t.next(r[h].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e}},{key:"_getNow",value:function(){return(this.scheduler||i.a).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}]),n}(r.a),d=_(function t(e,n){y(this,t),this.time=e,this.value=n})},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},"kQ+e":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.LocalStorage=void 0;var a=o(n("fXoL")),s=function(){function t(){y(this,t),this.prefix=window.location.hostname,this._mapCenter={lng:null,lat:null,zoom:null};var e=JSON.stringify(this._mapCenter);localStorage.getItem(this.prefix+"-map-center")?this.mapCenter=JSON.parse(localStorage.getItem(this.prefix+"-map-center")):localStorage.setItem(this.prefix+"-map-center",e)}return _(t,[{key:"mapCenter",get:function(){return this._mapCenter},set:function(t){localStorage.setItem(this.prefix+"-map-center",JSON.stringify(t)),this._mapCenter=t}},{key:"userKey",get:function(){return this._userKey=localStorage.getItem(this.prefix+"-user-key"),this._userKey},set:function(t){t?localStorage.setItem(this.prefix+"-user-key",t):localStorage.removeItem(this.prefix+"-user-key"),this._userKey=t}}]),t}();e.LocalStorage=s,s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=a.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac})},kSER:function(t,e){t.exports=function(t,e){for(var n=[],r=(e=e||0)||0;r<t.length;r++)n[r-e]=t[r];return n}},kU1M:function(t,e,n){"use strict";n.r(e),n.d(e,"audit",function(){return i}),n.d(e,"auditTime",function(){return d}),n.d(e,"buffer",function(){return v}),n.d(e,"bufferCount",function(){return x}),n.d(e,"bufferTime",function(){return P}),n.d(e,"bufferToggle",function(){return F}),n.d(e,"bufferWhen",function(){return z}),n.d(e,"catchError",function(){return q.a}),n.d(e,"combineAll",function(){return Z}),n.d(e,"combineLatest",function(){return X}),n.d(e,"concat",function(){return Y}),n.d(e,"concatAll",function(){return J.a}),n.d(e,"concatMap",function(){return $.a}),n.d(e,"concatMapTo",function(){return Q}),n.d(e,"count",function(){return tt}),n.d(e,"debounce",function(){return rt}),n.d(e,"debounceTime",function(){return at}),n.d(e,"defaultIfEmpty",function(){return lt.a}),n.d(e,"delay",function(){return dt}),n.d(e,"delayWhen",function(){return gt}),n.d(e,"dematerialize",function(){return kt}),n.d(e,"distinct",function(){return Et}),n.d(e,"distinctUntilChanged",function(){return Tt.a}),n.d(e,"distinctUntilKeyChanged",function(){return At}),n.d(e,"elementAt",function(){return jt}),n.d(e,"endWith",function(){return Ft}),n.d(e,"every",function(){return Nt}),n.d(e,"exhaust",function(){return Vt}),n.d(e,"exhaustMap",function(){return Zt}),n.d(e,"expand",function(){return Xt}),n.d(e,"filter",function(){return Dt.a}),n.d(e,"finalize",function(){return Jt.a}),n.d(e,"find",function(){return $t}),n.d(e,"findIndex",function(){return ee}),n.d(e,"first",function(){return ne.a}),n.d(e,"groupBy",function(){return re.b}),n.d(e,"ignoreElements",function(){return ie}),n.d(e,"isEmpty",function(){return se}),n.d(e,"last",function(){return le.a}),n.d(e,"map",function(){return Ht.a}),n.d(e,"mapTo",function(){return he}),n.d(e,"materialize",function(){return pe}),n.d(e,"max",function(){return we}),n.d(e,"merge",function(){return ke}),n.d(e,"mergeAll",function(){return Ce.a}),n.d(e,"mergeMap",function(){return Se.b}),n.d(e,"flatMap",function(){return Se.a}),n.d(e,"mergeMapTo",function(){return Ee}),n.d(e,"mergeScan",function(){return Pe}),n.d(e,"min",function(){return Ae}),n.d(e,"multicast",function(){return Ie.a}),n.d(e,"observeOn",function(){return De.b}),n.d(e,"onErrorResumeNext",function(){return Me}),n.d(e,"pairwise",function(){return Re}),n.d(e,"partition",function(){return ze}),n.d(e,"pluck",function(){return Ve}),n.d(e,"publish",function(){return qe}),n.d(e,"publishBehavior",function(){return Ze}),n.d(e,"publishLast",function(){return We}),n.d(e,"publishReplay",function(){return Ke}),n.d(e,"race",function(){return Je}),n.d(e,"reduce",function(){return be}),n.d(e,"repeat",function(){return Qe}),n.d(e,"repeatWhen",function(){return nn}),n.d(e,"retry",function(){return an}),n.d(e,"retryWhen",function(){return cn}),n.d(e,"refCount",function(){return fn.a}),n.d(e,"sample",function(){return dn}),n.d(e,"sampleTime",function(){return mn}),n.d(e,"scan",function(){return ye.a}),n.d(e,"sequenceEqual",function(){return bn}),n.d(e,"share",function(){return Cn.a}),n.d(e,"shareReplay",function(){return Sn.a}),n.d(e,"single",function(){return Pn}),n.d(e,"skip",function(){return An}),n.d(e,"skipLast",function(){return Mn}),n.d(e,"skipUntil",function(){return Rn}),n.d(e,"skipWhile",function(){return Bn}),n.d(e,"startWith",function(){return Un.a}),n.d(e,"subscribeOn",function(){return Gn}),n.d(e,"switchAll",function(){return Yn}),n.d(e,"switchMap",function(){return Xn.a}),n.d(e,"switchMapTo",function(){return Jn}),n.d(e,"take",function(){return Lt.a}),n.d(e,"takeLast",function(){return ge.a}),n.d(e,"takeUntil",function(){return $n.a}),n.d(e,"takeWhile",function(){return Qn}),n.d(e,"tap",function(){return nr.a}),n.d(e,"throttle",function(){return ir}),n.d(e,"throttleTime",function(){return sr}),n.d(e,"throwIfEmpty",function(){return Mt.a}),n.d(e,"timeInterval",function(){return fr}),n.d(e,"timeout",function(){return _r}),n.d(e,"timeoutWith",function(){return vr}),n.d(e,"timestamp",function(){return br}),n.d(e,"toArray",function(){return kr}),n.d(e,"window",function(){return Cr}),n.d(e,"windowCount",function(){return Pr}),n.d(e,"windowTime",function(){return Ar}),n.d(e,"windowToggle",function(){return Fr}),n.d(e,"windowWhen",function(){return zr}),n.d(e,"withLatestFrom",function(){return qr.a}),n.d(e,"zip",function(){return Zr}),n.d(e,"zipAll",function(){return Gr});var r=n("zx2A");function i(t){return function(e){return e.lift(new a(t))}}var a=function(){function t(e){y(this,t),this.durationSelector=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new s(t,this.durationSelector))}}]),t}(),s=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).durationSelector=r,i.hasValue=!1,i}return _(n,[{key:"_next",value:function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e;try{e=(0,this.durationSelector)(t)}catch(i){return this.destination.error(i)}var n=Object(r.c)(e,new r.a(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}},{key:"notifyNext",value:function(){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(r.b),c=n("D0XW"),h=n("PqYM");function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a;return i(function(){return Object(h.a)(t,e)})}function v(t){return function(e){return e.lift(new g(t))}}var g=function(){function t(e){y(this,t),this.closingNotifier=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new b(t,this.closingNotifier))}}]),t}(),b=function(t){l(n,t);var e=f(n);function n(t,i){var o;return y(this,n),(o=e.call(this,t)).buffer=[],o.add(Object(r.c)(i,new r.a(p(o)))),o}return _(n,[{key:"_next",value:function(t){this.buffer.push(t)}},{key:"notifyNext",value:function(){var t=this.buffer;this.buffer=[],this.destination.next(t)}}]),n}(r.b),w=n("7o/Q");function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return n.lift(new k(t,e))}}var k=function(){function t(e,n){y(this,t),this.bufferSize=e,this.startBufferEvery=n,this.subscriberClass=n&&e!==n?S:C}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))}}]),t}(),C=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).bufferSize=r,i.buffer=[],i}return _(n,[{key:"_next",value:function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])}},{key:"_complete",value:function(){var t=this.buffer;t.length>0&&this.destination.next(t),u(m(n.prototype),"_complete",this).call(this)}}]),n}(w.a),S=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).bufferSize=r,o.startBufferEvery=i,o.buffers=[],o.count=0,o}return _(n,[{key:"_next",value:function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n==0&&r.push([]);for(var o=r.length;o--;){var a=r[o];a.push(t),a.length===e&&(r.splice(o,1),this.destination.next(a))}}},{key:"_complete",value:function(){for(var t=this.buffers,e=this.destination;t.length>0;){var r=t.shift();r.length>0&&e.next(r)}u(m(n.prototype),"_complete",this).call(this)}}]),n}(w.a),E=n("z+Ro");function P(t){var e=arguments.length,n=c.a;Object(E.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new O(t,r,i,n))}}var O=function(){function t(e,n,r,i){y(this,t),this.bufferTimeSpan=e,this.bufferCreationInterval=n,this.maxBufferSize=r,this.scheduler=i}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new A(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}]),t}(),T=_(function t(){y(this,t),this.buffer=[]}),A=function(t){l(n,t);var e=f(n);function n(t,r,i,o,a){var s;y(this,n),(s=e.call(this,t)).bufferTimeSpan=r,s.bufferCreationInterval=i,s.maxBufferSize=o,s.scheduler=a,s.contexts=[];var u=s.openContext();if(s.timespanOnly=null==i||i<0,s.timespanOnly)s.add(u.closeAction=a.schedule(I,r,{subscriber:p(s),context:u,bufferTimeSpan:r}));else{var c={bufferTimeSpan:r,bufferCreationInterval:i,subscriber:p(s),scheduler:a};s.add(u.closeAction=a.schedule(M,r,{subscriber:p(s),context:u})),s.add(a.schedule(D,i,c))}return s}return _(n,[{key:"_next",value:function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],a=o.buffer;a.push(t),a.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)}},{key:"_error",value:function(t){this.contexts.length=0,u(m(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){for(var t=this.contexts,e=this.destination;t.length>0;){var r=t.shift();e.next(r.buffer)}u(m(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){this.contexts=null}},{key:"onBufferFull",value:function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan;this.add(t.closeAction=this.scheduler.schedule(I,n,{subscriber:this,context:t,bufferTimeSpan:n}))}}},{key:"openContext",value:function(){var t=new T;return this.contexts.push(t),t}},{key:"closeContext",value:function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)}}]),n}(w.a);function I(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function D(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule(M,n,{subscriber:r,context:o})),this.schedule(t,e))}function M(t){var e=t.subscriber,n=t.context;e.closeContext(n)}var L=n("quSY"),j=n("ZUHj"),R=n("l7GE");function F(t,e){return function(n){return n.lift(new N(t,e))}}var N=function(){function t(e,n){y(this,t),this.openings=e,this.closingSelector=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new B(t,this.openings,this.closingSelector))}}]),t}(),B=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).closingSelector=i,o.contexts=[],o.add(Object(j.a)(p(o),r)),o}return _(n,[{key:"_next",value:function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)}},{key:"_error",value:function(t){for(var e=this.contexts;e.length>0;){var r=e.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,u(m(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){for(var t=this.contexts;t.length>0;){var e=t.shift();this.destination.next(e.buffer),e.subscription.unsubscribe(),e.buffer=null,e.subscription=null}this.contexts=null,u(m(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t,e){t?this.closeBuffer(t):this.openBuffer(e)}},{key:"notifyComplete",value:function(t){this.closeBuffer(t.context)}},{key:"openBuffer",value:function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(n){this._error(n)}}},{key:"closeBuffer",value:function(t){var e=this.contexts;if(e&&t){var n=t.buffer,r=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}}},{key:"trySubscribe",value:function(t){var e=this.contexts,n=new L.a,r={buffer:[],subscription:n};e.push(r);var i=Object(j.a)(this,t,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))}}]),n}(R.a);function z(t){return function(e){return e.lift(new V(t))}}var V=function(){function t(e){y(this,t),this.closingSelector=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new U(t,this.closingSelector))}}]),t}(),U=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).closingSelector=r,i.subscribing=!1,i.openBuffer(),i}return _(n,[{key:"_next",value:function(t){this.buffer.push(t)}},{key:"_complete",value:function(){var t=this.buffer;t&&this.destination.next(t),u(m(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){this.buffer=void 0,this.subscribing=!1}},{key:"notifyNext",value:function(){this.openBuffer()}},{key:"notifyComplete",value:function(){this.subscribing?this.complete():this.openBuffer()}},{key:"openBuffer",value:function(){var t,e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe()),this.buffer&&this.destination.next(this.buffer),this.buffer=[];try{t=(0,this.closingSelector)()}catch(n){return this.error(n)}e=new L.a,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(Object(r.c)(t,new r.a(this))),this.subscribing=!1}}]),n}(r.b),q=n("JIr8"),H=n("itXk");function Z(t){return function(e){return e.lift(new H.a(t))}}var G=n("DH7j"),W=n("Cfvw");function X(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&Object(G.a)(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(Object(W.a)([t].concat(o(e))),new H.a(r))}}var K=n("GyhO");function Y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return t.lift.call(Object(K.a).apply(void 0,[t].concat(e)))}}var J=n("0EUg"),$=n("bOdf");function Q(t,e){return Object($.a)(function(){return t},e)}function tt(t){return function(e){return e.lift(new et(t,e))}}var et=function(){function t(e,n){y(this,t),this.predicate=e,this.source=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new nt(t,this.predicate,this.source))}}]),t}(),nt=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).predicate=r,o.source=i,o.count=0,o.index=0,o}return _(n,[{key:"_next",value:function(t){this.predicate?this._tryPredicate(t):this.count++}},{key:"_tryPredicate",value:function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e&&this.count++}},{key:"_complete",value:function(){this.destination.next(this.count),this.destination.complete()}}]),n}(w.a);function rt(t){return function(e){return e.lift(new it(t))}}var it=function(){function t(e){y(this,t),this.durationSelector=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new ot(t,this.durationSelector))}}]),t}(),ot=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).durationSelector=r,i.hasValue=!1,i}return _(n,[{key:"_next",value:function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){this.emitValue(),this.destination.complete()}},{key:"_tryNext",value:function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(r.c)(e,new r.a(this)))&&!n.closed&&this.add(this.durationSubscription=n)}},{key:"notifyNext",value:function(){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){if(this.hasValue){var t=this.value,e=this.durationSubscription;e&&(this.durationSubscription=void 0,e.unsubscribe(),this.remove(e)),this.value=void 0,this.hasValue=!1,u(m(n.prototype),"_next",this).call(this,t)}}}]),n}(r.b);function at(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a;return function(n){return n.lift(new st(t,e))}}var st=function(){function t(e,n){y(this,t),this.dueTime=e,this.scheduler=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new ut(t,this.dueTime,this.scheduler))}}]),t}(),ut=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).dueTime=r,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return _(n,[{key:"_next",value:function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ct,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}},{key:"clearDebounce",value:function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}]),n}(w.a);function ct(t){t.debouncedNext()}var lt=n("xbPD");function ht(t){return t instanceof Date&&!isNaN(+t)}var ft=n("WMd4");function dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a,n=ht(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new pt(n,e))}}var pt=function(){function t(e,n){y(this,t),this.delay=e,this.scheduler=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new vt(t,this.delay,this.scheduler))}}]),t}(),vt=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).delay=r,o.scheduler=i,o.queue=[],o.active=!1,o.errored=!1,o}return _(n,[{key:"_schedule",value:function(t){this.active=!0,this.destination.add(t.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}},{key:"scheduleNotification",value:function(t){if(!0!==this.errored){var e=this.scheduler,n=new mt(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}}},{key:"_next",value:function(t){this.scheduleNotification(ft.a.createNext(t))}},{key:"_error",value:function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(ft.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1}}]),n}(w.a),mt=_(function t(e,n){y(this,t),this.time=e,this.notification=n}),yt=n("HDdC");function gt(t,e){return e?function(n){return new wt(n,e).lift(new _t(t))}:function(e){return e.lift(new _t(t))}}var _t=function(){function t(e){y(this,t),this.delayDurationSelector=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new bt(t,this.delayDurationSelector))}}]),t}(),bt=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).delayDurationSelector=r,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return _(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()}},{key:"notifyError",value:function(t,e){this._error(t)}},{key:"notifyComplete",value:function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()}},{key:"_next",value:function(t){var e=this.index++;try{var n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(r){this.destination.error(r)}}},{key:"_complete",value:function(){this.completed=!0,this.tryComplete(),this.unsubscribe()}},{key:"removeSubscription",value:function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue}},{key:"tryDelay",value:function(t,e){var n=Object(j.a)(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))}},{key:"tryComplete",value:function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}]),n}(R.a),wt=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this)).source=t,i.subscriptionDelay=r,i}return _(n,[{key:"_subscribe",value:function(t){this.subscriptionDelay.subscribe(new xt(t,this.source))}}]),n}(yt.a),xt=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this)).parent=t,i.source=r,i.sourceSubscribed=!1,i}return _(n,[{key:"_next",value:function(t){this.subscribeToSource()}},{key:"_error",value:function(t){this.unsubscribe(),this.parent.error(t)}},{key:"_complete",value:function(){this.unsubscribe(),this.subscribeToSource()}},{key:"subscribeToSource",value:function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))}}]),n}(w.a);function kt(){return function(t){return t.lift(new Ct)}}var Ct=function(){function t(){y(this,t)}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new St(t))}}]),t}(),St=function(t){l(n,t);var e=f(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:"_next",value:function(t){t.observe(this.destination)}}]),n}(w.a);function Et(t,e){return function(n){return n.lift(new Pt(t,e))}}var Pt=function(){function t(e,n){y(this,t),this.keySelector=e,this.flushes=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Ot(t,this.keySelector,this.flushes))}}]),t}(),Ot=function(t){l(n,t);var e=f(n);function n(t,i,o){var a;return y(this,n),(a=e.call(this,t)).keySelector=i,a.values=new Set,o&&a.add(Object(r.c)(o,new r.a(p(a)))),a}return _(n,[{key:"notifyNext",value:function(){this.values.clear()}},{key:"notifyError",value:function(t){this._error(t)}},{key:"_next",value:function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)}},{key:"_useKeySelector",value:function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(r){return void n.error(r)}this._finalizeNext(e,t)}},{key:"_finalizeNext",value:function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))}}]),n}(r.b),Tt=n("/uUt");function At(t,e){return Object(Tt.a)(function(n,r){return e?e(n[t],r[t]):n[t]===r[t]})}var It=n("4I5i"),Dt=n("pLZG"),Mt=n("XDbj"),Lt=n("IzEk");function jt(t,e){if(t<0)throw new It.a;var n=arguments.length>=2;return function(r){return r.pipe(Object(Dt.a)(function(e,n){return n===t}),Object(Lt.a)(1),n?Object(lt.a)(e):Object(Mt.a)(function(){return new It.a}))}}var Rt=n("LRne");function Ft(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return Object(K.a)(t,Object(Rt.a).apply(void 0,e))}}function Nt(t,e){return function(n){return n.lift(new Bt(t,e,n))}}var Bt=function(){function t(e,n,r){y(this,t),this.predicate=e,this.thisArg=n,this.source=r}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new zt(t,this.predicate,this.thisArg,this.source))}}]),t}(),zt=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,t)).predicate=r,a.thisArg=i,a.source=o,a.index=0,a.thisArg=i||p(a),a}return _(n,[{key:"notifyComplete",value:function(t){this.destination.next(t),this.destination.complete()}},{key:"_next",value:function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(w.a);function Vt(){return function(t){return t.lift(new Ut)}}var Ut=function(){function t(){y(this,t)}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new qt(t))}}]),t}(),qt=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).hasCompleted=!1,r.hasSubscription=!1,r}return _(n,[{key:"_next",value:function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(r.c)(t,new r.a(this))))}},{key:"_complete",value:function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()}},{key:"notifyComplete",value:function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}]),n}(r.b),Ht=n("lJxs");function Zt(t,e){return e?function(n){return n.pipe(Zt(function(n,r){return Object(W.a)(t(n,r)).pipe(Object(Ht.a)(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new Gt(t))}}var Gt=function(){function t(e){y(this,t),this.project=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Wt(t,this.project))}}]),t}(),Wt=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).project=r,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return _(n,[{key:"_next",value:function(t){this.hasSubscription||this.tryNext(t)}},{key:"tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=new r.a(this),n=this.destination;n.add(e);var i=Object(r.c)(t,e);i!==e&&n.add(i)}},{key:"_complete",value:function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyError",value:function(t){this.destination.error(t)}},{key:"notifyComplete",value:function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}]),n}(r.b);function Xt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,n=arguments.length>2?arguments[2]:void 0;return e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new Kt(t,e,n))}}var Kt=function(){function t(e,n,r){y(this,t),this.project=e,this.concurrent=n,this.scheduler=r}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Yt(t,this.project,this.concurrent,this.scheduler))}}]),t}(),Yt=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,t)).project=r,a.concurrent=i,a.scheduler=o,a.index=0,a.active=0,a.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(a.buffer=[]),a}return _(n,[{key:"_next",value:function(t){var e=this.destination;if(e.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){e.next(t);try{var i=(0,this.project)(t,r);this.scheduler?this.destination.add(this.scheduler.schedule(n.dispatch,0,{subscriber:this,result:i,value:t,index:r})):this.subscribeToProjection(i,t,r)}catch(o){e.error(o)}}else this.buffer.push(t)}}},{key:"subscribeToProjection",value:function(t,e,n){this.active++,this.destination.add(Object(r.c)(t,new r.a(this)))}},{key:"_complete",value:function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t){this._next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}],[{key:"dispatch",value:function(t){var e=t.subscriber,n=t.result,r=t.value,i=t.index;e.subscribeToProjection(n,r,i)}}]),n}(r.b),Jt=n("nYR2");function $t(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new Qt(t,n,!1,e))}}var Qt=function(){function t(e,n,r,i){y(this,t),this.predicate=e,this.source=n,this.yieldIndex=r,this.thisArg=i}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new te(t,this.predicate,this.source,this.yieldIndex,this.thisArg))}}]),t}(),te=function(t){l(n,t);var e=f(n);function n(t,r,i,o,a){var s;return y(this,n),(s=e.call(this,t)).predicate=r,s.source=i,s.yieldIndex=o,s.thisArg=a,s.index=0,s}return _(n,[{key:"notifyComplete",value:function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()}},{key:"_next",value:function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(i){this.destination.error(i)}}},{key:"_complete",value:function(){this.notifyComplete(this.yieldIndex?-1:void 0)}}]),n}(w.a);function ee(t,e){return function(n){return n.lift(new Qt(t,n,!0,e))}}var ne=n("SxV6"),re=n("OQgR");function ie(){return function(t){return t.lift(new oe)}}var oe=function(){function t(){y(this,t)}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new ae(t))}}]),t}(),ae=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"_next",value:function(t){}}]),n}(w.a);function se(){return function(t){return t.lift(new ue)}}var ue=function(){function t(){y(this,t)}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new ce(t))}}]),t}(),ce=function(t){l(n,t);var e=f(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:"notifyComplete",value:function(t){var e=this.destination;e.next(t),e.complete()}},{key:"_next",value:function(t){this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(w.a),le=n("NJ9Y");function he(t){return function(e){return e.lift(new fe(t))}}var fe=function(){function t(e){y(this,t),this.value=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new de(t,this.value))}}]),t}(),de=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).value=r,i}return _(n,[{key:"_next",value:function(t){this.destination.next(this.value)}}]),n}(w.a);function pe(){return function(t){return t.lift(new ve)}}var ve=function(){function t(){y(this,t)}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new me(t))}}]),t}(),me=function(t){l(n,t);var e=f(n);function n(t){return y(this,n),e.call(this,t)}return _(n,[{key:"_next",value:function(t){this.destination.next(ft.a.createNext(t))}},{key:"_error",value:function(t){var e=this.destination;e.next(ft.a.createError(t)),e.complete()}},{key:"_complete",value:function(){var t=this.destination;t.next(ft.a.createComplete()),t.complete()}}]),n}(w.a),ye=n("Kqap"),ge=n("BFxc"),_e=n("mCNh");function be(t,e){return arguments.length>=2?function(n){return Object(_e.a)(Object(ye.a)(t,e),Object(ge.a)(1),Object(lt.a)(e))(n)}:function(e){return Object(_e.a)(Object(ye.a)(function(e,n,r){return t(e,n,r+1)}),Object(ge.a)(1))(e)}}function we(t){return be("function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e})}var xe=n("VRyK");function ke(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return t.lift.call(Object(xe.a).apply(void 0,[t].concat(e)))}}var Ce=n("bHdf"),Se=n("5+tZ");function Ee(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?Object(Se.b)(function(){return t},e,n):("number"==typeof e&&(n=e),Object(Se.b)(function(){return t},n))}function Pe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return function(r){return r.lift(new Oe(t,e,n))}}var Oe=function(){function t(e,n,r){y(this,t),this.accumulator=e,this.seed=n,this.concurrent=r}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Te(t,this.accumulator,this.seed,this.concurrent))}}]),t}(),Te=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,t)).accumulator=r,a.acc=i,a.concurrent=o,a.hasValue=!1,a.hasCompleted=!1,a.buffer=[],a.active=0,a.index=0,a}return _(n,[{key:"_next",value:function(t){if(this.active<this.concurrent){var e,n=this.index++,r=this.destination;try{e=(0,this.accumulator)(this.acc,t,n)}catch(i){return r.error(i)}this.active++,this._innerSub(e)}else this.buffer.push(t)}},{key:"_innerSub",value:function(t){var e=new r.a(this),n=this.destination;n.add(e);var i=Object(r.c)(t,e);i!==e&&n.add(i)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()}},{key:"notifyNext",value:function(t){var e=this.destination;this.acc=t,this.hasValue=!0,e.next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())}}]),n}(r.b);function Ae(t){return be("function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e})}var Ie=n("oB13"),De=n("pxpQ");function Me(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 1===e.length&&Object(G.a)(e[0])&&(e=e[0]),function(t){return t.lift(new Le(e))}}var Le=function(){function t(e){y(this,t),this.nextSources=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new je(t,this.nextSources))}}]),t}(),je=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).destination=t,i.nextSources=r,i}return _(n,[{key:"notifyError",value:function(){this.subscribeToNextSource()}},{key:"notifyComplete",value:function(){this.subscribeToNextSource()}},{key:"_error",value:function(t){this.subscribeToNextSource(),this.unsubscribe()}},{key:"_complete",value:function(){this.subscribeToNextSource(),this.unsubscribe()}},{key:"subscribeToNextSource",value:function(){var t=this.nextSources.shift();if(t){var e=new r.a(this),n=this.destination;n.add(e);var i=Object(r.c)(t,e);i!==e&&n.add(i)}else this.destination.complete()}}]),n}(r.b);function Re(){return function(t){return t.lift(new Fe)}}var Fe=function(){function t(){y(this,t)}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Ne(t))}}]),t}(),Ne=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).hasPrev=!1,r}return _(n,[{key:"_next",value:function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}]),n}(w.a),Be=n("F97/");function ze(t,e){return function(n){return[Object(Dt.a)(t,e)(n),Object(Dt.a)(Object(Be.a)(t,e))(n)]}}function Ve(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return function(t){return Object(Ht.a)(function(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=null!=r?r[t[i]]:void 0;if(void 0===o)return;r=o}return r}}(e,r))(t)}}var Ue=n("XNiG");function qe(t){return t?Object(Ie.a)(function(){return new Ue.a},t):Object(Ie.a)(new Ue.a)}var He=n("2Vo4");function Ze(t){return function(e){return Object(Ie.a)(new He.a(t))(e)}}var Ge=n("NHP+");function We(){return function(t){return Object(Ie.a)(new Ge.a)(t)}}var Xe=n("jtHE");function Ke(t,e,n,r){n&&"function"!=typeof n&&(r=n);var i="function"==typeof n?n:void 0,o=new Xe.a(t,e,r);return function(t){return Object(Ie.a)(function(){return o},i)(t)}}var Ye=n("Nv8m");function Je(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return 1===e.length&&Object(G.a)(e[0])&&(e=e[0]),t.lift.call(Object(Ye.a).apply(void 0,[t].concat(o(e))))}}var $e=n("EY2u");function Qe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(e){return 0===t?Object($e.b)():e.lift(new tn(t<0?-1:t-1,e))}}var tn=function(){function t(e,n){y(this,t),this.count=e,this.source=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new en(t,this.count,this.source))}}]),t}(),en=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).count=r,o.source=i,o}return _(n,[{key:"complete",value:function(){if(!this.isStopped){var t=this.source,e=this.count;if(0===e)return u(m(n.prototype),"complete",this).call(this);e>-1&&(this.count=e-1),t.subscribe(this._unsubscribeAndRecycle())}}}]),n}(w.a);function nn(t){return function(e){return e.lift(new rn(t))}}var rn=function(){function t(e){y(this,t),this.notifier=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new on(t,this.notifier,e))}}]),t}(),on=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).notifier=r,o.source=i,o.sourceIsBeingSubscribedTo=!0,o}return _(n,[{key:"notifyNext",value:function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)}},{key:"notifyComplete",value:function(){if(!1===this.sourceIsBeingSubscribedTo)return u(m(n.prototype),"complete",this).call(this)}},{key:"complete",value:function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return u(m(n.prototype),"complete",this).call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}}},{key:"_unsubscribe",value:function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._unsubscribe;return this._unsubscribe=null,u(m(n.prototype),"_unsubscribeAndRecycle",this).call(this),this._unsubscribe=t,this}},{key:"subscribeToRetries",value:function(){var t;this.notifications=new Ue.a;try{t=(0,this.notifier)(this.notifications)}catch(e){return u(m(n.prototype),"complete",this).call(this)}this.retries=t,this.retriesSubscription=Object(r.c)(t,new r.a(this))}}]),n}(r.b);function an(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(e){return e.lift(new sn(t,e))}}var sn=function(){function t(e,n){y(this,t),this.count=e,this.source=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new un(t,this.count,this.source))}}]),t}(),un=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).count=r,o.source=i,o}return _(n,[{key:"error",value:function(t){if(!this.isStopped){var e=this.source,r=this.count;if(0===r)return u(m(n.prototype),"error",this).call(this,t);r>-1&&(this.count=r-1),e.subscribe(this._unsubscribeAndRecycle())}}}]),n}(w.a);function cn(t){return function(e){return e.lift(new ln(t,e))}}var ln=function(){function t(e,n){y(this,t),this.notifier=e,this.source=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new hn(t,this.notifier,this.source))}}]),t}(),hn=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).notifier=r,o.source=i,o}return _(n,[{key:"error",value:function(t){if(!this.isStopped){var e=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{e=new Ue.a;try{i=(0,this.notifier)(e)}catch(a){return u(m(n.prototype),"error",this).call(this,a)}o=Object(r.c)(i,new r.a(this))}this._unsubscribeAndRecycle(),this.errors=e,this.retries=i,this.retriesSubscription=o,e.next(t)}}},{key:"_unsubscribe",value:function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}},{key:"notifyNext",value:function(){var t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)}}]),n}(r.b),fn=n("x+ZX");function dn(t){return function(e){return e.lift(new pn(t))}}var pn=function(){function t(e){y(this,t),this.notifier=e}return _(t,[{key:"call",value:function(t,e){var n=new vn(t),i=e.subscribe(n);return i.add(Object(r.c)(this.notifier,new r.a(n))),i}}]),t}(),vn=function(t){l(n,t);var e=f(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).hasValue=!1,t}return _(n,[{key:"_next",value:function(t){this.value=t,this.hasValue=!0}},{key:"notifyNext",value:function(){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}]),n}(r.b);function mn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a;return function(n){return n.lift(new yn(t,e))}}var yn=function(){function t(e,n){y(this,t),this.period=e,this.scheduler=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new gn(t,this.period,this.scheduler))}}]),t}(),gn=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).period=r,o.scheduler=i,o.hasValue=!1,o.add(i.schedule(_n,r,{subscriber:p(o),period:r})),o}return _(n,[{key:"_next",value:function(t){this.lastValue=t,this.hasValue=!0}},{key:"notifyNext",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}]),n}(w.a);function _n(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}function bn(t,e){return function(n){return n.lift(new wn(t,e))}}var wn=function(){function t(e,n){y(this,t),this.compareTo=e,this.comparator=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new xn(t,this.compareTo,this.comparator))}}]),t}(),xn=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).compareTo=r,o.comparator=i,o._a=[],o._b=[],o._oneComplete=!1,o.destination.add(r.subscribe(new kn(t,p(o)))),o}return _(n,[{key:"_next",value:function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())}},{key:"_complete",value:function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()}},{key:"checkValues",value:function(){for(var t=this._a,e=this._b,n=this.comparator;t.length>0&&e.length>0;){var r=t.shift(),i=e.shift(),o=!1;try{o=n?n(r,i):r===i}catch(a){this.destination.error(a)}o||this.emit(!1)}}},{key:"emit",value:function(t){var e=this.destination;e.next(t),e.complete()}},{key:"nextB",value:function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())}},{key:"completeB",value:function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0}}]),n}(w.a),kn=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).parent=r,i}return _(n,[{key:"_next",value:function(t){this.parent.nextB(t)}},{key:"_error",value:function(t){this.parent.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.completeB(),this.unsubscribe()}}]),n}(w.a),Cn=n("w1tV"),Sn=n("UXun"),En=n("sVev");function Pn(t){return function(e){return e.lift(new On(t,e))}}var On=function(){function t(e,n){y(this,t),this.predicate=e,this.source=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Tn(t,this.predicate,this.source))}}]),t}(),Tn=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).predicate=r,o.source=i,o.seenValue=!1,o.index=0,o}return _(n,[{key:"applySingleValue",value:function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)}},{key:"_next",value:function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)}},{key:"tryNext",value:function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new En.a)}}]),n}(w.a);function An(t){return function(e){return e.lift(new In(t))}}var In=function(){function t(e){y(this,t),this.total=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Dn(t,this.total))}}]),t}(),Dn=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return _(n,[{key:"_next",value:function(t){++this.count>this.total&&this.destination.next(t)}}]),n}(w.a);function Mn(t){return function(e){return e.lift(new Ln(t))}}var Ln=function(){function t(e){if(y(this,t),this._skipCount=e,this._skipCount<0)throw new It.a}return _(t,[{key:"call",value:function(t,e){return e.subscribe(0===this._skipCount?new w.a(t):new jn(t,this._skipCount))}}]),t}(),jn=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t))._skipCount=r,i._count=0,i._ring=new Array(r),i}return _(n,[{key:"_next",value:function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}}}]),n}(w.a);function Rn(t){return function(e){return e.lift(new Fn(t))}}var Fn=function(){function t(e){y(this,t),this.notifier=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Nn(t,this.notifier))}}]),t}(),Nn=function(t){l(n,t);var e=f(n);function n(t,i){var o;y(this,n),(o=e.call(this,t)).hasValue=!1;var a=new r.a(p(o));o.add(a),o.innerSubscription=a;var s=Object(r.c)(i,a);return s!==a&&(o.add(s),o.innerSubscription=s),o}return _(n,[{key:"_next",value:function(t){this.hasValue&&u(m(n.prototype),"_next",this).call(this,t)}},{key:"notifyNext",value:function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}},{key:"notifyComplete",value:function(){}}]),n}(r.b);function Bn(t){return function(e){return e.lift(new zn(t))}}var zn=function(){function t(e){y(this,t),this.predicate=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Vn(t,this.predicate))}}]),t}(),Vn=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).predicate=r,i.skipping=!0,i.index=0,i}return _(n,[{key:"_next",value:function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}},{key:"tryCallPredicate",value:function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}}}]),n}(w.a),Un=n("JX91"),qn=n("7Hc7"),Hn=n("Y7HM"),Zn=function(t){l(n,t);var e=f(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qn.a;return y(this,n),(r=e.call(this)).source=t,r.delayTime=i,r.scheduler=o,(!Object(Hn.a)(i)||i<0)&&(r.delayTime=0),o&&"function"==typeof o.schedule||(r.scheduler=qn.a),r}return _(n,[{key:"_subscribe",value:function(t){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:t})}}],[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qn.a;return new n(t,e,r)}},{key:"dispatch",value:function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))}}]),n}(yt.a);function Gn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new Wn(t,e))}}var Wn=function(){function t(e,n){y(this,t),this.scheduler=e,this.delay=n}return _(t,[{key:"call",value:function(t,e){return new Zn(e,this.delay,this.scheduler).subscribe(t)}}]),t}(),Xn=n("eIep"),Kn=n("SpAZ");function Yn(){return Object(Xn.a)(Kn.a)}function Jn(t,e){return e?Object(Xn.a)(function(){return t},e):Object(Xn.a)(function(){return t})}var $n=n("1G5W");function Qn(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return n.lift(new tr(t,e))}}var tr=function(){function t(e,n){y(this,t),this.predicate=e,this.inclusive=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new er(t,this.predicate,this.inclusive))}}]),t}(),er=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).predicate=r,o.inclusive=i,o.index=0,o}return _(n,[{key:"_next",value:function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(t,e)}},{key:"nextOrComplete",value:function(t,e){var n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())}}]),n}(w.a),nr=n("vkgz"),rr={leading:!0,trailing:!1};function ir(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rr;return function(n){return n.lift(new or(t,!!e.leading,!!e.trailing))}}var or=function(){function t(e,n,r){y(this,t),this.durationSelector=e,this.leading=n,this.trailing=r}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new ar(t,this.durationSelector,this.leading,this.trailing))}}]),t}(),ar=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,t)).destination=t,a.durationSelector=r,a._leading=i,a._trailing=o,a._hasValue=!1,a}return _(n,[{key:"_next",value:function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))}},{key:"send",value:function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0}},{key:"throttle",value:function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(r.c)(e,new r.a(this)))}},{key:"tryDurationSelector",value:function(t){try{return this.durationSelector(t)}catch(e){return this.destination.error(e),null}}},{key:"throttlingDone",value:function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=void 0,e&&this.send()}},{key:"notifyNext",value:function(){this.throttlingDone()}},{key:"notifyComplete",value:function(){this.throttlingDone()}}]),n}(r.b);function sr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rr;return function(r){return r.lift(new ur(t,e,n.leading,n.trailing))}}var ur=function(){function t(e,n,r,i){y(this,t),this.duration=e,this.scheduler=n,this.leading=r,this.trailing=i}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new cr(t,this.duration,this.scheduler,this.leading,this.trailing))}}]),t}(),cr=function(t){l(n,t);var e=f(n);function n(t,r,i,o,a){var s;return y(this,n),(s=e.call(this,t)).duration=r,s.scheduler=i,s.leading=o,s.trailing=a,s._hasTrailingValue=!1,s._trailingValue=null,s}return _(n,[{key:"_next",value:function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(lr,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}]),n}(w.a);function lr(t){t.subscriber.clearThrottle()}var hr=n("NXyV");function fr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.a;return function(e){return Object(hr.a)(function(){return e.pipe(Object(ye.a)(function(e,n){var r=e.current;return{value:n,current:t.now(),last:r}},{current:t.now(),value:void 0,last:void 0}),Object(Ht.a)(function(t){var e=t.current,n=t.last,r=t.value;return new dr(r,e-n)}))})}}var dr=_(function t(e,n){y(this,t),this.value=e,this.interval=n}),pr=n("Y6u4");function vr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.a;return function(r){var i=ht(t),o=i?+t-n.now():Math.abs(t);return r.lift(new mr(o,i,e,n))}}var mr=function(){function t(e,n,r,i){y(this,t),this.waitFor=e,this.absoluteTimeout=n,this.withObservable=r,this.scheduler=i}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new yr(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}]),t}(),yr=function(t){l(n,t);var e=f(n);function n(t,r,i,o,a){var s;return y(this,n),(s=e.call(this,t)).absoluteTimeout=r,s.waitFor=i,s.withObservable=o,s.scheduler=a,s.scheduleTimeout(),s}return _(n,[{key:"scheduleTimeout",value:function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(n.dispatchTimeout,this.waitFor,this))}},{key:"_next",value:function(t){this.absoluteTimeout||this.scheduleTimeout(),u(m(n.prototype),"_next",this).call(this,t)}},{key:"_unsubscribe",value:function(){this.action=void 0,this.scheduler=null,this.withObservable=null}}],[{key:"dispatchTimeout",value:function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Object(r.c)(e,new r.a(t)))}}]),n}(r.b),gr=n("z6cu");function _r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.a;return vr(t,Object(gr.a)(new pr.a),e)}function br(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.a;return Object(Ht.a)(function(e){return new wr(e,t.now())})}var wr=_(function t(e,n){y(this,t),this.value=e,this.timestamp=n});function xr(t,e,n){return 0===n?[e]:(t.push(e),t)}function kr(){return be(xr,[])}function Cr(t){return function(e){return e.lift(new Sr(t))}}var Sr=function(){function t(e){y(this,t),this.windowBoundaries=e}return _(t,[{key:"call",value:function(t,e){var n=new Er(t),i=e.subscribe(n);return i.closed||n.add(Object(r.c)(this.windowBoundaries,new r.a(n))),i}}]),t}(),Er=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).window=new Ue.a,t.next(r.window),r}return _(n,[{key:"notifyNext",value:function(){this.openWindow()}},{key:"notifyError",value:function(t){this._error(t)}},{key:"notifyComplete",value:function(){this._complete()}},{key:"_next",value:function(t){this.window.next(t)}},{key:"_error",value:function(t){this.window.error(t),this.destination.error(t)}},{key:"_complete",value:function(){this.window.complete(),this.destination.complete()}},{key:"_unsubscribe",value:function(){this.window=null}},{key:"openWindow",value:function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new Ue.a;e.next(n)}}]),n}(r.b);function Pr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new Or(t,e))}}var Or=function(){function t(e,n){y(this,t),this.windowSize=e,this.startWindowEvery=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Tr(t,this.windowSize,this.startWindowEvery))}}]),t}(),Tr=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).destination=t,o.windowSize=r,o.startWindowEvery=i,o.windows=[new Ue.a],o.count=0,t.next(o.windows[0]),o}return _(n,[{key:"_next",value:function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,a=0;a<o&&!this.closed;a++)i[a].next(t);var s=this.count-r+1;if(s>=0&&s%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var u=new Ue.a;i.push(u),n.next(u)}}},{key:"_error",value:function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)}},{key:"_complete",value:function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()}},{key:"_unsubscribe",value:function(){this.count=0,this.windows=null}}]),n}(w.a);function Ar(t){var e=c.a,n=null,r=Number.POSITIVE_INFINITY;return Object(E.a)(arguments[3])&&(e=arguments[3]),Object(E.a)(arguments[2])?e=arguments[2]:Object(Hn.a)(arguments[2])&&(r=Number(arguments[2])),Object(E.a)(arguments[1])?e=arguments[1]:Object(Hn.a)(arguments[1])&&(n=Number(arguments[1])),function(i){return i.lift(new Ir(t,n,r,e))}}var Ir=function(){function t(e,n,r,i){y(this,t),this.windowTimeSpan=e,this.windowCreationInterval=n,this.maxWindowSize=r,this.scheduler=i}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Mr(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))}}]),t}(),Dr=function(t){l(n,t);var e=f(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments))._numberOfNextedValues=0,t}return _(n,[{key:"next",value:function(t){this._numberOfNextedValues++,u(m(n.prototype),"next",this).call(this,t)}},{key:"numberOfNextedValues",get:function(){return this._numberOfNextedValues}}]),n}(Ue.a),Mr=function(t){l(n,t);var e=f(n);function n(t,r,i,o,a){var s;y(this,n),(s=e.call(this,t)).destination=t,s.windowTimeSpan=r,s.windowCreationInterval=i,s.maxWindowSize=o,s.scheduler=a,s.windows=[];var u=s.openWindow();if(null!==i&&i>=0){var c={windowTimeSpan:r,windowCreationInterval:i,subscriber:p(s),scheduler:a};s.add(a.schedule(Rr,r,{subscriber:p(s),window:u,context:null})),s.add(a.schedule(jr,i,c))}else s.add(a.schedule(Lr,r,{subscriber:p(s),window:u,windowTimeSpan:r}));return s}return _(n,[{key:"_next",value:function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}}},{key:"_error",value:function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)}},{key:"_complete",value:function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()}},{key:"openWindow",value:function(){var t=new Dr;return this.windows.push(t),this.destination.next(t),t}},{key:"closeWindow",value:function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)}}]),n}(w.a);function Lr(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function jr(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,o=n.openWindow(),a={action:this,subscription:null};a.subscription=r.schedule(Rr,e,{subscriber:n,window:o,context:a}),this.add(a.subscription),this.schedule(t,i)}function Rr(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}function Fr(t,e){return function(n){return n.lift(new Nr(t,e))}}var Nr=function(){function t(e,n){y(this,t),this.openings=e,this.closingSelector=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Br(t,this.openings,this.closingSelector))}}]),t}(),Br=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).openings=r,o.closingSelector=i,o.contexts=[],o.add(o.openSubscription=Object(j.a)(p(o),r,r)),o}return _(n,[{key:"_next",value:function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)}},{key:"_error",value:function(t){var e=this.contexts;if(this.contexts=null,e)for(var r=e.length,i=-1;++i<r;){var o=e[i];o.window.error(t),o.subscription.unsubscribe()}u(m(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,r=-1;++r<e;){var i=t[r];i.window.complete(),i.subscription.unsubscribe()}u(m(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}}},{key:"notifyNext",value:function(t,e,n,r,i){if(t===this.openings){var o;try{o=(0,this.closingSelector)(e)}catch(l){return this.error(l)}var a=new Ue.a,s=new L.a,u={window:a,subscription:s};this.contexts.push(u);var c=Object(j.a)(this,o,u);c.closed?this.closeWindow(this.contexts.length-1):(c.context=u,s.add(c)),this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(t))}},{key:"notifyError",value:function(t){this.error(t)}},{key:"notifyComplete",value:function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))}},{key:"closeWindow",value:function(t){if(-1!==t){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}}}]),n}(R.a);function zr(t){return function(e){return e.lift(new Vr(t))}}var Vr=function(){function t(e){y(this,t),this.closingSelector=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new Ur(t,this.closingSelector))}}]),t}(),Ur=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).destination=t,i.closingSelector=r,i.openWindow(),i}return _(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.openWindow(i)}},{key:"notifyError",value:function(t){this._error(t)}},{key:"notifyComplete",value:function(t){this.openWindow(t)}},{key:"_next",value:function(t){this.window.next(t)}},{key:"_error",value:function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()}},{key:"_complete",value:function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()}},{key:"unsubscribeClosingNotification",value:function(){this.closingNotification&&this.closingNotification.unsubscribe()}},{key:"openWindow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n,r=this.window=new Ue.a;this.destination.next(r);try{var i=this.closingSelector;n=i()}catch(o){return this.destination.error(o),void this.window.error(o)}this.add(this.closingNotification=Object(j.a)(this,n))}}]),n}(R.a),qr=n("zp1y"),Hr=n("1uah");function Zr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return t.lift.call(Object(Hr.b).apply(void 0,[t].concat(e)))}}function Gr(t){return function(e){return e.lift(new Hr.a(t))}}},l7GE:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(n("7o/Q").a)},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}var o=function(){function t(e,n){y(this,t),this.project=e,this.thisArg=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))}}]),t}(),a=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).project=r,o.count=0,o.thisArg=i||p(o),o}return _(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(r.a)},lKxJ:function(t,e,n){t.exports=n("2pII"),t.exports.parser=n("+ntK")},luTP:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},mCNh:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("SpAZ");function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o(e)}function o(t){return 0===t.length?r.a:1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}}},mn31:function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e,i,o=t,a=t.indexOf("["),s=t.indexOf("]");-1!=a&&-1!=s&&(t=t.substring(0,a)+t.substring(a,s).replace(/:/g,";")+t.substring(s,t.length));for(var u,c=n.exec(t||""),l={},h=14;h--;)l[r[h]]=c[h]||"";return-1!=a&&-1!=s&&(l.source=o,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=(i=(e=l.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=e.substr(0,1)&&0!==e.length||i.splice(0,1),"/"==e.substr(e.length-1,1)&&i.splice(i.length-1,1),i),l.queryKey=(u={},l.query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,n){e&&(u[e]=n)}),u),l}},mqiu:function(t,e,n){"use strict";n.r(e),n.d(e,"TranslateHttpLoader",function(){return r});var r=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/assets/i18n/",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".json";y(this,t),this.http=e,this.prefix=n,this.suffix=r}return _(t,[{key:"getTranslation",value:function(t){return this.http.get("".concat(this.prefix).concat(t).concat(this.suffix))}}]),t}()},"mr0/":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MapService=void 0,n("fXoL"),n("kQ+e");var a=n("0GDk"),s=o(n("fXoL")),u=o(n("kQ+e")),c=function(){function t(e,n){y(this,t),this.ref=e,this.ls=n,this.events={load:[]},this.onLoadDeferred=new a.Deferred,this.onLoad=this.onLoadDeferred.promise}return _(t,[{key:"setMap",value:function(t){var e=this;this.map=t,t.on("load",function(){e.pitch=t.getPitch().toFixed(0),e.bearing=t.getBearing().toFixed(1),e.zoom=t.getZoom().toFixed(1);var n=t.getCenter();e.lngMap=n.lng.toFixed(4),e.latMap=n.lat.toFixed(4),e.onLoadDeferred.resolve(e.map),e.ref.tick()}),t.on("mousemove",function(t){e.lat=t.lngLat.lat.toFixed(4),e.lng=t.lngLat.lng.toFixed(4),e.ref.tick()}),t.on("move",function(n){e.pitch=t.getPitch().toFixed(0),e.bearing=t.getBearing().toFixed(1),e.zoom=t.getZoom().toFixed(1);var r=t.getCenter();e.lngMap=r.lng.toFixed(4),e.latMap=r.lat.toFixed(4),e.ref.tick()}),t.on("moveend",function(){var n=t.getCenter(),r={lng:n.lng,lat:n.lat,zoom:t.getZoom()};e.ls.mapCenter=r})}},{key:"registerEvent",value:function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)}},{key:"registerChanges",value:function(t){this.foo=t}},{key:"onTrack",value:function(t){}},{key:"map",get:function(){return this._map},set:function(t){this._map=t}}]),t}();e.MapService=c,c.\u0275fac=function(t){return new(t||c)(s.\u0275\u0275inject(s.ApplicationRef),s.\u0275\u0275inject(u.LocalStorage))},c.\u0275prov=s.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac})},mu9K:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.UserService=e.Setting=e.User=void 0,n("XVN5");var a=o(n("fXoL")),s=o(n("XVN5")),u=function(){function t(e){var n=this;y(this,t),this.id=null,this.image=null,this.name=null,this.lastVisit=null,this._initialData={},Object.keys(this).forEach(function(t){"_initialData"!==t&&(e&&(n[t]=e[t]),n._initialData[t]=n[t])})}return _(t,[{key:"update",value:function(t){var e=this;Object.keys(this).forEach(function(n){"_initialData"!==n&&(e[n]=t[n])})}},{key:"clear",value:function(){var t=this;Object.keys(this._initialData).forEach(function(e){"_initialData"!==e&&(t[e]=t._initialData[e])})}},{key:"toJson",value:function(){var t=this,e={};return Object.keys(this).forEach(function(n){"_initialData"!==n&&(e[n]=t[n])}),e}}]),t}();e.User=u;var c=function(){function t(){y(this,t),this.map="",this.lock=!0}return _(t,[{key:"update",value:function(t){var e=this;Object.keys(this).forEach(function(n){e[n]=t[n]})}}]),t}();e.Setting=c;var l=function(){function t(e){y(this,t),this.io=e,this.user=new u,this.setting=new c,this.socket=e.socket}return _(t,[{key:"onUserImage",value:function(t){}},{key:"getSetting",value:function(){return this.setting}},{key:"getUserImageById",value:function(t){}},{key:"getUser",value:function(){return this.user}},{key:"setUser",value:function(t){this.user.update(t),this.id=this.user.id}},{key:"clearUser",value:function(){this.user.clear(),this.id=null}},{key:"setSetting",value:function(t){this.setting.update(t)}},{key:"clearAll",value:function(){}},{key:"createDeviceOther",value:function(t){}}]),t}();e.UserService=l,l.\u0275fac=function(t){return new(t||l)(a.\u0275\u0275inject(s.Io))},l.\u0275prov=a.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac})},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nYR2:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),i=n("quSY");function o(t){return function(e){return e.lift(new a(t))}}var a=function(){function t(e){y(this,t),this.callback=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new s(t,this.callback))}}]),t}(),s=function(t){l(n,t);var e=f(n);function n(t,r){var o;return y(this,n),(o=e.call(this,t)).add(new i.a(r)),o}return _(n)}(r.a)},ng2J:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.popupMaskInAnimation=e.popupItemAnimation=void 0;var r=n("R0Ic");e.popupItemAnimation=r.trigger("popupItemAnimation",[r.transition(":enter",[r.style({opacity:0,transform:"translateY(-20px)"}),r.animate(100,r.style({opacity:1,transform:"translateY(0)"}))]),r.transition(":leave",[r.style({opacity:1}),r.animate(100,r.style({opacity:0,transform:"translateY(-20px)"}))])]),e.popupMaskInAnimation=r.trigger("popupMaskInAnimation",[r.transition(":enter",[r.style({opacity:0}),r.animate(100,r.style({opacity:1}))]),r.transition(":leave",[r.style({opacity:1}),r.animate(100,r.style({opacity:0}))])])},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},oB13:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("EQ5u");function i(t,e){return function(n){var i;if(i="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new o(i,e));var a=Object.create(n,r.b);return a.source=n,a.subjectFactory=i,a}}var o=function(){function t(e,n){y(this,t),this.subjectFactory=e,this.selector=n}return _(t,[{key:"call",value:function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i}}]),t}()},ofXK:function(t,n,r){"use strict";r.r(n),r.d(n,"APP_BASE_HREF",function(){return P}),r.d(n,"AsyncPipe",function(){return le}),r.d(n,"CommonModule",function(){return Te}),r.d(n,"CurrencyPipe",function(){return Ce}),r.d(n,"DOCUMENT",function(){return h}),r.d(n,"DatePipe",function(){return ve}),r.d(n,"DecimalPipe",function(){return xe}),r.d(n,"FormStyle",function(){return R}),r.d(n,"FormatWidth",function(){return N}),r.d(n,"HashLocationStrategy",function(){return T}),r.d(n,"I18nPluralPipe",function(){return ye}),r.d(n,"I18nSelectPipe",function(){return ge}),r.d(n,"JsonPipe",function(){return _e}),r.d(n,"KeyValuePipe",function(){return be}),r.d(n,"LOCATION_INITIALIZED",function(){return m}),r.d(n,"Location",function(){return A}),r.d(n,"LocationStrategy",function(){return S}),r.d(n,"LowerCasePipe",function(){return he}),r.d(n,"NgClass",function(){return qt}),r.d(n,"NgComponentOutlet",function(){return Ht}),r.d(n,"NgForOf",function(){return Gt}),r.d(n,"NgForOfContext",function(){return Zt}),r.d(n,"NgIf",function(){return Xt}),r.d(n,"NgIfContext",function(){return Kt}),r.d(n,"NgLocaleLocalization",function(){return zt}),r.d(n,"NgLocalization",function(){return Nt}),r.d(n,"NgPlural",function(){return ee}),r.d(n,"NgPluralCase",function(){return ne}),r.d(n,"NgStyle",function(){return re}),r.d(n,"NgSwitch",function(){return $t}),r.d(n,"NgSwitchCase",function(){return Qt}),r.d(n,"NgSwitchDefault",function(){return te}),r.d(n,"NgTemplateOutlet",function(){return ie}),r.d(n,"NumberFormatStyle",function(){return L}),r.d(n,"NumberSymbol",function(){return B}),r.d(n,"PathLocationStrategy",function(){return O}),r.d(n,"PercentPipe",function(){return ke}),r.d(n,"PlatformLocation",function(){return p}),r.d(n,"Plural",function(){return j}),r.d(n,"SlicePipe",function(){return Pe}),r.d(n,"TitleCasePipe",function(){return de}),r.d(n,"TranslationWidth",function(){return F}),r.d(n,"UpperCasePipe",function(){return pe}),r.d(n,"VERSION",function(){return Ne}),r.d(n,"ViewportScroller",function(){return Be}),r.d(n,"WeekDay",function(){return z}),r.d(n,"formatCurrency",function(){return Mt}),r.d(n,"formatDate",function(){return yt}),r.d(n,"formatNumber",function(){return jt}),r.d(n,"formatPercent",function(){return Lt}),r.d(n,"getCurrencySymbol",function(){return ct}),r.d(n,"getLocaleCurrencyCode",function(){return et}),r.d(n,"getLocaleCurrencyName",function(){return tt}),r.d(n,"getLocaleCurrencySymbol",function(){return Q}),r.d(n,"getLocaleDateFormat",function(){return X}),r.d(n,"getLocaleDateTimeFormat",function(){return Y}),r.d(n,"getLocaleDayNames",function(){return q}),r.d(n,"getLocaleDayPeriods",function(){return U}),r.d(n,"getLocaleDirection",function(){return at}),r.d(n,"getLocaleEraNames",function(){return Z}),r.d(n,"getLocaleExtraDayPeriodRules",function(){return it}),r.d(n,"getLocaleExtraDayPeriods",function(){return ot}),r.d(n,"getLocaleFirstDayOfWeek",function(){return G}),r.d(n,"getLocaleId",function(){return V}),r.d(n,"getLocaleMonthNames",function(){return H}),r.d(n,"getLocaleNumberFormat",function(){return $}),r.d(n,"getLocaleNumberSymbol",function(){return J}),r.d(n,"getLocalePluralCase",function(){return nt}),r.d(n,"getLocaleTimeFormat",function(){return K}),r.d(n,"getLocaleWeekEndRange",function(){return W}),r.d(n,"getNumberOfCurrencyDigits",function(){return lt}),r.d(n,"isPlatformBrowser",function(){return Le}),r.d(n,"isPlatformServer",function(){return je}),r.d(n,"isPlatformWorkerApp",function(){return Re}),r.d(n,"isPlatformWorkerUi",function(){return Fe}),r.d(n,"registerLocaleData",function(){return Vt}),r.d(n,"\u0275BrowserPlatformLocation",function(){return g}),r.d(n,"\u0275DomAdapter",function(){return c}),r.d(n,"\u0275NullViewportScroller",function(){return Ue}),r.d(n,"\u0275PLATFORM_BROWSER_ID",function(){return Ae}),r.d(n,"\u0275PLATFORM_SERVER_ID",function(){return Ie}),r.d(n,"\u0275PLATFORM_WORKER_APP_ID",function(){return De}),r.d(n,"\u0275PLATFORM_WORKER_UI_ID",function(){return Me}),r.d(n,"\u0275angular_packages_common_common_a",function(){return v}),r.d(n,"\u0275angular_packages_common_common_b",function(){return w}),r.d(n,"\u0275angular_packages_common_common_c",function(){return I}),r.d(n,"\u0275angular_packages_common_common_d",function(){return E}),r.d(n,"\u0275angular_packages_common_common_e",function(){return oe}),r.d(n,"\u0275angular_packages_common_common_f",function(){return Oe}),r.d(n,"\u0275getDOM",function(){return s}),r.d(n,"\u0275parseCookieValue",function(){return Ut}),r.d(n,"\u0275setRootDomAdapter",function(){return u});var o=r("fXoL"),a=null;function s(){return a}function u(t){a||(a=t)}var c=_(function t(){y(this,t)}),h=new o.InjectionToken("DocumentToken"),p=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(o["\u0275\u0275defineInjectable"])({factory:v,token:t,providedIn:"platform"}),t}();function v(){return Object(o["\u0275\u0275inject"])(g)}var m=new o.InjectionToken("Location Initialized"),g=function(){var t=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this))._doc=t,r._init(),r}return _(n,[{key:"_init",value:function(){this.location=s().getLocation(),this._history=s().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return s().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(t,e,n){b()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){b()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}}]),n}(p);return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275inject"](h))},t.\u0275prov=Object(o["\u0275\u0275defineInjectable"])({factory:w,token:t,providedIn:"platform"}),t}();function b(){return!!window.history.pushState}function w(){return new g(Object(o["\u0275\u0275inject"])(h))}function x(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function k(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function C(t){return t&&"?"!==t[0]?"?"+t:t}var S=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(o["\u0275\u0275defineInjectable"])({factory:E,token:t,providedIn:"root"}),t}();function E(t){var e=Object(o["\u0275\u0275inject"])(h).location;return new O(Object(o["\u0275\u0275inject"])(p),e&&e.origin||"")}var P=new o.InjectionToken("appBaseHref"),O=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r){var i;if(y(this,n),(i=e.call(this))._platformLocation=t,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,d(i)}return _(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return x(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+C(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+C(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(S);return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275inject"](p),o["\u0275\u0275inject"](P,8))},t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),T=function(){var t=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this))._platformLocation=t,i._baseHref="",null!=r&&(i._baseHref=r),i}return _(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=x(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+C(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(S);return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275inject"](p),o["\u0275\u0275inject"](P,8))},t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),A=function(){var t=function(){function t(e,n){var r=this;y(this,t),this._subject=new o.EventEmitter,this._urlChangeListeners=[],this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=k(D(i)),this._platformStrategy.onPopState(function(t){r._subject.emit({url:r.path(!0),pop:!0,state:t.state,type:t.type})})}return _(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+C(e))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,D(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+C(e)),n)}},{key:"replaceState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+C(e)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(t){e._notifyUrlChangeListeners(t.url,t.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(t,e)})}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275inject"](S),o["\u0275\u0275inject"](p))},t.normalizeQueryParams=C,t.joinWithSlash=x,t.stripTrailingSlash=k,t.\u0275prov=Object(o["\u0275\u0275defineInjectable"])({factory:I,token:t,providedIn:"root"}),t}();function I(){return new A(Object(o["\u0275\u0275inject"])(S),Object(o["\u0275\u0275inject"])(p))}function D(t){return t.replace(/\/index.html$/,"")}var M={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},L=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),j=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),R=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),F=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),N=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),B=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({}),z=function(t){return t[t.Sunday=0]="Sunday",t[t.Monday=1]="Monday",t[t.Tuesday=2]="Tuesday",t[t.Wednesday=3]="Wednesday",t[t.Thursday=4]="Thursday",t[t.Friday=5]="Friday",t[t.Saturday=6]="Saturday",t}({});function V(t){return Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].LocaleId]}function U(t,e,n){var r=Object(o["\u0275findLocaleData"])(t),i=st([r[o["\u0275LocaleDataIndex"].DayPeriodsFormat],r[o["\u0275LocaleDataIndex"].DayPeriodsStandalone]],e);return st(i,n)}function q(t,e,n){var r=Object(o["\u0275findLocaleData"])(t),i=st([r[o["\u0275LocaleDataIndex"].DaysFormat],r[o["\u0275LocaleDataIndex"].DaysStandalone]],e);return st(i,n)}function H(t,e,n){var r=Object(o["\u0275findLocaleData"])(t),i=st([r[o["\u0275LocaleDataIndex"].MonthsFormat],r[o["\u0275LocaleDataIndex"].MonthsStandalone]],e);return st(i,n)}function Z(t,e){return st(Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].Eras],e)}function G(t){return Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].FirstDayOfWeek]}function W(t){return Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].WeekendRange]}function X(t,e){return st(Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].DateFormat],e)}function K(t,e){return st(Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].TimeFormat],e)}function Y(t,e){return st(Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].DateTimeFormat],e)}function J(t,e){var n=Object(o["\u0275findLocaleData"])(t),r=n[o["\u0275LocaleDataIndex"].NumberSymbols][e];if(void 0===r){if(e===B.CurrencyDecimal)return n[o["\u0275LocaleDataIndex"].NumberSymbols][B.Decimal];if(e===B.CurrencyGroup)return n[o["\u0275LocaleDataIndex"].NumberSymbols][B.Group]}return r}function $(t,e){return Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].NumberFormats][e]}function Q(t){return Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].CurrencySymbol]||null}function tt(t){return Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].CurrencyName]||null}function et(t){return Object(o["\u0275getLocaleCurrencyCode"])(t)}var nt=o["\u0275getLocalePluralCase"];function rt(t){if(!t[o["\u0275LocaleDataIndex"].ExtraData])throw new Error('Missing extra locale data for the locale "'.concat(t[o["\u0275LocaleDataIndex"].LocaleId],'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.'))}function it(t){var e=Object(o["\u0275findLocaleData"])(t);return rt(e),(e[o["\u0275LocaleDataIndex"].ExtraData][2]||[]).map(function(t){return"string"==typeof t?ut(t):[ut(t[0]),ut(t[1])]})}function ot(t,e,n){var r=Object(o["\u0275findLocaleData"])(t);rt(r);var i=st([r[o["\u0275LocaleDataIndex"].ExtraData][0],r[o["\u0275LocaleDataIndex"].ExtraData][1]],e)||[];return st(i,n)||[]}function at(t){return Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].Directionality]}function st(t,e){for(var n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function ut(t){var n=e(t.split(":"),2);return{hours:+n[0],minutes:+n[1]}}function ct(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",r=function(t){return Object(o["\u0275findLocaleData"])(t)[o["\u0275LocaleDataIndex"].Currencies]}(n)[t]||M[t]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||t}function lt(t){var e,n=M[t];return n&&(e=n[2]),"number"==typeof e?e:2}var ht=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ft={},dt=/((?:[^GyYMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,pt=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),vt=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),mt=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function yt(t,n,r,i){var o=function(t){if(At(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){var n=e(t.split("-").map(function(t){return+t}),3),r=n[0],i=n[1],o=void 0===i?1:i,a=n[2];return gt(r,o-1,void 0===a?1:a)}var s,u=parseFloat(t);if(!isNaN(t-u))return new Date(u);if(s=t.match(ht))return function(t){var e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));var a=Number(t[4]||0)-n,s=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,a,s,u,c),e}(s)}var c=new Date(t);if(!At(c))throw new Error('Unable to convert "'.concat(t,'" into a date'));return c}(t);n=_t(r,n)||n;for(var a,s=[];n;){if(!(a=dt.exec(n))){s.push(n);break}var u=(s=s.concat(a.slice(1))).pop();if(!u)break;n=u}var c=o.getTimezoneOffset();i&&(c=Tt(i,c),o=function(t,e,n){var r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Tt(e,r)-r))}(o,i));var l="";return s.forEach(function(t){var e=function(t){if(Ot[t])return Ot[t];var e;switch(t){case"G":case"GG":case"GGG":e=kt(mt.Eras,F.Abbreviated);break;case"GGGG":e=kt(mt.Eras,F.Wide);break;case"GGGGG":e=kt(mt.Eras,F.Narrow);break;case"y":e=xt(vt.FullYear,1,0,!1,!0);break;case"yy":e=xt(vt.FullYear,2,0,!0,!0);break;case"yyy":e=xt(vt.FullYear,3,0,!1,!0);break;case"yyyy":e=xt(vt.FullYear,4,0,!1,!0);break;case"Y":e=Pt(1);break;case"YY":e=Pt(2,!0);break;case"YYY":e=Pt(3);break;case"YYYY":e=Pt(4);break;case"M":case"L":e=xt(vt.Month,1,1);break;case"MM":case"LL":e=xt(vt.Month,2,1);break;case"MMM":e=kt(mt.Months,F.Abbreviated);break;case"MMMM":e=kt(mt.Months,F.Wide);break;case"MMMMM":e=kt(mt.Months,F.Narrow);break;case"LLL":e=kt(mt.Months,F.Abbreviated,R.Standalone);break;case"LLLL":e=kt(mt.Months,F.Wide,R.Standalone);break;case"LLLLL":e=kt(mt.Months,F.Narrow,R.Standalone);break;case"w":e=Et(1);break;case"ww":e=Et(2);break;case"W":e=Et(1,!0);break;case"d":e=xt(vt.Date,1);break;case"dd":e=xt(vt.Date,2);break;case"E":case"EE":case"EEE":e=kt(mt.Days,F.Abbreviated);break;case"EEEE":e=kt(mt.Days,F.Wide);break;case"EEEEE":e=kt(mt.Days,F.Narrow);break;case"EEEEEE":e=kt(mt.Days,F.Short);break;case"a":case"aa":case"aaa":e=kt(mt.DayPeriods,F.Abbreviated);break;case"aaaa":e=kt(mt.DayPeriods,F.Wide);break;case"aaaaa":e=kt(mt.DayPeriods,F.Narrow);break;case"b":case"bb":case"bbb":e=kt(mt.DayPeriods,F.Abbreviated,R.Standalone,!0);break;case"bbbb":e=kt(mt.DayPeriods,F.Wide,R.Standalone,!0);break;case"bbbbb":e=kt(mt.DayPeriods,F.Narrow,R.Standalone,!0);break;case"B":case"BB":case"BBB":e=kt(mt.DayPeriods,F.Abbreviated,R.Format,!0);break;case"BBBB":e=kt(mt.DayPeriods,F.Wide,R.Format,!0);break;case"BBBBB":e=kt(mt.DayPeriods,F.Narrow,R.Format,!0);break;case"h":e=xt(vt.Hours,1,-12);break;case"hh":e=xt(vt.Hours,2,-12);break;case"H":e=xt(vt.Hours,1);break;case"HH":e=xt(vt.Hours,2);break;case"m":e=xt(vt.Minutes,1);break;case"mm":e=xt(vt.Minutes,2);break;case"s":e=xt(vt.Seconds,1);break;case"ss":e=xt(vt.Seconds,2);break;case"S":e=xt(vt.FractionalSeconds,1);break;case"SS":e=xt(vt.FractionalSeconds,2);break;case"SSS":e=xt(vt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ct(pt.Short);break;case"ZZZZZ":e=Ct(pt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ct(pt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ct(pt.Long);break;default:return null}return Ot[t]=e,e}(t);l+=e?e(o,r,c):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function gt(t,e,n){var r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function _t(t,e){var n=V(t);if(ft[n]=ft[n]||{},ft[n][e])return ft[n][e];var r="";switch(e){case"shortDate":r=X(t,N.Short);break;case"mediumDate":r=X(t,N.Medium);break;case"longDate":r=X(t,N.Long);break;case"fullDate":r=X(t,N.Full);break;case"shortTime":r=K(t,N.Short);break;case"mediumTime":r=K(t,N.Medium);break;case"longTime":r=K(t,N.Long);break;case"fullTime":r=K(t,N.Full);break;case"short":var i=_t(t,"shortTime"),o=_t(t,"shortDate");r=bt(Y(t,N.Short),[i,o]);break;case"medium":var a=_t(t,"mediumTime"),s=_t(t,"mediumDate");r=bt(Y(t,N.Medium),[a,s]);break;case"long":var u=_t(t,"longTime"),c=_t(t,"longDate");r=bt(Y(t,N.Long),[u,c]);break;case"full":var l=_t(t,"fullTime"),h=_t(t,"fullDate");r=bt(Y(t,N.Full),[l,h])}return r&&(ft[n][e]=r),r}function bt(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function wt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));for(var a=String(t);a.length<e;)a="0"+a;return r&&(a=a.substr(a.length-e)),o+a}function xt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(o,a){var s,u=function(t,e){switch(t){case vt.FullYear:return e.getFullYear();case vt.Month:return e.getMonth();case vt.Date:return e.getDate();case vt.Hours:return e.getHours();case vt.Minutes:return e.getMinutes();case vt.Seconds:return e.getSeconds();case vt.FractionalSeconds:return e.getMilliseconds();case vt.Day:return e.getDay();default:throw new Error('Unknown DateType value "'.concat(t,'".'))}}(t,o);if((n>0||u>-n)&&(u+=n),t===vt.Hours)0===u&&-12===n&&(u=12);else if(t===vt.FractionalSeconds)return s=e,wt(u,3).substr(0,s);var c=J(a,B.MinusSign);return wt(u,e,c,r,i)}}function kt(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.Format,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(o,a){return function(t,n,r,i,o,a){switch(r){case mt.Months:return H(n,o,i)[t.getMonth()];case mt.Days:return q(n,o,i)[t.getDay()];case mt.DayPeriods:var s=t.getHours(),u=t.getMinutes();if(a){var c=it(n),l=ot(n,o,i),h=c.findIndex(function(t){if(Array.isArray(t)){var n=e(t,2),r=n[0],i=n[1],o=s>=r.hours&&u>=r.minutes,a=s<i.hours||s===i.hours&&u<i.minutes;if(r.hours<i.hours){if(o&&a)return!0}else if(o||a)return!0}else if(t.hours===s&&t.minutes===u)return!0;return!1});if(-1!==h)return l[h]}return U(n,o,i)[s<12?0:1];case mt.Eras:return Z(n,i)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type ".concat(r))}}(o,a,t,n,r,i)}}function Ct(t){return function(e,n,r){var i=-1*r,o=J(n,B.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case pt.Short:return(i>=0?"+":"")+wt(a,2,o)+wt(Math.abs(i%60),2,o);case pt.ShortGMT:return"GMT"+(i>=0?"+":"")+wt(a,1,o);case pt.Long:return"GMT"+(i>=0?"+":"")+wt(a,2,o)+":"+wt(Math.abs(i%60),2,o);case pt.Extended:return 0===r?"Z":(i>=0?"+":"")+wt(a,2,o)+":"+wt(Math.abs(i%60),2,o);default:throw new Error('Unknown zone width "'.concat(t,'"'))}}}function St(t){return gt(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function Et(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var i,o,a;if(e){var s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,u=n.getDate();i=1+Math.floor((u+s)/7)}else{var c=St(n),l=(o=c.getFullYear(),a=gt(o,0,1).getDay(),gt(o,0,1+(a<=4?4:11)-a)),h=c.getTime()-l.getTime();i=1+Math.round(h/6048e5)}return wt(i,t,J(r,B.MinusSign))}}function Pt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){return wt(St(n).getFullYear(),t,J(r,B.MinusSign),e)}}var Ot={};function Tt(t,e){t=t.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function At(t){return t instanceof Date&&!isNaN(t.valueOf())}var It=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Dt(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s="",u=!1;if(isFinite(t)){var c=function(t){var e,n,r,i,o,a=Math.abs(t)+"",s=0;for((n=a.indexOf("."))>-1&&(a=a.replace(".","")),(r=a.search(/e/i))>0?(n<0&&(n=r),n+=+a.slice(r+1),a=a.substring(0,r)):n<0&&(n=a.length),r=0;"0"===a.charAt(r);r++);if(r===(o=a.length))e=[0],n=1;else{for(o--;"0"===a.charAt(o);)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(a.charAt(r))}return n>22&&(e=e.splice(0,21),s=n-1,n=1),{digits:e,exponent:s,integerLen:n}}(t);a&&(c=function(t){if(0===t.digits[0])return t;var e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));var l=e.minInt,h=e.minFrac,f=e.maxFrac;if(o){var d=o.match(It);if(null===d)throw new Error("".concat(o," is not a valid digit info"));var p=d[1],v=d[3],m=d[5];null!=p&&(l=Ft(p)),null!=v&&(h=Ft(v)),null!=m?f=Ft(m):null!=v&&h>f&&(f=h)}!function(t,e,n){if(e>n)throw new Error("The minimum number of digits after fraction (".concat(e,") is higher than the maximum (").concat(n,")."));var r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),a=o+t.integerLen,s=r[a];if(a>0){r.splice(Math.max(t.integerLen,a));for(var u=a;u<r.length;u++)r[u]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,a=o+1),r[0]=0;for(var c=1;c<a;c++)r[c]=0}if(s>=5)if(a-1<0){for(var l=0;l>a;l--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[a-1]++;for(;i<Math.max(0,o);i++)r.push(0);var h=0!==o,f=e+t.integerLen,d=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,h&&(0===r[n]&&n>=f?r.pop():h=!1),e>=10?1:0},0);d&&(r.unshift(d),t.integerLen++)}(c,h,f);var y=c.digits,g=c.integerLen,_=c.exponent,b=[];for(u=y.every(function(t){return!t});g<l;g++)y.unshift(0);for(;g<0;g++)y.unshift(0);g>0?b=y.splice(g,y.length):(b=y,y=[0]);var w=[];for(y.length>=e.lgSize&&w.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)w.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&w.unshift(y.join("")),s=w.join(J(n,r)),b.length&&(s+=J(n,i)+b.join("")),_&&(s+=J(n,B.Exponential)+"+"+_)}else s=J(n,B.Infinity);return s=t<0&&!u?e.negPre+s+e.negSuf:e.posPre+s+e.posSuf}function Mt(t,e,n,r,i){var o=Rt($(e,L.Currency),J(e,B.MinusSign));return o.minFrac=lt(r),o.maxFrac=o.minFrac,Dt(t,o,e,B.CurrencyGroup,B.CurrencyDecimal,i).replace("\xa4",n).replace("\xa4","").trim()}function Lt(t,e,n){return Dt(t,Rt($(e,L.Percent),J(e,B.MinusSign)),e,B.Group,B.Decimal,n,!0).replace(new RegExp("%","g"),J(e,B.PercentSign))}function jt(t,e,n){return Dt(t,Rt($(e,L.Decimal),J(e,B.MinusSign)),e,B.Group,B.Decimal,n)}function Rt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],a=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],s=a[0],u=a[1]||"";n.posPre=s.substr(0,s.indexOf("#"));for(var c=0;c<u.length;c++){var l=u.charAt(c);"0"===l?n.minFrac=n.maxFrac=c+1:"#"===l?n.maxFrac=c+1:n.posSuf+=l}var h=s.split(",");if(n.gSize=h[1]?h[1].length:0,n.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,o){var f=i.length-n.posPre.length-n.posSuf.length,d=o.indexOf("#");n.negPre=o.substr(0,d).replace(/'/g,""),n.negSuf=o.substr(d+f).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function Ft(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}var Nt=_(function t(){y(this,t)});function Bt(t,e,n,r){var i="=".concat(t);if(e.indexOf(i)>-1)return i;if(i=n.getPluralCategory(t,r),e.indexOf(i)>-1)return i;if(e.indexOf("other")>-1)return"other";throw new Error('No plural message found for value "'.concat(t,'"'))}var zt=function(){var t=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this)).locale=t,r}return _(n,[{key:"getPluralCategory",value:function(t,e){switch(nt(e||this.locale)(t)){case j.Zero:return"zero";case j.One:return"one";case j.Two:return"two";case j.Few:return"few";case j.Many:return"many";default:return"other"}}}]),n}(Nt);return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275inject"](o.LOCALE_ID))},t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();function Vt(t,e,n){return Object(o["\u0275registerLocaleData"])(t,e,n)}function Ut(t,n){n=encodeURIComponent(n);var r,o=i(t.split(";"));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.indexOf("="),u=e(-1==s?[a,""]:[a.slice(0,s),a.slice(s+1)],2),c=u[0],l=u[1];if(c.trim()===n)return decodeURIComponent(l)}}catch(h){o.e(h)}finally{o.f()}return null}var qt=function(){var t=function(){function t(e,n,r,i){y(this,t),this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return _(t,[{key:"klass",set:function(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(o["\u0275isListLikeIterable"])(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){var e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}},{key:"_applyKeyValueChanges",value:function(t){var e=this;t.forEachAddedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._toggleClass(t.key,t.currentValue)}),t.forEachRemovedItem(function(t){t.previousValue&&e._toggleClass(t.key,!1)})}},{key:"_applyIterableChanges",value:function(t){var e=this;t.forEachAddedItem(function(t){if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat(Object(o["\u0275stringify"])(t.item)));e._toggleClass(t.item,!0)}),t.forEachRemovedItem(function(t){return e._toggleClass(t.item,!1)})}},{key:"_applyClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return e._toggleClass(t,!0)}):Object.keys(t).forEach(function(n){return e._toggleClass(n,!!t[n])}))}},{key:"_removeClasses",value:function(t){var e=this;t&&(Array.isArray(t)||t instanceof Set?t.forEach(function(t){return e._toggleClass(t,!1)}):Object.keys(t).forEach(function(t){return e._toggleClass(t,!1)}))}},{key:"_toggleClass",value:function(t,e){var n=this;(t=t.trim())&&t.split(/\s+/g).forEach(function(t){e?n._renderer.addClass(n._ngEl.nativeElement,t):n._renderer.removeClass(n._ngEl.nativeElement,t)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.IterableDiffers),o["\u0275\u0275directiveInject"](o.KeyValueDiffers),o["\u0275\u0275directiveInject"](o.ElementRef),o["\u0275\u0275directiveInject"](o.Renderer2))},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t}(),Ht=function(){var t=function(){function t(e){y(this,t),this._viewContainerRef=e,this._componentRef=null,this._moduleRef=null}return _(t,[{key:"ngOnChanges",value:function(t){if(this._viewContainerRef.clear(),this._componentRef=null,this.ngComponentOutlet){var e=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;if(t.ngComponentOutletNgModuleFactory)if(this._moduleRef&&this._moduleRef.destroy(),this.ngComponentOutletNgModuleFactory){var n=e.get(o.NgModuleRef);this._moduleRef=this.ngComponentOutletNgModuleFactory.create(n.injector)}else this._moduleRef=null;var r=(this._moduleRef?this._moduleRef.componentFactoryResolver:e.get(o.ComponentFactoryResolver)).resolveComponentFactory(this.ngComponentOutlet);this._componentRef=this._viewContainerRef.createComponent(r,this._viewContainerRef.length,e,this.ngComponentOutletContent)}}},{key:"ngOnDestroy",value:function(){this._moduleRef&&this._moduleRef.destroy()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.ViewContainerRef))},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},features:[o["\u0275\u0275NgOnChangesFeature"]]}),t}(),Zt=function(){function t(e,n,r,i){y(this,t),this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}return _(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),Gt=function(){var t=function(){function t(e,n,r){y(this,t),this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return _(t,[{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(t){this._trackByFn=t}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new Zt(null,e._ngForOf,-1,-1),null===i?void 0:i),a=new Wt(t,o);n.push(a)}else if(null==i)e._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=e._viewContainer.get(r);e._viewContainer.move(s,i);var u=new Wt(t,s);n.push(u)}});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var a=this._viewContainer.get(i);a.context.index=i,a.context.count=o,a.context.ngForOf=this._ngForOf}t.forEachIdentityChange(function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item})}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.ViewContainerRef),o["\u0275\u0275directiveInject"](o.TemplateRef),o["\u0275\u0275directiveInject"](o.IterableDiffers))},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t}(),Wt=_(function t(e,n){y(this,t),this.record=e,this.view=n}),Xt=function(){var t=function(){function t(e,n){y(this,t),this._viewContainer=e,this._context=new Kt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _(t,[{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){Yt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){Yt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.ViewContainerRef),o["\u0275\u0275directiveInject"](o.TemplateRef))},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t}(),Kt=_(function t(){y(this,t),this.$implicit=null,this.ngIf=null});function Yt(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(Object(o["\u0275stringify"])(e),"'."))}var Jt=function(){function t(e,n){y(this,t),this._viewContainerRef=e,this._templateRef=n,this._created=!1}return _(t,[{key:"create",value:function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}},{key:"destroy",value:function(){this._created=!1,this._viewContainerRef.clear()}},{key:"enforceState",value:function(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}]),t}(),$t=function(){var t=function(){function t(){y(this,t),this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return _(t,[{key:"ngSwitch",set:function(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}},{key:"_addCase",value:function(){return this._caseCount++}},{key:"_addDefault",value:function(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}},{key:"_matchCase",value:function(t){var e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}},{key:"_updateDefaultCases",value:function(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(var e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t}(),Qt=function(){var t=function(){function t(e,n,r){y(this,t),this.ngSwitch=r,r._addCase(),this._view=new Jt(e,n)}return _(t,[{key:"ngDoCheck",value:function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.ViewContainerRef),o["\u0275\u0275directiveInject"](o.TemplateRef),o["\u0275\u0275directiveInject"]($t,9))},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t}(),te=function(){var t=_(function t(e,n,r){y(this,t),r._addDefault(new Jt(e,n))});return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.ViewContainerRef),o["\u0275\u0275directiveInject"](o.TemplateRef),o["\u0275\u0275directiveInject"]($t,9))},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngSwitchDefault",""]]}),t}(),ee=function(){var t=function(){function t(e){y(this,t),this._localization=e,this._caseViews={}}return _(t,[{key:"ngPlural",set:function(t){this._switchValue=t,this._updateView()}},{key:"addCase",value:function(t,e){this._caseViews[t]=e}},{key:"_updateView",value:function(){this._clearViews();var t=Object.keys(this._caseViews),e=Bt(this._switchValue,t,this._localization);this._activateView(this._caseViews[e])}},{key:"_clearViews",value:function(){this._activeView&&this._activeView.destroy()}},{key:"_activateView",value:function(t){t&&(this._activeView=t,this._activeView.create())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](Nt))},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngPlural",""]],inputs:{ngPlural:"ngPlural"}}),t}(),ne=function(){var t=_(function t(e,n,r,i){y(this,t),this.value=e;var o=!isNaN(Number(e));i.addCase(o?"=".concat(e):e,new Jt(r,n))});return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275injectAttribute"]("ngPluralCase"),o["\u0275\u0275directiveInject"](o.TemplateRef),o["\u0275\u0275directiveInject"](o.ViewContainerRef),o["\u0275\u0275directiveInject"](ee,1))},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngPluralCase",""]]}),t}(),re=function(){var t=function(){function t(e,n,r){y(this,t),this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}return _(t,[{key:"ngStyle",set:function(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}},{key:"ngDoCheck",value:function(){if(this._differ){var t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}},{key:"_setStyle",value:function(t,n){var r=e(t.split("."),2),i=r[0],o=r[1];null!=(n=null!=n&&o?"".concat(n).concat(o):n)?this._renderer.setStyle(this._ngEl.nativeElement,i,n):this._renderer.removeStyle(this._ngEl.nativeElement,i)}},{key:"_applyChanges",value:function(t){var e=this;t.forEachRemovedItem(function(t){return e._setStyle(t.key,null)}),t.forEachAddedItem(function(t){return e._setStyle(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e._setStyle(t.key,t.currentValue)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.ElementRef),o["\u0275\u0275directiveInject"](o.KeyValueDiffers),o["\u0275\u0275directiveInject"](o.Renderer2))},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t}(),ie=function(){var t=function(){function t(e){y(this,t),this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}return _(t,[{key:"ngOnChanges",value:function(t){if(this._shouldRecreateView(t)){var e=this._viewContainerRef;this._viewRef&&e.remove(e.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?e.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}},{key:"_shouldRecreateView",value:function(t){var e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}},{key:"_hasContextShapeChanged",value:function(t){var e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){var r,o=i(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(-1===e.indexOf(a))return!0}}catch(s){o.e(s)}finally{o.f()}return!1}return!0}},{key:"_updateExistingContext",value:function(t){for(var e=0,n=Object.keys(t);e<n.length;e++){var r=n[e];this._viewRef.context[r]=this.ngTemplateOutletContext[r]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.ViewContainerRef))},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[o["\u0275\u0275NgOnChangesFeature"]]}),t}(),oe=[qt,Ht,Gt,Xt,ie,re,$t,Qt,te,ee,ne];function ae(t,e){return Error("InvalidPipeArgument: '".concat(e,"' for pipe '").concat(Object(o["\u0275stringify"])(t),"'"))}var se=function(){function t(){y(this,t)}return _(t,[{key:"createSubscription",value:function(t,e){return t.subscribe({next:e,error:function(t){throw t}})}},{key:"dispose",value:function(t){t.unsubscribe()}},{key:"onDestroy",value:function(t){t.unsubscribe()}}]),t}(),ue=new(function(){function t(){y(this,t)}return _(t,[{key:"createSubscription",value:function(t,e){return t.then(e,function(t){throw t})}},{key:"dispose",value:function(t){}},{key:"onDestroy",value:function(t){}}]),t}()),ce=new se,le=function(){var t=function(){function t(e){y(this,t),this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}return _(t,[{key:"ngOnDestroy",value:function(){this._subscription&&this._dispose()}},{key:"transform",value:function(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}},{key:"_subscribe",value:function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,function(n){return e._updateLatestValue(t,n)})}},{key:"_selectStrategy",value:function(e){if(Object(o["\u0275isPromise"])(e))return ue;if(Object(o["\u0275isSubscribable"])(e))return ce;throw ae(t,e)}},{key:"_dispose",value:function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}},{key:"_updateLatestValue",value:function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275injectPipeChangeDetectorRef"]())},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"async",type:t,pure:!1}),t}(),he=function(){var t=function(){function t(){y(this,t)}return _(t,[{key:"transform",value:function(e){if(null==e)return null;if("string"!=typeof e)throw ae(t,e);return e.toLowerCase()}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"lowercase",type:t,pure:!0}),t}(),fe=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g,de=function(){var t=function(){function t(){y(this,t)}return _(t,[{key:"transform",value:function(e){if(null==e)return null;if("string"!=typeof e)throw ae(t,e);return e.replace(fe,function(t){return t[0].toUpperCase()+t.substr(1).toLowerCase()})}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"titlecase",type:t,pure:!0}),t}(),pe=function(){var t=function(){function t(){y(this,t)}return _(t,[{key:"transform",value:function(e){if(null==e)return null;if("string"!=typeof e)throw ae(t,e);return e.toUpperCase()}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"uppercase",type:t,pure:!0}),t}(),ve=function(){var t=function(){function t(e){y(this,t),this.locale=e}return _(t,[{key:"transform",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mediumDate",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(null==e||""===e||e!=e)return null;try{return yt(e,n,i||this.locale,r)}catch(o){throw ae(t,o.message)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.LOCALE_ID))},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"date",type:t,pure:!0}),t}(),me=/#/g,ye=function(){var t=function(){function t(e){y(this,t),this._localization=e}return _(t,[{key:"transform",value:function(e,n,r){if(null==e)return"";if("object"!=typeof n||null===n)throw ae(t,n);return n[Bt(e,Object.keys(n),this._localization,r)].replace(me,e.toString())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](Nt))},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"i18nPlural",type:t,pure:!0}),t}(),ge=function(){var t=function(){function t(){y(this,t)}return _(t,[{key:"transform",value:function(e,n){if(null==e)return"";if("object"!=typeof n||"string"!=typeof e)throw ae(t,n);return n.hasOwnProperty(e)?n[e]:n.hasOwnProperty("other")?n.other:""}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"i18nSelect",type:t,pure:!0}),t}(),_e=function(){var t=function(){function t(){y(this,t)}return _(t,[{key:"transform",value:function(t){return JSON.stringify(t,null,2)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"json",type:t,pure:!1}),t}(),be=function(){var t=function(){function t(e){y(this,t),this.differs=e,this.keyValues=[]}return _(t,[{key:"transform",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:we;if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());var r=this.differ.diff(t);return r&&(this.keyValues=[],r.forEachItem(function(t){e.keyValues.push({key:t.key,value:t.currentValue})}),this.keyValues.sort(n)),this.keyValues}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.KeyValueDiffers))},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"keyvalue",type:t,pure:!1}),t}();function we(t,e){var n=t.key,r=e.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;var i=String(n),o=String(r);return i==o?0:i<o?-1:1}var xe=function(){var t=function(){function t(e){y(this,t),this._locale=e}return _(t,[{key:"transform",value:function(e,n,r){if(!Se(e))return null;r=r||this._locale;try{return jt(Ee(e),r,n)}catch(i){throw ae(t,i.message)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.LOCALE_ID))},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"number",type:t,pure:!0}),t}(),ke=function(){var t=function(){function t(e){y(this,t),this._locale=e}return _(t,[{key:"transform",value:function(e,n,r){if(!Se(e))return null;r=r||this._locale;try{return Lt(Ee(e),r,n)}catch(i){throw ae(t,i.message)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.LOCALE_ID))},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"percent",type:t,pure:!0}),t}(),Ce=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";y(this,t),this._locale=e,this._defaultCurrencyCode=n}return _(t,[{key:"transform",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"symbol",i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(!Se(e))return null;o=o||this._locale,"boolean"==typeof r&&(r=r?"symbol":"code");var a=n||this._defaultCurrencyCode;"code"!==r&&(a="symbol"===r||"symbol-narrow"===r?ct(a,"symbol"===r?"wide":"narrow",o):r);try{return Mt(Ee(e),o,a,n,i)}catch(s){throw ae(t,s.message)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.LOCALE_ID),o["\u0275\u0275directiveInject"](o.DEFAULT_CURRENCY_CODE))},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"currency",type:t,pure:!0}),t}();function Se(t){return!(null==t||""===t||t!=t)}function Ee(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error("".concat(t," is not a number"));return t}var Pe=function(){var t=function(){function t(){y(this,t)}return _(t,[{key:"transform",value:function(e,n,r){if(null==e)return null;if(!this.supports(e))throw ae(t,e);return e.slice(n,r)}},{key:"supports",value:function(t){return"string"==typeof t||Array.isArray(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"slice",type:t,pure:!1}),t}(),Oe=[le,pe,he,_e,Pe,xe,ke,de,Ce,ve,ye,ge,be],Te=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({providers:[{provide:Nt,useClass:zt}]}),t}(),Ae="browser",Ie="server",De="browserWorkerApp",Me="browserWorkerUi";function Le(t){return t===Ae}function je(t){return t===Ie}function Re(t){return t===De}function Fe(t){return t===Me}var Ne=new o.Version("11.2.14"),Be=function(){var t=_(function t(){y(this,t)});return t.\u0275prov=Object(o["\u0275\u0275defineInjectable"])({token:t,providedIn:"root",factory:function(){return new ze(Object(o["\u0275\u0275inject"])(h),window)}}),t}(),ze=function(){function t(e,n){y(this,t),this.document=e,this.window=n,this.offset=function(){return[0,0]}}return _(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportsScrolling()){var e=function(t,e){var n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow))for(var r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;i;){var o=i.shadowRoot;if(o){var a=o.getElementById(e)||o.querySelector('[name="'.concat(e,'"]'));if(a)return a}i=r.nextNode()}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(t){return t.focus(),this.document.activeElement===t}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var t=Ve(this.window.history)||Ve(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}]),t}();function Ve(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}var Ue=function(){function t(){y(this,t)}return _(t,[{key:"setOffset",value:function(t){}},{key:"getScrollPosition",value:function(){return[0,0]}},{key:"scrollToPosition",value:function(t){}},{key:"scrollToAnchor",value:function(t){}},{key:"setHistoryScrollRestoration",value:function(t){}}]),t}()},otBb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},otXa:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ChatComponent=void 0,n("jHPu");var a=o(n("fXoL")),s=o(n("jHPu")),u=o(n("ofXK")),c=o(n("ZhIg"));function l(t,e){if(1&t&&(a.\u0275\u0275elementStart(0,"div",1),a.\u0275\u0275element(1,"chat-room",2),a.\u0275\u0275elementEnd()),2&t){var n=e.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("room",n)}}var h=function(){function t(e){y(this,t),this.chatService=e,this.rooms=e.rooms}return _(t,[{key:"sortByFn",value:function(t,e){return e.id}}]),t}();e.ChatComponent=h,h.\u0275fac=function(t){return new(t||h)(a.\u0275\u0275directiveInject(s.ChatService))},h.\u0275cmp=a.\u0275\u0275defineComponent({type:h,selectors:[["chat-component"]],decls:1,vars:2,consts:[["class","room",4,"ngFor","ngForOf","ngForTrackBy"],[1,"room"],[3,"room"]],template:function(t,e){1&t&&a.\u0275\u0275template(0,l,2,1,"div",0),2&t&&a.\u0275\u0275property("ngForOf",e.rooms)("ngForTrackBy",e.sortByFn)},directives:[u.NgForOf,c.ChatRoomComponent],styles:["[_nghost-%COMP%]{position:absolute;right:0;bottom:0;z-index:2}.room[_ngcontent-%COMP%]:not(:last-child){margin-bottom:15px}"]})},p23U:function(t,r,i){"use strict";var o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return a(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.OneItemTrackComponent=void 0;var c=i("8R26"),h=(i("+ZYu"),i("mr0/"),i("5IPO")),d=(i("Zq4v"),i("tyNb"),s(i("sX7g"))),p=i("JLh1"),v=u(i("ubkq")),m=i("f7CA"),g=(i("wlYr"),s(i("fXoL"))),b=s(i("+ZYu")),w=s(i("mr0/")),x=s(i("wlYr")),k=s(i("tyNb")),C=s(i("Zq4v")),S=s(i("ofXK")),E=s(i("sYmb"));function P(t,e){if(1&t){var n=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",11),g.\u0275\u0275listener("click",function(){return g.\u0275\u0275restoreView(n),g.\u0275\u0275nextContext().stravaExport()}),g.\u0275\u0275elementEnd()}}function O(t,e){if(1&t){var n=g.\u0275\u0275getCurrentView();g.\u0275\u0275elementStart(0,"div",12),g.\u0275\u0275listener("click",function(){return g.\u0275\u0275restoreView(n),g.\u0275\u0275nextContext().stravaExport()}),g.\u0275\u0275elementEnd()}}var T=function(){function t(e,n,r,i,o){y(this,t),this.trackService=e,this.mapService=n,this.toast=r,this.router=i,this.stravaService=o,this.util=new h.Util}return _(t,[{key:"ngOnInit",value:function(){var t=this;console.log(this.track);var e=d.pluck("speed")(this.track.points);this.maxSpeed=Math.max.apply(null,e),this.mapService.onLoad.then(function(e){t.map=e,t.mapEventInit()});var r,i,o=new(function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.call(this)}return _(n,[{key:"setValue",value:function(t){return this.lat=t.lat,this.lng=t.lng,this[0]=this.lng,this[1]=this.lat,this}}]),n}(n(Array)));this.mouseMove=function(e){if(e.originalEvent.ctrlKey){e.originalEvent.stopPropagation();var n=p.distance([o.lng,o.lat],[e.lngLat.lng,e.lngLat.lat]);r?r.update(o,n):r=t.createArea({radius:n,lng:o.lng,lat:o.lat}),i=t.track.points.filter(function(t){return p.distance([o.lng,o.lat],[t.lng,t.lat])<n})}},this.mouseMapDown=function(e){o.setValue(e.lngLat),t.map.on("mousemove",t.mouseMove)},this.mouseMapUp=function(){t.map.off("mousemove",t.mouseMove),r&&(r.remove(),r=null,i.length&&t.trackService.delPoints(t.track.id,i))}}},{key:"createArea",value:function(n){var r=t.getNewLayerId(),i=n.radius||.5,o=this.map;function a(t,e,n){n||(n=64);for(var r,i,o,a=t[1],s=t[0],u=e,c=[],l=u/(111.32*Math.cos(a*Math.PI/180)),h=u/110.574,f=0;f<n;f++)r=f/n*(2*Math.PI),i=l*Math.cos(r),o=h*Math.sin(r),c.push([s+i,a+o]);return c.push(c[0]),{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[c]}}]}}return this.map.addSource(r,{type:"geojson",data:a([n.lng,n.lat],i)}),this.map.addLayer({id:r,type:"fill",source:r,layout:{},paint:{"fill-color":"red","fill-opacity":.3}}),{id:n.id||null,layerId:r,lng:n.lng,lat:n.lat,radius:i,update:function(t,n){var i=e(t,2),s=i[0],u=i[1];return this.lng=s,this.lat=u,o.getSource(r).setData(a([s,u],n)),this},remove:function(){return o.removeLayer(r),o.removeSource(r),this}}}},{key:"mapEventInit",value:function(){this.map.on("mousedown",this.mouseMapDown),this.map.on("mouseup",this.mouseMapUp)}},{key:"hideTrack",value:function(){this.stop&&this.stop(),this.trackService.removeTrack(this.track)}},{key:"saveChange",value:function(){var t=this;this.track.xmlDoc?this.trackService.downloadTrack(this.track).then(function(e){e&&"ok"==e.result?t.toast.show({type:"success",text:"\u0422\u0440\u0435\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0432 \u0431\u0430\u0437\u0443"}):e&&!e.result&&"point exist"==e.message&&t.toast.show({type:"error",text:"\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u043e\u0447\u043a\u0438 \u0438\u0437 \u0434\u043d\u043d\u043e\u0433\u043e \u0442\u0440\u0435\u043a\u0430 \u0431\u044b\u043b\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b \u0440\u0430\u043d\u0435\u0435"}),console.log(e)}):this.trackService.saveChange()}},{key:"onGo",value:function(t){this.stop&&this.stop();var e,n=this,r=this.mapService.map,i=this.fillTrack(t.points),o=this.trackService.marker(i[0]),a=0,s=1;function u(){switch(!0){case r.getZoom()<10:s=40;break;case r.getZoom()<18:s=5*parseInt(""+(18-r.getZoom()));break;default:s=1}}!function t(){i[a]&&(r.setCenter([i[a].lng,i[a].lat]),o.update(i[a])),a<i.length-2?e=setTimeout(function(){a+=s,t()},40):(n.stop(),r.off("moveend",u))}(),r.on("moveend",u),this.stop=function(){clearTimeout(e),o.remove()}}},{key:"fillTrack",value:function(t){var e=this,n=[];return parseFloat,t.forEach(function(r,i){if(i<t.length-1){var o=parseInt(e.util.distanceBetween2(r,t[i+1])+""),a=function(t,e,n){var r=[],i=(e.lng-t.lng)/n,o=(e.lat-t.lat)/n;if(1<n)for(var a=0;a<n;a++){var s=new c.Point(t.lng+i*a,t.lat+o*a,e.bearing);r.push(s),a==n-1&&(r[a]=e)}else r.push(t),r.push(e);return r}(r,t[i+1],o);n=n.concat(a)}}),n}},{key:"onDownload",value:function(){var t=this;this.track.xmlDoc||this.createXmlDoc(this.track.points).then(function(e){return t.track.setXmlDoc(e),t.download(e)}).then(function(){}).catch(function(t){console.warn(t)})}},{key:"createXmlDoc",value:function(t){return new Promise(function(e,n){var r=new m.TElement("gpx");r.setAttribute("xmlns","http://www.topografix.com/GPX/1/0").setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance").setAttribute("version","1.0").setAttribute("creator","Bike-Atlas");var i=new m.TElement("time");i.innerText=(new Date).toISOString(),r.appendChild(i);var o=new m.TElement("trk");r.appendChild(o);var a=new m.TElement("trkseg");o.appendChild(a),t.forEach(function(t){var e=new m.TElement("trkpt");e.setAttribute("lat",t.lat.toString()),e.setAttribute("lon",t.lng.toString());var n=new m.TElement("time");n.innerText=new Date(t.date).toISOString(),e.appendChild(n);var r=new m.TElement("speed");r.innerText=(t.speed/3.6).toString(),e.appendChild(r),a.appendChild(e)}),e(r)})}},{key:"download",value:function(t){var e=t.getElementsByTagName("time")[0];return function(t,e){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}(v.default(new Date(e.innerText),"yyyy-mm-dd_HH_MM_ss")+".gpx",t.toString()),Promise.resolve(!0)}},{key:"stravaExport",value:function(){this.stravaService.addToExport(this.track),this.router.navigate(["/auth/map/strava-invite"])}},{key:"ngOnDestroy",value:function(){this.map.off("mousedown",this.mouseMapDown),this.map.off("mouseup",this.mouseMapUp),this.map.off("mousemove",this.mouseMove)}}],[{key:"getNewLayerId",value:function(){var t=0+1e4*Math.random(),e=("area-track"+Math.round(t)).toString();return-1<this.layerIds.indexOf(e)?this.getNewLayerId():(this.layerIds.push(e),e)}}]),t}();r.OneItemTrackComponent=T,T.layerIds=[],T.\u0275fac=function(t){return new(t||T)(g.\u0275\u0275directiveInject(b.TrackService),g.\u0275\u0275directiveInject(w.MapService),g.\u0275\u0275directiveInject(x.ToastService),g.\u0275\u0275directiveInject(k.Router),g.\u0275\u0275directiveInject(C.StravaService))},T.\u0275cmp=g.\u0275\u0275defineComponent({type:T,selectors:[["one-item-track-component"]],inputs:{track:"track"},decls:36,vars:20,consts:[[1,"close",3,"click"],[1,"title"],[1,"color"],[1,"date"],[1,"action"],["title","\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0442\u043e\u0447\u043a\u0438",1,"route-points",3,"click"],[1,"go",3,"click"],["title","\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043d\u0430 \u043a\u043e\u043c\u043f",1,"download",3,"click"],["title","\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u0440\u0435\u043a",1,"save",3,"click"],["title","\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 Strava","class","strava-export",3,"click",4,"ngIf"],["title","\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 Strava","class","strava-export opacity-0-5",3,"click",4,"ngIf"],["title","\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 Strava",1,"strava-export",3,"click"],["title","\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 Strava",1,"strava-export","opacity-0-5",3,"click"]],template:function(t,e){1&t&&(g.\u0275\u0275elementStart(0,"div",0),g.\u0275\u0275listener("click",function(){return e.hideTrack()}),g.\u0275\u0275text(1,"\xd7"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(2,"div",1),g.\u0275\u0275elementStart(3,"div"),g.\u0275\u0275element(4,"div",2),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(5,"div",3),g.\u0275\u0275text(6),g.\u0275\u0275pipe(7,"date"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(8,"div",4),g.\u0275\u0275elementStart(9,"div"),g.\u0275\u0275text(10),g.\u0275\u0275pipe(11,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(12,"b"),g.\u0275\u0275text(13),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(14,"div",4),g.\u0275\u0275elementStart(15,"div"),g.\u0275\u0275text(16),g.\u0275\u0275pipe(17,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(18,"b"),g.\u0275\u0275text(19),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(20,"div",4),g.\u0275\u0275elementStart(21,"div"),g.\u0275\u0275text(22),g.\u0275\u0275pipe(23,"translate"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(24,"b"),g.\u0275\u0275text(25),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(26,"div"),g.\u0275\u0275elementStart(27,"div",5),g.\u0275\u0275listener("click",function(){return e.track.showSrcPoint()}),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(28,"div",4),g.\u0275\u0275elementStart(29,"div",6),g.\u0275\u0275listener("click",function(){return e.onGo(e.track)}),g.\u0275\u0275text(30,"Play \u25ba"),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(31,"div",4),g.\u0275\u0275elementStart(32,"div",7),g.\u0275\u0275listener("click",function(){return e.onDownload()}),g.\u0275\u0275elementEnd(),g.\u0275\u0275elementStart(33,"div",8),g.\u0275\u0275listener("click",function(){return e.saveChange()}),g.\u0275\u0275elementEnd(),g.\u0275\u0275template(34,P,1,0,"div",9),g.\u0275\u0275template(35,O,1,0,"div",10),g.\u0275\u0275elementEnd()),2&t&&(g.\u0275\u0275advance(4),g.\u0275\u0275styleProp("background",e.track.color),g.\u0275\u0275advance(2),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind2(7,11,e.track.date,"dd/MM/yyyy")),g.\u0275\u0275advance(4),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(11,14,"DISTANCE")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate1("",e.track.distance," km"),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(17,16,"MAX_SPEED")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate1("",e.track.maxSpeed," km/h"),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(g.\u0275\u0275pipeBind1(23,18,"POINTS1")),g.\u0275\u0275advance(3),g.\u0275\u0275textInterpolate(e.track.points.length),g.\u0275\u0275advance(9),g.\u0275\u0275property("ngIf",e.stravaService.athlete),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",!e.stravaService.athlete))},directives:[S.NgIf],pipes:[S.DatePipe,E.TranslatePipe],styles:["[_nghost-%COMP%]{color:#000;border-top:1px solid #cfdcef;align-items:center;display:block;position:relative}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;padding:5px;font-size:20px;font:30px/15px bold}.close[_ngcontent-%COMP%], .go[_ngcontent-%COMP%]{cursor:pointer}.go[_ngcontent-%COMP%]{display:block;margin-right:10px}.go[_ngcontent-%COMP%]:active{color:#fff;transform:scaleX(.8,0,8);box-shadow:inset 0 0 20px #000}.info[_ngcontent-%COMP%]{margin:10px 5px}b[_ngcontent-%COMP%]{margin-left:5px}.action[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin:10px -10px}.action[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .title[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:0 10px}.title[_ngcontent-%COMP%]{margin-right:30px}.route-points[_ngcontent-%COMP%]{background:url(http://178.62.44.54:8080/ico-route-points.png) no-repeat 50%;background-size:80%;width:30px;height:30px;cursor:pointer}.date[_ngcontent-%COMP%]{color:#1e90ff}.dist[_ngcontent-%COMP%]{font-size:12px}.color[_ngcontent-%COMP%]{margin-left:5px;width:24px;height:24px;border-radius:50%}.opacity-0-5[_ngcontent-%COMP%]{opacity:.3}.download[_ngcontent-%COMP%]{background:url(http://178.62.44.54:8080/ico-download.png) no-repeat 50%}.download[_ngcontent-%COMP%], .save[_ngcontent-%COMP%]{height:30px;width:30px;padding:0}.save[_ngcontent-%COMP%]{background:url(http://178.62.44.54:8080/ico-save.png) no-repeat 50%}.strava-export[_ngcontent-%COMP%]{height:30px;width:30px;background:url(http://178.62.44.54:8080/ico-strava.png) no-repeat 50%;padding:0}.download[_ngcontent-%COMP%], .save[_ngcontent-%COMP%], .strava-export[_ngcontent-%COMP%]{width:30%;cursor:pointer;background-size:auto 80%}"]})},"pGC+":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.BattLevelStore=e.COLOR=void 0;var a=n("ufcJ"),s=o(n("fXoL")),u=e.COLOR=function(t){return t.RED="#f00",t.GREEN="#04e200",t}(e.COLOR||{}),c={level:0,color:u.RED,text:"",visible:!1},h=function(t){l(n,t);var e=f(n);function n(){var t;return y(this,n),(t=e.call(this,c)).setLevel=t.updater(function(t,e){return Object.assign(Object.assign({},t),{level:e,color:15<e?u.GREEN:u.RED,visible:0<e})}),t}return _(n)}(a.ComponentStore);e.BattLevelStore=h,h.\u0275fac=function(t){return new(t||h)},h.\u0275prov=s.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac})},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}var o=function(){function t(e,n){y(this,t),this.predicate=e,this.thisArg=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.predicate,this.thisArg))}}]),t}(),a=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t)).predicate=r,o.thisArg=i,o.count=0,o}return _(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(r.a)},pjAE:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map(function(t,e){return"".concat(e+1,") ").concat(t.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}()},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("WMd4");function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new a(t,e))}}var a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;y(this,t),this.scheduler=e,this.delay=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new s(t,this.scheduler,this.delay))}}]),t}(),s=function(t){l(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return y(this,n),(i=e.call(this,t)).scheduler=r,i.delay=o,i}return _(n,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new u(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(i.a.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()}}]),n}(r.a),u=_(function t(e,n){y(this,t),this.notification=e,this.destination=n})},q2jb:function(t,e){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function a(t){return t.map(function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t})}function s(t,e){e=e||{};var r=new n;return a(t).forEach(function(t){r.append(t)}),e.type?r.getBlob(e.type):r.getBlob()}function u(t,e){return new Blob(a(t),e||{})}"undefined"!=typeof Blob&&(s.prototype=Blob.prototype,u.prototype=Blob.prototype),t.exports=r?i?Blob:u:o?s:void 0},q7Eg:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LngLat=void 0,e.LngLat=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),i=e.call(this),"number"==typeof t&&"number"==typeof r&&i.setValue({lng:t,lat:r}),i}return _(n,[{key:"setValue",value:function(t){return this.lat=t.lat,this.lng=t.lng,this[0]=this.lng,this[1]=this.lat,this}},{key:"toString",value:function(){return this.join(";")}},{key:"toArray",value:function(){return[this[0],this[1]]}}]),n}(n(Array))},qCKp:function(t,e,n){"use strict";n.r(e),n.d(e,"Observable",function(){return i.a}),n.d(e,"ConnectableObservable",function(){return a.a}),n.d(e,"GroupedObservable",function(){return s.a}),n.d(e,"observable",function(){return c.a}),n.d(e,"Subject",function(){return h.a}),n.d(e,"BehaviorSubject",function(){return d.a}),n.d(e,"ReplaySubject",function(){return p.a}),n.d(e,"AsyncSubject",function(){return v.a}),n.d(e,"asap",function(){return g.a}),n.d(e,"asapScheduler",function(){return g.b}),n.d(e,"async",function(){return b.a}),n.d(e,"asyncScheduler",function(){return b.b}),n.d(e,"queue",function(){return w.a}),n.d(e,"queueScheduler",function(){return w.b}),n.d(e,"animationFrame",function(){return E}),n.d(e,"animationFrameScheduler",function(){return S}),n.d(e,"VirtualTimeScheduler",function(){return P}),n.d(e,"VirtualAction",function(){return O}),n.d(e,"Scheduler",function(){return T.a}),n.d(e,"Subscription",function(){return A.a}),n.d(e,"Subscriber",function(){return I.a}),n.d(e,"Notification",function(){return D.a}),n.d(e,"NotificationKind",function(){return D.b}),n.d(e,"pipe",function(){return M.a}),n.d(e,"noop",function(){return L.a}),n.d(e,"identity",function(){return j.a}),n.d(e,"isObservable",function(){return R.a}),n.d(e,"ArgumentOutOfRangeError",function(){return F.a}),n.d(e,"EmptyError",function(){return N.a}),n.d(e,"ObjectUnsubscribedError",function(){return B.a}),n.d(e,"UnsubscriptionError",function(){return z.a}),n.d(e,"TimeoutError",function(){return V.a}),n.d(e,"bindCallback",function(){return G}),n.d(e,"bindNodeCallback",function(){return K}),n.d(e,"combineLatest",function(){return Q.b}),n.d(e,"concat",function(){return tt.a}),n.d(e,"defer",function(){return et.a}),n.d(e,"empty",function(){return nt.b}),n.d(e,"forkJoin",function(){return rt.a}),n.d(e,"from",function(){return it.a}),n.d(e,"fromEvent",function(){return at}),n.d(e,"fromEventPattern",function(){return ut}),n.d(e,"generate",function(){return ct}),n.d(e,"iif",function(){return ht}),n.d(e,"interval",function(){return dt}),n.d(e,"merge",function(){return vt.a}),n.d(e,"never",function(){return yt}),n.d(e,"of",function(){return gt.a}),n.d(e,"onErrorResumeNext",function(){return _t}),n.d(e,"pairs",function(){return bt}),n.d(e,"partition",function(){return St}),n.d(e,"race",function(){return Et.a}),n.d(e,"range",function(){return Pt}),n.d(e,"throwError",function(){return Tt.a}),n.d(e,"timer",function(){return At.a}),n.d(e,"using",function(){return It}),n.d(e,"zip",function(){return Dt.b}),n.d(e,"scheduled",function(){return Mt.a}),n.d(e,"EMPTY",function(){return nt.a}),n.d(e,"NEVER",function(){return mt}),n.d(e,"config",function(){return Lt.a});var r,i=n("HDdC"),a=n("EQ5u"),s=n("OQgR"),c=n("kJWO"),h=n("XNiG"),d=n("2Vo4"),p=n("jtHE"),v=n("NHP+"),g=n("7Hc7"),b=n("D0XW"),w=n("qgXg"),x=n("3N8a"),k=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return _(n,[{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?u(m(n.prototype),"requestAsyncId",this).call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))}},{key:"recycleAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return u(m(n.prototype),"recycleAsyncId",this).call(this,t,e,r);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}}]),n}(x.a),C=n("IjjT"),S=new(function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(C.a))(k),E=S,P=((r=function(t){l(n,t);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;return y(this,n),(t=e.call(this,r,function(){return t.frame})).maxFrames=i,t.frame=0,t.index=-1,t}return _(n,[{key:"flush",value:function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n[0])&&e.delay<=r&&(n.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=n.shift();)e.unsubscribe();throw t}}}]),n}(C.a)).frameTimeFactor=10,r),O=function(t){l(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.index+=1;return y(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.index=o,i.active=!0,i.index=t.index=o,i}return _(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.id)return u(m(n.prototype),"schedule",this).call(this,t,e);this.active=!1;var r=new n(this.scheduler,this.work);return this.add(r),r.schedule(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(n.sortActions),!0}},{key:"recycleAsyncId",value:function(t,e){}},{key:"_execute",value:function(t,e){if(!0===this.active)return u(m(n.prototype),"_execute",this).call(this,t,e)}}],[{key:"sortActions",value:function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1}}]),n}(x.a),T=n("Y/cZ"),A=n("quSY"),I=n("7o/Q"),D=n("WMd4"),M=n("mCNh"),L=n("KqfI"),j=n("SpAZ"),R=n("7+OI"),F=n("4I5i"),N=n("sVev"),B=n("9ppp"),z=n("pjAE"),V=n("Y6u4"),U=n("lJxs"),q=n("8Qeq"),H=n("DH7j"),Z=n("z+Ro");function G(t,e,n){if(e){if(!Object(Z.a)(e))return function(){return G(t,n).apply(void 0,arguments).pipe(Object(U.a)(function(t){return Object(H.a)(t)?e.apply(void 0,o(t)):e(t)}))};n=e}return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var a,s=this,u={context:s,subject:a,callbackFunc:t,scheduler:n};return new i.a(function(e){if(n)return n.schedule(W,0,{args:r,subscriber:e,params:u});if(!a){a=new v.a;try{t.apply(s,[].concat(r,[function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.next(e.length<=1?e[0]:e),a.complete()}]))}catch(i){Object(q.a)(a)?a.error(i):console.warn(i)}}return a.subscribe(e)})}}function W(t){var e=this,n=t.args,r=t.subscriber,i=t.params,a=i.callbackFunc,s=i.context,u=i.scheduler,c=i.subject;if(!c){c=i.subject=new v.a;try{a.apply(s,[].concat(o(n),[function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.add(u.schedule(X,0,{value:n.length<=1?n[0]:n,subject:c}))}]))}catch(l){c.error(l)}}this.add(c.subscribe(r))}function X(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function K(t,e,n){if(e){if(!Object(Z.a)(e))return function(){return K(t,n).apply(void 0,arguments).pipe(Object(U.a)(function(t){return Object(H.a)(t)?e.apply(void 0,o(t)):e(t)}))};n=e}return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var a={subject:void 0,args:r,callbackFunc:t,scheduler:n,context:this};return new i.a(function(e){var i=a.context,o=a.subject;if(n)return n.schedule(Y,0,{params:a,subscriber:e,context:i});if(!o){o=a.subject=new v.a;try{t.apply(i,[].concat(r,[function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.shift();r?o.error(r):(o.next(e.length<=1?e[0]:e),o.complete())}]))}catch(s){Object(q.a)(o)?o.error(s):console.warn(s)}}return o.subscribe(e)})}}function Y(t){var e=this,n=t.params,r=t.subscriber,i=t.context,a=n.callbackFunc,s=n.args,u=n.scheduler,c=n.subject;if(!c){c=n.subject=new v.a;try{a.apply(i,[].concat(o(s),[function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.shift();e.add(i?u.schedule($,0,{err:i,subject:c}):u.schedule(J,0,{value:n.length<=1?n[0]:n,subject:c}))}]))}catch(l){this.add(u.schedule($,0,{err:l,subject:c}))}}this.add(c.subscribe(r))}function J(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function $(t){var e=t.err;t.subject.error(e)}var Q=n("itXk"),tt=n("GyhO"),et=n("NXyV"),nt=n("EY2u"),rt=n("cp0P"),it=n("Cfvw"),ot=n("n6bG");function at(t,e,n,r){return Object(ot.a)(n)&&(r=n,n=void 0),r?at(t,e,n).pipe(Object(U.a)(function(t){return Object(H.a)(t)?r.apply(void 0,o(t)):r(t)})):new i.a(function(r){st(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function st(t,e,n,r,i){var o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var a=t;t.addEventListener(e,n,i),o=function(){return a.removeEventListener(e,n,i)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var s=t;t.on(e,n),o=function(){return s.off(e,n)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){var u=t;t.addListener(e,n),o=function(){return u.removeListener(e,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var c=0,l=t.length;c<l;c++)st(t[c],e,n,r,i)}r.add(o)}function ut(t,e,n){return n?ut(t,e).pipe(Object(U.a)(function(t){return Object(H.a)(t)?n.apply(void 0,o(t)):n(t)})):new i.a(function(n){var r,i=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n.next(1===e.length?e[0]:e)};try{r=t(i)}catch(o){return void n.error(o)}if(Object(ot.a)(e))return function(){return e(i,r)}})}function ct(t,e,n,r,o){var a,s;return 1==arguments.length?(s=t.initialState,e=t.condition,n=t.iterate,a=t.resultSelector||j.a,o=t.scheduler):void 0===r||Object(Z.a)(r)?(s=t,a=j.a,o=r):(s=t,a=r),new i.a(function(t){var r=s;if(o)return o.schedule(lt,0,{subscriber:t,iterate:n,condition:e,resultSelector:a,state:r});for(;;){if(e){var i=void 0;try{i=e(r)}catch(c){return void t.error(c)}if(!i){t.complete();break}}var u=void 0;try{u=a(r)}catch(c){return void t.error(c)}if(t.next(u),t.closed)break;try{r=n(r)}catch(c){return void t.error(c)}}})}function lt(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(o){return void e.error(o)}else t.needIterate=!0;if(n){var r;try{r=n(t.state)}catch(o){return void e.error(o)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(o){return void e.error(o)}return e.closed||(e.next(i),e.closed)?void 0:this.schedule(t)}}function ht(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nt.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nt.a;return Object(et.a)(function(){return t()?e:n})}var ft=n("Y7HM");function dt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.a;return(!Object(ft.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=b.a),new i.a(function(n){return n.add(e.schedule(pt,t,{subscriber:n,counter:0,period:t})),n})}function pt(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}var vt=n("VRyK"),mt=new i.a(L.a);function yt(){return mt}var gt=n("LRne");function _t(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return nt.a;var r=e[0],a=e.slice(1);return 1===e.length&&Object(H.a)(r)?_t.apply(void 0,o(r)):new i.a(function(t){var e=function(){return t.add(_t.apply(void 0,o(a)).subscribe(t))};return Object(it.a)(r).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}function bt(t,e){return new i.a(e?function(n){var r=Object.keys(t),i=new A.a;return i.add(e.schedule(wt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function wt(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var a=e[n];r.next([a,o[a]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}var xt=n("F97/"),kt=n("SeVD"),Ct=n("pLZG");function St(t,e,n){return[Object(Ct.a)(e,n)(new i.a(Object(kt.a)(t))),Object(Ct.a)(Object(xt.a)(e,n))(new i.a(Object(kt.a)(t)))]}var Et=n("Nv8m");function Pt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return new i.a(function(r){void 0===e&&(e=t,t=0);var i=0,o=t;if(n)return n.schedule(Ot,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}})}function Ot(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}var Tt=n("z6cu"),At=n("PqYM");function It(t,e){return new i.a(function(n){var r,i;try{r=t()}catch(a){return void n.error(a)}try{i=e(r)}catch(a){return void n.error(a)}var o=(i?Object(it.a)(i):nt.a).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}var Dt=n("1uah"),Mt=n("7HRe"),Lt=n("2fFW")},qGlh:function(t,e){t.exports=function(t){return n&&Buffer.isBuffer(t)||r&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))};var n="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,r="function"==typeof ArrayBuffer},qVd3:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MapboxGlDirective=e.MapResolver=e.MyMap=void 0,n("fXoL"),n("fXoL"),n("mr0/"),n("W1q8"),n("kQ+e");var s=a(n("+ZnK")),c=a(n("ubkq")),h=n("mu9K"),d=o(n("fXoL")),v=o(n("mr0/")),g=o(n("W1q8")),b=o(n("kQ+e")),w=o(n("mu9K")),x=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this,t)).onLoad=new Promise(function(t){r.on("load",function(){t(p(r))})}),r}return _(n,[{key:"on",value:function(t,e){return u(m(n.prototype),"on",this).call(this,t,e)}},{key:"addControl",value:function(t,e){return u(m(n.prototype),"addControl",this).call(this,t,e)}}]),n}(s.default.Map);e.MyMap=x;var k=function(){function t(){var e=this;y(this,t),this._resolver=null,this._resPromise=new Promise(function(t,n){e._resolver=t})}return _(t,[{key:"onLoad",get:function(){return this._resolver}},{key:"resolve",value:function(){return this._resPromise}}]),t}();e.MapResolver=k,k.\u0275fac=function(t){return new(t||k)},k.\u0275prov=d.\u0275\u0275defineInjectable({token:k,factory:k.\u0275fac});var C=function(){function t(e,n,r,i,o,a,s){y(this,t),this.el=e,this.ls=i,this.userService=o,this.ngZone=a,this.mapResolver=s,this.layers=[],this.setting=o.getSetting()||new h.Setting,this.center=[30.5,50.5],this.mapService=n,this.styleSource={"google-default":{type:"raster",tiles:["http://mt0.googleapis.com/vt/lyrs=m@207000000&hl=ru&src=api&x={x}&y={y}&z={z}&s=Galile"],tileSize:256},hills:{type:"raster",tiles:["hills/{z}/{x}/{y}.png"],tileSize:256},osm:{type:"raster",tiles:["https://c.tile.openstreetmap.org/{z}/{x}/{y}.png","https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},console.log("setting->",this.setting),this.setting.map&&"ggl"!=this.setting.map||this.layers.push({id:"google-default",source:"google-default",type:"raster"});var u=function(t,e,n){t.style[e]=n};u(e.nativeElement,"backgroundColor","rgba(200,200,200, 1)"),u(e.nativeElement,"backgroundColor","#dbd6cf")}return _(t,[{key:"mapboxgl",get:function(){return this._mapboxgl},set:function(t){this._mapboxgl=t}},{key:"ngAfterViewInit",value:function(){var t=this;this.ngZone.runOutsideAngular(function(){var e=t.ls.mapCenter,n=t.el;n.nativeElement.innerHTML="",s.default.accessToken="pk.eyJ1IjoibWF4aXNsYXYiLCJhIjoiY2lxbmlsNW9xMDAzNmh4bms4MGQ1enpvbiJ9.SvLPN0ZMYdq1FFMn7djryA",t.map=new x({container:n.nativeElement,center:[e.lng||t.center[0],e.lat||t.center[1]],zoom:e.zoom||8,style:"mapbox://styles/mapbox/traffic-day-v2"}),t.map.addControl(new s.default.NavigationControl({position:"top-right",maxWidth:80})),t.map.on("load",function(){var e=new Date,n=e.getTime()+60*e.getTimezoneOffset()*1e3-12e5+6e5,r=c.default(n,"yyyy-mm-dd").concat("T").concat(c.default(n,"HH")).concat(":",function(t){for(var e=new Date(t).getMinutes();e%10;)e-=1;return e<10?"0".concat(e):"".concat(e)}(n));t.mapResolver.onLoad(t.map),t.map.addSource("openrain",{type:"raster",tiles:["https://c.sat.owm.io/maps/2.0/radar/{z}/{x}/{y}?appid=9de243494c0b295cca9337e1e96b00e2&day=".concat(r)],tileSize:256}),t.map.addLayer({id:"openrain",type:"raster",minzoom:4,maxzoom:15,source:"openrain",paint:{"raster-opacity":.5}})}),t.mapService.setMap(t.map)})}}]),t}();e.MapboxGlDirective=C,C.\u0275fac=function(t){return new(t||C)(d.\u0275\u0275directiveInject(d.ElementRef),d.\u0275\u0275directiveInject(v.MapService),d.\u0275\u0275directiveInject(g.PositionSize),d.\u0275\u0275directiveInject(b.LocalStorage),d.\u0275\u0275directiveInject(w.UserService),d.\u0275\u0275directiveInject(d.NgZone),d.\u0275\u0275directiveInject(k))},C.\u0275dir=d.\u0275\u0275defineDirective({type:C,selectors:[["mapbox-gl"]],hostAttrs:["map","map"]})},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return _(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?u(m(n.prototype),"schedule",this).call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,e){return e>0||this.closed?u(m(n.prototype),"execute",this).call(this,t,e):this._execute(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?u(m(n.prototype),"requestAsyncId",this).call(this,t,e,r):t.flush(this)}}]),n}(n("3N8a").a),i=new(function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(n("IjjT").a))(r),o=i},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG"),a=n("pjAE"),s=function(){var t,e=function(){function t(e){y(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return _(t,[{key:"unsubscribe",value:function(){var e;if(!this.closed){var n=this._parentOrParents,s=this._ctorUnsubscribe,c=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if(Object(o.a)(c)){s&&(this._unsubscribe=void 0);try{c.call(this)}catch(v){e=v instanceof a.a?u(v.errors):[v]}}if(Object(r.a)(l))for(var f=-1,d=l.length;++f<d;){var p=l[f];if(Object(i.a)(p))try{p.unsubscribe()}catch(v){e=e||[],v instanceof a.a?e=e.concat(u(v.errors)):e.push(v)}}if(e)throw new a.a(e)}}},{key:"add",value:function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}]),t}();return e.EMPTY=((t=new e).closed=!0,t),e}();function u(t){return t.reduce(function(t,e){return t.concat(e instanceof a.a?e.errors:e)},[])}},"rB/T":function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n("LbVS")),r(n("vauT")),r(n("PsNa"))},rID0:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileComponent=void 0,n("fXoL"),n("ofXK"),n("tyNb"),n("Sy1n"),n("XVN5"),n("mu9K"),n("yvHX"),n("3Pt+");var a=n("qCKp"),s=(n("MCUK"),n("wlYr"),n("AytR")),u=o(n("fXoL")),c=o(n("ofXK")),l=o(n("tyNb")),h=o(n("Sy1n")),f=o(n("XVN5")),d=o(n("wlYr")),p=o(n("yvHX")),v=o(n("3Pt+")),m=o(n("mu9K")),g=o(n("MCUK")),b=o(n("sYmb"));function w(t,e){1&t&&(u.\u0275\u0275elementStart(0,"div",20),u.\u0275\u0275text(1,"\u0441\u043d\u044f\u0442\u044c \u0433\u0430\u043b\u043e\u0447\u043a\u0443 \u0447\u0442\u043e\u0431\u044b \u0432\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0432\u0430\u0441 \u0432\u0438\u0434\u0435\u043b\u0438 \u043e\u043d\u043b\u0430\u0439\u043d, \u0435\u0441\u043b\u0438 \u0432\u044b \u043d\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0432 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0439 \u0437\u043e\u043d\u0435"),u.\u0275\u0275elementEnd())}function x(t,e){1&t&&(u.\u0275\u0275elementStart(0,"div",20),u.\u0275\u0275text(1,"\u043f\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0433\u0430\u043b\u043e\u0447\u043a\u0443 \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043f\u0440\u0435\u0442\u0438\u0442\u044c \u043f\u043e\u043a\u0430\u0437 \u043c\u043e\u0435\u0433\u043e \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432\u0441\u0435\u043c \u043a\u0440\u043e\u043c\u0435 \u0434\u0440\u0443\u0437\u0435\u0439"),u.\u0275\u0275elementEnd())}var k=function(t){return{"has-error":t}},C=function(){function t(e,n,r,i,o,a,u,c,l,h){y(this,t),this.location=e,this.elRef=n,this.router=r,this.lh=i,this.io=o,this.toast=a,this.areaService=u,this.fb=c,this.userService=l,this.profileService=h,this.hostPrefix=s.environment.hostPrefix,this.passFormValue={currentPass:null,newPass:null,repeatNewPass:null},this.model={name:null},this.socket=o.socket,this.user=l.getUser(),this.setting=l.getSetting(),this.profileForm=this.fb.group({oldPass:["",function(t){return console.log(t),t.value.length?null:{rew:"oldo"}}]})}return _(t,[{key:"saveLock",value:function(t){this.areaService.saveLock(t)}},{key:"ngAfterViewInit",value:function(){var t=this,e=this.inputEl=this.elRef.nativeElement.getElementsByTagName("input")[1];e.addEventListener("change",function(){console.log(e.files);var n=e.files[0],r=new FileReader;r.onload=function(e){t.crop(e.target.result)},r.readAsDataURL(n)})}},{key:"crop",value:function(t){var e=this,n=new Image;n.style.display="none";var r=document.createElement("canvas");r.width=100,r.height=100;var i=r.getContext("2d");n.onload=function(){!function(t,i){t.save(),t.beginPath(),t.arc(50,50,50,0,2*Math.PI,!0),t.closePath(),t.clip(),t.drawImage(i,0,0,100,100),t.restore(),e.user.image=r.toDataURL(),n.parentElement.removeChild(n)}(i,n)},n.src=t,document.body.appendChild(n)}},{key:"onClose",value:function(){this.lh.is?this.location.back():this.router.navigate(["/auth/map"])}},{key:"onOpenImage",value:function(){this.inputEl.click()}},{key:"onSave",value:function(){var t=this;this.user.name?this.user.image?this.socket.$emit("onImage",this.user.image).then(function(e){console.log(e),e&&"ok"==e.result&&t.toast.show({type:"success",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"})}):this.toast.show({type:"warning",text:"\u041f\u0443\u0441\u0442\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}):this.toast.show({type:"warning",text:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u043f\u043e\u0434 \u0441\u0432\u043e\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c"})}},{key:"ngOnInit",value:function(){var t=this;this.passForm=this.fb.group({currentPass:[null,[this.passValidator.bind(this,"currentPass")]],newPass:[null,[this.passValidator.bind(this,"newPass")]],repeatNewPass:[null,[this.passValidator.bind(this,"repeatNewPass")]]},null),this.passForm.valueChanges.subscribe(function(t){console.log(t)}),a.merge(this.passForm.get("currentPass").valueChanges,this.passForm.get("newPass").valueChanges,this.passForm.get("repeatNewPass").valueChanges).subscribe(function(e){console.log(t.passForm)})}},{key:"onChangePass",value:function(){var t=this;this.profileService.updatePass(this.passForm.value).then(function(e){e&&!e.error?t.toast.show({type:"success",text:"Password successful changed"}):e&&"CURRENT_PASS_NOT_MATCH"===e.result&&t.toast.show({type:"warning",text:e.error})})}},{key:"passValidator",value:function(t,e){switch(this.passFormValue[t]=e.value,t){case"currentPass":return!e.value||e.value.length<3?{invalidPassword:"Length should be more then 3 char length "}:null;case"newPass":case"repeatNewPass":return!e.value||e.value.length<3?{invalidPassword:"Length should be more then 3 char length "}:this.passFormValue.newPass!==this.passFormValue.repeatNewPass?{invalidPassword:"Old and New pass does not match"}:(this.passForm.get("newPass").setErrors(null),this.passForm.get("repeatNewPass").setErrors(null),null)}return null}}]),t}();e.ProfileComponent=C,C.\u0275fac=function(t){return new(t||C)(u.\u0275\u0275directiveInject(c.Location),u.\u0275\u0275directiveInject(u.ElementRef),u.\u0275\u0275directiveInject(l.Router),u.\u0275\u0275directiveInject(h.NavigationHistory),u.\u0275\u0275directiveInject(f.Io),u.\u0275\u0275directiveInject(d.ToastService),u.\u0275\u0275directiveInject(p.PrivateAreaService),u.\u0275\u0275directiveInject(v.FormBuilder),u.\u0275\u0275directiveInject(m.UserService),u.\u0275\u0275directiveInject(g.ProfileService))},C.\u0275cmp=u.\u0275\u0275defineComponent({type:C,selectors:[["ng-component"]],decls:49,vars:26,consts:[[1,"content"],[1,"close",3,"click"],[1,"row"],[1,"row","border"],[1,"load-img"],[3,"src","click"],["type","checkbox","id","test1",3,"ngModel","ngModelChange"],["for","test1"],["class","help",4,"ngIf"],["type","file","id","files","name","files[]","multiple","",2,"display","none"],[1,"border-hidden"],[1,"primary",2,"float","right",3,"click"],["name","passForm","autocomplete","off",3,"formGroup"],[3,"ngClass"],["type","password","formControlName","currentPass","name","_oldPass"],["type","password","formControlName","newPass","name","_newPass","autocomplete","off","autocorrect","off","autocapitalize","none","spellcheck","false"],["type","password","autocomplete","off","formControlName","repeatNewPass","name","_repeatPass"],[1,"primary",2,"float","right",3,"disabled","click"],[1,"row","error"],[1,"row.border"],[1,"help"]],template:function(t,e){1&t&&(u.\u0275\u0275elementStart(0,"div",0),u.\u0275\u0275elementStart(1,"div"),u.\u0275\u0275elementStart(2,"div",1),u.\u0275\u0275listener("click",function(){return e.onClose()}),u.\u0275\u0275text(3,"\xd7"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(4,"div",2),u.\u0275\u0275elementStart(5,"p"),u.\u0275\u0275text(6),u.\u0275\u0275pipe(7,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(8,"div",3),u.\u0275\u0275elementStart(9,"div",4),u.\u0275\u0275elementStart(10,"img",5),u.\u0275\u0275listener("click",function(){return e.onOpenImage()}),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(11,"div",2),u.\u0275\u0275text(12),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(13,"div",2),u.\u0275\u0275elementStart(14,"p"),u.\u0275\u0275elementStart(15,"input",6),u.\u0275\u0275listener("ngModelChange",function(t){return e.setting.lock=t})("ngModelChange",function(){return e.saveLock(e.setting.lock)}),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(16,"label",7),u.\u0275\u0275text(17,"\u041c\u043e\u0439 \u043b\u043e\u0433 \u0437\u0430\u043a\u0440\u044b\u0442\u044b\u0439"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275template(18,w,2,0,"div",8),u.\u0275\u0275template(19,x,2,0,"div",8),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(20,"input",9),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(21,"div",10),u.\u0275\u0275elementStart(22,"div"),u.\u0275\u0275elementStart(23,"button",11),u.\u0275\u0275listener("click",function(){return e.onSave()}),u.\u0275\u0275text(24),u.\u0275\u0275pipe(25,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(26,"div",10),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(27,"form",12),u.\u0275\u0275elementStart(28,"div",13),u.\u0275\u0275elementStart(29,"label"),u.\u0275\u0275text(30,"Current pass"),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(31,"input",14),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(32,"div",13),u.\u0275\u0275elementStart(33,"label"),u.\u0275\u0275text(34,"New pass"),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(35,"input",15),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(36,"div",13),u.\u0275\u0275elementStart(37,"label"),u.\u0275\u0275text(38,"Repeat"),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(39,"input",16),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(40,"div",10),u.\u0275\u0275elementStart(41,"div",2),u.\u0275\u0275elementStart(42,"button",17),u.\u0275\u0275listener("click",function(){return e.onChangePass()}),u.\u0275\u0275text(43),u.\u0275\u0275pipe(44,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(45,"div",18),u.\u0275\u0275text(46),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(47,"div",19),u.\u0275\u0275element(48,"div",10),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()),2&t&&(u.\u0275\u0275advance(6),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind1(7,14,"PROFILE")),u.\u0275\u0275advance(4),u.\u0275\u0275property("src",e.user.image||e.hostPrefix+"img/no-avatar.gif",u.\u0275\u0275sanitizeUrl),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate(e.user.name),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngModel",e.setting.lock),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngIf",e.setting.lock),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",!e.setting.lock),u.\u0275\u0275advance(5),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind1(25,16,"ON_SAVE")),u.\u0275\u0275advance(3),u.\u0275\u0275property("formGroup",e.passForm),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngClass",u.\u0275\u0275pureFunction1(20,k,e.passForm.get("currentPass").getError("invalidPassword"))),u.\u0275\u0275advance(4),u.\u0275\u0275property("ngClass",u.\u0275\u0275pureFunction1(22,k,e.passForm.get("newPass").getError("invalidPassword"))),u.\u0275\u0275advance(4),u.\u0275\u0275property("ngClass",u.\u0275\u0275pureFunction1(24,k,e.passForm.get("repeatNewPass").getError("invalidPassword"))),u.\u0275\u0275advance(6),u.\u0275\u0275property("disabled",null==e.passForm?null:e.passForm.invalid),u.\u0275\u0275advance(1),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind1(44,18,"ON_SAVE")),u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate1(" ",e.passForm.get("repeatNewPass").getError("invalidPassword")," "))},directives:[v.CheckboxControlValueAccessor,v.NgControlStatus,v.NgModel,c.NgIf,v.\u0275angular_packages_forms_forms_ba,v.NgControlStatusGroup,v.FormGroupDirective,c.NgClass,v.DefaultValueAccessor,v.FormControlName],pipes:[b.TranslatePipe],styles:["[_nghost-%COMP%]{position:absolute;left:0;top:0;z-index:5;width:100%}.content[_ngcontent-%COMP%]{position:absolute;background:hsla(0,0%,100%,.9);min-width:600px;margin-left:-300px;padding:0;left:50%;top:calc(100% + 20px);box-shadow:1px 1px 3px rgba(0,0,0,.4)}.content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:30px}.help[_ngcontent-%COMP%]{font-size:12px;color:gray}label[_ngcontent-%COMP%]{float:left;width:120px}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{font-size:14px;display:block}input[_ngcontent-%COMP%]{width:calc(100% - 120px);box-sizing:border-box;padding:8px 0;outline:none;border-radius:2px;background:none;border:none;border-bottom:2px solid #a9a9a9;margin:-2px}img[_ngcontent-%COMP%]{float:left;width:100px;height:100px;margin-right:10px}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;cursor:pointer;padding:15px;font-size:20px;font:30px/15px bold}.row.border[_ngcontent-%COMP%]{border-bottom:1px solid #cfdcef}.load-img[_ngcontent-%COMP%]{min-height:100px}.error[_ngcontent-%COMP%]{font-size:14px;color:red}@media screen and (max-width:600px){.content[_ngcontent-%COMP%]{position:relative;width:100%;min-width:inherit;left:0;margin-left:0}}"]})},sVev:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}()},sX7g:function(t,e,n){"use strict";n.r(e),n.d(e,"F",function(){return r}),n.d(e,"T",function(){return i}),n.d(e,"__",function(){return o}),n.d(e,"add",function(){return c}),n.d(e,"addIndex",function(){return p}),n.d(e,"adjust",function(){return m}),n.d(e,"all",function(){return k}),n.d(e,"allPass",function(){return Q}),n.d(e,"always",function(){return tt}),n.d(e,"and",function(){return et}),n.d(e,"any",function(){return rt}),n.d(e,"anyPass",function(){return it}),n.d(e,"ap",function(){return ot}),n.d(e,"aperture",function(){return st}),n.d(e,"append",function(){return ut}),n.d(e,"apply",function(){return ct}),n.d(e,"applySpec",function(){return ft}),n.d(e,"applyTo",function(){return dt}),n.d(e,"ascend",function(){return pt}),n.d(e,"assoc",function(){return vt}),n.d(e,"assocPath",function(){return yt}),n.d(e,"binary",function(){return _t}),n.d(e,"bind",function(){return A}),n.d(e,"both",function(){return kt}),n.d(e,"call",function(){return St}),n.d(e,"chain",function(){return Pt}),n.d(e,"clamp",function(){return Ot}),n.d(e,"clone",function(){return Dt}),n.d(e,"comparator",function(){return Mt}),n.d(e,"complement",function(){return jt}),n.d(e,"compose",function(){return Ut}),n.d(e,"composeK",function(){return qt}),n.d(e,"composeP",function(){return Gt}),n.d(e,"composeWith",function(){return Jt}),n.d(e,"concat",function(){return ye}),n.d(e,"cond",function(){return ge}),n.d(e,"construct",function(){return be}),n.d(e,"constructN",function(){return _e}),n.d(e,"contains",function(){return we}),n.d(e,"converge",function(){return xe}),n.d(e,"countBy",function(){return Se}),n.d(e,"curry",function(){return Ct}),n.d(e,"curryN",function(){return d}),n.d(e,"dec",function(){return Ee}),n.d(e,"defaultTo",function(){return Pe}),n.d(e,"descend",function(){return Oe}),n.d(e,"difference",function(){return Ie}),n.d(e,"differenceWith",function(){return De}),n.d(e,"dissoc",function(){return Me}),n.d(e,"dissocPath",function(){return Re}),n.d(e,"divide",function(){return Fe}),n.d(e,"drop",function(){return Be}),n.d(e,"dropLast",function(){return qe}),n.d(e,"dropLastWhile",function(){return Ze}),n.d(e,"dropRepeats",function(){return Ye}),n.d(e,"dropRepeatsWith",function(){return Ke}),n.d(e,"dropWhile",function(){return $e}),n.d(e,"either",function(){return tn}),n.d(e,"empty",function(){return en}),n.d(e,"endsWith",function(){return rn}),n.d(e,"eqBy",function(){return on}),n.d(e,"eqProps",function(){return an}),n.d(e,"equals",function(){return re}),n.d(e,"evolve",function(){return sn}),n.d(e,"filter",function(){return de}),n.d(e,"find",function(){return cn}),n.d(e,"findIndex",function(){return hn}),n.d(e,"findLast",function(){return dn}),n.d(e,"findLastIndex",function(){return vn}),n.d(e,"flatten",function(){return mn}),n.d(e,"flip",function(){return yn}),n.d(e,"forEach",function(){return gn}),n.d(e,"forEachObjIndexed",function(){return _n}),n.d(e,"fromPairs",function(){return bn}),n.d(e,"groupBy",function(){return wn}),n.d(e,"groupWith",function(){return xn}),n.d(e,"gt",function(){return kn}),n.d(e,"gte",function(){return Cn}),n.d(e,"has",function(){return En}),n.d(e,"hasIn",function(){return Pn}),n.d(e,"hasPath",function(){return Sn}),n.d(e,"head",function(){return Wt}),n.d(e,"identical",function(){return On}),n.d(e,"identity",function(){return Kt}),n.d(e,"ifElse",function(){return Tn}),n.d(e,"inc",function(){return An}),n.d(e,"includes",function(){return In}),n.d(e,"indexBy",function(){return Dn}),n.d(e,"indexOf",function(){return Mn}),n.d(e,"init",function(){return Ln}),n.d(e,"innerJoin",function(){return jn}),n.d(e,"insert",function(){return Rn}),n.d(e,"insertAll",function(){return Fn}),n.d(e,"intersection",function(){return zn}),n.d(e,"intersperse",function(){return Vn}),n.d(e,"into",function(){return Wn}),n.d(e,"invert",function(){return Xn}),n.d(e,"invertObj",function(){return Kn}),n.d(e,"invoker",function(){return Yn}),n.d(e,"is",function(){return Jn}),n.d(e,"isEmpty",function(){return $n}),n.d(e,"isNil",function(){return mt}),n.d(e,"join",function(){return Qn}),n.d(e,"juxt",function(){return tr}),n.d(e,"keys",function(){return H}),n.d(e,"keysIn",function(){return er}),n.d(e,"last",function(){return Xe}),n.d(e,"lastIndexOf",function(){return nr}),n.d(e,"length",function(){return ir}),n.d(e,"lens",function(){return or}),n.d(e,"lensIndex",function(){return ar}),n.d(e,"lensPath",function(){return sr}),n.d(e,"lensProp",function(){return ur}),n.d(e,"lift",function(){return xt}),n.d(e,"liftN",function(){return wt}),n.d(e,"lt",function(){return cr}),n.d(e,"lte",function(){return lr}),n.d(e,"map",function(){return Z}),n.d(e,"mapAccum",function(){return hr}),n.d(e,"mapAccumRight",function(){return fr}),n.d(e,"mapObjIndexed",function(){return dr}),n.d(e,"match",function(){return pr}),n.d(e,"mathMod",function(){return vr}),n.d(e,"max",function(){return C}),n.d(e,"maxBy",function(){return mr}),n.d(e,"mean",function(){return gr}),n.d(e,"median",function(){return _r}),n.d(e,"memoizeWith",function(){return br}),n.d(e,"merge",function(){return wr}),n.d(e,"mergeAll",function(){return xr}),n.d(e,"mergeDeepLeft",function(){return Sr}),n.d(e,"mergeDeepRight",function(){return Er}),n.d(e,"mergeDeepWith",function(){return Pr}),n.d(e,"mergeDeepWithKey",function(){return Cr}),n.d(e,"mergeLeft",function(){return Or}),n.d(e,"mergeRight",function(){return Tr}),n.d(e,"mergeWith",function(){return Ar}),n.d(e,"mergeWithKey",function(){return kr}),n.d(e,"min",function(){return Ir}),n.d(e,"minBy",function(){return Dr}),n.d(e,"modulo",function(){return Mr}),n.d(e,"move",function(){return Lr}),n.d(e,"multiply",function(){return jr}),n.d(e,"nAry",function(){return gt}),n.d(e,"negate",function(){return Rr}),n.d(e,"none",function(){return Fr}),n.d(e,"not",function(){return Lt}),n.d(e,"nth",function(){return W}),n.d(e,"nthArg",function(){return Nr}),n.d(e,"o",function(){return Br}),n.d(e,"objOf",function(){return qn}),n.d(e,"of",function(){return zr}),n.d(e,"omit",function(){return Vr}),n.d(e,"once",function(){return Ur}),n.d(e,"or",function(){return Qe}),n.d(e,"otherwise",function(){return Hr}),n.d(e,"over",function(){return Gr}),n.d(e,"pair",function(){return Wr}),n.d(e,"partial",function(){return Kr}),n.d(e,"partialRight",function(){return Yr}),n.d(e,"partition",function(){return Jr}),n.d(e,"path",function(){return K}),n.d(e,"paths",function(){return X}),n.d(e,"pathEq",function(){return $r}),n.d(e,"pathOr",function(){return Qr}),n.d(e,"pathSatisfies",function(){return ti}),n.d(e,"pick",function(){return ei}),n.d(e,"pickAll",function(){return ni}),n.d(e,"pickBy",function(){return ri}),n.d(e,"pipe",function(){return zt}),n.d(e,"pipeK",function(){return ii}),n.d(e,"pipeP",function(){return Zt}),n.d(e,"pipeWith",function(){return Yt}),n.d(e,"pluck",function(){return J}),n.d(e,"prepend",function(){return oi}),n.d(e,"product",function(){return ai}),n.d(e,"project",function(){return ui}),n.d(e,"prop",function(){return Y}),n.d(e,"propEq",function(){return ci}),n.d(e,"propIs",function(){return li}),n.d(e,"propOr",function(){return hi}),n.d(e,"propSatisfies",function(){return fi}),n.d(e,"props",function(){return di}),n.d(e,"range",function(){return pi}),n.d(e,"reduce",function(){return $}),n.d(e,"reduceBy",function(){return Ce}),n.d(e,"reduceRight",function(){return vi}),n.d(e,"reduceWhile",function(){return mi}),n.d(e,"reduced",function(){return yi}),n.d(e,"reject",function(){return pe}),n.d(e,"remove",function(){return Le}),n.d(e,"repeat",function(){return _i}),n.d(e,"replace",function(){return bi}),n.d(e,"reverse",function(){return Vt}),n.d(e,"scan",function(){return wi}),n.d(e,"sequence",function(){return xi}),n.d(e,"set",function(){return ki}),n.d(e,"slice",function(){return Nt}),n.d(e,"sort",function(){return Ci}),n.d(e,"sortBy",function(){return Si}),n.d(e,"sortWith",function(){return Ei}),n.d(e,"split",function(){return Pi}),n.d(e,"splitAt",function(){return Oi}),n.d(e,"splitEvery",function(){return Ti}),n.d(e,"splitWhen",function(){return Ai}),n.d(e,"startsWith",function(){return Ii}),n.d(e,"subtract",function(){return Di}),n.d(e,"sum",function(){return yr}),n.d(e,"symmetricDifference",function(){return Mi}),n.d(e,"symmetricDifferenceWith",function(){return Li}),n.d(e,"tail",function(){return Bt}),n.d(e,"take",function(){return Ve}),n.d(e,"takeLast",function(){return nn}),n.d(e,"takeLastWhile",function(){return ji}),n.d(e,"takeWhile",function(){return Fi}),n.d(e,"tap",function(){return Bi}),n.d(e,"test",function(){return zi}),n.d(e,"andThen",function(){return Vi}),n.d(e,"times",function(){return gi}),n.d(e,"toLower",function(){return Ui}),n.d(e,"toPairs",function(){return qi}),n.d(e,"toPairsIn",function(){return Hi}),n.d(e,"toString",function(){return me}),n.d(e,"toUpper",function(){return Zi}),n.d(e,"transduce",function(){return Gi}),n.d(e,"transpose",function(){return Wi}),n.d(e,"traverse",function(){return Xi}),n.d(e,"trim",function(){return Yi}),n.d(e,"tryCatch",function(){return Ji}),n.d(e,"type",function(){return At}),n.d(e,"unapply",function(){return $i}),n.d(e,"unary",function(){return Qi}),n.d(e,"uncurryN",function(){return to}),n.d(e,"unfold",function(){return eo}),n.d(e,"union",function(){return no}),n.d(e,"unionWith",function(){return io}),n.d(e,"uniq",function(){return Bn}),n.d(e,"uniqBy",function(){return Nn}),n.d(e,"uniqWith",function(){return ro}),n.d(e,"unless",function(){return oo}),n.d(e,"unnest",function(){return ao}),n.d(e,"until",function(){return so}),n.d(e,"update",function(){return je}),n.d(e,"useWith",function(){return si}),n.d(e,"values",function(){return lt}),n.d(e,"valuesIn",function(){return uo}),n.d(e,"view",function(){return lo}),n.d(e,"when",function(){return ho}),n.d(e,"where",function(){return fo}),n.d(e,"whereEq",function(){return po}),n.d(e,"without",function(){return vo}),n.d(e,"xor",function(){return mo}),n.d(e,"xprod",function(){return yo}),n.d(e,"zip",function(){return go}),n.d(e,"zipObj",function(){return _o}),n.d(e,"zipWith",function(){return bo}),n.d(e,"thunkify",function(){return wo});var r=function(){return!1},i=function(){return!0},o={"@@functional/placeholder":!0};function a(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function s(t){return function e(n){return 0===arguments.length||a(n)?e:t.apply(this,arguments)}}function u(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return a(n)?e:s(function(e){return t(n,e)});default:return a(n)&&a(r)?e:a(n)?s(function(e){return t(e,r)}):a(r)?s(function(e){return t(n,e)}):t(n,r)}}}var c=u(function(t,e){return Number(t)+Number(e)});function l(t,e){var n,r=(t=t||[]).length,i=(e=e||[]).length,o=[];for(n=0;n<r;)o[o.length]=t[n],n+=1;for(n=0;n<i;)o[o.length]=e[n],n+=1;return o}function h(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,o){return e.apply(this,arguments)};case 6:return function(t,n,r,i,o,a){return e.apply(this,arguments)};case 7:return function(t,n,r,i,o,a,s){return e.apply(this,arguments)};case 8:return function(t,n,r,i,o,a,s,u){return e.apply(this,arguments)};case 9:return function(t,n,r,i,o,a,s,u,c){return e.apply(this,arguments)};case 10:return function(t,n,r,i,o,a,s,u,c,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function f(t,e,n){return function(){for(var r=[],i=0,o=t,s=0;s<e.length||i<arguments.length;){var u;s<e.length&&(!a(e[s])||i>=arguments.length)?u=e[s]:(u=arguments[i],i+=1),r[s]=u,a(u)||(o-=1),s+=1}return o<=0?n.apply(this,r):h(o,f(t,r,n))}}var d=u(function(t,e){return 1===t?s(e):h(t,f(t,[],e))}),p=s(function(t){return d(t.length,function(){var e=0,n=arguments[0],r=arguments[arguments.length-1],i=Array.prototype.slice.call(arguments,0);return i[0]=function(){var t=n.apply(this,l(arguments,[e,r]));return e+=1,t},t.apply(this,i)})});function v(t){return function e(n,r,i){switch(arguments.length){case 0:return e;case 1:return a(n)?e:u(function(e,r){return t(n,e,r)});case 2:return a(n)&&a(r)?e:a(n)?u(function(e,n){return t(e,r,n)}):a(r)?u(function(e,r){return t(n,e,r)}):s(function(e){return t(n,r,e)});default:return a(n)&&a(r)&&a(i)?e:a(n)&&a(r)?u(function(e,n){return t(e,n,i)}):a(n)&&a(i)?u(function(e,n){return t(e,r,n)}):a(r)&&a(i)?u(function(e,r){return t(n,e,r)}):a(n)?s(function(e){return t(e,r,i)}):a(r)?s(function(e){return t(n,e,i)}):a(i)?s(function(e){return t(n,r,e)}):t(n,r,i)}}}var m=v(function(t,e,n){if(t>=n.length||t<-n.length)return n;var r=(t<0?n.length:0)+t,i=l(n);return i[r]=e(n[r]),i}),y=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function g(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function _(t,e,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),i=r.pop();if(!y(i)){for(var o=0;o<t.length;){if("function"==typeof i[t[o]])return i[t[o]].apply(i,r);o+=1}if(g(i)){var a=e.apply(null,r);return a(i)}}return n.apply(this,arguments)}}function b(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var w={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},x=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)||(this.all=!1,t=b(this.xf["@@transducer/step"](t,!1))),t},t}(),k=u(_(["all"],u(function(t,e){return new x(t,e)}),function(t,e){for(var n=0;n<e.length;){if(!t(e[n]))return!1;n+=1}return!0})),C=u(function(t,e){return e>t?e:t});function S(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i}function E(t){return"[object String]"===Object.prototype.toString.call(t)}var P=s(function(t){return!!y(t)||!!t&&"object"==typeof t&&!E(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1))}),O=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();function T(t){return new O(t)}var A=u(function(t,e){return h(t.length,function(){return t.apply(e,arguments)})});function I(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function D(t,e,n,r){return t["@@transducer/result"](n[r](A(t["@@transducer/step"],t),e))}var M="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function L(t,e,n){if("function"==typeof t&&(t=T(t)),P(n))return function(t,e,n){for(var r=0,i=n.length;r<i;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return D(t,e,n,"fantasy-land/reduce");if(null!=n[M])return I(t,e,n[M]());if("function"==typeof n.next)return I(t,e,n);if("function"==typeof n.reduce)return D(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var j=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=w.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),R=u(function(t,e){return new j(t,e)});function F(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var N=Object.prototype.toString,B=function(){return"[object Arguments]"===N.call(arguments)?function(t){return"[object Arguments]"===N.call(t)}:function(t){return F("callee",t)}}(),z=!{toString:null}.propertyIsEnumerable("toString"),V=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],U=function(){return arguments.propertyIsEnumerable("length")}(),q=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},H=s("function"!=typeof Object.keys||U?function(t){if(Object(t)!==t)return[];var e,n,r=[],i=U&&B(t);for(e in t)!F(e,t)||i&&"length"===e||(r[r.length]=e);if(z)for(n=V.length-1;n>=0;)F(e=V[n],t)&&!q(r,e)&&(r[r.length]=e),n-=1;return r}:function(t){return Object(t)!==t?[]:Object.keys(t)}),Z=u(_(["fantasy-land/map","map"],R,function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return d(e.length,function(){return t.call(this,e.apply(this,arguments))});case"[object Object]":return L(function(n,r){return n[r]=t(e[r]),n},{},H(e));default:return S(t,e)}})),G=Number.isInteger||function(t){return t<<0===t},W=u(function(t,e){var n=t<0?e.length+t:t;return E(e)?e.charAt(n):e[n]}),X=u(function(t,e){return t.map(function(t){for(var n,r=e,i=0;i<t.length;){if(null==r)return;r=G(n=t[i])?W(n,r):r[n],i+=1}return r})}),K=u(function(t,e){return X([t],e)[0]}),Y=u(function(t,e){return K([t],e)}),J=u(function(t,e){return Z(Y(t),e)}),$=v(L),Q=s(function(t){return d($(C,0,J("length",t)),function(){for(var e=0,n=t.length;e<n;){if(!t[e].apply(this,arguments))return!1;e+=1}return!0})}),tt=s(function(t){return function(){return t}}),et=u(function(t,e){return t&&e}),nt=function(){function t(t,e){this.xf=e,this.f=t,this.any=!1}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.any=!0,t=b(this.xf["@@transducer/step"](t,!0))),t},t}(),rt=u(_(["any"],u(function(t,e){return new nt(t,e)}),function(t,e){for(var n=0;n<e.length;){if(t(e[n]))return!0;n+=1}return!1})),it=s(function(t){return d($(C,0,J("length",t)),function(){for(var e=0,n=t.length;e<n;){if(t[e].apply(this,arguments))return!0;e+=1}return!1})}),ot=u(function(t,e){return"function"==typeof e["fantasy-land/ap"]?e["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(e):"function"==typeof t?function(n){return t(n)(e(n))}:L(function(t,n){return l(t,Z(n,e))},[],t)});var at=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.store(e),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t.prototype.getCopy=function(){return l(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},t}(),st=u(_([],u(function(t,e){return new at(t,e)}),function(t,e){for(var n=0,r=e.length-(t-1),i=new Array(r>=0?r:0);n<r;)i[n]=Array.prototype.slice.call(e,n,n+t),n+=1;return i})),ut=u(function(t,e){return l(e,[t])}),ct=u(function(t,e){return t.apply(this,e)}),lt=s(function(t){for(var e=H(t),n=e.length,r=[],i=0;i<n;)r[i]=t[e[i]],i+=1;return r});function ht(t,e){return H(e).reduce(function(n,r){return n[r]=t(e[r]),n},{})}var ft=s(function t(e){return e=ht(function(e){return"function"==typeof e?e:t(e)},e),d($(C,0,J("length",lt(e))),function(){var t=arguments;return ht(function(e){return ct(e,t)},e)})}),dt=u(function(t,e){return e(t)}),pt=v(function(t,e,n){var r=t(e),i=t(n);return r<i?-1:r>i?1:0}),vt=v(function(t,e,n){var r={};for(var i in n)r[i]=n[i];return r[t]=e,r}),mt=s(function(t){return null==t}),yt=v(function t(e,n,r){if(0===e.length)return n;var i=e[0];if(e.length>1){var o=!mt(r)&&F(i,r)?r[i]:G(e[1])?[]:{};n=t(Array.prototype.slice.call(e,1),n,o)}if(G(i)&&y(r)){var a=[].concat(r);return a[i]=n,a}return vt(i,n,r)}),gt=u(function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,n){return e.call(this,t,n)};case 3:return function(t,n,r){return e.call(this,t,n,r)};case 4:return function(t,n,r,i){return e.call(this,t,n,r,i)};case 5:return function(t,n,r,i,o){return e.call(this,t,n,r,i,o)};case 6:return function(t,n,r,i,o,a){return e.call(this,t,n,r,i,o,a)};case 7:return function(t,n,r,i,o,a,s){return e.call(this,t,n,r,i,o,a,s)};case 8:return function(t,n,r,i,o,a,s,u){return e.call(this,t,n,r,i,o,a,s,u)};case 9:return function(t,n,r,i,o,a,s,u,c){return e.call(this,t,n,r,i,o,a,s,u,c)};case 10:return function(t,n,r,i,o,a,s,u,c,l){return e.call(this,t,n,r,i,o,a,s,u,c,l)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),_t=s(function(t){return gt(2,t)});function bt(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e}var wt=u(function(t,e){var n=d(t,e);return d(t,function(){return L(ot,Z(n,arguments[0]),Array.prototype.slice.call(arguments,1))})}),xt=s(function(t){return wt(t.length,t)}),kt=u(function(t,e){return bt(t)?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:xt(et)(t,e)}),Ct=s(function(t){return d(t.length,t)}),St=Ct(function(t){return t.apply(this,Array.prototype.slice.call(arguments,1))});function Et(t){return function e(n){for(var r,i,o,a=[],s=0,u=n.length;s<u;){if(P(n[s]))for(o=0,i=(r=t?e(n[s]):n[s]).length;o<i;)a[a.length]=r[o],o+=1;else a[a.length]=n[s];s+=1}return a}}var Pt=u(_(["fantasy-land/chain","chain"],u(function(t,e){return Z(t,function(t){var e=function(t){return{"@@transducer/init":w.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var r=t["@@transducer/step"](e,n);return r["@@transducer/reduced"]?{"@@transducer/value":r,"@@transducer/reduced":!0}:r}}}(t);return{"@@transducer/init":w.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){return P(n)?L(e,t,n):L(e,t,[n])}}}(e))}),function(t,e){return"function"==typeof e?function(n){return t(e(n))(n)}:Et(!1)(Z(t,e))})),Ot=v(function(t,e,n){if(t>e)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<t?t:n>e?e:n});function Tt(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}var At=s(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function It(t,e,n,r){var i=function(i){for(var o=e.length,a=0;a<o;){if(t===e[a])return n[a];a+=1}for(var s in e[a+1]=t,n[a+1]=i,t)i[s]=r?It(t[s],e,n,!0):t[s];return i};switch(At(t)){case"Object":return i({});case"Array":return i([]);case"Date":return new Date(t.valueOf());case"RegExp":return Tt(t);default:return t}}var Dt=s(function(t){return null!=t&&"function"==typeof t.clone?t.clone():It(t,[],[],!0)}),Mt=s(function(t){return function(e,n){return t(e,n)?-1:t(n,e)?1:0}}),Lt=s(function(t){return!t}),jt=xt(Lt);function Rt(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function Ft(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return y(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var Nt=v(Ft("slice",function(t,e,n){return Array.prototype.slice.call(n,t,e)})),Bt=s(Ft("tail",Nt(1,1/0)));function zt(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return h(arguments[0].length,$(Rt,arguments[0],Bt(arguments)))}var Vt=s(function(t){return E(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()});function Ut(){if(0===arguments.length)throw new Error("compose requires at least one argument");return zt.apply(this,Vt(arguments))}function qt(){if(0===arguments.length)throw new Error("composeK requires at least one argument");var t=Array.prototype.slice.call(arguments),e=t.pop();return Ut(Ut.apply(this,Z(Pt,t)),e)}function Ht(t,e){return function(){var n=this;return t.apply(n,arguments).then(function(t){return e.call(n,t)})}}function Zt(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return h(arguments[0].length,$(Ht,arguments[0],Bt(arguments)))}function Gt(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return Zt.apply(this,Vt(arguments))}var Wt=W(0);function Xt(t){return t}var Kt=s(Xt),Yt=u(function(t,e){if(e.length<=0)return Kt;var n=Wt(e),r=Bt(e);return h(n.length,function(){return L(function(e,n){return t.call(this,n,e)},n.apply(this,arguments),r)})}),Jt=u(function(t,e){return Yt.apply(this,[t,Vt(e)])});function $t(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function Qt(t,e,n){for(var r=0,i=n.length;r<i;){if(t(e,n[r]))return!0;r+=1}return!1}var te="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};function ee(t,e,n,r){var i=$t(t);function o(t,e){return ne(t,e,n.slice(),r.slice())}return!Qt(function(t,e){return!Qt(o,e,t)},$t(e),i)}function ne(t,e,n,r){if(te(t,e))return!0;var i,o=At(t);if(o!==At(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(null==(i=String(t.constructor).match(/^function (\w*)/))?"":i[1]))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!te(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!te(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var a=n.length-1;a>=0;){if(n[a]===t)return r[a]===e;a-=1}switch(o){case"Map":return t.size===e.size&&ee(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&ee(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var s=H(t);if(s.length!==H(e).length)return!1;var u=n.concat([t]),c=r.concat([e]);for(a=s.length-1;a>=0;){var l=s[a];if(!F(l,e)||!ne(e[l],t[l],u,c))return!1;a-=1}return!0}var re=u(function(t,e){return ne(t,e,[],[])});function ie(t,e,n){var r,i;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(i=t[n])&&1/i===r)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(i=t[n])&&i!=i)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(re(t[n],e))return n;n+=1}return-1}function oe(t,e){return ie(e,t,0)>=0}function ae(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var se=function(t){return(t<10?"0":"")+t},ue="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+se(t.getUTCMonth()+1)+"-"+se(t.getUTCDate())+"T"+se(t.getUTCHours())+":"+se(t.getUTCMinutes())+":"+se(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function ce(t){return function(){return!t.apply(this,arguments)}}function le(t,e){for(var n=0,r=e.length,i=[];n<r;)t(e[n])&&(i[i.length]=e[n]),n+=1;return i}function he(t){return"[object Object]"===Object.prototype.toString.call(t)}var fe=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=w.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),de=u(_(["filter"],u(function(t,e){return new fe(t,e)}),function(t,e){return he(e)?L(function(n,r){return t(e[r])&&(n[r]=e[r]),n},{},H(e)):le(t,e)})),pe=u(function(t,e){return de(ce(t),e)});function ve(t,e){var n=function(n){var r=e.concat([t]);return oe(n,r)?"<Circular>":ve(n,r)},r=function(t,e){return S(function(e){return ae(e)+": "+n(t[e])},e.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+S(n,t).join(", ")+"))";case"[object Array]":return"["+S(n,t).concat(r(t,pe(function(t){return/^\d+$/.test(t)},H(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+n(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?n(NaN):ae(ue(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+n(t.valueOf())+")":1/t==-1/0?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+n(t.valueOf())+")":ae(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var i=t.toString();if("[object Object]"!==i)return i}return"{"+r(t,H(t)).join(", ")+"}"}}var me=s(function(t){return ve(t,[])}),ye=u(function(t,e){if(y(t)){if(y(e))return t.concat(e);throw new TypeError(me(e)+" is not an array")}if(E(t)){if(E(e))return t+e;throw new TypeError(me(e)+" is not a string")}if(null!=t&&bt(t["fantasy-land/concat"]))return t["fantasy-land/concat"](e);if(null!=t&&bt(t.concat))return t.concat(e);throw new TypeError(me(t)+' does not have a method named "concat" or "fantasy-land/concat"')}),ge=s(function(t){return h($(C,0,Z(function(t){return t[0].length},t)),function(){for(var e=0;e<t.length;){if(t[e][0].apply(this,arguments))return t[e][1].apply(this,arguments);e+=1}})}),_e=u(function(t,e){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new e}:Ct(gt(t,function(t,n,r,i,o,a,s,u,c,l){switch(arguments.length){case 1:return new e(t);case 2:return new e(t,n);case 3:return new e(t,n,r);case 4:return new e(t,n,r,i);case 5:return new e(t,n,r,i,o);case 6:return new e(t,n,r,i,o,a);case 7:return new e(t,n,r,i,o,a,s);case 8:return new e(t,n,r,i,o,a,s,u);case 9:return new e(t,n,r,i,o,a,s,u,c);case 10:return new e(t,n,r,i,o,a,s,u,c,l)}}))}),be=s(function(t){return _e(t.length,t)}),we=u(oe),xe=u(function(t,e){return d($(C,0,J("length",e)),function(){var n=arguments,r=this;return t.apply(r,S(function(t){return t.apply(r,n)},e))})}),ke=function(){function t(t,e,n,r){this.valueFn=t,this.valueAcc=e,this.keyFn=n,this.xf=r,this.inputs={}}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(F(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=this.keyFn(e);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],e),t},t}(),Ce=f(4,[],_([],f(4,[],function(t,e,n,r){return new ke(t,e,n,r)}),function(t,e,n,r){return L(function(r,i){var o=n(i);return r[o]=t(F(o,r)?r[o]:It(e,[],[],!1),i),r},{},r)})),Se=Ce(function(t,e){return t+1},0),Ee=c(-1),Pe=u(function(t,e){return null==e||e!=e?t:e}),Oe=v(function(t,e,n){var r=t(e),i=t(n);return r>i?-1:r<i?1:0});function Te(t,e,n){var r,i=typeof t;switch(i){case"string":case"number":return 0===t&&1/t==-1/0?!!n._items["-0"]||(e&&(n._items["-0"]=!0),!1):null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?t in n._items[i]||(e&&(n._items[i][t]=!0),!1):(e&&(n._items[i]={},n._items[i][t]=!0),!1);case"boolean":if(i in n._items){var o=t?1:0;return!!n._items[i][o]||(e&&(n._items[i][o]=!0),!1)}return e&&(n._items[i]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?!!oe(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1);case"undefined":return!!n._items[i]||(e&&(n._items[i]=!0),!1);case"object":if(null===t)return!!n._items.null||(e&&(n._items.null=!0),!1);default:return(i=Object.prototype.toString.call(t))in n._items?!!oe(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1)}}var Ae=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!Te(t,!0,this)},t.prototype.has=function(t){return Te(t,!1,this)},t}(),Ie=u(function(t,e){for(var n=[],r=0,i=t.length,o=e.length,a=new Ae,s=0;s<o;s+=1)a.add(e[s]);for(;r<i;)a.add(t[r])&&(n[n.length]=t[r]),r+=1;return n}),De=v(function(t,e,n){for(var r=[],i=0,o=e.length;i<o;)Qt(t,e[i],n)||Qt(t,e[i],r)||r.push(e[i]),i+=1;return r}),Me=u(function(t,e){var n={};for(var r in e)n[r]=e[r];return delete n[t],n}),Le=v(function(t,e,n){var r=Array.prototype.slice.call(n,0);return r.splice(t,e),r}),je=v(function(t,e,n){return m(t,tt(e),n)}),Re=u(function t(e,n){switch(e.length){case 0:return n;case 1:return G(e[0])&&y(n)?Le(e[0],1,n):Me(e[0],n);default:var r=e[0],i=Array.prototype.slice.call(e,1);return null==n[r]?n:G(r)&&y(n)?je(r,t(i,n[r]),n):vt(r,t(i,n[r]),n)}}),Fe=u(function(t,e){return t/e}),Ne=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=w.result,t.prototype["@@transducer/step"]=function(t,e){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,e)},t}(),Be=u(_(["drop"],u(function(t,e){return new Ne(t,e)}),function(t,e){return Nt(Math.max(0,t),1/0,e)})),ze=function(){function t(t,e){this.xf=e,this.n=t,this.i=0}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=w.result,t.prototype["@@transducer/step"]=function(t,e){this.i+=1;var n=0===this.n?t:this.xf["@@transducer/step"](t,e);return this.n>=0&&this.i>=this.n?b(n):n},t}(),Ve=u(_(["take"],u(function(t,e){return new ze(t,e)}),function(t,e){return Nt(0,t<0?1/0:t,e)}));var Ue=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(e),t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t}(),qe=u(_([],u(function(t,e){return new Ue(t,e)}),function(t,e){return Ve(t<e.length?e.length-t:0,e)}));var He=function(){function t(t,e){this.f=t,this.retained=[],this.xf=e}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.retain(t,e):this.flush(t,e)},t.prototype.flush=function(t,e){return t=L(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,e)},t.prototype.retain=function(t,e){return this.retained.push(e),t},t}(),Ze=u(_([],u(function(t,e){return new He(t,e)}),function(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return Nt(0,n+1,e)})),Ge=function(){function t(t,e){this.xf=e,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=w.result,t.prototype["@@transducer/step"]=function(t,e){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,e)&&(n=!0):this.seenFirstValue=!0,this.lastValue=e,n?t:this.xf["@@transducer/step"](t,e)},t}(),We=u(function(t,e){return new Ge(t,e)}),Xe=W(-1),Ke=u(_([],We,function(t,e){var n=[],r=1,i=e.length;if(0!==i)for(n[0]=e[0];r<i;)t(Xe(n),e[r])||(n[n.length]=e[r]),r+=1;return n})),Ye=s(_([],We(re),Ke(re))),Je=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=w.result,t.prototype["@@transducer/step"]=function(t,e){if(this.f){if(this.f(e))return t;this.f=null}return this.xf["@@transducer/step"](t,e)},t}(),$e=u(_(["dropWhile"],u(function(t,e){return new Je(t,e)}),function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return Nt(n,1/0,e)})),Qe=u(function(t,e){return t||e}),tn=u(function(t,e){return bt(t)?function(){return t.apply(this,arguments)||e.apply(this,arguments)}:xt(Qe)(t,e)}),en=s(function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():y(t)?[]:E(t)?"":he(t)?{}:B(t)?function(){return arguments}():void 0}),nn=u(function(t,e){return Be(t>=0?e.length-t:0,e)}),rn=u(function(t,e){return re(nn(t.length,e),t)}),on=v(function(t,e,n){return re(t(e),t(n))}),an=v(function(t,e,n){return re(e[t],n[t])}),sn=u(function t(e,n){var r,i,o,a=n instanceof Array?[]:{};for(i in n)a[i]="function"==(o=typeof(r=e[i]))?r(n[i]):r&&"object"===o?t(r,n[i]):n[i];return a}),un=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.found=!0,t=b(this.xf["@@transducer/step"](t,e))),t},t}(),cn=u(_(["find"],u(function(t,e){return new un(t,e)}),function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return e[n];n+=1}})),ln=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=b(this.xf["@@transducer/step"](t,this.idx))),t},t}(),hn=u(_([],u(function(t,e){return new ln(t,e)}),function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return n;n+=1}return-1})),fn=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.last=e),t},t}(),dn=u(_([],u(function(t,e){return new fn(t,e)}),function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return e[n];n-=1}})),pn=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.lastIdx=this.idx),t},t}(),vn=u(_([],u(function(t,e){return new pn(t,e)}),function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return n;n-=1}return-1})),mn=s(Et(!0)),yn=s(function(t){return d(t.length,function(e,n){var r=Array.prototype.slice.call(arguments,0);return r[0]=n,r[1]=e,t.apply(this,r)})}),gn=u(Ft("forEach",function(t,e){for(var n=e.length,r=0;r<n;)t(e[r]),r+=1;return e})),_n=u(function(t,e){for(var n=H(e),r=0;r<n.length;){var i=n[r];t(e[i],i,e),r+=1}return e}),bn=s(function(t){for(var e={},n=0;n<t.length;)e[t[n][0]]=t[n][1],n+=1;return e}),wn=u(Ft("groupBy",Ce(function(t,e){return null==t&&(t=[]),t.push(e),t},null))),xn=u(function(t,e){for(var n=[],r=0,i=e.length;r<i;){for(var o=r+1;o<i&&t(e[o-1],e[o]);)o+=1;n.push(e.slice(r,o)),r=o}return n}),kn=u(function(t,e){return t>e}),Cn=u(function(t,e){return t>=e}),Sn=u(function(t,e){if(0===t.length||mt(e))return!1;for(var n=e,r=0;r<t.length;){if(mt(n)||!F(t[r],n))return!1;n=n[t[r]],r+=1}return!0}),En=u(function(t,e){return Sn([t],e)}),Pn=u(function(t,e){return t in e}),On=u(te),Tn=v(function(t,e,n){return d(Math.max(t.length,e.length,n.length),function(){return t.apply(this,arguments)?e.apply(this,arguments):n.apply(this,arguments)})}),An=c(1),In=u(oe),Dn=Ce(function(t,e){return e},null),Mn=u(function(t,e){return"function"!=typeof e.indexOf||y(e)?ie(e,t,0):e.indexOf(t)}),Ln=Nt(0,-1),jn=v(function(t,e,n){return le(function(e){return Qt(t,e,n)},e)}),Rn=v(function(t,e,n){t=t<n.length&&t>=0?t:n.length;var r=Array.prototype.slice.call(n,0);return r.splice(t,0,e),r}),Fn=v(function(t,e,n){return t=t<n.length&&t>=0?t:n.length,[].concat(Array.prototype.slice.call(n,0,t),e,Array.prototype.slice.call(n,t))}),Nn=u(function(t,e){for(var n,r,i=new Ae,o=[],a=0;a<e.length;)n=t(r=e[a]),i.add(n)&&o.push(r),a+=1;return o}),Bn=Nn(Kt),zn=u(function(t,e){var n,r;return t.length>e.length?(n=t,r=e):(n=e,r=t),Bn(le(yn(oe)(n),r))}),Vn=u(Ft("intersperse",function(t,e){for(var n=[],r=0,i=e.length;r<i;)r===i-1?n.push(e[r]):n.push(e[r],t),r+=1;return n})),Un="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var i=arguments[n];if(null!=i)for(var o in i)F(o,i)&&(e[o]=i[o]);n+=1}return e},qn=u(function(t,e){var n={};return n[t]=e,n}),Hn={"@@transducer/init":Array,"@@transducer/step":function(t,e){return t.push(e),t},"@@transducer/result":Xt},Zn={"@@transducer/init":String,"@@transducer/step":function(t,e){return t+e},"@@transducer/result":Xt},Gn={"@@transducer/init":Object,"@@transducer/step":function(t,e){return Un(t,P(e)?qn(e[0],e[1]):e)},"@@transducer/result":Xt},Wn=v(function(t,e,n){return g(t)?L(e(t),t["@@transducer/init"](),n):L(e(function(t){if(g(t))return t;if(P(t))return Hn;if("string"==typeof t)return Zn;if("object"==typeof t)return Gn;throw new Error("Cannot create transformer for "+t)}(t)),It(t,[],[],!1),n)}),Xn=s(function(t){for(var e=H(t),n=e.length,r=0,i={};r<n;){var o=e[r],a=t[o],s=F(a,i)?i[a]:i[a]=[];s[s.length]=o,r+=1}return i}),Kn=s(function(t){for(var e=H(t),n=e.length,r=0,i={};r<n;){var o=e[r];i[t[o]]=o,r+=1}return i}),Yn=u(function(t,e){return d(t+1,function(){var n=arguments[t];if(null!=n&&bt(n[e]))return n[e].apply(n,Array.prototype.slice.call(arguments,0,t));throw new TypeError(me(n)+' does not have a method named "'+e+'"')})}),Jn=u(function(t,e){return null!=e&&e.constructor===t||e instanceof t}),$n=s(function(t){return null!=t&&re(t,en(t))}),Qn=Yn(1,"join"),tr=s(function(t){return xe(function(){return Array.prototype.slice.call(arguments,0)},t)}),er=s(function(t){var e,n=[];for(e in t)n[n.length]=e;return n}),nr=u(function(t,e){if("function"!=typeof e.lastIndexOf||y(e)){for(var n=e.length-1;n>=0;){if(re(e[n],t))return n;n-=1}return-1}return e.lastIndexOf(t)});function rr(t){return"[object Number]"===Object.prototype.toString.call(t)}var ir=s(function(t){return null!=t&&rr(t.length)?t.length:NaN}),or=u(function(t,e){return function(n){return function(r){return Z(function(t){return e(t,r)},n(t(r)))}}}),ar=s(function(t){return or(W(t),je(t))}),sr=s(function(t){return or(K(t),yt(t))}),ur=s(function(t){return or(Y(t),vt(t))}),cr=u(function(t,e){return t<e}),lr=u(function(t,e){return t<=e}),hr=v(function(t,e,n){for(var r=0,i=n.length,o=[],a=[e];r<i;)a=t(a[0],n[r]),o[r]=a[1],r+=1;return[a[0],o]}),fr=v(function(t,e,n){for(var r=n.length-1,i=[],o=[e];r>=0;)o=t(o[0],n[r]),i[r]=o[1],r-=1;return[o[0],i]}),dr=u(function(t,e){return L(function(n,r){return n[r]=t(e[r],r,e),n},{},H(e))}),pr=u(function(t,e){return e.match(t)||[]}),vr=u(function(t,e){return G(t)?!G(e)||e<1?NaN:(t%e+e)%e:NaN}),mr=v(function(t,e,n){return t(n)>t(e)?n:e}),yr=$(c,0),gr=s(function(t){return yr(t)/t.length}),_r=s(function(t){var e=t.length;if(0===e)return NaN;var n=2-e%2,r=(e-n)/2;return gr(Array.prototype.slice.call(t,0).sort(function(t,e){return t<e?-1:t>e?1:0}).slice(r,r+n))}),br=u(function(t,e){var n={};return h(e.length,function(){var r=t.apply(this,arguments);return F(r,n)||(n[r]=e.apply(this,arguments)),n[r]})}),wr=u(function(t,e){return Un({},t,e)}),xr=s(function(t){return Un.apply(null,[{}].concat(t))}),kr=v(function(t,e,n){var r,i={};for(r in e)F(r,e)&&(i[r]=F(r,n)?t(r,e[r],n[r]):e[r]);for(r in n)F(r,n)&&!F(r,i)&&(i[r]=n[r]);return i}),Cr=v(function t(e,n,r){return kr(function(n,r,i){return he(r)&&he(i)?t(e,r,i):e(n,r,i)},n,r)}),Sr=u(function(t,e){return Cr(function(t,e,n){return e},t,e)}),Er=u(function(t,e){return Cr(function(t,e,n){return n},t,e)}),Pr=v(function(t,e,n){return Cr(function(e,n,r){return t(n,r)},e,n)}),Or=u(function(t,e){return Un({},e,t)}),Tr=u(function(t,e){return Un({},t,e)}),Ar=v(function(t,e,n){return kr(function(e,n,r){return t(n,r)},e,n)}),Ir=u(function(t,e){return e<t?e:t}),Dr=v(function(t,e,n){return t(n)<t(e)?n:e}),Mr=u(function(t,e){return t%e}),Lr=v(function(t,e,n){var r=n.length,i=n.slice(),o=t<0?r+t:t,a=e<0?r+e:e,s=i.splice(o,1);return o<0||o>=n.length||a<0||a>=n.length?n:[].concat(i.slice(0,a)).concat(s).concat(i.slice(a,n.length))}),jr=u(function(t,e){return t*e}),Rr=s(function(t){return-t}),Fr=u(function(t,e){return k(ce(t),e)}),Nr=s(function(t){return d(t<0?1:t+1,function(){return W(t,arguments)})}),Br=v(function(t,e,n){return t(e(n))});var zr=s(function(t){return[t]}),Vr=u(function(t,e){for(var n={},r={},i=0,o=t.length;i<o;)r[t[i]]=1,i+=1;for(var a in e)r.hasOwnProperty(a)||(n[a]=e[a]);return n}),Ur=s(function(t){var e,n=!1;return h(t.length,function(){return n?e:(n=!0,e=t.apply(this,arguments))})});function qr(t,e){if(null==e||!bt(e.then))throw new TypeError("`"+t+"` expected a Promise, received "+ve(e,[]))}var Hr=u(function(t,e){return qr("otherwise",e),e.then(null,t)}),Zr=function t(e){return{value:e,map:function(n){return t(n(e))}}},Gr=v(function(t,e,n){return t(function(t){return Zr(e(t))})(n).value}),Wr=u(function(t,e){return[t,e]});function Xr(t){return u(function(e,n){return h(Math.max(0,e.length-n.length),function(){return e.apply(this,t(n,arguments))})})}var Kr=Xr(l),Yr=Xr(yn(l)),Jr=tr([de,pe]),$r=v(function(t,e,n){return re(K(t,n),e)}),Qr=v(function(t,e,n){return Pe(t,K(e,n))}),ti=v(function(t,e,n){return t(K(e,n))}),ei=u(function(t,e){for(var n={},r=0;r<t.length;)t[r]in e&&(n[t[r]]=e[t[r]]),r+=1;return n}),ni=u(function(t,e){for(var n={},r=0,i=t.length;r<i;){var o=t[r];n[o]=e[o],r+=1}return n}),ri=u(function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n});function ii(){if(0===arguments.length)throw new Error("pipeK requires at least one argument");return qt.apply(this,Vt(arguments))}var oi=u(function(t,e){return l([t],e)}),ai=$(jr,1),si=u(function(t,e){return d(e.length,function(){for(var n=[],r=0;r<e.length;)n.push(e[r].call(this,arguments[r])),r+=1;return t.apply(this,n.concat(Array.prototype.slice.call(arguments,e.length)))})}),ui=si(S,[ni,Kt]),ci=v(function(t,e,n){return re(e,n[t])}),li=v(function(t,e,n){return Jn(t,n[e])}),hi=v(function(t,e,n){return Qr(t,[e],n)}),fi=v(function(t,e,n){return t(n[e])}),di=u(function(t,e){return t.map(function(t){return K([t],e)})}),pi=u(function(t,e){if(!rr(t)||!rr(e))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=t;r<e;)n.push(r),r+=1;return n}),vi=v(function(t,e,n){for(var r=n.length-1;r>=0;)e=t(n[r],e),r-=1;return e}),mi=f(4,[],function(t,e,n,r){return L(function(n,r){return t(n,r)?e(n,r):b(n)},n,r)}),yi=s(b),gi=u(function(t,e){var n,r=Number(e),i=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(n=new Array(r);i<r;)n[i]=t(i),i+=1;return n}),_i=u(function(t,e){return gi(tt(t),e)}),bi=v(function(t,e,n){return n.replace(t,e)}),wi=v(function(t,e,n){for(var r=0,i=n.length,o=[e];r<i;)e=t(e,n[r]),o[r+1]=e,r+=1;return o}),xi=u(function(t,e){return"function"==typeof e.sequence?e.sequence(t):vi(function(t,e){return ot(Z(oi,t),e)},t([]),e)}),ki=v(function(t,e,n){return Gr(t,tt(e),n)}),Ci=u(function(t,e){return Array.prototype.slice.call(e,0).sort(t)}),Si=u(function(t,e){return Array.prototype.slice.call(e,0).sort(function(e,n){var r=t(e),i=t(n);return r<i?-1:r>i?1:0})}),Ei=u(function(t,e){return Array.prototype.slice.call(e,0).sort(function(e,n){for(var r=0,i=0;0===r&&i<t.length;)r=t[i](e,n),i+=1;return r})}),Pi=Yn(1,"split"),Oi=u(function(t,e){return[Nt(0,t,e),Nt(t,ir(e),e)]}),Ti=u(function(t,e){if(t<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<e.length;)n.push(Nt(r,r+=t,e));return n}),Ai=u(function(t,e){for(var n=0,r=e.length,i=[];n<r&&!t(e[n]);)i.push(e[n]),n+=1;return[i,Array.prototype.slice.call(e,n)]}),Ii=u(function(t,e){return re(Ve(t.length,e),t)}),Di=u(function(t,e){return Number(t)-Number(e)}),Mi=u(function(t,e){return ye(Ie(t,e),Ie(e,t))}),Li=v(function(t,e,n){return ye(De(t,e,n),De(t,n,e))}),ji=u(function(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return Nt(n+1,1/0,e)}),Ri=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=w.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):b(t)},t}(),Fi=u(_(["takeWhile"],u(function(t,e){return new Ri(t,e)}),function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return Nt(0,n,e)})),Ni=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=w.init,t.prototype["@@transducer/result"]=w.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e),this.xf["@@transducer/step"](t,e)},t}(),Bi=u(_([],u(function(t,e){return new Ni(t,e)}),function(t,e){return t(e),e})),zi=u(function(t,e){if("[object RegExp]"!==Object.prototype.toString.call(t))throw new TypeError("\u2018test\u2019 requires a value of type RegExp as its first argument; received "+me(t));return Tt(t).test(e)}),Vi=u(function(t,e){return qr("andThen",e),e.then(t)}),Ui=Yn(0,"toLowerCase"),qi=s(function(t){var e=[];for(var n in t)F(n,t)&&(e[e.length]=[n,t[n]]);return e}),Hi=s(function(t){var e=[];for(var n in t)e[e.length]=[n,t[n]];return e}),Zi=Yn(0,"toUpperCase"),Gi=d(4,function(t,e,n,r){return L(t("function"==typeof e?T(e):e),n,r)}),Wi=s(function(t){for(var e=0,n=[];e<t.length;){for(var r=t[e],i=0;i<r.length;)void 0===n[i]&&(n[i]=[]),n[i].push(r[i]),i+=1;e+=1}return n}),Xi=v(function(t,e,n){return"function"==typeof n["fantasy-land/traverse"]?n["fantasy-land/traverse"](e,t):xi(t,Z(e,n))}),Ki="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",Yi=s("function"==typeof String.prototype.trim&&!Ki.trim()&&"\u200b".trim()?function(t){return t.trim()}:function(t){var e=new RegExp("^["+Ki+"]["+Ki+"]*"),n=new RegExp("["+Ki+"]["+Ki+"]*$");return t.replace(e,"").replace(n,"")}),Ji=u(function(t,e){return h(t.length,function(){try{return t.apply(this,arguments)}catch(n){return e.apply(this,l([n],arguments))}})}),$i=s(function(t){return function(){return t(Array.prototype.slice.call(arguments,0))}}),Qi=s(function(t){return gt(1,t)}),to=u(function(t,e){return d(t,function(){for(var n,r=1,i=e,o=0;r<=t&&"function"==typeof i;)n=r===t?arguments.length:o+i.length,i=i.apply(this,Array.prototype.slice.call(arguments,o,n)),r+=1,o=n;return i})}),eo=u(function(t,e){for(var n=t(e),r=[];n&&n.length;)r[r.length]=n[0],n=t(n[1]);return r}),no=u(Ut(Bn,l)),ro=u(function(t,e){for(var n,r=0,i=e.length,o=[];r<i;)Qt(t,n=e[r],o)||(o[o.length]=n),r+=1;return o}),io=v(function(t,e,n){return ro(t,l(e,n))}),oo=v(function(t,e,n){return t(n)?n:e(n)}),ao=Pt(Xt),so=v(function(t,e,n){for(var r=n;!t(r);)r=e(r);return r}),uo=s(function(t){var e,n=[];for(e in t)n[n.length]=t[e];return n}),co=function(t){return{value:t,"fantasy-land/map":function(){return this}}},lo=u(function(t,e){return t(co)(e).value}),ho=v(function(t,e,n){return t(n)?e(n):n}),fo=u(function(t,e){for(var n in t)if(F(n,t)&&!t[n](e[n]))return!1;return!0}),po=u(function(t,e){return fo(Z(re,t),e)}),vo=u(function(t,e){return pe(yn(oe)(t),e)}),mo=u(function(t,e){return Boolean(!t^!e)}),yo=u(function(t,e){for(var n,r=0,i=t.length,o=e.length,a=[];r<i;){for(n=0;n<o;)a[a.length]=[t[r],e[n]],n+=1;r+=1}return a}),go=u(function(t,e){for(var n=[],r=0,i=Math.min(t.length,e.length);r<i;)n[r]=[t[r],e[r]],r+=1;return n}),_o=u(function(t,e){for(var n=0,r=Math.min(t.length,e.length),i={};n<r;)i[t[n]]=e[n],n+=1;return i}),bo=v(function(t,e,n){for(var r=[],i=0,o=Math.min(e.length,n.length);i<o;)r[i]=t(e[i],n[i]),i+=1;return r}),wo=s(function(t){return d(t.length,function(){var e=arguments;return function(){return t.apply(this,e)}})})},sYmb:function(e,n,r){"use strict";r.r(n),r.d(n,"DEFAULT_LANGUAGE",function(){return N}),r.d(n,"FakeMissingTranslationHandler",function(){return C}),r.d(n,"MissingTranslationHandler",function(){return k}),r.d(n,"TranslateCompiler",function(){return D}),r.d(n,"TranslateDefaultParser",function(){return A}),r.d(n,"TranslateDirective",function(){return V}),r.d(n,"TranslateFakeCompiler",function(){return M}),r.d(n,"TranslateFakeLoader",function(){return w}),r.d(n,"TranslateLoader",function(){return b}),r.d(n,"TranslateModule",function(){return q}),r.d(n,"TranslateParser",function(){return T}),r.d(n,"TranslatePipe",function(){return U}),r.d(n,"TranslateService",function(){return z}),r.d(n,"TranslateStore",function(){return j}),r.d(n,"USE_DEFAULT_LANG",function(){return F}),r.d(n,"USE_EXTEND",function(){return B}),r.d(n,"USE_STORE",function(){return R});var o=r("fXoL"),a=r("LRne"),s=r("7+OI"),u=r("cp0P"),c=r("GyhO"),h=r("NXyV"),d=r("IzEk"),p=r("UXun"),v=r("lJxs"),m=r("bOdf"),g=r("eIep"),b=_(function t(){y(this,t)}),w=function(){var t=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"getTranslation",value:function(t){return Object(a.a)({})}}]),n}(b);return t.\u0275fac=function(e){return x(e||t)},t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),x=o["\u0275\u0275getInheritedFactory"](w),k=_(function t(){y(this,t)}),C=function(){var t=function(){function t(){y(this,t)}return _(t,[{key:"handle",value:function(t){return t.key}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();function S(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,o=typeof t;if(o==typeof e&&"object"==o){if(!Array.isArray(t)){if(Array.isArray(e))return!1;for(r in i=Object.create(null),t){if(!S(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!(r in i)&&void 0!==e[r])return!1;return!0}if(!Array.isArray(e))return!1;if((n=t.length)==e.length){for(r=0;r<n;r++)if(!S(t[r],e[r]))return!1;return!0}}return!1}function E(t){return null!=t}function P(t){return t&&"object"==typeof t&&!Array.isArray(t)}function O(e,n){var r=Object.assign({},e);return P(e)&&P(n)&&Object.keys(n).forEach(function(i){P(n[i])&&i in e?r[i]=O(e[i],n[i]):Object.assign(r,t({},i,n[i]))}),r}var T=_(function t(){y(this,t)}),A=function(){var t=function(t){l(n,t);var e=f(n);function n(){var t;return y(this,n),(t=e.apply(this,arguments)).templateMatcher=/{{\s?([^{}\s]*)\s?}}/g,t}return _(n,[{key:"interpolate",value:function(t,e){return"string"==typeof t?this.interpolateString(t,e):"function"==typeof t?this.interpolateFunction(t,e):t}},{key:"getValue",value:function(t,e){var n="string"==typeof e?e.split("."):[e];e="";do{e+=n.shift(),!E(t)||!E(t[e])||"object"!=typeof t[e]&&n.length?n.length?e+=".":t=void 0:(t=t[e],e="")}while(n.length);return t}},{key:"interpolateFunction",value:function(t,e){return t(e)}},{key:"interpolateString",value:function(t,e){var n=this;return e?t.replace(this.templateMatcher,function(t,r){var i=n.getValue(e,r);return E(i)?i:t}):t}}]),n}(T);return t.\u0275fac=function(e){return I(e||t)},t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),I=o["\u0275\u0275getInheritedFactory"](A),D=_(function t(){y(this,t)}),M=function(){var t=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"compile",value:function(t,e){return t}},{key:"compileTranslations",value:function(t,e){return t}}]),n}(D);return t.\u0275fac=function(e){return L(e||t)},t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),L=o["\u0275\u0275getInheritedFactory"](M),j=_(function t(){y(this,t),this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new o.EventEmitter,this.onLangChange=new o.EventEmitter,this.onDefaultLangChange=new o.EventEmitter}),R=new o.InjectionToken("USE_STORE"),F=new o.InjectionToken("USE_DEFAULT_LANG"),N=new o.InjectionToken("DEFAULT_LANGUAGE"),B=new o.InjectionToken("USE_EXTEND"),z=function(){var t=function(){function t(e,n,r,i,a){var s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8?arguments[8]:void 0;y(this,t),this.store=e,this.currentLoader=n,this.compiler=r,this.parser=i,this.missingTranslationHandler=a,this.useDefaultLang=s,this.isolate=u,this.extend=c,this.pending=!1,this._onTranslationChange=new o.EventEmitter,this._onLangChange=new o.EventEmitter,this._onDefaultLangChange=new o.EventEmitter,this._langs=[],this._translations={},this._translationRequests={},l&&this.setDefaultLang(l)}return _(t,[{key:"onTranslationChange",get:function(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}},{key:"onLangChange",get:function(){return this.isolate?this._onLangChange:this.store.onLangChange}},{key:"onDefaultLangChange",get:function(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}},{key:"defaultLang",get:function(){return this.isolate?this._defaultLang:this.store.defaultLang},set:function(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}},{key:"currentLang",get:function(){return this.isolate?this._currentLang:this.store.currentLang},set:function(t){this.isolate?this._currentLang=t:this.store.currentLang=t}},{key:"langs",get:function(){return this.isolate?this._langs:this.store.langs},set:function(t){this.isolate?this._langs=t:this.store.langs=t}},{key:"translations",get:function(){return this.isolate?this._translations:this.store.translations},set:function(t){this.isolate?this._translations=t:this.store.translations=t}},{key:"setDefaultLang",value:function(t){var e=this;if(t!==this.defaultLang){var n=this.retrieveTranslations(t);void 0!==n?(null==this.defaultLang&&(this.defaultLang=t),n.pipe(Object(d.a)(1)).subscribe(function(n){e.changeDefaultLang(t)})):this.changeDefaultLang(t)}}},{key:"getDefaultLang",value:function(){return this.defaultLang}},{key:"use",value:function(t){var e=this;if(t===this.currentLang)return Object(a.a)(this.translations[t]);var n=this.retrieveTranslations(t);return void 0!==n?(this.currentLang||(this.currentLang=t),n.pipe(Object(d.a)(1)).subscribe(function(n){e.changeLang(t)}),n):(this.changeLang(t),Object(a.a)(this.translations[t]))}},{key:"retrieveTranslations",value:function(t){var e;return(void 0===this.translations[t]||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),e=this._translationRequests[t]),e}},{key:"getTranslation",value:function(t){var e=this;this.pending=!0;var n=this.currentLoader.getTranslation(t).pipe(Object(p.a)(1),Object(d.a)(1));return this.loadingTranslations=n.pipe(Object(v.a)(function(n){return e.compiler.compileTranslations(n,t)}),Object(p.a)(1),Object(d.a)(1)),this.loadingTranslations.subscribe({next:function(n){e.translations[t]=e.extend&&e.translations[t]?Object.assign(Object.assign({},n),e.translations[t]):n,e.updateLangs(),e.pending=!1},error:function(t){e.pending=!1}}),n}},{key:"setTranslation",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=this.compiler.compileTranslations(e,t),this.translations[t]=(n||this.extend)&&this.translations[t]?O(this.translations[t],e):e,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}},{key:"getLangs",value:function(){return this.langs}},{key:"addLangs",value:function(t){var e=this;t.forEach(function(t){-1===e.langs.indexOf(t)&&e.langs.push(t)})}},{key:"updateLangs",value:function(){this.addLangs(Object.keys(this.translations))}},{key:"getParsedResult",value:function(t,e,n){var r;if(e instanceof Array){var o,c={},l=!1,h=i(e);try{for(h.s();!(o=h.n()).done;){var f=o.value;c[f]=this.getParsedResult(t,f,n),Object(s.a)(c[f])&&(l=!0)}}catch(m){h.e(m)}finally{h.f()}if(l){var d=e.map(function(t){return Object(s.a)(c[t])?c[t]:Object(a.a)(c[t])});return Object(u.a)(d).pipe(Object(v.a)(function(t){var n={};return t.forEach(function(t,r){n[e[r]]=t}),n}))}return c}if(t&&(r=this.parser.interpolate(this.parser.getValue(t,e),n)),void 0===r&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(r=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],e),n)),void 0===r){var p={key:e,translateService:this};void 0!==n&&(p.interpolateParams=n),r=this.missingTranslationHandler.handle(p)}return void 0!==r?r:e}},{key:"get",value:function(t,e){var n=this;if(!E(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(Object(m.a)(function(r){return r=n.getParsedResult(r,t,e),Object(s.a)(r)?r:Object(a.a)(r)}));var r=this.getParsedResult(this.translations[this.currentLang],t,e);return Object(s.a)(r)?r:Object(a.a)(r)}},{key:"getStreamOnTranslationChange",value:function(t,e){var n=this;if(!E(t)||!t.length)throw new Error('Parameter "key" required');return Object(c.a)(Object(h.a)(function(){return n.get(t,e)}),this.onTranslationChange.pipe(Object(g.a)(function(r){var i=n.getParsedResult(r.translations,t,e);return"function"==typeof i.subscribe?i:Object(a.a)(i)})))}},{key:"stream",value:function(t,e){var n=this;if(!E(t)||!t.length)throw new Error('Parameter "key" required');return Object(c.a)(Object(h.a)(function(){return n.get(t,e)}),this.onLangChange.pipe(Object(g.a)(function(r){var i=n.getParsedResult(r.translations,t,e);return Object(s.a)(i)?i:Object(a.a)(i)})))}},{key:"instant",value:function(t,e){if(!E(t)||!t.length)throw new Error('Parameter "key" required');var n=this.getParsedResult(this.translations[this.currentLang],t,e);if(Object(s.a)(n)){if(t instanceof Array){var r={};return t.forEach(function(e,n){r[t[n]]=t[n]}),r}return t}return n}},{key:"set",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.currentLang;this.translations[n][t]=this.compiler.compile(e,n),this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})}},{key:"changeLang",value:function(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t)}},{key:"changeDefaultLang",value:function(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}},{key:"reloadLang",value:function(t){return this.resetLang(t),this.getTranslation(t)}},{key:"resetLang",value:function(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}},{key:"getBrowserLang",value:function(){if("undefined"!=typeof window&&void 0!==window.navigator){var t=window.navigator.languages?window.navigator.languages[0]:null;return void 0!==(t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage)?(-1!==t.indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t):void 0}}},{key:"getBrowserCultureLang",value:function(){if("undefined"!=typeof window&&void 0!==window.navigator){var t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275inject"](j),o["\u0275\u0275inject"](b),o["\u0275\u0275inject"](D),o["\u0275\u0275inject"](T),o["\u0275\u0275inject"](k),o["\u0275\u0275inject"](F),o["\u0275\u0275inject"](R),o["\u0275\u0275inject"](B),o["\u0275\u0275inject"](N))},t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),V=function(){var t=function(){function t(e,n,r){var i=this;y(this,t),this.translateService=e,this.element=n,this._ref=r,this.onTranslationChangeSub||(this.onTranslationChangeSub=this.translateService.onTranslationChange.subscribe(function(t){t.lang===i.translateService.currentLang&&i.checkNodes(!0,t.translations)})),this.onLangChangeSub||(this.onLangChangeSub=this.translateService.onLangChange.subscribe(function(t){i.checkNodes(!0,t.translations)})),this.onDefaultLangChangeSub||(this.onDefaultLangChangeSub=this.translateService.onDefaultLangChange.subscribe(function(t){i.checkNodes(!0)}))}return _(t,[{key:"translate",set:function(t){t&&(this.key=t,this.checkNodes())}},{key:"translateParams",set:function(t){S(this.currentParams,t)||(this.currentParams=t,this.checkNodes(!0))}},{key:"ngAfterViewChecked",value:function(){this.checkNodes()}},{key:"checkNodes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,n=this.element.nativeElement.childNodes;n.length||(this.setContent(this.element.nativeElement,this.key),n=this.element.nativeElement.childNodes);for(var r=0;r<n.length;++r){var i=n[r];if(3===i.nodeType){var o=void 0;if(t&&(i.lastKey=null),E(i.lookupKey))o=i.lookupKey;else if(this.key)o=this.key;else{var a=this.getContent(i),s=a.trim();s.length&&(i.lookupKey=s,a!==i.currentValue?(o=s,i.originalContent=a||i.originalContent):i.originalContent?o=i.originalContent.trim():a!==i.currentValue&&(o=s,i.originalContent=a||i.originalContent))}this.updateValue(o,i,e)}}}},{key:"updateValue",value:function(t,e,n){var r=this;if(t){if(e.lastKey===t&&this.lastParams===this.currentParams)return;this.lastParams=this.currentParams;var i=function(n){n!==t&&(e.lastKey=t),e.originalContent||(e.originalContent=r.getContent(e)),e.currentValue=E(n)?n:e.originalContent||t,r.setContent(e,r.key?e.currentValue:e.originalContent.replace(t,e.currentValue)),r._ref.markForCheck()};if(E(n)){var o=this.translateService.getParsedResult(n,t,this.currentParams);Object(s.a)(o)?o.subscribe(i):i(o)}else this.translateService.get(t,this.currentParams).subscribe(i)}}},{key:"getContent",value:function(t){return E(t.textContent)?t.textContent:t.data}},{key:"setContent",value:function(t,e){E(t.textContent)?t.textContent=e:t.data=e}},{key:"ngOnDestroy",value:function(){this.onLangChangeSub&&this.onLangChangeSub.unsubscribe(),this.onDefaultLangChangeSub&&this.onDefaultLangChangeSub.unsubscribe(),this.onTranslationChangeSub&&this.onTranslationChangeSub.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](z),o["\u0275\u0275directiveInject"](o.ElementRef),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef))},t.\u0275dir=o["\u0275\u0275defineDirective"]({type:t,selectors:[["","translate",""],["","ngx-translate",""]],inputs:{translate:"translate",translateParams:"translateParams"}}),t}(),U=function(){var t=function(){function t(e,n){y(this,t),this.translate=e,this._ref=n,this.value=""}return _(t,[{key:"updateValue",value:function(t,e,n){var r=this,i=function(e){r.value=void 0!==e?e:t,r.lastKey=t,r._ref.markForCheck()};if(n){var o=this.translate.getParsedResult(n,t,e);Object(s.a)(o.subscribe)?o.subscribe(i):i(o)}this.translate.get(t,e).subscribe(i)}},{key:"transform",value:function(t){var e,n=this;if(!t||!t.length)return t;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(S(t,this.lastKey)&&S(i,this.lastParams))return this.value;if(E(i[0])&&i.length)if("string"==typeof i[0]&&i[0].length){var a=i[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{e=JSON.parse(a)}catch(s){throw new SyntaxError("Wrong parameter in TranslatePipe. Expected a valid Object, received: ".concat(i[0]))}}else"object"!=typeof i[0]||Array.isArray(i[0])||(e=i[0]);return this.lastKey=t,this.lastParams=i,this.updateValue(t,e),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(function(r){n.lastKey&&r.lang===n.translate.currentLang&&(n.lastKey=null,n.updateValue(t,e,r.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(function(r){n.lastKey&&(n.lastKey=null,n.updateValue(t,e,r.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(function(){n.lastKey&&(n.lastKey=null,n.updateValue(t,e))})),this.value}},{key:"_dispose",value:function(){void 0!==this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),void 0!==this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),void 0!==this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}},{key:"ngOnDestroy",value:function(){this._dispose()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](z),o["\u0275\u0275injectPipeChangeDetectorRef"]())},t.\u0275pipe=o["\u0275\u0275definePipe"]({name:"translate",type:t,pure:!1}),t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),q=function(){var t=function(){function t(){y(this,t)}return _(t,null,[{key:"forRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.loader||{provide:b,useClass:w},e.compiler||{provide:D,useClass:M},e.parser||{provide:T,useClass:A},e.missingTranslationHandler||{provide:k,useClass:C},j,{provide:R,useValue:e.isolate},{provide:F,useValue:e.useDefaultLang},{provide:B,useValue:e.extend},{provide:N,useValue:e.defaultLanguage},z]}}},{key:"forChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.loader||{provide:b,useClass:w},e.compiler||{provide:D,useClass:M},e.parser||{provide:T,useClass:A},e.missingTranslationHandler||{provide:k,useClass:C},{provide:R,useValue:e.isolate},{provide:F,useValue:e.useDefaultLang},{provide:B,useValue:e.extend},{provide:N,useValue:e.defaultLanguage},z]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({}),t}()},tNNm:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MenuLoginComponent=void 0,n("BD2p"),n("tyNb"),n("XVN5"),n("1jsm"),n("kQ+e"),n("6uu6"),n("0RL5"),n("tpgc"),n("mu9K"),n("wlYr");var a=o(n("fXoL")),s=o(n("tyNb")),u=o(n("BD2p")),c=o(n("XVN5")),l=o(n("1jsm")),h=o(n("kQ+e")),f=o(n("6uu6")),d=o(n("0RL5")),p=o(n("wlYr")),v=o(n("mu9K")),m=o(n("tpgc")),g=o(n("3Pt+")),b=o(n("ofXK")),w=o(n("sYmb"));function x(t,e){if(1&t){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275elementStart(1,"ul"),a.\u0275\u0275elementStart(2,"li"),a.\u0275\u0275elementStart(3,"label"),a.\u0275\u0275text(4),a.\u0275\u0275pipe(5,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"input",5),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().name=t}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"li"),a.\u0275\u0275elementStart(8,"label"),a.\u0275\u0275text(9),a.\u0275\u0275pipe(10,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"input",6),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().pass=t}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"li"),a.\u0275\u0275elementStart(13,"button",0),a.\u0275\u0275listener("click",function(t){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().onEnter(t)}),a.\u0275\u0275text(14),a.\u0275\u0275pipe(15,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(16,"li"),a.\u0275\u0275elementStart(17,"a",0),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().goToReg()}),a.\u0275\u0275text(18),a.\u0275\u0275pipe(19,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&t){var r=a.\u0275\u0275nextContext();a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(5,6,"NAME")),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",r.name),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(10,8,"PASS")),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",r.pass),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(15,10,"SIGN_IN")),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(19,12,"REGISTRATION"))}}function k(t,e){if(1&t){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"ul"),a.\u0275\u0275elementStart(1,"li",0),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().goToProfile()}),a.\u0275\u0275elementStart(2,"div"),a.\u0275\u0275text(3),a.\u0275\u0275pipe(4,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"li",0),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().goToFriends()}),a.\u0275\u0275elementStart(6,"div"),a.\u0275\u0275text(7),a.\u0275\u0275pipe(8,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"li",0),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().goToPrivateArea()}),a.\u0275\u0275elementStart(10,"div"),a.\u0275\u0275text(11),a.\u0275\u0275pipe(12,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(13,"li",0),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().goDevice()}),a.\u0275\u0275elementStart(14,"div"),a.\u0275\u0275text(15),a.\u0275\u0275pipe(16,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"li"),a.\u0275\u0275elementStart(18,"div",0),a.\u0275\u0275listener("click",function(t){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().onExit(t)}),a.\u0275\u0275text(19),a.\u0275\u0275pipe(20,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}2&t&&(a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(4,5,"PROFILE")),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(8,7,"FRIENDS")),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(12,9,"PRIVATE_AREA")),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(16,11,"DEVICES")),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(20,13,"ON_EXIT")))}var C=function(){function t(e,n,r,i,o,a,s,u,c,l){y(this,t),this.router=e,this.ms=n,this.io=r,this.md5=i,this.ls=o,this.authService=a,this.ds=s,this.ts=u,this.userService=c,this.friend=l,this.socket=r.socket,this.user=c.getUser()}return _(t,[{key:"goToReg",value:function(){this.router.navigate(["/auth/map/registration"]),this.ms.menuOpenLogin=!1}},{key:"goToPrivateArea",value:function(){this.router.navigate(["/auth/map/privatearea"]),this.ms.menuOpenLogin=!1}},{key:"onEnter",value:function(t){t&&t.preventDefault(),console.log(this.pass),this.authService.onEnter({name:this.name,pass:this.md5.hash(this.pass)})}},{key:"goToProfile",value:function(){this.router.navigate(["/auth/map/profile"]),this.ms.menuOpenLogin=!1}},{key:"onExit",value:function(t){this.authService.onExit(t)}},{key:"goToFriends",value:function(){this.ms.menuOpenLogin=!1,this.router.navigate(["/auth/map/friends"])}},{key:"goDevice",value:function(){this.router.navigate(["/auth/map/device"]),this.ms.menuOpenLogin=!1}}]),t}();e.MenuLoginComponent=C,C.\u0275fac=function(t){return new(t||C)(a.\u0275\u0275directiveInject(s.Router),a.\u0275\u0275directiveInject(u.MenuService),a.\u0275\u0275directiveInject(c.Io),a.\u0275\u0275directiveInject(l.Md5),a.\u0275\u0275directiveInject(h.LocalStorage),a.\u0275\u0275directiveInject(f.AuthService),a.\u0275\u0275directiveInject(d.DeviceService),a.\u0275\u0275directiveInject(p.ToastService),a.\u0275\u0275directiveInject(v.UserService),a.\u0275\u0275directiveInject(m.FriendsService))},C.\u0275cmp=a.\u0275\u0275defineComponent({type:C,selectors:[["menu-login"]],decls:5,vars:2,consts:[[3,"click"],["name","formLogin",3,"submit"],[4,"ngIf"],[1,"border-hidden"],[3,"ngIf"],["type","text","name","name",3,"ngModel","ngModelChange"],["type","password","name","pass",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275listener("click",function(t){return t.stopPropagation(),t.preventDefault()}),a.\u0275\u0275elementStart(1,"form",1),a.\u0275\u0275listener("submit",function(){return e.onEnter()}),a.\u0275\u0275template(2,x,20,14,"div",2),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(3,"div",3),a.\u0275\u0275template(4,k,21,15,"ng-template",4),a.\u0275\u0275elementEnd()),2&t&&(a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!e.user.name),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",e.user.name))},directives:[g.\u0275angular_packages_forms_forms_ba,g.NgControlStatusGroup,g.NgForm,b.NgIf,g.DefaultValueAccessor,g.NgControlStatus,g.NgModel],pipes:[w.TranslatePipe],styles:["[_nghost-%COMP%]{position:absolute;right:0;top:100%;z-index:3;width:200px}input[_ngcontent-%COMP%]{display:block;width:100%;box-sizing:border-box;padding:8px;outline:none;border:none;border-radius:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;background-color:hsla(0,0%,100%,.8);padding:15px;min-width:80px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#fff}label[_ngcontent-%COMP%]{display:block;margin:8px 0}p[_ngcontent-%COMP%]{padding:8px 0;text-align:center}a[_ngcontent-%COMP%]{cursor:pointer;color:#142e5f;font-size:12px}.button-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:15px 0}button[_ngcontent-%COMP%]{padding:0;border:none;cursor:pointer;outline:none;width:100%;box-shadow:none;background:transparent;font-size:14px}button[_ngcontent-%COMP%]:active{color:#999;box-shadow:none}"]})},"tk/3":function(t,n,r){"use strict";r.r(n),r.d(n,"HTTP_INTERCEPTORS",function(){return L}),r.d(n,"HttpBackend",function(){return v}),r.d(n,"HttpClient",function(){return D}),r.d(n,"HttpClientJsonpModule",function(){return Q}),r.d(n,"HttpClientModule",function(){return $}),r.d(n,"HttpClientXsrfModule",function(){return J}),r.d(n,"HttpErrorResponse",function(){return A}),r.d(n,"HttpEventType",function(){return E}),r.d(n,"HttpHandler",function(){return p}),r.d(n,"HttpHeaderResponse",function(){return O}),r.d(n,"HttpHeaders",function(){return m}),r.d(n,"HttpParams",function(){return w}),r.d(n,"HttpRequest",function(){return S}),r.d(n,"HttpResponse",function(){return T}),r.d(n,"HttpResponseBase",function(){return P}),r.d(n,"HttpUrlEncodingCodec",function(){return g}),r.d(n,"HttpXhrBackend",function(){return q}),r.d(n,"HttpXsrfTokenExtractor",function(){return G}),r.d(n,"JsonpClientBackend",function(){return N}),r.d(n,"JsonpInterceptor",function(){return B}),r.d(n,"XhrFactory",function(){return V}),r.d(n,"\u0275HttpInterceptingHandler",function(){return K}),r.d(n,"\u0275angular_packages_common_http_http_a",function(){return j}),r.d(n,"\u0275angular_packages_common_http_http_b",function(){return F}),r.d(n,"\u0275angular_packages_common_http_http_c",function(){return Y}),r.d(n,"\u0275angular_packages_common_http_http_d",function(){return U}),r.d(n,"\u0275angular_packages_common_http_http_e",function(){return H}),r.d(n,"\u0275angular_packages_common_http_http_f",function(){return Z}),r.d(n,"\u0275angular_packages_common_http_http_g",function(){return W}),r.d(n,"\u0275angular_packages_common_http_http_h",function(){return X});var i=r("fXoL"),a=r("LRne"),s=r("HDdC"),u=r("bOdf"),c=r("pLZG"),h=r("lJxs"),d=r("ofXK"),p=_(function t(){y(this,t)}),v=_(function t(){y(this,t)}),m=function(){function t(e){var n=this;y(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach(function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=r.toLowerCase(),o=t.slice(e+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(o):n.headers.set(i,[o])}})}:function(){n.headers=new Map,Object.keys(e).forEach(function(t){var r=e[t],i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(t,i))})}:this.headers=new Map}return _(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,o(n)),this.headers.set(e,r);break;case"d":var i=t.value;if(i){var a=this.headers.get(e);if(!a)return;0===(a=a.filter(function(t){return-1===i.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})}}]),t}(),g=function(){function t(){y(this,t)}return _(t,[{key:"encodeKey",value:function(t){return b(t)}},{key:"encodeValue",value:function(t){return b(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function b(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var w=function(){function t(){var n,r,i,o=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(y(this,t),this.updates=null,this.cloneFrom=null,this.encoder=a.encoder||new g,a.fromString){if(a.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(n=a.fromString,r=this.encoder,i=new Map,n.length>0&&n.replace(/^\?/,"").split("&").forEach(function(t){var n=t.indexOf("="),o=e(-1==n?[r.decodeKey(t),""]:[r.decodeKey(t.slice(0,n)),r.decodeValue(t.slice(n+1))],2),a=o[0],s=o[1],u=i.get(a)||[];u.push(s),i.set(a,u)}),i)}else a.fromObject?(this.map=new Map,Object.keys(a.fromObject).forEach(function(t){var e=a.fromObject[t];o.map.set(t,Array.isArray(e)?e:[e])})):this.map=null}return _(t,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"appendAll",value:function(t){var e=[];return Object.keys(t).forEach(function(n){var r=t[n];Array.isArray(r)?r.forEach(function(t){e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).filter(function(t){return""!==t}).join("&")}},{key:"clone",value:function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}}),this.cloneFrom=this.updates=null)}}]),t}();function x(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function k(t){return"undefined"!=typeof Blob&&t instanceof Blob}function C(t){return"undefined"!=typeof FormData&&t instanceof FormData}var S=function(){function t(e,n,r,i){var o;if(y(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new m),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+a}}else this.params=new w,this.urlWithParams=n}return _(t,[{key:"serializeBody",value:function(){return null===this.body?null:x(this.body)||k(this.body)||C(this.body)||"string"==typeof this.body?this.body:this.body instanceof w?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||C(this.body)?null:k(this.body)?this.body.type||null:x(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof w?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce(function(t,n){return t.set(n,e.setHeaders[n])},u)),e.setParams&&(c=Object.keys(e.setParams).reduce(function(t,n){return t.set(n,e.setParams[n])},c)),new t(n,r,o,{params:c,headers:u,reportProgress:s,responseType:i,withCredentials:a})}}]),t}(),E=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),P=_(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";y(this,t),this.headers=e.headers||new m,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}),O=function(t){l(n,t);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(t=e.call(this,r)).type=E.ResponseHeader,t}return _(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(P),T=function(t){l(n,t);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(this,n),(t=e.call(this,r)).type=E.Response,t.body=void 0!==r.body?r.body:null,t}return _(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(P),A=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this,t,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for ".concat(t.url||"(unknown url)"):"Http failure response for ".concat(t.url||"(unknown url)",": ").concat(t.status," ").concat(t.statusText),r.error=t.error||null,r}return _(n)}(P);function I(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var D=function(){var t=function(){function t(e){y(this,t),this.handler=e}return _(t,[{key:"request",value:function(t,e){var n,r,i,o=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t instanceof S?n=t:(r=s.headers instanceof m?s.headers:new m(s.headers),s.params&&(i=s.params instanceof w?s.params:new w({fromObject:s.params})),n=new S(t,e,void 0!==s.body?s.body:null,{headers:r,params:i,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials}));var l=Object(a.a)(n).pipe(Object(u.a)(function(t){return o.handler.handle(t)}));if(t instanceof S||"events"===s.observe)return l;var f=l.pipe(Object(c.a)(function(t){return t instanceof T}));switch(s.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return f.pipe(Object(h.a)(function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return f.pipe(Object(h.a)(function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return f.pipe(Object(h.a)(function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return f.pipe(Object(h.a)(function(t){return t.body}))}case"response":return f;default:throw new Error("Unreachable: unhandled observe type ".concat(s.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new w).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,I(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,I(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,I(n,e))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](p))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),M=function(){function t(e,n){y(this,t),this.next=e,this.interceptor=n}return _(t,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),t}(),L=new i.InjectionToken("HTTP_INTERCEPTORS"),j=function(){var t=function(){function t(){y(this,t)}return _(t,[{key:"intercept",value:function(t,e){return e.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),R=0,F=_(function t(){y(this,t)}),N=function(){var t=function(){function t(e,n){y(this,t),this.callbackMap=e,this.document=n,this.resolvedPromise=Promise.resolve()}return _(t,[{key:"nextCallback",value:function(){return"ng_jsonp_callback_"+R++}},{key:"handle",value:function(t){var e=this;if("JSONP"!==t.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==t.responseType)throw new Error("JSONP requests must use Json response type.");return new s.a(function(n){var r=e.nextCallback(),i=t.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,"=".concat(r,"$1")),o=e.document.createElement("script");o.src=i;var a=null,s=!1,u=!1;e.callbackMap[r]=function(t){delete e.callbackMap[r],u||(a=t,s=!0)};var c=function(){o.parentNode&&o.parentNode.removeChild(o),delete e.callbackMap[r]},l=function(t){u||e.resolvedPromise.then(function(){c(),s?(n.next(new T({body:a,status:200,statusText:"OK",url:i})),n.complete()):n.error(new A({url:i,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")}))})},h=function(t){u||(c(),n.error(new A({error:t,status:0,statusText:"JSONP Error",url:i})))};return o.addEventListener("load",l),o.addEventListener("error",h),e.document.body.appendChild(o),n.next({type:E.Sent}),function(){u=!0,o.removeEventListener("load",l),o.removeEventListener("error",h),c()}})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](F),i["\u0275\u0275inject"](d.DOCUMENT))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),B=function(){var t=function(){function t(e){y(this,t),this.jsonp=e}return _(t,[{key:"intercept",value:function(t,e){return"JSONP"===t.method?this.jsonp.handle(t):e.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](N))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),z=/^\)\]\}',?\n/,V=_(function t(){y(this,t)}),U=function(){var t=function(){function t(){y(this,t)}return _(t,[{key:"build",value:function(){return new XMLHttpRequest}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),q=function(){var t=function(){function t(e){y(this,t),this.xhrFactory=e}return _(t,[{key:"handle",value:function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new s.a(function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach(function(t,e){return r.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new m(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new O({headers:i,status:e,statusText:n,url:o})},c=function(){var e=u(),i=e.headers,o=e.status,a=e.statusText,s=e.url,c=null;204!==o&&(c=void 0===r.response?r.responseText:r.response),0===o&&(o=c?200:0);var l=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof c){var h=c;c=c.replace(z,"");try{c=""!==c?JSON.parse(c):null}catch(f){c=h,l&&(l=!1,c={error:f,text:c})}}l?(n.next(new T({body:c,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new A({error:c,headers:i,status:o,statusText:a,url:s||void 0}))},l=function(t){var e=u().url,i=new A({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error",url:e||void 0});n.error(i)},h=!1,f=function(e){h||(n.next(u()),h=!0);var i={type:E.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(t){var e={type:E.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",c),r.addEventListener("error",l),r.addEventListener("timeout",l),r.addEventListener("abort",l),t.reportProgress&&(r.addEventListener("progress",f),null!==a&&r.upload&&r.upload.addEventListener("progress",d)),r.send(a),n.next({type:E.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("abort",l),r.removeEventListener("load",c),r.removeEventListener("timeout",l),t.reportProgress&&(r.removeEventListener("progress",f),null!==a&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](V))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),H=new i.InjectionToken("XSRF_COOKIE_NAME"),Z=new i.InjectionToken("XSRF_HEADER_NAME"),G=_(function t(){y(this,t)}),W=function(){var t=function(){function t(e,n,r){y(this,t),this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _(t,[{key:"getToken",value:function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(d["\u0275parseCookieValue"])(t,this.cookieName),this.lastCookieString=t),this.lastToken}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](d.DOCUMENT),i["\u0275\u0275inject"](i.PLATFORM_ID),i["\u0275\u0275inject"](H))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),X=function(){var t=function(){function t(e,n){y(this,t),this.tokenService=e,this.headerName=n}return _(t,[{key:"intercept",value:function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](G),i["\u0275\u0275inject"](Z))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),K=function(){var t=function(){function t(e,n){y(this,t),this.backend=e,this.injector=n,this.chain=null}return _(t,[{key:"handle",value:function(t){if(null===this.chain){var e=this.injector.get(L,[]);this.chain=e.reduceRight(function(t,e){return new M(t,e)},this.backend)}return this.chain.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](v),i["\u0275\u0275inject"](i.Injector))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();function Y(){return"object"==typeof window?window:{}}var J=function(){var t=function(){function t(){y(this,t)}return _(t,null,[{key:"disable",value:function(){return{ngModule:t,providers:[{provide:X,useClass:j}]}}},{key:"withOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.cookieName?{provide:H,useValue:e.cookieName}:[],e.headerName?{provide:Z,useValue:e.headerName}:[]]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[X,{provide:L,useExisting:X,multi:!0},{provide:G,useClass:W},{provide:H,useValue:"XSRF-TOKEN"},{provide:Z,useValue:"X-XSRF-TOKEN"}]}),t}(),$=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[D,{provide:p,useClass:K},q,{provide:v,useExisting:q},U,{provide:V,useExisting:U}],imports:[[J.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t}(),Q=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[N,{provide:F,useFactory:Y},{provide:L,useClass:B,multi:!0}]}),t}()},tpgc:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.FriendsService=void 0,n("XVN5");var a=n("mu9K"),s=(n("jHPu"),o(n("fXoL"))),u=o(n("XVN5")),c=o(n("jHPu")),l=function(){function t(e,n){y(this,t),this.io=e,this.chatService=n,this.friends=[],this.allUsers=[],this.inviteMap={myInvite:new Set,userInvite:new Set},this.socket=e.socket}return _(t,[{key:"requestFriends",value:function(){var t=this;return this.socket.$get("getFriends",{}).then(function(e){return console.log(e),t}).catch(function(t){return console.error(t),t})}},{key:"requestAllUsers",value:function(){return this.socket.$get("getAllUsers",{}).then(function(t){return console.log(t),t&&"ok"==t.result?t.users.map(function(t){return new a.User(t)}):[]})}},{key:"requestInvites",value:function(){var t=this;this.socket.$get("getInvites",{}).then(function(e){console.log("invites",e),e.data.forEach(function(e){t.inviteMap.userInvite.add(e.id)})}).catch(function(t){console.error(t)})}},{key:"requestRequests",value:function(){var t=this;this.socket.$get("getRequests",{}).then(function(e){console.log("my requests",e),"ok"===e.result&&Array.isArray(e.data)&&e.data.forEach(function(e){t.inviteMap.myInvite.add(e.id)})}).catch(function(t){console.error(t)})}},{key:"requestUserById",value:function(t){return this.socket.$get("requestUserById",{id:t})}},{key:"sendInvite",value:function(t){var e=this;this.socket.$get("onInvite",{id:t.id}).then(function(n){e.inviteMap.myInvite.add(t.id)})}},{key:"onCancelInvite",value:function(t){this.inviteMap.myInvite.delete(t.id),this.socket.$get("onCancelInvite",{id:t.id}).then(function(t){console.log(t)})}}]),t}();e.FriendsService=l,l.\u0275fac=function(t){return new(t||l)(s.\u0275\u0275inject(u.Io),s.\u0275\u0275inject(c.ChatService))},l.\u0275prov=s.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac})},tyNb:function(e,n,r){"use strict";r.r(n),r.d(n,"ActivatedRoute",function(){return Zt}),r.d(n,"ActivatedRouteSnapshot",function(){return Wt}),r.d(n,"ActivationEnd",function(){return et}),r.d(n,"ActivationStart",function(){return tt}),r.d(n,"BaseRouteReuseStrategy",function(){return nn}),r.d(n,"ChildActivationEnd",function(){return Q}),r.d(n,"ChildActivationStart",function(){return $}),r.d(n,"ChildrenOutletContexts",function(){return un}),r.d(n,"DefaultUrlSerializer",function(){return kt}),r.d(n,"GuardsCheckEnd",function(){return W}),r.d(n,"GuardsCheckStart",function(){return G}),r.d(n,"NavigationCancel",function(){return q}),r.d(n,"NavigationEnd",function(){return U}),r.d(n,"NavigationError",function(){return H}),r.d(n,"NavigationStart",function(){return V}),r.d(n,"NoPreloading",function(){return kn}),r.d(n,"OutletContext",function(){return sn}),r.d(n,"PRIMARY_OUTLET",function(){return rt}),r.d(n,"PreloadAllModules",function(){return xn}),r.d(n,"PreloadingStrategy",function(){return wn}),r.d(n,"ROUTER_CONFIGURATION",function(){return En}),r.d(n,"ROUTER_INITIALIZER",function(){return Vn}),r.d(n,"ROUTES",function(){return on}),r.d(n,"ResolveEnd",function(){return K}),r.d(n,"ResolveStart",function(){return X}),r.d(n,"RouteConfigLoadEnd",function(){return J}),r.d(n,"RouteConfigLoadStart",function(){return Y}),r.d(n,"RouteReuseStrategy",function(){return en}),r.d(n,"Router",function(){return pn}),r.d(n,"RouterEvent",function(){return z}),r.d(n,"RouterLink",function(){return vn}),r.d(n,"RouterLinkActive",function(){return gn}),r.d(n,"RouterLinkWithHref",function(){return mn}),r.d(n,"RouterModule",function(){return An}),r.d(n,"RouterOutlet",function(){return _n}),r.d(n,"RouterPreloader",function(){return Cn}),r.d(n,"RouterState",function(){return qt}),r.d(n,"RouterStateSnapshot",function(){return Xt}),r.d(n,"RoutesRecognized",function(){return Z}),r.d(n,"Scroll",function(){return nt}),r.d(n,"UrlHandlingStrategy",function(){return cn}),r.d(n,"UrlSegment",function(){return bt}),r.d(n,"UrlSegmentGroup",function(){return _t}),r.d(n,"UrlSerializer",function(){return xt}),r.d(n,"UrlTree",function(){return gt}),r.d(n,"VERSION",function(){return qn}),r.d(n,"convertToParamMap",function(){return ot}),r.d(n,"provideRoutes",function(){return Ln}),r.d(n,"\u0275EmptyOutletComponent",function(){return be}),r.d(n,"\u0275ROUTER_PROVIDERS",function(){return On}),r.d(n,"\u0275angular_packages_router_router_a",function(){return Pn}),r.d(n,"\u0275angular_packages_router_router_b",function(){return Tn}),r.d(n,"\u0275angular_packages_router_router_c",function(){return In}),r.d(n,"\u0275angular_packages_router_router_d",function(){return Dn}),r.d(n,"\u0275angular_packages_router_router_e",function(){return Mn}),r.d(n,"\u0275angular_packages_router_router_f",function(){return jn}),r.d(n,"\u0275angular_packages_router_router_g",function(){return Fn}),r.d(n,"\u0275angular_packages_router_router_h",function(){return Nn}),r.d(n,"\u0275angular_packages_router_router_i",function(){return Bn}),r.d(n,"\u0275angular_packages_router_router_j",function(){return zn}),r.d(n,"\u0275angular_packages_router_router_k",function(){return Un}),r.d(n,"\u0275angular_packages_router_router_l",function(){return be}),r.d(n,"\u0275angular_packages_router_router_m",function(){return Nt}),r.d(n,"\u0275angular_packages_router_router_n",function(){return Vt}),r.d(n,"\u0275angular_packages_router_router_o",function(){return Sn}),r.d(n,"\u0275assignExtraOptionsToRouter",function(){return Rn}),r.d(n,"\u0275flatten",function(){return lt});var a=r("ofXK"),s=r("fXoL"),u=r("Cfvw"),c=r("LRne"),h=r("2Vo4"),d=r("itXk"),v=r("HDdC"),m=r("sVev"),g=r("GyhO"),b=r("NXyV"),w=r("EY2u"),x=r("EQ5u"),k=r("XNiG"),C=r("lJxs"),S=r("eIep"),E=r("IzEk"),P=r("JX91"),O=r("Kqap"),T=r("pLZG"),A=r("JIr8"),I=r("bOdf"),D=r("NJ9Y"),M=r("SxV6"),L=r("5+tZ"),j=r("vkgz"),R=r("BFxc"),F=r("x+ZX"),N=r("nYR2"),B=r("bHdf"),z=_(function t(e,n){y(this,t),this.id=e,this.url=n}),V=function(t){l(n,t);var e=f(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return y(this,n),(i=e.call(this,t,r)).navigationTrigger=o,i.restoredState=a,i}return _(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(z),U=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o}return _(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(z),q=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t,r)).reason=i,o}return _(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(z),H=function(t){l(n,t);var e=f(n);function n(t,r,i){var o;return y(this,n),(o=e.call(this,t,r)).error=i,o}return _(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(z),Z=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(z),G=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(z),W=function(t){l(n,t);var e=f(n);function n(t,r,i,o,a){var s;return y(this,n),(s=e.call(this,t,r)).urlAfterRedirects=i,s.state=o,s.shouldActivate=a,s}return _(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(z),X=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(z),K=function(t){l(n,t);var e=f(n);function n(t,r,i,o){var a;return y(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return _(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(z),Y=function(){function t(e){y(this,t),this.route=e}return _(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),J=function(){function t(e){y(this,t),this.route=e}return _(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),$=function(){function t(e){y(this,t),this.snapshot=e}return _(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Q=function(){function t(e){y(this,t),this.snapshot=e}return _(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),tt=function(){function t(e){y(this,t),this.snapshot=e}return _(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),et=function(){function t(e){y(this,t),this.snapshot=e}return _(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),nt=function(){function t(e,n,r){y(this,t),this.routerEvent=e,this.position=n,this.anchor=r}return _(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),rt="primary",it=function(){function t(e){y(this,t),this.params=e||{}}return _(t,[{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.params,t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function ot(t){return new it(t)}function at(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function st(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ut(t,e){var n,r=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!ct(t[n=r[o]],e[n]))return!1;return!0}function ct(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;var n=o(t).sort(),r=o(e).sort();return n.every(function(t,e){return r[e]===t})}return t===e}function lt(t){return Array.prototype.concat.apply([],t)}function ht(t){return t.length>0?t[t.length-1]:null}function ft(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function dt(t){return Object(s["\u0275isObservable"])(t)?t:Object(s["\u0275isPromise"])(t)?Object(u.a)(Promise.resolve(t)):Object(c.a)(t)}function pt(t,e,n){return n?function(t,e){return ut(t,e)}(t.queryParams,e.queryParams)&&vt(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return ct(t[n],e[n])})}(t.queryParams,e.queryParams)&&mt(t.root,e.root)}function vt(t,e){if(!wt(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(var n in e.children){if(!t.children[n])return!1;if(!vt(t.children[n],e.children[n]))return!1}return!0}function mt(t,e){return yt(t,e,e.segments)}function yt(t,e,n){if(t.segments.length>n.length)return!!wt(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!wt(t.segments,n))return!1;for(var r in e.children){if(!t.children[r])return!1;if(!mt(t.children[r],e.children[r]))return!1}return!0}var i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!wt(t.segments,i)&&!!t.children[rt]&&yt(t.children[rt],e,o)}var gt=function(){function t(e,n,r){y(this,t),this.root=e,this.queryParams=n,this.fragment=r}return _(t,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=ot(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Ct.serialize(this)}}]),t}(),_t=function(){function t(e,n){var r=this;y(this,t),this.segments=e,this.children=n,this.parent=null,ft(n,function(t,e){return t.parent=r})}return _(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return St(this)}}]),t}(),bt=function(){function t(e,n){y(this,t),this.path=e,this.parameters=n}return _(t,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=ot(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Dt(this)}}]),t}();function wt(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}var xt=_(function t(){y(this,t)}),kt=function(){function t(){y(this,t)}return _(t,[{key:"parse",value:function(t){var e=new Ft(t);return new gt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){var e,n,r;return"/".concat(Et(t.root,!0)).concat((n=t.queryParams,r=Object.keys(n).map(function(t){var e=n[t];return Array.isArray(e)?e.map(function(e){return"".concat(Ot(t),"=").concat(Ot(e))}).join("&"):"".concat(Ot(t),"=").concat(Ot(e))}),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof t.fragment?"#".concat((e=t.fragment,encodeURI(e))):"")}}]),t}(),Ct=new kt;function St(t){return t.segments.map(function(t){return Dt(t)}).join("/")}function Et(t,e){if(!t.hasChildren())return St(t);if(e){var n=t.children[rt]?Et(t.children[rt],!1):"",r=[];return ft(t.children,function(t,e){e!==rt&&r.push("".concat(e,":").concat(Et(t,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(t,e){var n=[];return ft(t.children,function(t,r){r===rt&&(n=n.concat(e(t,r)))}),ft(t.children,function(t,r){r!==rt&&(n=n.concat(e(t,r)))}),n}(t,function(e,n){return n===rt?[Et(t.children[rt],!1)]:["".concat(n,":").concat(Et(e,!1))]});return 1===Object.keys(t.children).length&&null!=t.children[rt]?"".concat(St(t),"/").concat(i[0]):"".concat(St(t),"/(").concat(i.join("//"),")")}function Pt(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ot(t){return Pt(t).replace(/%3B/gi,";")}function Tt(t){return Pt(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function At(t){return decodeURIComponent(t)}function It(t){return At(t.replace(/\+/g,"%20"))}function Dt(t){return"".concat(Tt(t.path)).concat((e=t.parameters,Object.keys(e).map(function(t){return";".concat(Tt(t),"=").concat(Tt(e[t]))}).join("")));var e}var Mt=/^[^\/()?;=#]+/;function Lt(t){var e=t.match(Mt);return e?e[0]:""}var jt=/^[^=?&#]+/,Rt=/^[^?&#]+/,Ft=function(){function t(e){y(this,t),this.url=e,this.remaining=e}return _(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _t([],{}):new _t([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[rt]=new _t(t,e)),n}},{key:"parseSegment",value:function(){var t=Lt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new bt(At(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=Lt(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=Lt(this.remaining);r&&(n=r,this.capture(n))}t[At(e)]=At(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(jt);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=function(t){var e=t.match(Rt);return e?e[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=It(e),o=It(n);if(t.hasOwnProperty(i)){var a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Lt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=rt);var o=this.parseChildren();e[i]=1===Object.keys(o).length?o[rt]:new _t([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),Nt=function(){function t(e){y(this,t),this._root=e}return _(t,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=Bt(t,this._root);return e?e.children.map(function(t){return t.value}):[]}},{key:"firstChild",value:function(t){var e=Bt(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=zt(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})}},{key:"pathFromRoot",value:function(t){return zt(t,this._root).map(function(t){return t.value})}}]),t}();function Bt(t,e){if(t===e.value)return e;var n,r=i(e.children);try{for(r.s();!(n=r.n()).done;){var o=Bt(t,n.value);if(o)return o}}catch(a){r.e(a)}finally{r.f()}return null}function zt(t,e){if(t===e.value)return[e];var n,r=i(e.children);try{for(r.s();!(n=r.n()).done;){var o=zt(t,n.value);if(o.length)return o.unshift(e),o}}catch(a){r.e(a)}finally{r.f()}return[]}var Vt=function(){function t(e,n){y(this,t),this.value=e,this.children=n}return _(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function Ut(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var qt=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).snapshot=r,Kt(p(i),t),i}return _(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Nt);function Ht(t,e){var n=function(t,e){var n=new Wt([],{},{},"",{},rt,e,null,t.root,-1,{});return new Xt("",new Vt(n,[]))}(t,e),r=new h.a([new bt("",{})]),i=new h.a({}),o=new h.a({}),a=new h.a({}),s=new h.a(""),u=new Zt(r,i,a,s,o,rt,e,n.root);return u.snapshot=n.root,new qt(new Vt(u,[]),n)}var Zt=function(){function t(e,n,r,i,o,a,s,u){y(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=u}return _(t,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(C.a)(function(t){return ot(t)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(C.a)(function(t){return ot(t)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),t}();function Gt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce(function(t,e){return{params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var Wt=function(){function t(e,n,r,i,o,a,s,u,c,l,h){y(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return _(t,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=ot(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=ot(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(t){return t.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),t}(),Xt=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,r)).url=t,Kt(p(i),r),i}return _(n,[{key:"toString",value:function(){return Yt(this._root)}}]),n}(Nt);function Kt(t,e){e.value._routerState=t,e.children.forEach(function(e){return Kt(t,e)})}function Yt(t){var e=t.children.length>0?" { ".concat(t.children.map(Yt).join(", ")," } "):"";return"".concat(t.value).concat(e)}function Jt(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ut(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ut(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!ut(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ut(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function $t(t,e){var n,r;return ut(t.params,e.params)&&wt(n=t.url,r=e.url)&&n.every(function(t,e){return ut(t.parameters,r[e].parameters)})&&!(!t.parent!=!e.parent)&&(!t.parent||$t(t.parent,e.parent))}function Qt(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=e.value;var o=function(t,e,n){return e.children.map(function(e){var r,o=i(n.children);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(t.shouldReuseRoute(e.value,a.value.snapshot))return Qt(t,e,a)}}catch(s){o.e(s)}finally{o.f()}return Qt(t,e)})}(t,e,n);return new Vt(r,o)}if(t.shouldAttach(e.value)){var a=t.retrieve(e.value);if(null!==a){var s=a.route;return te(e,s),s}}var u,c=new Zt(new h.a((u=e.value).url),new h.a(u.params),new h.a(u.queryParams),new h.a(u.fragment),new h.a(u.data),u.outlet,u.component,u),l=e.children.map(function(e){return Qt(t,e)});return new Vt(c,l)}function te(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(var n=0;n<t.children.length;++n)te(t.children[n],e.children[n])}function ee(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ne(t){return"object"==typeof t&&null!=t&&t.outlets}function re(t,e,n,r,i){var o={};return r&&ft(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return"".concat(t)}):"".concat(t)}),new gt(n.root===t?e:ie(n.root,t,e),o,i)}function ie(t,e,n){var r={};return ft(t.children,function(t,i){r[i]=t===e?n:ie(t,e,n)}),new _t(t.segments,r)}var oe=function(){function t(e,n,r){if(y(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ee(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(ne);if(i&&i!==ht(r))throw new Error("{outlets:{}} has to be the last command")}return _(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),ae=_(function t(e,n,r){y(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r});function se(t,e,n){if(t||(t=new _t([],{})),0===t.segments.length&&t.hasChildren())return ue(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=n[r];if(ne(s))break;var u="".concat(s),c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!fe(u,c,a))return o;r+=2}else{if(!fe(u,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new _t(t.segments.slice(0,r.pathIndex),{});return o.children[rt]=new _t(t.segments.slice(r.pathIndex),t.children),ue(o,0,i)}return r.match&&0===i.length?new _t(t.segments,{}):r.match&&!t.hasChildren()?ce(t,e,n):r.match?ue(t,0,i):ce(t,e,n)}function ue(e,n,r){if(0===r.length)return new _t(e.segments,{});var i=function(e){return ne(e[0])?e[0].outlets:t({},rt,e)}(r),o={};return ft(i,function(t,r){"string"==typeof t&&(t=[t]),null!==t&&(o[r]=se(e.children[r],n,t))}),ft(e.children,function(t,e){void 0===i[e]&&(o[e]=t)}),new _t(e.segments,o)}function ce(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){var o=n[i];if(ne(o)){var a=le(o.outlets);return new _t(r,a)}if(0===i&&ee(n[0]))r.push(new bt(t.segments[e].path,he(n[0]))),i++;else{var s=ne(o)?o.outlets[rt]:"".concat(o),u=i<n.length-1?n[i+1]:null;s&&u&&ee(u)?(r.push(new bt(s,he(u))),i+=2):(r.push(new bt(s,{})),i++)}}return new _t(r,{})}function le(t){var e={};return ft(t,function(t,n){"string"==typeof t&&(t=[t]),null!==t&&(e[n]=ce(new _t([],{}),0,t))}),e}function he(t){var e={};return ft(t,function(t,n){return e[n]="".concat(t)}),e}function fe(t,e,n){return t==n.path&&ut(e,n.parameters)}var de=function(){function t(e,n,r,i){y(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}return _(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Jt(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=Ut(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),ft(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){for(var n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Ut(t),o=0,a=Object.keys(i);o<a.length;o++){var s=a[o];this.deactivateRouteAndItsChildren(i[s],r)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=Ut(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new et(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Q(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(Jt(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),pe(s.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=c,a.outlet&&a.outlet.activateWith(r,c),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function pe(t){Jt(t.value),t.children.forEach(pe)}var ve=_(function t(e,n){y(this,t),this.routes=e,this.module=n});function me(t){return"function"==typeof t}function ye(t){return t instanceof gt}var ge=Symbol("INITIAL_VALUE");function _e(){return Object(S.a)(function(t){return Object(d.b)(t.map(function(t){return t.pipe(Object(E.a)(1),Object(P.a)(ge))})).pipe(Object(O.a)(function(t,e){var n=!1;return e.reduce(function(t,r,i){if(t!==ge)return t;if(r===ge&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ye(r))return r}return t},t)},ge),Object(T.a)(function(t){return t!==ge}),Object(C.a)(function(t){return ye(t)?t:!0===t}),Object(E.a)(1))})}var be=function(){var t=_(function t(){y(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&s["\u0275\u0275element"](0,"router-outlet")},directives:function(){return[_n]},encapsulation:2}),t}();function we(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n];xe(r,ke(e,r))}}function xe(t,e){t.children&&we(t.children,e)}function ke(t,e){return e?t||e.path?t&&!e.path?"".concat(t,"/"):!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function Ce(t){var e=t.children&&t.children.map(Ce),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==rt&&(n.component=be),n}function Se(t){return t.outlet||rt}function Ee(t,e){var n=t.filter(function(t){return Se(t)===e});return n.push.apply(n,o(t.filter(function(t){return Se(t)!==e}))),n}var Pe={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Oe(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Pe):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(e.matcher||st)(n,t,e);if(!i)return Object.assign({},Pe);var o={};ft(i.posParams,function(t,e){o[e]=t.path});var a=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Te(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(t,e,n){return n.some(function(n){return Ae(t,e,n)&&Se(n)!==rt})}(t,n,r)){var a=new _t(e,function(t,e,n,r){var o={};o[rt]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;var a,s=i(n);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(""===u.path&&Se(u)!==rt){var c=new _t([],{});c._sourceSegment=t,c._segmentIndexShift=e.length,o[Se(u)]=c}}}catch(l){s.e(l)}finally{s.f()}return o}(t,e,r,new _t(n,t.children)));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(function(n){return Ae(t,e,n)})}(t,n,r)){var s=new _t(t.segments,function(t,e,n,r,o,a){var s,u={},c=i(r);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(Ae(t,n,l)&&!o[Se(l)]){var h=new _t([],{});h._sourceSegment=t,h._segmentIndexShift="legacy"===a?t.segments.length:e.length,u[Se(l)]=h}}}catch(f){c.e(f)}finally{c.f()}return Object.assign(Object.assign({},o),u)}(t,e,n,r,t.children,o));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}var u=new _t(t.segments,t.children);return u._sourceSegment=t,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:n}}function Ae(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Ie(t,e,n,r){return!!(Se(t)===r||r!==rt&&Ae(e,n,t))&&("**"===t.path||Oe(e,t,n).matched)}function De(t,e,n){return 0===e.length&&!t.children[n]}var Me=_(function t(e){y(this,t),this.segmentGroup=e||null}),Le=_(function t(e){y(this,t),this.urlTree=e});function je(t){return new v.a(function(e){return e.error(new Me(t))})}function Re(t){return new v.a(function(e){return e.error(new Le(t))})}function Fe(t){return new v.a(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))})}var Ne=function(){function e(t,n,r,i,o){y(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(s.NgModuleRef)}return _(e,[{key:"apply",value:function(){var t=this,e=Te(this.urlTree.root,[],[],this.config).segmentGroup,n=new _t(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,rt).pipe(Object(C.a)(function(e){return t.createUrlTree(Be(e),t.urlTree.queryParams,t.urlTree.fragment)})).pipe(Object(A.a)(function(e){if(e instanceof Le)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Me)throw t.noMatchError(e);throw e}))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,rt).pipe(Object(C.a)(function(n){return e.createUrlTree(Be(n),t.queryParams,t.fragment)})).pipe(Object(A.a)(function(t){if(t instanceof Me)throw e.noMatchError(t);throw t}))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,n,r){var i=e.segments.length>0?new _t([],t({},rt,e)):e;return new gt(i,n,r)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(C.a)(function(t){return new _t([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){for(var r=this,i=[],o=0,a=Object.keys(n.children);o<a.length;o++){var s=a[o];"primary"===s?i.unshift(s):i.push(s)}return Object(u.a)(i).pipe(Object(I.a)(function(i){var o=n.children[i],a=Ee(e,i);return r.expandSegmentGroup(t,a,o,i).pipe(Object(C.a)(function(t){return{segment:t,outlet:i}}))}),Object(O.a)(function(t,e){return t[e.outlet]=e.segment,t},{}),Object(D.a)())}},{key:"expandSegment",value:function(t,e,n,r,i,o){var a=this;return Object(u.a)(n).pipe(Object(I.a)(function(s){return a.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Object(A.a)(function(t){if(t instanceof Me)return Object(c.a)(null);throw t}))}),Object(M.a)(function(t){return!!t}),Object(A.a)(function(t,n){if(t instanceof m.a||"EmptyError"===t.name){if(De(e,r,i))return Object(c.a)(new _t([],{}));throw new Me(e)}throw t}))}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,o,a){return Ie(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):je(e):je(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Re(o):this.lineralizeSegments(n,o).pipe(Object(L.b)(function(n){var o=new _t(n,{});return i.expandSegment(t,o,e,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){var a=this,s=Oe(e,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return je(e);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?Re(f):this.lineralizeSegments(r,f).pipe(Object(L.b)(function(r){return a.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,r,i){var o=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(c.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(C.a)(function(t){return n._loadedConfig=t,new _t(r,{})})):Object(c.a)(new _t(r,{}));var a=Oe(e,n,r),s=a.matched,u=a.consumedSegments,l=a.lastChild;if(!s)return je(e);var h=r.slice(l);return this.getChildConfig(t,n,r).pipe(Object(L.b)(function(t){var r=t.module,a=t.routes,s=Te(e,u,h,a),l=s.segmentGroup,f=s.slicedSegments,d=new _t(l.segments,l.children);if(0===f.length&&d.hasChildren())return o.expandChildren(r,a,d).pipe(Object(C.a)(function(t){return new _t(u,t)}));if(0===a.length&&0===f.length)return Object(c.a)(new _t(u,{}));var p=Se(n)===i;return o.expandSegment(r,d,a,f,p?rt:i,!0).pipe(Object(C.a)(function(t){return new _t(u.concat(t.segments),t.children)}))}))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?Object(c.a)(new ve(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(c.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(L.b)(function(n){return n?r.configLoader.load(t.injector,e).pipe(Object(C.a)(function(t){return e._loadedConfig=t,t})):function(t){return new v.a(function(e){return e.error(at("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))})}(e)})):Object(c.a)(new ve([],t))}},{key:"runCanLoadGuards",value:function(t,e,n){var r=this,i=e.canLoad;if(!i||0===i.length)return Object(c.a)(!0);var o=i.map(function(r){var i,o=t.get(r);if(function(t){return t&&me(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!me(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return dt(i)});return Object(c.a)(o).pipe(_e(),Object(j.a)(function(t){if(ye(t)){var e=at('Redirecting to "'.concat(r.urlSerializer.serialize(t),'"'));throw e.url=t,e}}),Object(C.a)(function(t){return!0===t}))}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(c.a)(n);if(r.numberOfChildren>1||!r.children[rt])return Fe(t.redirectTo);r=r.children[rt]}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new gt(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return ft(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return ft(e.children,function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)}),new _t(o,a)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,e){var n,r=0,o=i(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.path===t.path)return e.splice(r),a;r++}}catch(s){o.e(s)}finally{o.f()}return t}}]),e}();function Be(t){for(var e={},n=0,r=Object.keys(t.children);n<r.length;n++){var i=r[n],o=Be(t.children[i]);(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function(t){if(1===t.numberOfChildren&&t.children[rt]){var e=t.children[rt];return new _t(t.segments.concat(e.segments),e.children)}return t}(new _t(t.segments,e))}var ze=_(function t(e){y(this,t),this.path=e,this.route=this.path[this.path.length-1]}),Ve=_(function t(e,n){y(this,t),this.component=e,this.route=n});function Ue(t,e,n){var r=t._root;return He(r,e?e._root:null,n,[r.value])}function qe(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function He(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=Ut(e);return t.children.forEach(function(t){!function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=t.value,a=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!wt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!wt(t.url,e.url)||!ut(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$t(t,e)||!ut(t.queryParams,e.queryParams);case"paramsChange":default:return!$t(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ze(r)):(o.data=a.data,o._resolvedData=a._resolvedData),He(t,e,o.component?s?s.children:null:n,r,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new Ve(s.outlet.component,a))}else a&&Ze(e,s,i),i.canActivateChecks.push(new ze(r)),He(t,null,o.component?s?s.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),ft(o,function(t,e){return Ze(t,n.getContext(e),i)}),i}function Ze(t,e,n){var r=Ut(t),i=t.value;ft(r,function(t,r){Ze(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Ve(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var Ge=_(function t(){y(this,t)});function We(t){return new v.a(function(e){return e.error(t)})}var Xe=function(){function t(e,n,r,i,o,a){y(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return _(t,[{key:"recognize",value:function(){var t=Te(this.urlTree.root,[],[],this.config.filter(function(t){return void 0===t.redirectTo}),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,rt);if(null===e)return null;var n=new Wt([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},rt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Vt(n,e),i=new Xt(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=Gt(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){for(var n=[],r=0,i=Object.keys(e.children);r<i.length;r++){var a=i[r],s=e.children[a],u=Ee(t,a),c=this.processSegmentGroup(u,s,a);if(null===c)return null;n.push.apply(n,o(c))}var l=Ke(n);return l.sort(function(t,e){return t.value.outlet===rt?-1:e.value.outlet===rt?1:t.value.outlet.localeCompare(e.value.outlet)}),l}},{key:"processSegment",value:function(t,e,n,r){var o,a=i(t);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=this.processSegmentAgainstRoute(s,e,n,r);if(null!==u)return u}}catch(c){a.e(c)}finally{a.f()}return De(e,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo||!Ie(t,e,n,r))return null;var i,o=[],a=[];if("**"===t.path){var s=n.length>0?ht(n).parameters:{};i=new Wt(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$e(t),Se(t),t.component,t,Ye(e),Je(e)+n.length,Qe(t))}else{var u=Oe(e,t,n);if(!u.matched)return null;o=u.consumedSegments,a=n.slice(u.lastChild),i=new Wt(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$e(t),Se(t),t.component,t,Ye(e),Je(e)+o.length,Qe(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),l=Te(e,o,a,c.filter(function(t){return void 0===t.redirectTo}),this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return null===d?null:[new Vt(i,d)]}if(0===c.length&&0===f.length)return[new Vt(i,[])];var p=Se(t)===r,v=this.processSegment(c,h,f,p?rt:r);return null===v?null:[new Vt(i,v)]}}]),t}();function Ke(t){var e,n=[],r=new Set,a=i(t);try{var s=function(){var t,i=e.value;if(!function(t){var e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}(i))return n.push(i),"continue";var a=n.find(function(t){return i.value.routeConfig===t.value.routeConfig});void 0!==a?((t=a.children).push.apply(t,o(i.children)),r.add(a)):n.push(i)};for(a.s();!(e=a.n()).done;)s()}catch(f){a.e(f)}finally{a.f()}var u,c=i(r);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=Ke(l.children);n.push(new Vt(l.value,h))}}catch(f){c.e(f)}finally{c.f()}return n.filter(function(t){return!r.has(t)})}function Ye(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function Je(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function $e(t){return t.data||{}}function Qe(t){return t.resolve||{}}function tn(t){return Object(S.a)(function(e){var n=t(e);return n?Object(u.a)(n).pipe(Object(C.a)(function(){return e})):Object(c.a)(e)})}var en=_(function t(){y(this,t)}),nn=function(){function t(){y(this,t)}return _(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}(),rn=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n)}(nn),on=new s.InjectionToken("ROUTES"),an=function(){function t(e,n,r,i){y(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return _(t,[{key:"load",value:function(t,e){var n=this;if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);var r=this.loadModuleFactory(e.loadChildren).pipe(Object(C.a)(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new ve(lt(i.injector.get(on,void 0,s.InjectFlags.Self|s.InjectFlags.Optional)).map(Ce),i)}),Object(A.a)(function(t){throw e._loader$=void 0,t}));return e._loader$=new x.a(r,function(){return new k.a}).pipe(Object(F.a)()),e._loader$}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?Object(u.a)(this.loader.load(t)):dt(t()).pipe(Object(L.b)(function(t){return t instanceof s.NgModuleFactory?Object(c.a)(t):Object(u.a)(e.compiler.compileModuleAsync(t))}))}}]),t}(),sn=_(function t(){y(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new un,this.attachRef=null}),un=function(){function t(){y(this,t),this.contexts=new Map}return _(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new sn,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),cn=_(function t(){y(this,t)}),ln=function(){function t(){y(this,t)}return _(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function hn(t){throw t}function fn(t,e,n){return e.parse("/")}function dn(t,e){return Object(c.a)(null)}var pn=function(){var t=function(){function t(e,n,r,i,o,a,u,c){var l=this;y(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new k.a,this.errorHandler=hn,this.malformedUriErrorHandler=fn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:dn,afterPreactivation:dn},this.urlHandlingStrategy=new ln,this.routeReuseStrategy=new rn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(s.NgModuleRef),this.console=o.get(s["\u0275Console"]);var f=o.get(s.NgZone);this.isNgZoneEnabled=f instanceof s.NgZone&&s.NgZone.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new gt(new _t([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new an(a,u,function(t){return l.triggerEvent(new Y(t))},function(t){return l.triggerEvent(new J(t))}),this.routerState=Ht(this.currentUrlTree,this.rootComponentType),this.transitions=new h.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _(t,[{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe(Object(T.a)(function(t){return 0!==t.id}),Object(C.a)(function(t){return Object.assign(Object.assign({},t),{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})}),Object(S.a)(function(t){var r,i,o,a=!1,s=!1;return Object(c.a)(t).pipe(Object(j.a)(function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign(Object.assign({},e.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Object(S.a)(function(t){var r,i,o,a,s=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||s)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(c.a)(t).pipe(Object(S.a)(function(t){var r=e.transitions.getValue();return n.next(new V(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?w.a:Promise.resolve(t)}),(r=e.ngModule.injector,i=e.configLoader,o=e.urlSerializer,a=e.config,Object(S.a)(function(t){return function(t,e,n,r,i){return new Ne(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,a).pipe(Object(C.a)(function(e){return Object.assign(Object.assign({},t),{urlAfterRedirects:e})}))})),Object(j.a)(function(t){e.currentNavigation=Object.assign(Object.assign({},e.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,n,r,i,o){return Object(L.b)(function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var a=new Xe(t,e,n,r,i,o).recognize();return null===a?We(new Ge):Object(c.a)(a)}catch(s){return We(s)}}(t,n,r.urlAfterRedirects,(a=r.urlAfterRedirects,e.serializeUrl(a)),i,o).pipe(Object(C.a)(function(t){return Object.assign(Object.assign({},r),{targetSnapshot:t})}));var a})}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Object(j.a)(function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects);var r=new Z(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)}));if(s&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var u=t.id,l=t.extractedUrl,h=t.source,f=t.restoredState,d=t.extras,p=new V(u,e.serializeUrl(l),h,f);n.next(p);var v=Ht(l,e.rootComponentType).snapshot;return Object(c.a)(Object.assign(Object.assign({},t),{targetSnapshot:v,urlAfterRedirects:l,extras:Object.assign(Object.assign({},d),{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),w.a}),tn(function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})}),Object(j.a)(function(t){var n=new G(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),Object(C.a)(function(t){return Object.assign(Object.assign({},t),{guards:Ue(t.targetSnapshot,t.currentSnapshot,e.rootContexts)})}),function(t,e){return Object(L.b)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===a.length?Object(c.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(u.a)(t).pipe(Object(L.b)(function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(c.a)(!0);var a=o.map(function(o){var a,s=qe(o,e,i);if(function(t){return t&&me(t.canDeactivate)}(s))a=dt(s.canDeactivate(t,e,n,r));else{if(!me(s))throw new Error("Invalid CanDeactivate guard");a=dt(s(t,e,n,r))}return a.pipe(Object(M.a)())});return Object(c.a)(a).pipe(_e())}(t.component,t.route,n,e,r)}),Object(M.a)(function(t){return!0!==t},!0))}(s,r,i,t).pipe(Object(L.b)(function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return Object(u.a)(e).pipe(Object(I.a)(function(e){return Object(g.a)(function(t,e){return null!==t&&e&&e(new $(t)),Object(c.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new tt(t)),Object(c.a)(!0)}(e.route,r),function(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)}).filter(function(t){return null!==t}).map(function(e){return Object(b.a)(function(){var i=e.guards.map(function(i){var o,a=qe(i,e.node,n);if(function(t){return t&&me(t.canActivateChild)}(a))o=dt(a.canActivateChild(r,t));else{if(!me(a))throw new Error("Invalid CanActivateChild guard");o=dt(a(r,t))}return o.pipe(Object(M.a)())});return Object(c.a)(i).pipe(_e())})});return Object(c.a)(i).pipe(_e())}(t,e.path,n),function(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(c.a)(!0);var i=r.map(function(r){return Object(b.a)(function(){var i,o=qe(r,e,n);if(function(t){return t&&me(t.canActivate)}(o))i=dt(o.canActivate(e,t));else{if(!me(o))throw new Error("Invalid CanActivate guard");i=dt(o(e,t))}return i.pipe(Object(M.a)())})});return Object(c.a)(i).pipe(_e())}(t,e.route,n))}),Object(M.a)(function(t){return!0!==t},!0))}(r,a,t,e):Object(c.a)(n)}),Object(C.a)(function(t){return Object.assign(Object.assign({},n),{guardsResult:t})}))})}(e.ngModule.injector,function(t){return e.triggerEvent(t)}),Object(j.a)(function(t){if(ye(t.guardsResult)){var n=at('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}var r=new W(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(r)}),Object(T.a)(function(t){if(!t.guardsResult){e.resetUrlToCurrentUrlTree();var r=new q(t.id,e.serializeUrl(t.extractedUrl),"");return n.next(r),t.resolve(!1),!1}return!0}),tn(function(t){if(t.guards.canActivateChecks.length)return Object(c.a)(t).pipe(Object(j.a)(function(t){var n=new X(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),Object(S.a)(function(t){var r,i,o=!1;return Object(c.a)(t).pipe((r=e.paramsInheritanceStrategy,i=e.ngModule.injector,Object(L.b)(function(t){var e=t.targetSnapshot,n=t.guards.canActivateChecks;if(!n.length)return Object(c.a)(t);var o=0;return Object(u.a)(n).pipe(Object(I.a)(function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return Object(c.a)({});var o={};return Object(u.a)(i).pipe(Object(L.b)(function(i){return function(t,e,n,r){var i=qe(t,e,r);return dt(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(j.a)(function(t){o[i]=t}))}),Object(R.a)(1),Object(L.b)(function(){return Object.keys(o).length===i.length?Object(c.a)(o):w.a}))}(t._resolve,t,e,r).pipe(Object(C.a)(function(e){return t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Gt(t,n).resolve),null}))}(t.route,e,r,i)}),Object(j.a)(function(){return o++}),Object(R.a)(1),Object(L.b)(function(e){return o===n.length?Object(c.a)(t):w.a}))})),Object(j.a)({next:function(){return o=!0},complete:function(){if(!o){var r=new q(t.id,e.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");n.next(r),t.resolve(!1)}}}))}),Object(j.a)(function(t){var n=new K(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}))}),tn(function(t){var n=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return e.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})}),Object(C.a)(function(t){var n=function(t,e,n){var r=Qt(t,e._root,n?n._root:void 0);return new qt(r,e)}(e.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:n})}),Object(j.a)(function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),e.browserUrlTree=t.urlAfterRedirects)}),(r=e.rootContexts,i=e.routeReuseStrategy,o=function(t){return e.triggerEvent(t)},Object(C.a)(function(t){return new de(i,t.targetRouterState,t.currentRouterState,o).activate(r),t})),Object(j.a)({next:function(){a=!0},complete:function(){a=!0}}),Object(N.a)(function(){if(!a&&!s){e.resetUrlToCurrentUrlTree();var r=new q(t.id,e.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId));n.next(r),t.resolve(!1)}e.currentNavigation=null}),Object(A.a)(function(r){if(s=!0,(u=r)&&u.ngNavigationCancelingError){var i=ye(r.url);i||(e.navigated=!0,e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new q(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),i?setTimeout(function(){var n=e.urlHandlingStrategy.merge(r.url,e.rawUrlTree);e.scheduleNavigation(n,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{e.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new H(t.id,e.serializeUrl(t.extractedUrl),r);n.next(a);try{t.resolve(e.errorHandler(r))}catch(c){t.reject(c)}}var u;return w.a}))}))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.extractLocationChangeInfoFromEvent(e);t.shouldScheduleNavigation(t.lastLocationChangeInfo,n)&&setTimeout(function(){var e=n.source,r=n.state,i=n.urlTree,o={replaceUrl:!0};if(r){var a=Object.assign({},r);delete a.navigationId,0!==Object.keys(a).length&&(o.state=a)}t.scheduleNavigation(i,e,r,o)},0),t.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(t,e){if(!t)return!0;var n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){we(t),this.config=t.map(Ce),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,r=e.queryParams,i=e.fragment,a=e.queryParamsHandling,s=e.preserveFragment,u=n||this.routerState.root,c=s?this.currentUrlTree.fragment:i,l=null;switch(a){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(t,e,n,r,i){if(0===n.length)return re(e.root,e.root,e,r,i);var a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new oe(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return ft(r.outlets,function(t,e){a[e]="string"==typeof t?t.split("/"):t}),[].concat(o(t),[{outlets:a}])}if(r.segmentPath)return[].concat(o(t),[r.segmentPath])}return"string"!=typeof r?[].concat(o(t),[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[].concat(o(t),[r])},[]);return new oe(n,e,r)}(n);if(a.toRoot())return re(e.root,new _t([],{}),e,r,i);var s=function(t,e,n){if(t.isAbsolute)return new ae(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new ae(r,r===e.root,0)}var i=ee(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new ae(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,e,t),u=s.processChildren?ue(s.segmentGroup,s.index,a.commands):se(s.segmentGroup,s.index,a.commands);return re(s.segmentGroup,u,e,r,i)}(u,this.currentUrlTree,t,l,c)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=ye(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){if(ye(t))return pt(this.currentUrlTree,t,e);var n=this.parseUrl(t);return pt(this.currentUrlTree,n,e)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!=r&&(e[n]=r),e},{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe(function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new U(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,e.resolve(!0)},function(e){t.console.warn("Unhandled Navigation Error: ")})}},{key:"scheduleNavigation",value:function(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);var o,a,s,u=this.getTransition(),c="imperative"!==e&&"imperative"===(null==u?void 0:u.source),l=(this.lastSuccessfulId===u.id||this.currentNavigation?u.rawUrl:u.urlAfterRedirects).toString()===t.toString();if(c&&l)return Promise.resolve(!0);i?(o=i.resolve,a=i.reject,s=i.promise):s=new Promise(function(t,e){o=t,a=e});var h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch(function(t){return Promise.reject(t)})}},{key:"setBrowserUrl",value:function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](s.Type),s["\u0275\u0275inject"](xt),s["\u0275\u0275inject"](un),s["\u0275\u0275inject"](a.Location),s["\u0275\u0275inject"](s.Injector),s["\u0275\u0275inject"](s.NgModuleFactoryLoader),s["\u0275\u0275inject"](s.Compiler),s["\u0275\u0275inject"](void 0))},t.\u0275prov=s["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),vn=function(){var t=function(){function t(e,n,r,i,o){y(this,t),this.router=e,this.route=n,this.commands=[],this.onChanges=new k.a,null==r&&i.setAttribute(o.nativeElement,"tabindex","0")}return _(t,[{key:"ngOnChanges",value:function(t){this.onChanges.next(this)}},{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"onClick",value:function(){var t={skipLocationChange:yn(this.skipLocationChange),replaceUrl:yn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:yn(this.preserveFragment)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](pn),s["\u0275\u0275directiveInject"](Zt),s["\u0275\u0275injectAttribute"]("tabindex"),s["\u0275\u0275directiveInject"](s.Renderer2),s["\u0275\u0275directiveInject"](s.ElementRef))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&s["\u0275\u0275listener"]("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[s["\u0275\u0275NgOnChangesFeature"]]}),t}(),mn=function(){var t=function(){function t(e,n,r){var i=this;y(this,t),this.router=e,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new k.a,this.subscription=e.events.subscribe(function(t){t instanceof U&&i.updateTargetUrlAndHref()})}return _(t,[{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"ngOnChanges",value:function(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var o={skipLocationChange:yn(this.skipLocationChange),replaceUrl:yn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:yn(this.preserveFragment)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](pn),s["\u0275\u0275directiveInject"](Zt),s["\u0275\u0275directiveInject"](a.LocationStrategy))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&s["\u0275\u0275listener"]("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(s["\u0275\u0275hostProperty"]("href",e.href,s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275attribute"]("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[s["\u0275\u0275NgOnChangesFeature"]]}),t}();function yn(t){return""===t||!!t}var gn=function(){var t=function(){function t(e,n,r,i,o,a){var s=this;y(this,t),this.router=e,this.element=n,this.renderer=r,this.cdr=i,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(function(t){t instanceof U&&s.update()})}return _(t,[{key:"ngAfterContentInit",value:function(){var t=this;Object(c.a)(this.links.changes,this.linksWithHrefs.changes,Object(c.a)(null)).pipe(Object(B.a)()).subscribe(function(e){t.update(),t.subscribeToEachLinkOnChanges()})}},{key:"subscribeToEachLinkOnChanges",value:function(){var t,e=this;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();var n=[].concat(o(this.links.toArray()),o(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter(function(t){return!!t}).map(function(t){return t.onChanges});this.linkInputChangesSubscription=Object(u.a)(n).pipe(Object(B.a)()).subscribe(function(t){e.isActive!==e.isLinkActive(e.router)(t)&&e.update()})}},{key:"routerLinkActive",set:function(t){var e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(function(t){return!!t})}},{key:"ngOnChanges",value:function(t){this.update()}},{key:"ngOnDestroy",value:function(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}},{key:"update",value:function(){var t=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(function(){var e=t.hasActiveLinks();t.isActive!==e&&(t.isActive=e,t.cdr.markForCheck(),t.classes.forEach(function(n){e?t.renderer.addClass(t.element.nativeElement,n):t.renderer.removeClass(t.element.nativeElement,n)}))})}},{key:"isLinkActive",value:function(t){var e=this;return function(n){return t.isActive(n.urlTree,e.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){var t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](pn),s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](s.Renderer2),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](vn,8),s["\u0275\u0275directiveInject"](mn,8))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var r;(1&t&&(s["\u0275\u0275contentQuery"](n,vn,1),s["\u0275\u0275contentQuery"](n,mn,1)),2&t)&&(s["\u0275\u0275queryRefresh"](r=s["\u0275\u0275loadQuery"]())&&(e.links=r),s["\u0275\u0275queryRefresh"](r=s["\u0275\u0275loadQuery"]())&&(e.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[s["\u0275\u0275NgOnChangesFeature"]]}),t}(),_n=function(){var t=function(){function t(e,n,r,i,o){y(this,t),this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.EventEmitter,this.deactivateEvents=new s.EventEmitter,this.name=i||rt,e.onChildOutletCreated(this.name,this)}return _(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new bn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](un),s["\u0275\u0275directiveInject"](s.ViewContainerRef),s["\u0275\u0275directiveInject"](s.ComponentFactoryResolver),s["\u0275\u0275injectAttribute"]("name"),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t}(),bn=function(){function t(e,n,r){y(this,t),this.route=e,this.childContexts=n,this.parent=r}return _(t,[{key:"get",value:function(t,e){return t===Zt?this.route:t===un?this.childContexts:this.parent.get(t,e)}}]),t}(),wn=_(function t(){y(this,t)}),xn=function(){function t(){y(this,t)}return _(t,[{key:"preload",value:function(t,e){return e().pipe(Object(A.a)(function(){return Object(c.a)(null)}))}}]),t}(),kn=function(){function t(){y(this,t)}return _(t,[{key:"preload",value:function(t,e){return Object(c.a)(null)}}]),t}(),Cn=function(){var t=function(){function t(e,n,r,i,o){y(this,t),this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new an(n,r,function(t){return e.triggerEvent(new Y(t))},function(t){return e.triggerEvent(new J(t))})}return _(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(Object(T.a)(function(t){return t instanceof U}),Object(I.a)(function(){return t.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var t=this.injector.get(s.NgModuleRef);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,e){var n,r=[],o=i(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var s=a._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(t,a)):a.children&&r.push(this.processRoutes(t,a.children))}}catch(c){o.e(c)}finally{o.f()}return Object(u.a)(r).pipe(Object(B.a)(),Object(C.a)(function(t){}))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,function(){return(e._loadedConfig?Object(c.a)(e._loadedConfig):n.loader.load(t.injector,e)).pipe(Object(L.b)(function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)}))})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](pn),s["\u0275\u0275inject"](s.NgModuleFactoryLoader),s["\u0275\u0275inject"](s.Compiler),s["\u0275\u0275inject"](s.Injector),s["\u0275\u0275inject"](wn))},t.\u0275prov=s["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),Sn=function(){var t=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};y(this,t),this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe(function(e){e instanceof V?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof U&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe(function(e){e instanceof nt&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new nt(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](pn),s["\u0275\u0275inject"](a.ViewportScroller),s["\u0275\u0275inject"](void 0))},t.\u0275prov=s["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}(),En=new s.InjectionToken("ROUTER_CONFIGURATION"),Pn=new s.InjectionToken("ROUTER_FORROOT_GUARD"),On=[a.Location,{provide:xt,useClass:kt},{provide:pn,useFactory:jn,deps:[xt,un,a.Location,s.Injector,s.NgModuleFactoryLoader,s.Compiler,on,En,[cn,new s.Optional],[en,new s.Optional]]},un,{provide:Zt,useFactory:Fn,deps:[pn]},{provide:s.NgModuleFactoryLoader,useClass:s.SystemJsNgModuleLoader},Cn,kn,xn,{provide:En,useValue:{enableTracing:!1}}];function Tn(){return new s.NgProbeToken("Router",pn)}var An=function(){var t=function(){function t(e,n){y(this,t)}return _(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[On,Ln(e),{provide:Pn,useFactory:Mn,deps:[[pn,new s.Optional,new s.SkipSelf]]},{provide:En,useValue:n||{}},{provide:a.LocationStrategy,useFactory:Dn,deps:[a.PlatformLocation,[new s.Inject(a.APP_BASE_HREF),new s.Optional],En]},{provide:Sn,useFactory:In,deps:[pn,a.ViewportScroller,En]},{provide:wn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:kn},{provide:s.NgProbeToken,multi:!0,useFactory:Tn},Un()]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[Ln(e)]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](Pn,8),s["\u0275\u0275inject"](pn,8))},t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({}),t}();function In(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Sn(t,e,n)}function Dn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new a.HashLocationStrategy(t,e):new a.PathLocationStrategy(t,e)}function Mn(t){return"guarded"}function Ln(t){return[{provide:s.ANALYZE_FOR_ENTRY_COMPONENTS,multi:!0,useValue:t},{provide:on,multi:!0,useValue:t}]}function jn(t,e,n,r,i,o,s){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},c=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,h=new pn(null,t,e,n,r,i,o,lt(s));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),Rn(u,h),u.enableTracing){var f=Object(a["\u0275getDOM"])();h.events.subscribe(function(t){f.logGroup("Router Event: ".concat(t.constructor.name)),f.log(t.toString()),f.log(t),f.logGroupEnd()})}return h}function Rn(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}function Fn(t){return t.routerState.root}var Nn=function(){var t=function(){function t(e){y(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new k.a}return _(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(a.LOCATION_INITIALIZED,Promise.resolve(null)).then(function(){var e=null,n=new Promise(function(t){return e=t}),r=t.injector.get(pn),i=t.injector.get(En);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),e(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return t.initNavigation?Object(c.a)(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()):e(!0),n})}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(En),n=this.injector.get(Cn),r=this.injector.get(Sn),i=this.injector.get(pn),o=this.injector.get(s.ApplicationRef);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](s.Injector))},t.\u0275prov=s["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();function Bn(t){return t.appInitializer.bind(t)}function zn(t){return t.bootstrapListener.bind(t)}var Vn=new s.InjectionToken("Router Initializer");function Un(){return[Nn,{provide:s.APP_INITIALIZER,multi:!0,useFactory:Bn,deps:[Nn]},{provide:Vn,useFactory:zn,deps:[Nn]},{provide:s.APP_BOOTSTRAP_LISTENER,multi:!0,useExisting:Vn}]}var qn=new s.Version("11.2.14")},ubkq:function(t,e,n){"use strict";var r;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o){var a,s,u,c=arguments,l=(a=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LlopSZWN]|"[^"]*"|'[^']*'/g,s=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,u=/[^-+\dA-Z]/g,function(t,e,n,r){if(1!==c.length||"string"!==v(t)||/\d/.test(t)||(e=t,t=void 0),(t=t||0===t?t:new Date)instanceof Date||(t=new Date(t)),isNaN(t))throw TypeError("Invalid date");var i=(e=String(l.masks[e]||e||l.masks.default)).slice(0,4);"UTC:"!==i&&"GMT:"!==i||(e=e.slice(4),n=!0,"GMT:"===i&&(r=!0));var o=function(){return n?"getUTC":"get"},m=function(){return t[o()+"Date"]()},y=function(){return t[o()+"Day"]()},g=function(){return t[o()+"Month"]()},_=function(){return t[o()+"FullYear"]()},b=function(){return t[o()+"Hours"]()},w=function(){return t[o()+"Minutes"]()},x=function(){return t[o()+"Seconds"]()},k=function(){return t[o()+"Milliseconds"]()},C=function(){return n?0:t.getTimezoneOffset()},S={d:function(){return m()},dd:function(){return h(m())},ddd:function(){return l.i18n.dayNames[y()]},DDD:function(){return f({y:_(),m:g(),D:y(),_:o(),dayName:l.i18n.dayNames[y()],short:!0})},dddd:function(){return l.i18n.dayNames[y()+7]},DDDD:function(){return f({y:_(),m:g(),D:y(),_:o(),dayName:l.i18n.dayNames[y()+7]})},m:function(){return g()+1},mm:function(){return h(g()+1)},mmm:function(){return l.i18n.monthNames[g()]},mmmm:function(){return l.i18n.monthNames[g()+12]},yy:function(){return String(_()).slice(2)},yyyy:function(){return h(_(),4)},h:function(){return b()%12||12},hh:function(){return h(b()%12||12)},H:function(){return b()},HH:function(){return h(b())},M:function(){return w()},MM:function(){return h(w())},s:function(){return x()},ss:function(){return h(x())},l:function(){return h(k(),3)},L:function(){return h(Math.floor(k()/10))},t:function(){return b()<12?l.i18n.timeNames[0]:l.i18n.timeNames[1]},tt:function(){return b()<12?l.i18n.timeNames[2]:l.i18n.timeNames[3]},T:function(){return b()<12?l.i18n.timeNames[4]:l.i18n.timeNames[5]},TT:function(){return b()<12?l.i18n.timeNames[6]:l.i18n.timeNames[7]},Z:function(){return r?"GMT":n?"UTC":(String(t).match(s)||[""]).pop().replace(u,"").replace(/GMT\+0000/g,"UTC")},o:function(){return(C()>0?"-":"+")+h(100*Math.floor(Math.abs(C())/60)+Math.abs(C())%60,4)},p:function(){return(C()>0?"-":"+")+h(Math.floor(Math.abs(C())/60),2)+":"+h(Math.floor(Math.abs(C())%60),2)},S:function(){return["th","st","nd","rd"][m()%10>3?0:(m()%100-m()%10!=10)*m()%10]},W:function(){return d(t)},N:function(){return p(t)}};return e.replace(a,function(t){return t in S?S[t]():t.slice(1,t.length-1)})});l.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},l.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]};var h=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t},f=function(t){var e=t.y,n=t.m,r=t.D,i=t._,o=t.dayName,a=t.short,s=void 0!==a&&a,u=new Date,c=new Date;c.setDate(c[i+"Date"]()-1);var l=new Date;return l.setDate(l[i+"Date"]()+1),u[i+"FullYear"]()===e&&u[i+"Month"]()===n&&u[i+"Day"]()===r?s?"Tdy":"Today":c[i+"FullYear"]()===e&&c[i+"Month"]()===n&&c[i+"Day"]()===r?s?"Ysd":"Yesterday":l[i+"FullYear"]()===e&&l[i+"Month"]()===n&&l[i+"Day"]()===r?s?"Tmw":"Tomorrow":o},d=function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=e.getTimezoneOffset()-n.getTimezoneOffset();return e.setHours(e.getHours()-r),1+Math.floor((e-n)/6048e5)},p=function(t){var e=t.getDay();return 0===e&&(e=7),e},v=function(t){return null===t?"null":void 0===t?"undefined":"object"!==i(t)?i(t):Array.isArray(t)?"array":{}.toString.call(t).slice(8,-1).toLowerCase()};void 0===(r=(function(){return l}).call(e,n,e,t))||(t.exports=r)}(void 0)},ufcJ:function(t,n,r){"use strict";r.r(n),r.d(n,"ComponentStore",function(){return I}),r.d(n,"initialStateToken",function(){return A}),r.d(n,"tapResponse",function(){return D});var i=r("HDdC"),a=r("quSY"),s=r("7Hc7"),u=r("jtHE"),c=r("7+OI"),l=r("LRne"),h=r("7HRe"),f=r("qgXg"),d=r("z6cu"),p=r("itXk"),v=r("XNiG"),m=r("EY2u"),g=r("bOdf"),b=r("zp1y"),w=r("1G5W"),x=r("IzEk"),k=r("lJxs"),C=r("/uUt"),S=r("UXun"),E=r("vkgz"),P=r("JIr8"),O=r("fXoL");function T(){return function(t){return new i.a(function(e){var n,r,i=new a.a;return i.add(t.subscribe({complete:function(){n&&e.next(r),e.complete()},error:function(t){e.error(t)},next:function(t){r=t,n||(n=s.b.schedule(function(){e.next(r),n=void 0}),i.add(n))}})),i})}}var A=new O.InjectionToken("ComponentStore InitState"),I=function(){var t=function(){function t(e){y(this,t),this.destroySubject$=new u.a(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new u.a(1),this.isInitialized=!1,this.notInitializedErrorMessage="".concat(this.constructor.name," has not been initialized yet. Please make sure it is initialized before updating/getting."),this.state$=this.select(function(t){return t}),e&&this.initState(e)}return _(t,[{key:"ngOnDestroy",value:function(){this.stateSubject$.complete(),this.destroySubject$.next()}},{key:"updater",value:function(t){var n=this;return function(r){var i,o=(Object(c.a)(r)?r:Object(l.a)(r)).pipe(Object(g.a)(function(t){return n.isInitialized?Object(h.a)([t],f.b).pipe(Object(b.a)(n.stateSubject$)):Object(d.a)(new Error(n.notInitializedErrorMessage))}),Object(w.a)(n.destroy$)).subscribe({next:function(r){var i=e(r,2),o=i[0],a=i[1];n.stateSubject$.next(t(a,o))},error:function(t){i=t,n.stateSubject$.error(t)}});if(i)throw i;return o}}},{key:"initState",value:function(t){var e=this;Object(h.a)([t],f.b).subscribe(function(t){e.isInitialized=!0,e.stateSubject$.next(t)})}},{key:"setState",value:function(t){"function"!=typeof t?this.initState(t):this.updater(t)()}},{key:"patchState",value:function(t){this.setState(function(e){var n="function"==typeof t?t(e):t;return Object.assign(Object.assign({},e),n)})}},{key:"get",value:function(t){if(!this.isInitialized)throw new Error(this.notInitializedErrorMessage);var e;return this.stateSubject$.pipe(Object(x.a)(1)).subscribe(function(n){e=t?t(n):n}),e}},{key:"select",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=function(t){var e,n=Array.from(t),r={debounce:!1},i=n.pop();return"function"!=typeof i?(r=Object.assign(Object.assign({},r),i),e=n.pop()):e=i,{observables:n,projector:e,config:r}}(e),i=r.observables,a=r.projector,s=r.config;return(0===i.length?this.stateSubject$.pipe(s.debounce?T():function(t){return t},Object(k.a)(a)):Object(p.b)(i).pipe(s.debounce?T():function(t){return t},Object(k.a)(function(t){return a.apply(void 0,o(t))}))).pipe(Object(C.a)(),Object(S.a)({refCount:!0,bufferSize:1}),Object(w.a)(this.destroy$))}},{key:"effect",value:function(t){var e=this,n=new v.a;return t(n).pipe(Object(w.a)(this.destroy$)).subscribe(),function(t){return(Object(c.a)(t)?t:Object(l.a)(t)).pipe(Object(w.a)(e.destroy$)).subscribe(function(t){n.next(t)})}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(O["\u0275\u0275inject"](A,8))},t.\u0275prov=O["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();function D(t,e,n){return function(r){return r.pipe(Object(E.a)({next:t,error:e,complete:n}),Object(P.a)(function(){return m.a}))}}},"ui/d":function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ToastModule=void 0;var a=n("ofXK"),s=n("wlYr"),u=n("iBJV"),c=n("sYmb"),l=o(n("fXoL")),h=_(function t(){y(this,t)});e.ToastModule=h,h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=l.\u0275\u0275defineNgModule({type:h}),h.\u0275inj=l.\u0275\u0275defineInjector({providers:[s.ToastService],imports:[[a.CommonModule,u.MyTranslateModule,c.TranslateModule]]})},vGoH:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Marker=void 0;var i=n("q7Eg"),o=r(n("+ZnK")),a=n("AytR"),s=n("3Df6"),u=function(){function t(e,n,r,i){y(this,t),this.map=e,this.injector=n,this.applicationRef=r,this.componentFactoryResolver=i,this.id=null,this.alt=null,this.name=null,this.tailLngLat=[];var a=this.componentFactoryResolver.resolveComponentFactory(s.DeviceIconComponent);this.deviceIconComponentEl=document.createElement("device-icon-component"),this.deviceIconComponentRef=a.create(this.injector,[],this.deviceIconComponentEl),this.applicationRef.attachView(this.deviceIconComponentRef.hostView),this.popupName=new o.default.Popup({closeOnClick:!1,offset:{bottom:[0,-20]},closeButton:!1}),this.tailLayerId=t.getNewLayer("tail-"),this.tailData={type:"FeatureCollection",features:[]},e.addSource(this.tailLayerId,{type:"geojson",data:this.tailData}),e.addLayer({id:this.tailLayerId,source:this.tailLayerId,type:"line",paint:{"line-color":"#FF0000","line-opacity":{property:"opacity",stops:function(){for(var t=[],e=0;e<10;e++)t.push([e,e/10]);return t}()},"line-width":8},layout:{"line-join":"round","line-cap":"round"}}),this.basePointLayerId=t.getNewLayer("base-point-"),this.basePointData={type:"FeatureCollection",features:[]},e.addSource(this.basePointLayerId,{type:"geojson",data:this.basePointData}),e.addLayer({id:this.basePointLayerId,source:this.basePointLayerId,type:"circle",paint:{"circle-color":{property:"color",stops:[["superColor",t.color]],type:"categorical"},"circle-radius":8},layout:{}}),this.baseLineLayerId=t.getNewLayer("base-line-"),this.baseLineData={type:"FeatureCollection",features:[]},e.addSource(this.baseLineLayerId,{type:"geojson",data:this.baseLineData}),e.addLayer({id:this.baseLineLayerId,source:this.baseLineLayerId,type:"line",paint:{"line-color":t.color,"line-width":2}}),this.accuracyLayerId=t.getNewLayer("accuracy-area-"),this.accuracyData={type:"FeatureCollection",features:[]},e.addSource(this.accuracyLayerId,{type:"geojson",data:this.accuracyData}),e.addLayer({id:this.accuracyLayerId,source:this.accuracyLayerId,type:"line",paint:{"line-color":t.color,"line-width":2}})}return _(t,[{key:"updateLodData",value:function(t){return this.setLngLat(new i.LngLat(t.lng,t.lat)).setDate(t.date).setSpeed(t.speed).setBatt(t.batt),this.tailLngLat.push(new i.LngLat(t.lng,t.lat)),1<this.tailLngLat.length&&this.tailUpdate(),this}},{key:"setDevice",value:function(t){return this.device=t,this.setName(t.name),this}},{key:"setImage",value:function(t){return this.deviceIconComponentRef.instance.src=t||"".concat(a.environment.hostPrefix,"img/speedway_4_logo.jpg"),this.iconMarker=new o.default.Marker(this.deviceIconComponentEl,{offset:[0,0]}),this}},{key:"setName",value:function(t){return t&&(this.name=t,this.deviceIconComponentRef.instance.name=this.name,this.popupNameUpdate(t)),this}},{key:"setLogData",value:function(t){if(this.setLngLat(new i.LngLat(t.lng,t.lat)).setDate(t.date).setSpeed(t.speed).setBatt(t.batt),"BS"===t.type){var e=new i.LngLat(t.lng,t.lat),n=t.bs.filter(function(t){return!!t.lng&&!!t.lat});this.baseStationCreate(e,n),this.createAccuracy(e,t.accuracy/1e3)}return this.tailLngLat.push(new i.LngLat(t.lng,t.lat)),this}},{key:"addToMap",value:function(){return this.iconMarker.addTo(this.map),this.popupName.addTo(this.map),this}},{key:"setDate",value:function(t){return this.date=new Date(t),this}},{key:"setSpeed",value:function(t){return this.speed=t,this}},{key:"setBatt",value:function(t){return this.batt=Number(t),this}},{key:"remove",value:function(){this.iconMarker.remove(),this.popupName.remove(),this.map.removeLayer(this.tailLayerId),this.map.removeLayer(this.baseLineLayerId),this.map.removeLayer(this.basePointLayerId),this.map.removeLayer(this.accuracyLayerId)}},{key:"setIconColor",value:function(t){return this.deviceIconComponentRef.instance.colorSubject.next(t),this}},{key:"createAccuracy",value:function(t,e){for(var n,r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,a=t[1],s=t[0],u=e,c=[],l=u/(111.32*Math.cos(a*Math.PI/180)),h=u/110.574,f=0;f<o;f++)n=f/o*(2*Math.PI),r=l*Math.cos(n),i=h*Math.sin(n),c.push([s+r,a+i]);c.push(c[0]),this.accuracyData.features=[{type:"Feature",geometry:{type:"Polygon",coordinates:[c]}}],this.map.getSource(this.accuracyLayerId).setData(this.accuracyData)}},{key:"baseStationCreate",value:function(t,e){this.basePointData.features=e.map(function(t){return{properties:{color:"superColor"},type:"Feature",geometry:{type:"Point",coordinates:[t.lng,t.lat]}}}),this.map.getSource(this.basePointLayerId).setData(this.basePointData),this.baseLineData.features=e.map(function(e){return{properties:{color:"superColor"},type:"Feature",geometry:{type:"LineString",coordinates:[t.toArray(),[e.lng,e.lat]]}}}),this.map.getSource(this.baseLineLayerId).setData(this.baseLineData)}},{key:"popupNameUpdate",value:function(t){return this.popupName.setHTML("<div>"+t+"</div>"),this}},{key:"setLngLat",value:function(t){return this.lng=t.lng,this.lat=t.lat,this.iconMarker.setLngLat([this.lng,this.lat]),this.popupName.setLngLat([this.lng,this.lat]),this}},{key:"featureCreate",value:function(t,e,n){return{properties:{opacity:t.opacity,point:t},type:"Feature",geometry:{type:"LineString",coordinates:[e.toArray(),n.toArray()]}}}},{key:"tailUpdate",value:function(){for(var t=[];10<this.tailLngLat.length;)this.tailLngLat.splice(0,1);for(var e=0;e<this.tailLngLat.length-1;e++)t.push(this.featureCreate({opacity:e+1},this.tailLngLat[e],this.tailLngLat[e+1]));this.tailData.features=t,this.map.getSource(this.tailLayerId).setData(this.tailData)}}],[{key:"removeLayer",value:function(e){t.layerIds.has(e)&&t.layerIds.delete(e)}},{key:"getNewLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"marker-",n=0+5e6*Math.random(),r="";return r=String(e).concat(Math.round(n).toString()),t.layerIds.has(r)?t.getNewLayer():(t.layerIds.add(r),r)}}]),t}();e.Marker=u,u.layerIds=new Set,u.color="rgba(129, 150, 253, 0.7)"},vauT:function(t,e,n){"use strict";function r(){var t=document.querySelectorAll("input, textarea, select");return Array.prototype.slice.call(t).map(function(t){var e=t.tagName.toLowerCase(),n=t.type,r=t.id&&"string"==typeof t.id?t.id:null,i=t.name&&"string"==typeof t.name?t.name:null,o=t.value&&"string"==typeof t.value?t.value:null,a=t.childNodes,s=Boolean(t.selected),u={tag:e,type:null,id:r,name:i,value:"",checked:!1,options:[]};if("input"===e||"textarea"===e){if(u.type=n,"input"!==e)return u.value=o,u;switch(n){case"checkbox":case"radio":return u.checked=s,u.value=o,u;case"image":case"button":case"submit":case"reset":default:return u}}else if("select"===e){var c=Array.prototype.slice.call(a).map(function(t,e){return{value:t.value,selected:Boolean(t.selected)}});return u.options=c,u}return u})}function i(t){var e=document.querySelectorAll("input, textarea");t.forEach(function(t,n){if("input"===t.tag||"textarea"===t.tag)if("input"!==t.tag||"checkbox"!==t.type&&"radio"!==t.type)("input"!==t.tagName.toLowerCase()||"image"!==t.type&&"button"!==t.type&&"submit"!==t.type&&"reset"!==t.type)&&(null===t.id&&null===t.name?!t.value.length||!e[n]||e[n].tagName.toLowerCase()!==t.tag||"textarea"!==t.tag&&e[n].getAttribute("type")!==t.type||"string"==typeof e[n].id&&e[n].id.length||"string"==typeof e[n].getAttribute("name")&&e[n].getAttribute("name").length||(e[n].value=t.value,e[n].dispatchEvent(new CustomEvent("input",{detail:e[n].value}))):(r="input"+(null!==t.id?"#"+t.id:"")+("input"===t.tag?'[type="'+t.type+'"]':"")+(null!==t.name?'[name="'+t.name+'"]':""),(i=document.body.querySelector(r))&&t.value.length&&(i.value=t.value,i.dispatchEvent(new CustomEvent("input",{detail:i.value})))));else{var r="input"+(null!==t.id?"#"+t.id:"")+'[type="'+t.type+'"]'+(null!==t.name?'[name="'+t.name+'"]':"")+'[value="'+t.value+'"]';(i=document.body.querySelector(r))&&Boolean(t.checked)&&(i.checked="checked",i.dispatchEvent(new CustomEvent("input",{detail:i.checked})))}else if("select"===t.tag){var i,o=null;null===t.id&&null===t.name?!e[n]||e[n].tagName.toLowerCase()!==t.tag||"string"==typeof e[n].id&&e[n].id.length||"string"==typeof e[n].getAttribute("name")&&e[n].getAttribute("name").length||(o=e[n]):(r="select"+(null!==t.id?"#"+t.id:"")+(null!==t.name?'[name="'+t.name+'"]':""),(i=document.body.querySelector(r))&&(o=i)),o&&t.options.forEach(function(t,e){var n=o.querySelector('option[value="'+t.value+'"]');n||!o.childNodes[e]||"string"==typeof o.childNodes[e].value&&o.childNodes[e].value.length||(n=o.childNodes[e]),n&&t.selected&&(n.selected="selected",n.dispatchEvent(new CustomEvent("input",{detail:n.selected})))})}})}Object.defineProperty(e,"__esModule",{value:!0}),e.__getInputValues=r,e.__setInputValues=i,e.__createInputTransfer=function(){var t=r();return function(){return i(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function a(t,e,n){return function(r){return r.lift(new s(t,e,n))}}var s=function(){function t(e,n,r){y(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),u=function(t){l(n,t);var e=f(n);function n(t,r,a,s){var u;return y(this,n),(u=e.call(this,t))._tapNext=i.a,u._tapError=i.a,u._tapComplete=i.a,u._tapError=a||i.a,u._tapComplete=s||i.a,Object(o.a)(r)?(u._context=p(u),u._tapNext=r):r&&(u._context=r,u._tapNext=r.next||i.a,u._tapError=r.error||i.a,u._tapComplete=r.complete||i.a),u}return _(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(r.a)},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("oB13"),i=n("x+ZX"),o=n("XNiG");function a(){return new o.a}function s(){return function(t){return Object(i.a)()(Object(r.a)(a)(t))}}},wlYr:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ToastService=e.Message=void 0;var a=o(n("fXoL")),s=function(){function t(e,n,r,i){y(this,t),this.type=e||"default",this.className=e||"default",this.text=r,i&&(this.translate=i)}return _(t,[{key:"remove",value:function(){}}]),t}();e.Message=s;var u=function(){function t(){y(this,t),this.messages=[]}return _(t,[{key:"show",value:function(t){var e=this,n=new s(t.type,t.className,t.text,t.translate),r={remove:function(){var t=e.messages.indexOf(n);-1<t&&e.messages.splice(t,1)}};return n.remove=r.remove,this.messages.push(n),setTimeout(function(){r.remove()},5e3),r}}]),t}();e.ToastService=u,u.\u0275fac=function(t){return new(t||u)},u.\u0275prov=a.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac})},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}var o=function(){function t(e){y(this,t),this.connectable=e}return _(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new a(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),a=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).connectable=r,i}return _(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(r.a)},x2wM:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.PopupItemComponent=void 0;var a=n("fXoL"),s=(n("hVDi"),n("ng2J")),u=o(n("fXoL")),c=o(n("hVDi")),l=o(n("ofXK"));function h(t,e){1&t&&u.\u0275\u0275elementContainer(0)}function f(t,e){if(1&t){var n=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"button",6),u.\u0275\u0275listener("click",function(){u.\u0275\u0275restoreView(n);var t=e.$implicit;return u.\u0275\u0275nextContext().click(t)}),u.\u0275\u0275text(1),u.\u0275\u0275elementEnd()}if(2&t){var r=e.$implicit;u.\u0275\u0275classMap(r.windowClass),u.\u0275\u0275advance(1),u.\u0275\u0275textInterpolate1(" ",r.label," ")}}var d=function(){function t(e,n){y(this,t),this.injector=e,this.popupService=n,this.fadeInAnimation="",this.onClose=new a.EventEmitter,this.onMaskHide=new a.EventEmitter}return _(t,[{key:"classes",get:function(){return this.popup.windowClass}},{key:"animationEnd",value:function(t){"void"===t.toState&&this.popupService.hideMask()}},{key:"ngOnInit",value:function(){this.myInjector=a.Injector.create({providers:[{provide:"popupInitialParams",deps:[],useValue:this.popup.initialParams}],parent:this.injector})}},{key:"click",value:function(t){this.isClose=t.click(this),this.isClose&&this.onClose.emit(this.popup)}},{key:"ngOnDestroy",value:function(){}},{key:"close",value:function(){this.onClose.emit(this.popup)}}]),t}();e.PopupItemComponent=d,d.\u0275fac=function(t){return new(t||d)(u.\u0275\u0275directiveInject(u.Injector),u.\u0275\u0275directiveInject(c.PopupService))},d.\u0275cmp=u.\u0275\u0275defineComponent({type:d,selectors:[["popup-item-component"]],hostVars:3,hostBindings:function(t,e){1&t&&u.\u0275\u0275syntheticHostListener("@popupItemAnimation.done",function(t){return e.animationEnd(t)}),2&t&&(u.\u0275\u0275syntheticHostProperty("@popupItemAnimation",e.fadeInAnimation),u.\u0275\u0275classMap(e.classes))},inputs:{popup:"popup"},outputs:{onClose:"onClose",onMaskHide:"onMaskHide"},decls:8,vars:4,consts:[[1,"title"],[3,"textContent"],[1,"close",3,"click"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[1,"buttons-container"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,e){1&t&&(u.\u0275\u0275elementStart(0,"div"),u.\u0275\u0275elementStart(1,"div",0),u.\u0275\u0275element(2,"div",1),u.\u0275\u0275elementStart(3,"div",2),u.\u0275\u0275listener("click",function(){return e.close()}),u.\u0275\u0275text(4,"\xd7"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275template(5,h,1,0,"ng-container",3),u.\u0275\u0275elementStart(6,"div",4),u.\u0275\u0275template(7,f,2,3,"button",5),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()),2&t&&(u.\u0275\u0275advance(2),u.\u0275\u0275property("textContent",e.popup.title),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngComponentOutlet",e.popup.body)("ngComponentOutletInjector",e.myInjector),u.\u0275\u0275advance(2),u.\u0275\u0275property("ngForOf",e.popup.buttons))},directives:[l.NgComponentOutlet,l.NgForOf],styles:["[_nghost-%COMP%]{margin:auto;background:#fff;border-radius:2px;box-shadow:1px 1px 5px rgba(0,0,0,.2)}.title[_ngcontent-%COMP%]{padding:15px;position:relative;border-bottom:1px solid #7fff00}.close[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:darkred;cursor:pointer;padding:15px;font-size:20px;font:30px/15px bold}"],data:{animation:[s.popupItemAnimation]}})},x7D4:function(t,e,n){function r(){var t;try{t=e.storage.debug}catch(n){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=n("Q80o")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}},e.load=r,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},e.enable(r())},xbPD:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new o(t))}}var o=function(){function t(e){y(this,t),this.defaultValue=e}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.defaultValue))}}]),t}(),a=function(t){l(n,t);var e=f(n);function n(t,r){var i;return y(this,n),(i=e.call(this,t)).defaultValue=r,i.isEmpty=!0,i}return _(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(r.a)},y2tO:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autobind=void 0,e.autobind=function(){return function(t,e,n){var r=n.value;return{configurable:!0,get:function(){var t=r.bind(this);return Object.defineProperty(this,e,{configurable:!0,get:function(){return t},set:function(t){r=t,delete this[e]}}),!1,t},set:function(t){r=t}}}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function a(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},yeub:function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},yvHX:function(t,n,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(n,"__esModule",{value:!0}),n.PrivateAreaService=void 0,r("mr0/"),r("XVN5"),r("wlYr");var s=a(r("fXoL")),u=a(r("mr0/")),c=a(r("XVN5")),l=a(r("wlYr")),h=function(){function t(e,n,r){var i=this;y(this,t),this.mapService=e,this.io=n,this.toast=r,this._areas=[],this.socket=n.socket,this.layerIds=[],this.onLoadMap=e.onLoad,e.onLoad.then(function(t){i.map=t})}return _(t,[{key:"onSave",value:function(t){var e=this;return this.socket.$emit("savePrivateArea",t).then(function(t){return!(!t||"ok"!=t.result||(e.showArea(),0))})}},{key:"showArea",value:function(){var t=this;return this.socket.$emit("getPrivateArea").then(function(e){return t.areas=e.areas})}},{key:"hideArea",value:function(){for(;this._areas.length;)this._areas.shift().remove()}},{key:"removeArea",value:function(t){var e=this;this.socket.$emit("removeArea",t).then(function(t){t&&"ok"==t.result?e.showArea():console.error(t)})}},{key:"areas",get:function(){return this._areas},set:function(t){for(var e=this;this._areas.length;)this._areas.shift().remove();this._areas.length=0,t.forEach(function(t){var n=e.createArea(t);e._areas.push(n)})}},{key:"createArea",value:function(t){var n=this.getNewLayerId(),r=t.radius||.5,i=this.map;function o(t,e){for(var n,r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,a=t[1],s=t[0],u=e,c=[],l=u/(111.32*Math.cos(a*Math.PI/180)),h=u/110.574,f=0;f<o;f++)n=f/o*(2*Math.PI),r=l*Math.cos(n),i=h*Math.sin(n),c.push([s+r,a+i]);return c.push(c[0]),{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[c]}}]}}return this.map.addSource(n,{type:"geojson",data:o([t.lng,t.lat],r)}),this.map.addLayer({id:n,type:"fill",source:n,layout:{},paint:{"fill-color":"red","fill-opacity":.3}}),{id:t.id||null,layerId:n,lng:t.lng,lat:t.lat,radius:r,update:function(t,r){var a=e(t,2),s=a[0],u=a[1];return this.lng=s,this.lat=u,i.getSource(n).setData(o([s,u],r)),this},remove:function(){return i.removeLayer(n),i.removeSource(n),this}}}},{key:"saveLock",value:function(t){var e=this;return this.socket.$emit("lockPrivateArea",t).then(function(t){console.log(t),t&&"ok"==t.result&&e.toast.show({type:"warning",text:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0441\u0442\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b"})})}},{key:"getNewLayerId",value:function(){var t=0+1e4*Math.random(),e=("area"+Math.round(t)).toString();return-1<this.layerIds.indexOf(e)?this.getNewLayerId():(this.layerIds.push(e),e)}}]),t}();n.PrivateAreaService=h,h.\u0275fac=function(t){return new(t||h)(s.\u0275\u0275inject(u.MapService),s.\u0275\u0275inject(c.Io),s.\u0275\u0275inject(l.ToastService))},h.\u0275prov=s.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac})},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?function(n){return e.schedule(o,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function o(t){var e=t.error;t.subscriber.error(e)}},zJ60:function(t,e,n){var r=n("mn31"),i=n("x7D4")("socket.io-client:url");t.exports=function(t,e){var n=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),i("parse %s",t),n=r(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(e&&e.port===n.port?"":":"+n.port),n}},zMFY:function(t,e){function n(){}t.exports=function(t,e,r){var i=!1;return r=r||n,o.count=t,0===t?e():o;function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=r):0!==o.count||i||e(null,n)}}},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zp1y:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("l7GE"),i=n("ZUHj");function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new s(e,n))}}var s=function(){function t(e,n){y(this,t),this.observables=e,this.project=n}return _(t,[{key:"call",value:function(t,e){return e.subscribe(new u(t,this.observables,this.project))}}]),t}(),u=function(t){l(n,t);var e=f(n);function n(t,r,o){var a;y(this,n),(a=e.call(this,t)).observables=r,a.project=o,a.toRespond=[];var s=r.length;a.values=new Array(s);for(var u=0;u<s;u++)a.toRespond.push(u);for(var c=0;c<s;c++){var l=r[c];a.add(Object(i.a)(p(a),l,void 0,c))}return a}return _(n,[{key:"notifyNext",value:function(t,e,n){this.values[n]=e;var r=this.toRespond;if(r.length>0){var i=r.indexOf(n);-1!==i&&r.splice(i,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat(o(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(r.a)},"zu+5":function(t,e,n){"use strict";(function(t){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.MenuComponent=void 0;var a=n("4er6"),s=n("BD2p"),u=(n("+ZYu"),n("6uu6"),n("tyNb"),n("tpgc"),n("mu9K"),n("mr0/"),n("jHPu"),n("9lQw")),c=(n("wlYr"),n("AytR")),l=o(n("fXoL")),h=o(n("BD2p")),f=o(n("+ZYu")),d=o(n("6uu6")),p=o(n("tyNb")),v=o(n("tpgc")),m=o(n("mu9K")),g=o(n("mr0/")),b=o(n("wlYr")),w=o(n("jHPu")),x=o(n("ofXK")),k=o(n("htV3")),C=o(n("4er6")),S=o(n("tNNm")),E=o(n("sYmb"));function P(t,e){if(1&t&&(l.\u0275\u0275elementStart(0,"div",16),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&t){var n=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate(n.unViewedIds.length)}}function O(t,e){if(1&t&&(l.\u0275\u0275elementStart(0,"div",17),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&t){var n=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate(n.friendsService.inviteMap.userInvite.size)}}function T(t,e){if(1&t){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"menu-athlete",18),l.\u0275\u0275listener("onCloseMenuAthlete",function(t){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext().onCloseMenuAthlete(t)}),l.\u0275\u0275elementEnd()}2&t&&l.\u0275\u0275property("@ngIfAnimation",void 0)}function A(t,e){if(1&t){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"menu-track",19),l.\u0275\u0275listener("onCloseMenuTrack",function(t){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext().onCloseMenuTrack(t)}),l.\u0275\u0275elementEnd()}2&t&&l.\u0275\u0275property("@ngIfAnimation",void 0)}function I(t,e){1&t&&l.\u0275\u0275element(0,"menu-login"),2&t&&l.\u0275\u0275property("@ngIfAnimation",void 0)}var D=function(){function e(t,n,r,i,o,a,s,u,l){y(this,e),this.menuService=t,this.track=n,this.authService=r,this.router=i,this.friendsService=o,this.userService=a,this.mapService=s,this.toast=u,this.chatService=l,this.invites=[],this.unViewedIds=[],this.isShowMenuAthlete=!1,this.isShowMenuTrack=!1,this.hostPrefix=c.environment.hostPrefix,this.user=this.userService.getUser()}return _(e,[{key:"onOpen",value:function(){this.menuService.menuOpen=!this.menuService.menuOpen}},{key:"onOpenTrackMenu",value:function(){this.isShowMenuTrack=!0}},{key:"onCloseMenuTrack",value:function(t){this.isShowMenuTrack=!1}},{key:"onOpenLogin",value:function(){this.menuService.menuOpenLogin=!this.menuService.menuOpenLogin}},{key:"onOpenAthlete",value:function(){this.isShowMenuAthlete=!0}},{key:"onCloseMenuAthlete",value:function(t){this.isShowMenuAthlete=t}},{key:"onWeather",value:function(){this.weatherLayer?this.weatherLayer.remove():this.weatherLayer=this.addWeatherLayer()}},{key:"addWeatherLayer",value:function(){var e=this,n=this.mapService.map;return n.addSource("borispol",{type:"image",url:t.baseURL+"borisbolukbb?date="+(new Date).toISOString(),coordinates:[[27.9,52.14],[33.89,52.14],[33.89,48.35],[27.9,48.35]]}),n.addLayer({id:"borispol",source:"borispol",type:"raster",paint:{"raster-opacity":.7}}),{remove:function(){n.removeLayer("borispol"),n.removeSource("borispol"),e.weatherLayer=null}}}},{key:"removeWeatherLayer",value:function(){}},{key:"goToProfile",value:function(){this.router.navigate(["/auth/map/profile"])}},{key:"goToFriends",value:function(){this.router.navigate(["/auth/map/friends"])}}]),e}();e.MenuComponent=D,D.\u0275fac=function(t){return new(t||D)(l.\u0275\u0275directiveInject(h.MenuService),l.\u0275\u0275directiveInject(f.TrackService),l.\u0275\u0275directiveInject(d.AuthService),l.\u0275\u0275directiveInject(p.Router),l.\u0275\u0275directiveInject(v.FriendsService),l.\u0275\u0275directiveInject(m.UserService),l.\u0275\u0275directiveInject(g.MapService),l.\u0275\u0275directiveInject(b.ToastService),l.\u0275\u0275directiveInject(w.ChatService))},D.\u0275cmp=l.\u0275\u0275defineComponent({type:D,selectors:[["menu"]],features:[l.\u0275\u0275ProvidersFeature([a.MenuTrackComponent,s.MenuService])],decls:26,vars:17,consts:[[1,"button","menu",3,"click"],[1,"satellite","ico"],[1,"name"],[1,"routs","ico"],[1,"button","weather"],[1,"weather-ico",3,"click"],[1,"fill-space"],[1,"bell",3,"click"],["class","un-viewed-ids",4,"ngIf"],["class","num",4,"ngIf"],[1,"icoUser"],[3,"src","click"],[1,"button","enter",3,"click"],[3,"onCloseMenuAthlete",4,"ngIf"],[3,"onCloseMenuTrack",4,"ngIf"],[4,"ngIf"],[1,"un-viewed-ids"],[1,"num"],[3,"onCloseMenuAthlete"],[3,"onCloseMenuTrack"]],template:function(t,e){1&t&&(l.\u0275\u0275elementStart(0,"table"),l.\u0275\u0275elementStart(1,"tr"),l.\u0275\u0275elementStart(2,"td",0),l.\u0275\u0275listener("click",function(){return e.onOpenAthlete()}),l.\u0275\u0275element(3,"div",1),l.\u0275\u0275elementStart(4,"div",2),l.\u0275\u0275text(5),l.\u0275\u0275pipe(6,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(7,"td",0),l.\u0275\u0275listener("click",function(){return e.onOpenTrackMenu()}),l.\u0275\u0275element(8,"div",3),l.\u0275\u0275elementStart(9,"div",2),l.\u0275\u0275text(10),l.\u0275\u0275pipe(11,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(12,"td",4),l.\u0275\u0275elementStart(13,"div",5),l.\u0275\u0275listener("click",function(){return e.onWeather()}),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275element(14,"td",6),l.\u0275\u0275elementStart(15,"td",7),l.\u0275\u0275listener("click",function(){return e.goToFriends()}),l.\u0275\u0275template(16,P,2,1,"div",8),l.\u0275\u0275template(17,O,2,1,"div",9),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(18,"td",10),l.\u0275\u0275elementStart(19,"img",11),l.\u0275\u0275listener("click",function(){return e.goToProfile()}),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(20,"td",12),l.\u0275\u0275listener("click",function(){return e.onOpenLogin()}),l.\u0275\u0275text(21),l.\u0275\u0275pipe(22,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(23,T,1,1,"menu-athlete",13),l.\u0275\u0275template(24,A,1,1,"menu-track",14),l.\u0275\u0275template(25,I,1,1,"menu-login",15)),2&t&&(l.\u0275\u0275advance(5),l.\u0275\u0275textInterpolate(l.\u0275\u0275pipeBind1(6,11,"IN_CONNECTION")),l.\u0275\u0275advance(5),l.\u0275\u0275textInterpolate(l.\u0275\u0275pipeBind1(11,13,"ROUTS")),l.\u0275\u0275advance(2),l.\u0275\u0275classProp("active",e.weatherLayer),l.\u0275\u0275advance(4),l.\u0275\u0275property("ngIf",e.unViewedIds.length),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.friendsService.inviteMap.userInvite.size),l.\u0275\u0275advance(2),l.\u0275\u0275property("src",e.user.image||e.hostPrefix+"img/no-avatar.gif",l.\u0275\u0275sanitizeUrl),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(e.user.name||l.\u0275\u0275pipeBind1(22,15,"SIGN_IN")),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",e.isShowMenuAthlete),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.isShowMenuTrack),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",e.menuService.menuOpenLogin))},directives:[x.NgIf,k.MenuAthleteComponent,C.MenuTrackComponent,S.MenuLoginComponent],pipes:[E.TranslatePipe],styles:["[_nghost-%COMP%]{color:#444a56;background:linear-gradient(180deg,#dae0ea 0,#e9ebee 20%,#e9ebee);position:relative;display:block;width:100%;height:100%;border-bottom:1px solid #cfdcef}.flex[_ngcontent-%COMP%]{display:flex;align-items:center}.name[_ngcontent-%COMP%]{white-space:nowrap}.un-viewed-ids[_ngcontent-%COMP%]{font-size:10px;position:absolute;left:5px;bottom:5px;background-size:100%;background:#ff8b15;padding:4px;font:12px/6px sans-serif;text-align:center;border-radius:50%}table[_ngcontent-%COMP%]{height:40px;width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:100%;padding:0 15px;cursor:pointer;transition:background-color .1s}table[_ngcontent-%COMP%]   td.button[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]   td.button[_ngcontent-%COMP%]:hover{background-color:#fff}table[_ngcontent-%COMP%]   td.button.menu[_ngcontent-%COMP%]{width:80px}table[_ngcontent-%COMP%]   td.button.enter[_ngcontent-%COMP%]{width:60px;white-space:nowrap}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .satellite[_ngcontent-%COMP%]{background:url(http://178.62.44.54:8080/ico-router.png) no-repeat 50%;width:30px;height:30px;opacity:.8;background-size:auto 80%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .routs[_ngcontent-%COMP%]{background:url(http://178.62.44.54:8080/ico-routs.png) no-repeat 50%;width:30px;height:30px;opacity:.6;background-size:auto 80%}table[_ngcontent-%COMP%]   td.icoUser[_ngcontent-%COMP%]{width:40px;padding:0}table[_ngcontent-%COMP%]   td.icoUser[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:34px;height:34px}table[_ngcontent-%COMP%]   td.weather[_ngcontent-%COMP%]{width:40px}table[_ngcontent-%COMP%]   td.weather.active[_ngcontent-%COMP%]{background-color:#afdced}table[_ngcontent-%COMP%]   td.weather[_ngcontent-%COMP%]   .weather-ico[_ngcontent-%COMP%]{width:40px;height:40px;background:url(http://178.62.44.54:8080/ico-weather.png) no-repeat 50%;background-size:80%}table[_ngcontent-%COMP%]   td.bell[_ngcontent-%COMP%]{padding:0;width:50px;background:url(http://178.62.44.54:8080/friends.png) no-repeat 50%;background-size:64%;position:relative}table[_ngcontent-%COMP%]   td.bell[_ngcontent-%COMP%]   .num[_ngcontent-%COMP%]{font-size:10px;position:absolute;right:10px;bottom:10px;background:#adff2f;padding:4px;font:12px/6px sans-serif;text-align:center;border-radius:50%}.ico[_ngcontent-%COMP%]{display:none}@media screen and (max-width:450px){table[_ngcontent-%COMP%]   td.button.menu[_ngcontent-%COMP%]{width:50px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 5px}.name[_ngcontent-%COMP%]{display:none}.ico[_ngcontent-%COMP%]{display:block}}"],data:{animation:[u.ngIfAnimation]}})}).call(this,n("XN/E"))},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD"),a=function(t){l(n,t);var e=f(n);function n(t){var r;return y(this,n),(r=e.call(this)).parent=t,r}return _(n,[{key:"_next",value:function(t){this.parent.notifyNext(t)}},{key:"_error",value:function(t){this.parent.notifyError(t),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.a),s=function(t){l(n,t);var e=f(n);function n(){return y(this,n),e.apply(this,arguments)}return _(n,[{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyError",value:function(t){this.destination.error(t)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.a);function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]])}();
//# sourceMappingURL=main-es5.88d1587bda9bd0df85ff.js.map